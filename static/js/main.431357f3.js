/*! For license information please see main.431357f3.js.LICENSE.txt */
!function(){var e={446:function(e,t,n){"use strict";var r=n(637),i=n(826),o=n(388),a=n(971),s=n(386);function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},v={enabled:!1};function g(e){return d.get(e)||p}function m(e,t){d.set(e,t)}function y(){return v}var b="https://content-firebaseappcheck.googleapis.com/v1beta",_="exchangeRecaptchaToken",w="exchangeDebugToken",T={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},I=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,(r=this.getNextRun(e),new Promise((function(e){setTimeout(e,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function E(){return self.grecaptcha}function S(e){if(!g(e).activated)throw f.create("use-before-activation",{appName:e.name})}function k(e){return a.base64.encodeString(JSON.stringify(e),!1)}function C(e,t){var n=e.url,r=e.body;return o.__awaiter(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function N(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+_+"?key="+o,body:{recaptcha_token:t}}}function A(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+w+"?key="+o,body:{debug_token:t}}}var x="firebase-app-check-database",P=1,R="firebase-app-check-store",O="debug-token",D=null;function L(){return D||(D=new Promise((function(e,t){try{var n=indexedDB.open(x,P);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(f.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;if(0===e.oldVersion)t.createObjectStore(R,{keyPath:"compositeKey"})}}catch(r){t(f.create("storage-open",{originalErrorMessage:r.message}))}})),D)}function M(e){return j(U(e))}function F(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,L()];case 1:return n=o.sent(),r=n.transaction(R,"readwrite"),i=r.objectStore(R),a=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){a.onsuccess=function(t){e()},r.onerror=function(e){var n;t(f.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function j(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,L()];case 1:return t=o.sent(),n=t.transaction(R,"readonly"),r=n.objectStore(R),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(f.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function U(e){return e.options.appId+"-"+e.name}var q=new s.Logger("@firebase/app-check");function V(e,t){return a.isIndexedDBAvailable()?function(e,t){return F(U(e),t)}(e,t).catch((function(e){q.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function B(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,j(O)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),(r=t,F(O,r)).catch((function(e){return q.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}var r}))}))}function K(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){if((e=y()).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var z={error:"UNKNOWN_ERROR"};function W(e,t,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,h,f,d;return o.__generator(this,(function(p){switch(p.label){case 0:return S(e),r=g(e),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(s=p.sent())&&Y(s)&&(i=s,m(e,o.__assign(o.__assign({},r),{token:i})),Q(e,{token:i.token})),p.label=2;case 2:return!n&&i&&Y(i)?[2,{token:i.token}]:y().enabled?(c=C,l=A,h=[e],[4,K()]):[3,6];case 3:return[4,c.apply(void 0,[l.apply(void 0,h.concat([p.sent()])),t])];case 4:return u=p.sent(),[4,V(e,u)];case 5:return p.sent(),m(e,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return f=p.sent(),q.error(f),a=f,[3,9];case 9:return i?[3,10]:(d=function(e){return{token:k(z),error:e}}(a),[3,12]);case 10:return d={token:i.token},m(e,o.__assign(o.__assign({},r),{token:i})),[4,V(e,i)];case 11:p.sent(),p.label=12;case 12:return Q(e,d),[2,d]}}))}))}function H(e,t,n,r,i){var a=g(e),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=function(e,t){var n=this;return new I((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return g(e).token?[3,2]:[4,W(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,W(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=g(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),T.RETRIAL_MIN_WAIT,T.RETRIAL_MAX_WAIT)}(e,t);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&Y(a.token)){var l=a.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(e){e&&Y(e)&&r({token:e.token})})).catch((function(){}));m(e,u)}function G(e,t){var n=g(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(e,o.__assign(o.__assign({},n),{tokenObservers:r}))}function Q(e,t){for(var n=0,r=g(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(o){}}}function Y(e){return e.expireTimeMillis-Date.now()>0}var $="https://www.google.com/recaptcha/api.js";function X(e,t){var n=g(e),r=new a.Deferred;m(e,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=E();return u?u.ready((function(){Z(e,t,u,i),r.resolve(u)})):function(e){var t=document.createElement("script");t.src=""+$,t.onload=e,document.head.appendChild(t)}((function(){var n=E();if(!n)throw new Error("no recaptcha");n.ready((function(){Z(e,t,n,i),r.resolve(n)}))})),r.promise}function J(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:return S(e),[4,g(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise((function(n,r){var i=g(e).reCAPTCHAState;t.ready((function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function Z(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),a=g(e);m(e,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}var ee=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,J(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),f.create("recaptcha-error");case 4:return[2,C(N(this._app,e),this._platformLoggerProvider)]}}))}))},e.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,X(e,this._siteKey).catch((function(){}))},e}(),te=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),t=a.issuedAtTime(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,o.__assign(o.__assign({},e),{issuedAtTimeMillis:n})]}}))}))},e.prototype.initialize=function(e){this._app=e},e}();function ne(e,t,n,r){var i=g(e);if(i.activated)throw f.create("already-activated",{appName:e.name});var s=o.__assign(o.__assign({},i),{activated:!0});s.cachedTokenPromise=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,M(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),q.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}(e).then((function(t){return t&&Y(t)&&m(e,o.__assign(o.__assign({},g(e)),{token:t})),t})),s.provider="string"===typeof t?new ee(t):t instanceof ee||t instanceof te?t:new te({getToken:t.getToken}),s.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,m(e,s),s.provider.initialize(e,n)}function re(e,t){return{app:e,activate:function(n,r){return ne(e,n,t,r)},setTokenAutoRefreshEnabled:function(t){return function(e,t){var n=g(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),m(e,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:t}))}(e,t)},getToken:function(n){return function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,W(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,t,n)},onTokenChanged:function(n,r,i){return function(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),H(e,t,"EXTERNAL",o,a),function(){return G(e,o)}}(e,t,n,r)},INTERNAL:{delete:function(){for(var t=0,n=g(e).tokenObservers;t<n.length;t++){var r=n[t];G(e,r.next)}return Promise.resolve()}}}}var ie="@firebase/app-check",oe="0.3.2",ae="appCheck",se="app-check-internal";!function(e){e.INTERNAL.registerComponent(new i.Component(ae,(function(e){return re(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:ee,CustomProvider:te}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider(se).initialize()}))),e.INTERNAL.registerComponent(new i.Component(se,(function(e){return function(e,t){return{getToken:function(n){return W(e,t,n)},addTokenListener:function(n){return H(e,t,"INTERNAL",n)},removeTokenListener:function(t){return G(e,t)}}}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(ie,oe)}(l.default),function(){var e=a.getGlobal();if("string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=y();t.enabled=!0;var n=new a.Deferred;t.token=n,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(B())}}()},637:function(e,t,n){"use strict";n.r(t),n.d(t,{firebase:function(){return T}});var r,i,o=n(388),a=n(971),s=n(826),u=n(386),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="0.6.30",d="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),v=new u.Logger("@firebase/app"),g=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,a.deepCopy)(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=d),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=d),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){v.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m="8.10.0";var y=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.contains)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void v.warn(c.join(" "))}o(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(e,t)},apps:null,SDK_VERSION:m,INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||d,!(0,a.contains)(t,e))throw l.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return v.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&(0,a.deepExtend)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];t[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(g);return t.INTERNAL=(0,o.__assign)((0,o.__assign)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,a.deepExtend)(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),b=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if((0,a.isBrowser)()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var _=self.firebase.SDK_VERSION;_&&_.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var w=y.initializeApp;y.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,a.isNode)()&&v.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),w.apply(void 0,e)};var T=y;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new b(e)}),"PRIVATE")),e.registerVersion(h,f,t),e.registerVersion("fire-js","")}(T),t.default=T},826:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return o},ComponentContainer:function(){return u},Provider:function(){return s}});var r=n(388),i=n(971),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.__read)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),(0,r.__read)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=a),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.__read)(c.value,2),h=l[0],f=l[1];a===this.normalizeInstanceIdentifier(h)&&f.resolve(s)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var a=(0,r.__values)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===a?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=a),this.component?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},895:function(e,t,n){"use strict";var r=n(637),i=n(826),o=n(971),a=n(388),s=n(386);e=n.hmd(e);var u="@firebase/database",c="0.11.0",l="";function h(e){l=e}var f=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),d=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,o.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new f(t)}}catch(n){}return new d},v=p("localStorage"),g=p("sessionStorage"),m=new s.Logger("@firebase/database"),y=function(){var e=1;return function(){return e++}}(),b=function(e){var t=(0,o.stringToByteArray)(e),n=new o.Sha1;n.update(t);var r=n.digest();return o.base64.encodeByteArray(r)},_=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var a=t[i];Array.isArray(a)||a&&"object"===typeof a&&"number"===typeof a.length?r+=e.apply(null,a):r+="object"===typeof a?(0,o.stringify)(a):a,r+=" "}return r},w=null,T=!0,I=function(e,t){(0,o.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(m.logLevel=s.LogLevel.VERBOSE,w=m.log.bind(m),t&&g.set("logging_enabled",!0)):"function"===typeof e?w=e:(w=null,g.remove("logging_enabled"))},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===T&&(T=!1,null===w&&!0===g.get("logging_enabled")&&I(!0)),w){var n=_.apply(null,e);w(n)}},S=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];E.apply(void 0,(0,a.__spreadArray)([e],(0,a.__read)(t)))}},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e)));m.error(n)},C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e)));throw m.error(n),new Error(n)},N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+_.apply(void 0,(0,a.__spreadArray)([],(0,a.__read)(e)));m.warn(n)},A=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",P="[MAX_NAME]",R=function(e,t){if(e===t)return 0;if(e===x||t===P)return-1;if(t===x||e===P)return 1;var n=B(e),r=B(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},O=function(e,t){return e===t?0:e<t?-1:1},D=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.stringify)(t))},L=function e(t){if("object"!==typeof t||null===t)return(0,o.stringify)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=(0,o.stringify)(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},M=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function F(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var j=function(e){(0,o.assert)(!A(e),"Invalid JSON number");var t,n,r,i,a,s=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),s))+s,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var c=u.join(""),l="";for(a=0;a<64;a+=8){var h=parseInt(c.substr(a,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()};var U=new RegExp("^-?(0*)\\d{1,10}$"),q=-2147483648,V=2147483647,B=function(e){if(U.test(e)){var t=Number(e);if(t>=q&&t<=V)return t}return null},K=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw N("Exception was thrown by user callback.",e),t}),Math.floor(0))}},z=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},W=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},H=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){N('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),G=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',N(e)},e}(),Q=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),Y="5",$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X="ac",J="websocket",Z="long_polling",ee=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=v.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&v.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function te(e,t,n){var r;if((0,o.assert)("string"===typeof t,"typeof type must == string"),(0,o.assert)("object"===typeof n,"typeof params must == object"),t===J)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return F(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var ne=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,o.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},e}(),re={},ie={};function oe(e){var t=e.toString();return re[t]||(re[t]=new ne),re[t]}var ae=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&K((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),se="start",ue="close",ce="pLPCommand",le="pRTLPCB",he=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(e),this.stats_=oe(t),this.urlFn=function(e){return s.appCheckToken&&(e[X]=s.appCheckToken),te(t,Z,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ae(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if((0,o.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new fe((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,a.__read)(e,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===se)n.id=o,n.password=s;else{if(i!==ue)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,a.__read)(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[se]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Y,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[X]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&$.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!(0,o.isNodeSdk)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,o.base64Encode)(t),r=M(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,o.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),fe=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window[ce+this.uniqueCallbackIdentifier]=t,window[le+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||E("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){E("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),de=null;"undefined"!==typeof MozWebSocket?de=MozWebSocket:"undefined"!==typeof WebSocket&&(de=WebSocket);var pe=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=oe(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={};return i.v=Y,!(0,o.isNodeSdk)()&&"undefined"!==typeof location&&location.hostname&&$.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i[X]=r),te(e,J,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,v.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+l+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new de(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new de(this.connURL,[],i)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==de&&!e.forceDisallow_},e.previouslyFailed=function(){return v.isInMemoryStorage||!0===v.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){v.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=M(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),ve=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[he,pe]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=pe&&pe.isAvailable(),o=i&&!pe.previouslyFailed();if(t.webSocketOnly&&(i||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[pe];else{var s=this.transports_=[];try{for(var u=(0,a.__values)(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),ge=function(){function e(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new ve(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=W((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=D("t",e),n=D("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=D("t",e),n=D("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=D("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?k("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Y!==n&&N("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),W((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):W((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(v.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),me=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),ye=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,o.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,a.__spreadArray)([],(0,a.__read)(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){(0,o.assert)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),be=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return(0,a.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(ye),_e=32,we=768,Te=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function Ie(){return new Te("")}function Ee(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Se(e){return e.pieces_.length-e.pieceNum_}function ke(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Te(e.pieces_,t)}function Ce(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ne(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function Ae(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Te(t,0)}function xe(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Te)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Te(n,0)}function Pe(e){return e.pieceNum_>=e.pieces_.length}function Re(e,t){var n=Ee(e),r=Ee(t);if(null===n)return t;if(n===r)return Re(ke(e),ke(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Oe(e,t){for(var n=Ne(e,0),r=Ne(t,0),i=0;i<n.length&&i<r.length;i++){var o=R(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function De(e,t){if(Se(e)!==Se(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Le(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Se(e)>Se(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Me=function(e,t){this.errorPrefix_=t,this.parts_=Ne(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);Fe(this)};function Fe(e){if(e.byteLength_>we)throw new Error(e.errorPrefix_+"has a key path longer than "+we+" bytes ("+e.byteLength_+").");if(e.parts_.length>_e)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_e+") or object contains a cycle "+je(e))}function je(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Ue,qe,Ve=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return(0,a.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(ye),Be=1e3,Ke=3e5,ze=function(e){function t(n,r,i,a,s,u,c,l){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=t.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Be,h.maxReconnectDelay_=Ke,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ve.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&be.getInstance().on("online",h.onOnline_,h),h}return(0,a.__extends)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new o.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&(0,o.contains)(e,"w")){var n=(0,o.safeGet)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();N("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,o.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,o.isValidFormat)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,o.stringify)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):k("Unrecognized action received from server: "+(0,o.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Be,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Be,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Be),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,s,u,c,l,h,f,d,p,v,g,m=this;return(0,a.__generator)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())},h=function(e){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return d=a.__read.apply(void 0,[y.sent(),2]),p=d[0],v=d[1],u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,c=new ge(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){N(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),s)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&N(g),l()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Be,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return L(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new Te(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){E("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,a.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,(0,a.__values)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,o.isNodeSdk)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+l.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?e["framework.cordova"]=1:(0,o.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=be.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(me),We=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),He=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new We(x,e),r=new We(x,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return We.MIN},e}(),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Ue},set:function(e){Ue=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return R(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return We.MIN},t.prototype.maxPost=function(){return new We(P,Ue)},t.prototype.makePost=function(e,t){return(0,o.assert)("string"===typeof e,"KeyIndex indexValue must always be a string."),new We(e,Ue)},t.prototype.toString=function(){return".key"},t}(He),Qe=new Ge,Ye=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),$e=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Je.EMPTY_NODE,this.right=null!=o?o:Je.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Je.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Je.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Xe=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new $e(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Je=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,$e.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$e.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Ye(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Ye(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Ye(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Ye(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Xe,e}();function Ze(e,t){return R(e.name,t.name)}function et(e,t){return R(e,t)}var tt,nt,rt,it=function(e){return"number"===typeof e?"number:"+j(e):"string:"+e},ot=function(e){if(e.isLeafNode()){var t=e.val();(0,o.assert)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,o.contains)(t,".sv"),"Priority must be a string or number.")}else(0,o.assert)(e===qe||e.isEmpty(),"priority of unexpected type.");(0,o.assert)(e===qe||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},at=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ot(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return tt},set:function(e){tt=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return Pe(t)?this:".priority"===Ee(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=Ee(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===Se(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ke(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+it(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?j(this.value_):this.value_,this.lazyHash_=b(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,o.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var st,ut,ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?R(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return We.MIN},t.prototype.maxPost=function(){return new We(P,new at("[PRIORITY-POST]",rt))},t.prototype.makePost=function(e,t){var n=nt(e);return new We(t,new at("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(He),lt=new ct,ht=Math.log(2),ft=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/ht,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),dt=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new $e(a,o.node,$e.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new $e(a,o.node,$e.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new $e(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,$e.BLACK):(s(h,$e.BLACK),s(h,$e.RED))}return o}(new ft(e.length));return new Je(r||t,o)},pt={},vt=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,o.assert)(pt&&lt,"ChildrenNode.ts has not been loaded"),st=st||new e({".priority":pt},{".priority":lt})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,o.safeGet)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Je?t:null},e.prototype.hasIndex=function(e){return(0,o.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,o.assert)(t!==Qe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(We.Wrap),c=u.getNext();c;)s=s||t.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?dt(i,t.getCompare()):pt;var l=t.toString(),h=(0,a.__assign)({},this.indexSet_);h[l]=t;var f=(0,a.__assign)({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,o.map)(this.indexes_,(function(e,i){var a=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(a,"Missing index implementation for "+i),e===pt){if(a.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(We.Wrap),c=u.getNext();c;)c.name!==t.name&&s.push(c),c=u.getNext();return s.push(t),dt(s,a.getCompare())}return pt}var l=n.get(t.name),h=e;return l&&(h=h.remove(new We(t.name,l))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,o.map)(this.indexes_,(function(e){if(e===pt)return e;var r=n.get(t.name);return r?e.remove(new We(t.name,r)):e})),this.indexSet_)},e}(),gt=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ot(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return ut||(ut=new e(new Je(et),null,vt.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||ut},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ut:t},e.prototype.getChild=function(e){var t=Ee(e);return null===t?this:this.getImmediateChild(t).getChild(ke(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new We(t,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?ut:this.priorityNode_;return new e(i,s,a)},e.prototype.updateChild=function(e,t){var n=Ee(e);if(null===n)return t;(0,o.assert)(".priority"!==Ee(e)||1===Se(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ke(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(lt,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+it(this.getPriority().val())+":"),this.forEachChild(lt,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":b(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new We(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new We(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new We(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,We.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,We.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mt?-1:0},e.prototype.withIndex=function(t){if(t===Qe||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Qe||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(lt),r=t.getIterator(lt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Qe?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),mt=new(function(e){function t(){return e.call(this,new Je(et),gt.EMPTY_NODE,vt.Default)||this}return(0,a.__extends)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return gt.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(gt));Object.defineProperties(We,{MIN:{value:new We(x,gt.EMPTY_NODE)},MAX:{value:new We(P,mt)}}),Ge.__EMPTY_NODE=gt.EMPTY_NODE,at.__childrenNodeConstructor=gt,qe=mt,function(e){rt=e}(mt);var yt=!0;function bt(e,t){if(void 0===t&&(t=null),null===e)return gt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.assert)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new at(e,bt(t));if(e instanceof Array||!yt){var n=gt.EMPTY_NODE;return F(e,(function(t,r){if((0,o.contains)(e,t)&&"."!==t.substring(0,1)){var i=bt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(bt(t))}var r=[],i=!1;if(F(e,(function(e,t){if("."!==e.substring(0,1)){var n=bt(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new We(e,n)))}})),0===r.length)return gt.EMPTY_NODE;var a=dt(r,Ze,(function(e){return e.name}),et);if(i){var s=dt(r,lt.getCompare());return new gt(a,bt(t),new vt({".priority":s},{".priority":lt}))}return new gt(a,bt(t),vt.Default)}!function(e){nt=e}(bt);var _t=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,o.assert)(!Pe(t)&&".priority"!==Ee(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,a.__extends)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?R(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=bt(e),r=gt.EMPTY_NODE.updateChild(this.indexPath_,n);return new We(t,r)},t.prototype.maxPost=function(){var e=gt.EMPTY_NODE.updateChild(this.indexPath_,mt);return new We(P,e)},t.prototype.toString=function(){return Ne(this.indexPath_,0).join("/")},t}(He),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?R(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return We.MIN},t.prototype.maxPost=function(){return We.MAX},t.prototype.makePost=function(e,t){var n=bt(e);return new We(t,n)},t.prototype.toString=function(){return".value"},t}(He),Tt=new wt,It="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Et=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=It.charAt(n%64),n=Math.floor(n/64);(0,o.assert)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=It.charAt(t[r]);return(0,o.assert)(20===s.length,"nextPushId: Length should be 20."),s}}(),St=function(e){if(e===""+V)return"-";var t=B(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return P;var o=n[i],a=It.charAt(It.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},kt=function(e){if(e===""+q)return x;var t=B(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?""+V:(delete n[n.length-1],n.join("")):(n[n.length-1]=It.charAt(It.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Ct(e){return{type:"value",snapshotNode:e}}function Nt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function At(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Pt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,a){(0,o.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(At(t,s)):(0,o.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(Nt(t,n)):a.trackChildChange(xt(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(lt,(function(e,r){t.hasChild(e)||n.trackChildChange(At(e,r))})),t.isLeafNode()||t.forEachChild(lt,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(xt(t,r,i))}else n.trackChildChange(Nt(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?gt.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Rt=function(){function e(t){this.indexedFilter_=new Pt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new We(t,n))||(n=gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=gt.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(gt.EMPTY_NODE);var i=this;return t.forEachChild(lt,(function(e,t){i.matches(new We(e,t))||(r=r.updateImmediateChild(e,gt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Ot=function(){function e(e){this.rangedFilter_=new Rt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new We(t,n))||(n=gt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=gt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(gt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var u=e;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new We(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(xt(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(At(t,f));var v=u.updateImmediateChild(t,gt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(Nt(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?e:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(At(l.name,l.node)),i.trackChildChange(Nt(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,gt.EMPTY_NODE)):e},e}(),Dt=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lt}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===lt},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function Lt(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Mt(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ft(e,t){var n=e.copy();return n.index_=t,n}function jt(e){var t,n={};return e.isDefault()||(e.index_===lt?t="$priority":e.index_===Tt?t="$value":e.index_===Qe?t="$key":((0,o.assert)(e.index_ instanceof _t,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,o.stringify)(t),e.startSet_&&(n.startAt=(0,o.stringify)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,o.stringify)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,o.stringify)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,o.stringify)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Ut(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==lt&&(t.i=e.index_.toString()),t}var qt=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return(0,a.__extends)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,o.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var a=this,s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=jt(e._queryParams);this.restRequest_(s+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(s,n,!1,r),(0,o.safeGet)(a.listens_,u)===c)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=jt(e._queryParams),r=e._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var s=(0,a.__read)(i,2),u=s[0],c=s[1];u&&u.accessToken&&(t.auth=u.accessToken),c&&c.token&&(t.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(t);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var e=null;if(h.status>=200&&h.status<300){try{e=(0,o.jsonEval)(h.responseText)}catch(t){N("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,e)}else 401!==h.status&&404!==h.status&&N("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},t}(me),Vt=function(){function e(){this.rootNode_=gt.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();function Bt(){return{value:null,children:new Map}}function Kt(e,t,n){if(Pe(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Ee(t);e.children.has(r)||e.children.set(r,Bt()),Kt(e.children.get(r),t=ke(t),n)}}function zt(e,t){if(Pe(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(lt,(function(t,n){Kt(e,new Te(t),n)})),zt(e,t)}if(e.children.size>0){var r=Ee(t);if(t=ke(t),e.children.has(r))zt(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Wt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Wt(r,new Te(t.toString()+"/"+e),n)}))}var Ht,Gt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,a.__assign)({},e);return this.last_&&F(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Qt=1e4,Yt=3e4,$t=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Gt(e);var n=Qt+(Yt-Qt)*Math.random();W(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;F(t,(function(t,i){i>0&&(0,o.contains)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),W(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();function Xt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ht||(Ht={}));var Jt,Zt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ht.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(Pe(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Te(t));return new e(Ie(),n,this.revert)}return(0,o.assert)(Ee(this.path)===t,"operationForChild called for unrelated child."),new e(ke(this.path),this.affectedTree,this.revert)},e}(),en=function(){function e(e,t){this.source=e,this.path=t,this.type=Ht.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return Pe(this.path)?new e(this.source,Ie()):new e(this.source,ke(this.path))},e}(),tn=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ht.OVERWRITE}return e.prototype.operationForChild=function(t){return Pe(this.path)?new e(this.source,Ie(),this.snap.getImmediateChild(t)):new e(this.source,ke(this.path),this.snap)},e}(),nn=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ht.MERGE}return e.prototype.operationForChild=function(t){if(Pe(this.path)){var n=this.children.subtree(new Te(t));return n.isEmpty()?null:n.value?new tn(this.source,Ie(),n.value):new e(this.source,Ie(),n)}return(0,o.assert)(Ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ke(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),rn=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(Pe(e))return this.isFullyInitialized()&&!this.filtered_;var t=Ee(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),on=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function an(e,t,n,r,i,a){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new We(t.childName,t.snapshotNode),i=new We(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function sn(e,t){return{eventCache:e,serverCache:t}}function un(e,t,n,r){return sn(new rn(t,n,r),e.serverCache)}function cn(e,t,n,r){return sn(e.eventCache,new rn(t,n,r))}function ln(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function hn(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var fn=function(){return Jt||(Jt=new Je(O)),Jt},dn=function(){function e(e,t){void 0===t&&(t=fn()),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return F(t,(function(e,t){n=n.set(new Te(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:Ie(),value:this.value};if(Pe(e))return null;var n=Ee(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ke(e),t);return null!=i?{path:xe(new Te(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(Pe(t))return this;var n=Ee(t),r=this.children.get(n);return null!==r?r.subtree(ke(t)):new e(null)},e.prototype.set=function(t,n){if(Pe(t))return new e(n,this.children);var r=Ee(t),i=(this.children.get(r)||new e(null)).set(ke(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(Pe(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Ee(t),r=this.children.get(n);if(r){var i=r.remove(ke(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(Pe(e))return this.value;var t=Ee(e),n=this.children.get(t);return n?n.get(ke(e)):null},e.prototype.setTree=function(t,n){if(Pe(t))return n;var r=Ee(t),i=(this.children.get(r)||new e(null)).setTree(ke(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(Ie(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(xe(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,Ie(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Pe(e))return null;var i=Ee(e),o=this.children.get(i);return o?o.findOnPath_(ke(e),xe(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,Ie(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(Pe(t))return this;this.value&&r(n,this.value);var i=Ee(t),o=this.children.get(i);return o?o.foreachOnPath_(ke(t),xe(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(Ie(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(xe(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),pn=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new dn(null))},e}();function vn(e,t,n){if(Pe(t))return new pn(new dn(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=Re(i,t);return o=o.updateChild(a,n),new pn(e.writeTree_.set(i,o))}var s=new dn(n),u=e.writeTree_.setTree(t,s);return new pn(u)}function gn(e,t,n){var r=e;return F(n,(function(e,n){r=vn(r,xe(t,e),n)})),r}function mn(e,t){if(Pe(t))return pn.empty();var n=e.writeTree_.setTree(t,new dn(null));return new pn(n)}function yn(e,t){return null!=bn(e,t)}function bn(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Re(n.path,t)):null}function _n(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(lt,(function(e,n){t.push(new We(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new We(e,n.value))})),t}function wn(e,t){if(Pe(t))return e;var n=bn(e,t);return new pn(null!=n?new dn(n):e.writeTree_.subtree(t))}function Tn(e){return e.writeTree_.isEmpty()}function In(e,t){return En(Ie(),e.writeTree_,t)}function En(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=En(xe(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(xe(e,".priority"),r)),n}function Sn(e,t){return jn(t,e)}function kn(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=e.allWrites.length-1;i&&s>=0;){var u=e.allWrites[s];u.visible&&(s>=n&&Cn(u,r.path)?i=!1:Le(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return function(e){e.visibleWrites=An(e.allWrites,Nn,Ie()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=mn(e.visibleWrites,r.path):F(r.children,(function(t){e.visibleWrites=mn(e.visibleWrites,xe(r.path,t))}));return!0}return!1}function Cn(e,t){if(e.snap)return Le(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Le(xe(e.path,n),t))return!0;return!1}function Nn(e){return e.visible}function An(e,t,n){for(var r=pn.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var s=a.path,u=void 0;if(a.snap)Le(n,s)?r=vn(r,u=Re(n,s),a.snap):Le(s,n)&&(u=Re(s,n),r=vn(r,Ie(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(Le(n,s))r=gn(r,u=Re(n,s),a.children);else if(Le(s,n))if(Pe(u=Re(s,n)))r=gn(r,Ie(),a.children);else{var c=(0,o.safeGet)(a.children,Ee(u));if(c){var l=c.getChild(ke(u));r=vn(r,Ie(),l)}}}}}return r}function xn(e,t,n,r,i){if(r||i){var o=wn(e.visibleWrites,t);if(!i&&Tn(o))return n;if(i||null!=n||yn(o,Ie())){return In(An(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Le(e.path,t)||Le(t,e.path))}),t),n||gt.EMPTY_NODE)}return null}var a=bn(e.visibleWrites,t);if(null!=a)return a;var s=wn(e.visibleWrites,t);return Tn(s)?n:null!=n||yn(s,Ie())?In(s,n||gt.EMPTY_NODE):null}function Pn(e,t,n,r){return xn(e.writeTree,e.treePath,t,n,r)}function Rn(e,t){return function(e,t,n){var r=gt.EMPTY_NODE,i=bn(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(lt,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=wn(e.visibleWrites,t);return n.forEachChild(lt,(function(e,t){var n=In(wn(o,new Te(e)),t);r=r.updateImmediateChild(e,n)})),_n(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return _n(wn(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function On(e,t,n,r){return function(e,t,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=xe(t,n);if(yn(e.visibleWrites,a))return null;var s=wn(e.visibleWrites,a);return Tn(s)?i.getChild(n):In(s,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Dn(e,t){return function(e,t){return bn(e.visibleWrites,t)}(e.writeTree,xe(e.treePath,t))}function Ln(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=wn(e.visibleWrites,t),c=bn(u,Ie());if(null!=c)s=c;else{if(null==n)return[];s=In(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function Mn(e,t,n){return function(e,t,n,r){var i=xe(t,n),o=bn(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?In(wn(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Fn(e,t){return jn(xe(e.treePath,t),e.writeTree)}function jn(e,t){return{treePath:e,writeTree:t}}var Un=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,o.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,xt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,At(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Nt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,xt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),qn=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),Vn=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new rn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mn(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hn(this.viewCache_),i=Ln(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();function Bn(e,t,n,r,i){var a,s,u=new Un;if(n.type===Ht.OVERWRITE){var c=n;c.source.fromUser?a=Wn(e,t,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered()&&!Pe(c.path),a=zn(e,t,c.path,c.snap,r,i,s,u))}else if(n.type===Ht.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=xe(n,r);Hn(t,Ee(c))&&(s=Wn(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=xe(n,r);Hn(t,Ee(c))||(s=Wn(e,s,c,u,i,o,a))})),s}(e,t,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=Qn(e,t,l.path,l.children,r,i,s,u))}else if(n.type===Ht.ACK_USER_WRITE){var h=n;a=h.revert?function(e,t,n,r,i,a){var s;if(null!=Dn(r,n))return t;var u=new Vn(r,t,i),c=t.eventCache.getNode(),l=void 0;if(Pe(n)||".priority"===Ee(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=Pn(r,hn(t));else{var f=t.serverCache.getNode();(0,o.assert)(f instanceof gt,"serverChildren would be complete if leaf node"),h=Rn(r,f)}l=e.filter.updateFullNode(c,h,a)}else{var d=Ee(n),p=Mn(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?e.filter.updateChild(c,d,p,ke(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,gt.EMPTY_NODE,ke(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Pn(r,hn(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,s,a))}return s=t.serverCache.isFullyInitialized()||null!=Dn(r,Ie()),un(t,l,s,e.filter.filtersNodes())}(e,t,h.path,r,i,u):function(e,t,n,r,i,o,a){if(null!=Dn(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Pe(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return zn(e,t,n,u.getNode().getChild(n),i,o,s,a);if(Pe(n)){var c=new dn(null);return u.getNode().forEachChild(Qe,(function(e,t){c=c.set(new Te(e),t)})),Qn(e,t,n,c,i,o,s,a)}return t}var l=new dn(null);return r.foreach((function(e,t){var r=xe(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Qn(e,t,n,l,i,o,s,a)}(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Ht.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var o=t.serverCache,a=cn(t,o.getNode(),o.isFullyInitialized()||Pe(n),o.isFiltered());return Kn(e,a,n,r,qn,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ln(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ct(ln(t)))}}(t,a,f),{viewCache:a,changes:f}}function Kn(e,t,n,r,i,a){var s=t.eventCache;if(null!=Dn(r,n))return t;var u=void 0,c=void 0;if(Pe(n))if((0,o.assert)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=hn(t),h=Rn(r,l instanceof gt?l:gt.EMPTY_NODE);u=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Pn(r,hn(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=Ee(n);if(".priority"===d){(0,o.assert)(1===Se(n),"Can't have a priority with additional path components");var p=s.getNode(),v=On(r,n,p,c=t.serverCache.getNode());u=null!=v?e.filter.updatePriority(p,v):s.getNode()}else{var g=ke(n),m=void 0;if(s.isCompleteForChild(d)){c=t.serverCache.getNode();var y=On(r,n,s.getNode(),c);m=null!=y?s.getNode().getImmediateChild(d).updateChild(g,y):s.getNode().getImmediateChild(d)}else m=Mn(r,d,t.serverCache);u=null!=m?e.filter.updateChild(s.getNode(),d,m,g,i,a):s.getNode()}}return un(t,u,s.isFullyInitialized()||Pe(n),e.filter.filtersNodes())}function zn(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(Pe(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Ee(n);if(!c.isCompleteForPath(n)&&Se(n)>1)return t;var d=ke(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,qn,null)}var v=cn(t,u,c.isFullyInitialized()||Pe(n),l.filtersNodes());return Kn(e,v,n,i,new Vn(i,v,o),s)}function Wn(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new Vn(i,t,o);if(Pe(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=un(t,u,!0,e.filter.filtersNodes());else{var h=Ee(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=un(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=ke(n),d=c.getNode().getImmediateChild(h),p=void 0;if(Pe(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===Ce(f)&&v.getChild(Ae(f)).isEmpty()?v:v.updateChild(f,r):gt.EMPTY_NODE}if(d.equals(p))s=t;else s=un(t,e.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Hn(e,t){return e.eventCache.isCompleteForChild(t)}function Gn(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Qn(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Pe(n)?r:new dn(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Gn(0,t.serverCache.getNode().getImmediateChild(n),r);c=zn(e,c,new Te(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Gn(0,t.serverCache.getNode().getImmediateChild(n),r);c=zn(e,c,new Te(n),h,i,o,a,s)}})),c}var Yn,$n=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Pt(r.getIndex()),o=(n=r).loadsAllData()?new Pt(n.getIndex()):n.hasLimit()?new Ot(n):new Rt(n);this.processor_=function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(gt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(gt.EMPTY_NODE,s.getNode(),null),l=new rn(u,a.isFullyInitialized(),i.filtersNodes()),h=new rn(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=sn(h,l),this.eventGenerator_=new on(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Xn(e,t){var n=hn(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Pe(t)&&!n.getImmediateChild(Ee(t)).isEmpty())?n.getChild(t):null}function Jn(e){return 0===e.eventRegistrations_.length}function Zn(e,t,n){var r=[];if(n){(0,o.assert)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function er(e,t,n,r){t.type===Ht.MERGE&&null!==t.source.queryId&&((0,o.assert)(hn(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(ln(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=e.viewCache_,u=Bn(e.processor_,s,t,n,r);return i=e.processor_,a=u.viewCache,(0,o.assert)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,tr(e,u.changes,u.viewCache.eventCache.getNode(),null)}function tr(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),an(e,i,"child_removed",t,r,n),an(e,i,"child_added",t,r,n),an(e,i,"child_moved",o,r,n),an(e,i,"child_changed",t,r,n),an(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var nr,rr=function(){this.views=new Map};function ir(e,t,n,r){var i,s,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),er(c,t,n,r)}var l=[];try{for(var h=(0,a.__values)(e.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(er(c,t,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function or(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=Pn(n,i?r:null),u=!1;s?u=!0:r instanceof gt?(s=Rn(n,r),u=!1):(s=gt.EMPTY_NODE,u=!1);var c=sn(new rn(s,u,!1),new rn(r,i,!1));return new $n(t,c)}return a}function ar(e,t,n,r,i,o){var a=or(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(lt,(function(e,t){r.push(Nt(e,t))})),n.isFullyInitialized()&&r.push(Ct(n.getNode())),tr(e,r,n.getNode(),t)}(a,n)}function sr(e,t,n,r){var i,s,u=t._queryIdentifier,c=[],l=[],h=fr(e);if("default"===u)try{for(var f=(0,a.__values)(e.views.entries()),d=f.next();!d.done;d=f.next()){var p=(0,a.__read)(d.value,2),v=p[0],g=p[1];l=l.concat(Zn(g,n,r)),Jn(g)&&(e.views.delete(v),g.query._queryParams.loadsAllData()||c.push(g.query))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}else(g=e.views.get(u))&&(l=l.concat(Zn(g,n,r)),Jn(g)&&(e.views.delete(u),g.query._queryParams.loadsAllData()||c.push(g.query)));return h&&!fr(e)&&c.push(new((0,o.assert)(Yn,"Reference.ts has not been loaded"),Yn)(t._repo,t._path)),{removed:c,events:l}}function ur(e){var t,n,r=[];try{for(var i=(0,a.__values)(e.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function cr(e,t){var n,r,i=null;try{for(var o=(0,a.__values)(e.views.values()),s=o.next();!s.done;s=o.next()){var u=s.value;i=i||Xn(u,t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function lr(e,t){if(t._queryParams.loadsAllData())return dr(e);var n=t._queryIdentifier;return e.views.get(n)}function hr(e,t){return null!=lr(e,t)}function fr(e){return null!=dr(e)}function dr(e){var t,n;try{for(var r=(0,a.__values)(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var pr=1,vr=function(e){this.listenProvider_=e,this.syncPointTree_=new dn(null),this.pendingWriteTree_={visibleWrites:pn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function gr(e,t,n,r,i){return function(e,t,n,r,i){(0,o.assert)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=vn(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Er(e,new tn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function mr(e,t,n,r){!function(e,t,n,r){(0,o.assert)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=gn(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=dn.fromObject(n);return Er(e,new nn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function yr(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(kn(e.pendingWriteTree_,t)){var i=new dn(null);return null!=r.snap?i=i.set(Ie(),!0):F(r.children,(function(e){i=i.set(new Te(e),!0)})),Er(e,new Zt(r.path,i,n))}return[]}function br(e,t,n){return Er(e,new tn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function _r(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||hr(o,t))){var s=sr(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return fr(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&fr(t))return[dr(t)];var r=[];return t&&(r=ur(t)),F(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,g=Cr(e,p);e.listenProvider_.startListening(Or(v),Nr(e,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(Or(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(Ar(t));e.listenProvider_.stopListening(Or(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Ar(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function wr(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=Re(e,r);i=i||cr(t,n),a=a||fr(t)}));var s,u=e.syncPointTree_.get(r);(u?(a=a||fr(u),i=i||cr(u,Ie())):(u=new rr,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=gt.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=cr(t,Ie());n&&(i=i.updateImmediateChild(e,n))})));var c=hr(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=Ar(t);(0,o.assert)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=pr++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=ar(u,t,n,Sn(e.pendingWriteTree_,r),i,s);if(!c&&!a){var d=lr(u,t);f=f.concat(function(e,t,n){var r=t._path,i=Nr(e,t),a=Cr(e,n),s=e.listenProvider_.startListening(Or(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)(0,o.assert)(!fr(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(e,t,n){if(!Pe(e)&&t&&fr(t))return[dr(t).query];var r=[];return t&&(r=r.concat(ur(t).map((function(e){return e.query})))),F(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(Or(h),Nr(e,h))}return s}(e,t,d))}return f}function Tr(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=cr(n,Re(e,t));if(r)return r}));return xn(r,t,i,n,!0)}function Ir(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Re(e,n);r=r||cr(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||cr(i,Ie()):(i=new rr,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new rn(r,!0,!1):null;return function(e){return ln(e.viewCache_)}(or(i,t,Sn(e.pendingWriteTree_,t._path),o?a.getNode():gt.EMPTY_NODE,o))}function Er(e,t){return Sr(t,e.syncPointTree_,null,Sn(e.pendingWriteTree_,Ie()))}function Sr(e,t,n,r){if(Pe(e.path))return kr(e,t,n,r);var i=t.get(Ie());null==n&&null!=i&&(n=cr(i,Ie()));var o=[],a=Ee(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=Fn(r,a);o=o.concat(Sr(s,u,c,l))}return i&&(o=o.concat(ir(i,e,r,n))),o}function kr(e,t,n,r){var i=t.get(Ie());null==n&&null!=i&&(n=cr(i,Ie()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=Fn(r,t),u=e.operationForChild(t);u&&(o=o.concat(kr(u,i,a,s)))})),i&&(o=o.concat(ir(i,e,r,n))),o}function Cr(e,t){var n=t.query,r=Nr(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||gt.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=xr(e,n);if(r){var i=Pr(r),o=i.path,a=i.queryId,s=Re(o,t);return Rr(e,o,new en(Xt(a),s))}return[]}(e,n._path,r):function(e,t){return Er(e,new en({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return _r(e,n,null,i)}}}function Nr(e,t){var n=Ar(t);return e.queryToTagMap.get(n)}function Ar(e){return e._path.toString()+"$"+e._queryIdentifier}function xr(e,t){return e.tagToQueryMap.get(t)}function Pr(e){var t=e.indexOf("$");return(0,o.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Te(e.substr(0,t))}}function Rr(e,t,n){var r=e.syncPointTree_.get(t);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),ir(r,n,Sn(e.pendingWriteTree_,t),null)}function Or(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,o.assert)(nr,"Reference.ts has not been loaded"),nr)(e._repo,e._path):e}var Dr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),Lr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=xe(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Tr(this.syncTree_,this.path_)},e}(),Mr=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Fr=function(e,t,n){return e&&"object"===typeof e?((0,o.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?jr(e[".sv"],t,n):"object"===typeof e[".sv"]?Ur(e[".sv"],t):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},jr=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,o.assert)(!1,"Unexpected server value: "+e)},Ur=function(e,t,n){e.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,o.assert)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},qr=function(e,t,n,r){return Br(t,new Lr(n,e),r)},Vr=function(e,t,n){return Br(e,new Dr(t),n)};function Br(e,t,n){var r,i=e.getPriority().val(),o=Fr(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=Fr(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new at(s,bt(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new at(o))),u.forEachChild(lt,(function(e,i){var o=Br(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var Kr=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function zr(e,t){for(var n=t instanceof Te?t:new Te(t),r=e,i=Ee(n);null!==i;){var a=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Kr(i,r,a),i=Ee(n=ke(n))}return r}function Wr(e){return e.node.value}function Hr(e,t){e.node.value=t,Xr(e)}function Gr(e){return e.node.childCount>0}function Qr(e,t){F(e.node.children,(function(n,r){t(new Kr(n,e,r))}))}function Yr(e,t,n,r){n&&!r&&t(e),Qr(e,(function(e){Yr(e,t,!0,r)})),n&&r&&t(e)}function $r(e){return new Te(null===e.parent?e.name:$r(e.parent)+"/"+e.name)}function Xr(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Wr(e)&&!Gr(e)}(n),i=(0,o.contains)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Xr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Xr(e))}(e.parent,e.name,e)}var Jr=/[\[\].#$\/\u0000-\u001F\u007F]/,Zr=/[\[\].#$\u0000-\u001F\u007F]/,ei=10485760,ti=function(e){return"string"===typeof e&&0!==e.length&&!Jr.test(e)},ni=function(e){return"string"===typeof e&&0!==e.length&&!Zr.test(e)},ri=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!A(e)||e&&"object"===typeof e&&(0,o.contains)(e,".sv")},ii=function(e,t,n,r){r&&void 0===t||oi((0,o.errorPrefix)(e,"value"),t,n)},oi=function e(t,n,r){var i=r instanceof Te?new Me(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+je(i));if("function"===typeof n)throw new Error(t+"contains a function "+je(i)+" with contents = "+n.toString());if(A(n))throw new Error(t+"contains "+n.toString()+" "+je(i));if("string"===typeof n&&n.length>ei/3&&(0,o.stringLength)(n)>ei)throw new Error(t+"contains a string greater than "+ei+" utf8 bytes "+je(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,s=!1;if(F(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!ti(n)))throw new Error(t+" contains an invalid key ("+n+") "+je(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.stringLength)(t),Fe(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=(0,o.stringLength)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&s)throw new Error(t+' contains ".value" child '+je(i)+" in addition to actual children.")}},ai=function(e,t,n,r){if(!r||void 0!==t){var i=(0,o.errorPrefix)(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];F(t,(function(e,t){var r=new Te(e);if(oi(i,t,xe(n,r)),".priority"===Ce(r)&&!ri(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Ne(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ti(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Oe);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Le(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,a)}},si=function(e,t,n){if(!n||void 0!==t){if(A(t))throw new Error((0,o.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ri(t))throw new Error((0,o.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ui=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ci=function(e,t,n,r){if((!r||void 0!==n)&&!ti(n))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},li=function(e,t,n,r){if((!r||void 0!==n)&&!ni(n))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},hi=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),li(e,t,n,r)},fi=function(e,t){if(".info"===Ee(t))throw new Error(e+" failed = Can't modify data under /.info/")},di=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!ti(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ni(e)}(n))throw new Error((0,o.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},pi=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error((0,o.errorPrefix)(e,t)+"must be a boolean.")},vi=function(){this.eventLists_=[],this.recursionDepth_=0};function gi(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||De(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function mi(e,t,n){gi(e,n),bi(e,(function(e){return De(e,t)}))}function yi(e,t,n){gi(e,n),bi(e,(function(e){return Le(e,t)||Le(t,e)}))}function bi(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(_i(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function _i(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();w&&E("event: "+n.toString()),K(r)}}}var wi="repo_interrupt",Ti=25,Ii=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vi,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bt(),this.transactionQueueTree_=new Kr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function Ei(e,t,n){if(e.stats_=oe(e.repoInfo_),e.forceRestClient_||z())e.server_=new qt(e.repoInfo_,(function(t,n,r,i){Ci(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Ni(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ze(e.repoInfo_,t,(function(t,n,r,i){Ci(e,t,n,r,i)}),(function(t){Ni(e,t)}),(function(t){!function(e,t){F(t,(function(t,n){Ai(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ie[n]||(ie[n]=t()),ie[n]}(e.repoInfo_,(function(){return new $t(e.stats_,e.server_)})),e.infoData_=new Vt,e.infoSyncTree_=new vr({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=br(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Ai(e,"connected",!1),e.serverSyncTree_=new vr({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);yi(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Si(e){var t=e.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ki(e){return Mr({timestamp:Si(e)})}function Ci(e,t,n,r,i){e.dataUpdateCount++;var a=new Te(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=(0,o.map)(n,(function(e){return bt(e)}));s=function(e,t,n,r){var i=xr(e,r);if(i){var o=Pr(i),a=o.path,s=o.queryId,u=Re(a,t),c=dn.fromObject(n);return Rr(e,a,new nn(Xt(s),u,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var c=bt(n);s=function(e,t,n,r){var i=xr(e,r);if(null!=i){var o=Pr(i),a=o.path,s=o.queryId,u=Re(a,t);return Rr(e,a,new tn(Xt(s),u,n))}return[]}(e.serverSyncTree_,a,c,i)}else if(r){var l=(0,o.map)(n,(function(e){return bt(e)}));s=function(e,t,n){var r=dn.fromObject(n);return Er(e,new nn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var h=bt(n);s=br(e.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=qi(e,a)),yi(e.eventQueue_,f,s)}function Ni(e,t){Ai(e,"connected",t),!1===t&&function(e){Mi(e,"onDisconnectEvents");var t=ki(e),n=Bt();Wt(e.onDisconnect_,Ie(),(function(r,i){var o=qr(r,i,e.serverSyncTree_,t);Kt(n,r,o)}));var r=[];Wt(n,Ie(),(function(t,n){r=r.concat(br(e.serverSyncTree_,t,n));var i=Wi(e,t);qi(e,i)})),e.onDisconnect_=Bt(),yi(e.eventQueue_,Ie(),r)}(e)}function Ai(e,t,n){var r=new Te("/.info/"+t),i=bt(n);e.infoData_.updateSnapshot(r,i);var o=br(e.infoSyncTree_,r,i);yi(e.eventQueue_,r,o)}function xi(e){return e.nextWriteId_++}function Pi(e,t,n,r,i){Mi(e,"set",{path:t.toString(),value:n,priority:r});var o=ki(e),a=bt(n,r),s=Tr(e.serverSyncTree_,t),u=Vr(a,s,o),c=xi(e),l=gr(e.serverSyncTree_,t,u,c,!0);gi(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||N("set at "+t+" failed: "+n);var a=yr(e.serverSyncTree_,c,!o);yi(e.eventQueue_,t,a),Fi(e,i,n,r)}));var h=Wi(e,t);qi(e,h),yi(e.eventQueue_,h,[])}function Ri(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&zt(e.onDisconnect_,t),Fi(e,n,r,i)}))}function Oi(e,t,n,r){var i=bt(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&Kt(e.onDisconnect_,t,i),Fi(e,r,n,o)}))}function Di(e,t,n){var r;r=".info"===Ee(t._path)?_r(e.infoSyncTree_,t,n):_r(e.serverSyncTree_,t,n),mi(e.eventQueue_,t._path,r)}function Li(e){e.persistentConnection_&&e.persistentConnection_.interrupt(wi)}function Mi(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),E.apply(void 0,(0,a.__spreadArray)([r],(0,a.__read)(t)))}function Fi(e,t,n,r){t&&K((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function ji(e,t,n){return Tr(e.serverSyncTree_,t,n)||gt.EMPTY_NODE}function Ui(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||zi(e,t),Wr(t)){var n=Bi(e,t);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=ji(e,t,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Re(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){Mi(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(yr(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);zi(e,zr(e.transactionQueueTree_,t)),Ui(e,e.transactionQueueTree_),yi(e.eventQueue_,t,i);for(s=0;s<o.length;s++)K(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{N("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}qi(e,t)}}),s)}(e,$r(t),n)}else Gr(t)&&Qr(t,(function(t){Ui(e,t)}))}function qi(e,t){var n=Vi(e,t),r=$r(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),s=function(s){var u,c,l=t[s],h=Re(n,l.path),f=!1;if((0,o.assert)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)f=!0,u=l.abortReason,i=i.concat(yr(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Ti)f=!0,u="maxretry",i=i.concat(yr(e.serverSyncTree_,l.currentWriteId,!0));else{var d=ji(e,l.path,a);l.currentInputSnapshot=d;var p=t[s].update(d.val());if(void 0!==p){oi("transaction failed: Data returned ",p,l.path);var v=bt(p);"object"===typeof p&&null!=p&&(0,o.contains)(p,".priority")||(v=v.updatePriority(d.getPriority()));var g=l.currentWriteId,m=ki(e),y=Vr(v,d,m);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=y,l.currentWriteId=xi(e),a.splice(a.indexOf(g),1),i=(i=i.concat(gr(e.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally))).concat(yr(e.serverSyncTree_,g,!0))}else f=!0,u="nodata",i=i.concat(yr(e.serverSyncTree_,l.currentWriteId,!0))}yi(e.eventQueue_,n,i),i=[],f&&(t[s].status=2,c=t[s].unwatcher,setTimeout(c,Math.floor(0)),t[s].onComplete&&("nodata"===u?r.push((function(){return t[s].onComplete(null,!1,t[s].currentInputSnapshot)})):r.push((function(){return t[s].onComplete(new Error(u),!1,null)}))))},u=0;u<t.length;u++)s(u);zi(e,e.transactionQueueTree_);for(u=0;u<r.length;u++)K(r[u]);Ui(e,e.transactionQueueTree_)}(e,Bi(e,n),r),r}function Vi(e,t){var n,r=e.transactionQueueTree_;for(n=Ee(t);null!==n&&void 0===Wr(r);)r=zr(r,n),n=Ee(t=ke(t));return r}function Bi(e,t){var n=[];return Ki(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Ki(e,t,n){var r=Wr(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Qr(t,(function(t){Ki(e,t,n)}))}function zi(e,t){var n=Wr(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Hr(t,n.length>0?n:void 0)}Qr(t,(function(t){zi(e,t)}))}function Wi(e,t){var n=$r(Vi(e,t)),r=zr(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Hi(e,t)})),Hi(e,r),Yr(r,(function(t){Hi(e,t)})),n}function Hi(e,t){var n=Wr(t);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,o.assert)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,o.assert)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(yr(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Hr(t,void 0):n.length=a+1,yi(e.eventQueue_,$r(t),i);for(s=0;s<r.length;s++)K(r[s])}}var Gi=function(e,t){var n=Qi(e),r=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ee(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Te(n.pathString)}},Qi=function(e){var t="",n="",r="",i="",o="",s=!0,u="https",c=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=(0,a.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):N("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},Yi=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},e}(),$i=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Xi=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),Ji=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new o.Deferred;return Ri(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){fi("OnDisconnect.remove",this._path);var e=new o.Deferred;return Oi(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){fi("OnDisconnect.set",this._path),ii("OnDisconnect.set",e,this._path,!1);var t=new o.Deferred;return Oi(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){fi("OnDisconnect.setWithPriority",this._path),ii("OnDisconnect.setWithPriority",e,this._path,!1),si("OnDisconnect.setWithPriority",t,!1);var n=new o.Deferred;return function(e,t,n,r,i){var o=bt(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&Kt(e.onDisconnect_,t,o),Fi(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){fi("OnDisconnect.update",this._path),ai("OnDisconnect.update",e,this._path,!1);var t=new o.Deferred;return function(e,t,n,r){if((0,o.isEmpty)(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void Fi(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&F(n,(function(n,r){var i=bt(r);Kt(e.onDisconnect_,xe(t,n),i)})),Fi(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),Zi=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return Pe(this._path)?null:Ce(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ro(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Ut(this._queryParams),t=L(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Ut(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=(0,o.getModularInstance)(t))instanceof e))return!1;var n=this._repo===t._repo,r=De(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function eo(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function to(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Qe){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==x)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==P)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===lt){if(null!=t&&!ri(t)||null!=n&&!ri(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(e.getIndex()instanceof _t||e.getIndex()===Tt,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function no(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var ro=function(e){function t(t,n){return e.call(this,t,n,new Dt,!1)||this}return(0,a.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Ae(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(Zi),io=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new Te(t),r=so(this.ref,t);return new e(this._node.getChild(n),r,lt)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,so(n.ref,r),lt))}))},e.prototype.hasChild=function(e){var t=new Te(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function oo(e,t){return(e=(0,o.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?so(e._root,t):e._root}function ao(e,t){(e=(0,o.getModularInstance)(e))._checkNotDeleted("refFromURL");var n=Gi(t,e._repo.repoInfo_.nodeAdmin);di("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),oo(e,n.path.toString())}function so(e,t){return null===Ee((e=(0,o.getModularInstance)(e))._path)?hi("child","path",t,!1):li("child","path",t,!1),new ro(e._repo,xe(e._path,t))}function uo(e,t){e=(0,o.getModularInstance)(e),fi("set",e._path),ii("set",t,e._path,!1);var n=new o.Deferred;return Pi(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function co(e,t){ai("update",t,e._path,!1);var n=new o.Deferred;return function(e,t,n,r){Mi(e,"update",{path:t.toString(),value:n});var i=!0,o=ki(e),a={};if(F(n,(function(n,r){i=!1,a[n]=qr(xe(t,n),bt(r),e.serverSyncTree_,o)})),i)E("update() called with empty data.  Don't do anything."),Fi(0,r,"ok",void 0);else{var s=xi(e),u=mr(e.serverSyncTree_,t,a,s);gi(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||N("update at "+t+" failed: "+n);var a=yr(e.serverSyncTree_,s,!o),u=a.length>0?qi(e,t):t;yi(e.eventQueue_,u,a),Fi(0,r,n,i)})),F(n,(function(n){var r=Wi(e,xe(t,n));qi(e,r)})),yi(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function lo(e){return function(e,t){var n=Ir(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=bt(n).withIndex(t._queryParams.getIndex()),i=br(e.serverSyncTree_,t._path,r);return mi(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return Mi(e,"get for query "+(0,o.stringify)(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=(0,o.getModularInstance)(e))._repo,e).then((function(t){return new io(t,new ro(e._repo,e._path),e._queryParams.getIndex())}))}var ho=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new Yi("value",this,new io(e.snapshotNode,new ro(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new $i(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),fo=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new $i(this,e,t):null},e.prototype.createEvent=function(e,t){(0,o.assert)(null!=e.childName,"Child events should have a childName.");var n=so(new ro(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Yi(e.type,this,new io(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function po(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){Di(e._repo,e,c),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Xi(n,o||void 0),c="value"===t?new ho(u):new fo(t,u);return function(e,t,n){var r;r=".info"===Ee(t._path)?wr(e.infoSyncTree_,t,n):wr(e.serverSyncTree_,t,n),mi(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Di(e._repo,e,c)}}function vo(e,t,n,r){return po(e,"value",t,n,r)}function go(e,t,n,r){return po(e,"child_added",t,n,r)}function mo(e,t,n,r){return po(e,"child_changed",t,n,r)}function yo(e,t,n,r){return po(e,"child_moved",t,n,r)}function bo(e,t,n,r){return po(e,"child_removed",t,n,r)}function _o(e,t,n){var r=null,i=n?new Xi(n):null;"value"===t?r=new ho(i):t&&(r=new fo(t,i)),Di(e._repo,e,r)}var wo=function(){},To=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ii("endAt",this._value,e._path,!0);var t=Mt(e._queryParams,this._value,this._key);if(no(t),to(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)},t}(wo);var Io=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ii("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===Qe?("string"===typeof t&&(t=kt(t)),r=Mt(e,t,n)):r=Mt(e,t,null==n?x:kt(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(no(t),to(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)},t}(wo);var Eo=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ii("startAt",this._value,e._path,!0);var t=Lt(e._queryParams,this._value,this._key);if(no(t),to(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)},t}(wo);var So=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){ii("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;e.index_===Qe?("string"===typeof t&&(t=St(t)),r=Lt(e,t,n)):r=Lt(e,t,null==n?P:St(n));return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(no(t),to(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Zi(e._repo,e._path,t,e._orderByCalled)},t}(wo);var ko=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,a.__extends)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zi(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)},t}(wo);var Co=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,a.__extends)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zi(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)},t}(wo);var No=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return(0,a.__extends)(t,e),t.prototype._apply=function(e){eo(e,"orderByChild");var t=new Te(this._path);if(Pe(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new _t(t),r=Ft(e._queryParams,n);return to(r),new Zi(e._repo,e._path,r,!0)},t}(wo);var Ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._apply=function(e){eo(e,"orderByKey");var t=Ft(e._queryParams,Qe);return to(t),new Zi(e._repo,e._path,t,!0)},t}(wo);var xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._apply=function(e){eo(e,"orderByPriority");var t=Ft(e._queryParams,lt);return to(t),new Zi(e._repo,e._path,t,!0)},t}(wo);var Po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype._apply=function(e){eo(e,"orderByValue");var t=Ft(e._queryParams,Tt);return to(t),new Zi(e._repo,e._path,t,!0)},t}(wo);var Ro=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,a.__extends)(t,e),t.prototype._apply=function(e){if(ii("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new To(this._value,this._key)._apply(new Eo(this._value,this._key)._apply(e))},t}(wo);function Oo(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(0,o.getModularInstance)(e);try{for(var u=(0,a.__values)(r),c=u.next();!c.done;c=u.next()){s=c.value._apply(s)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s}!function(e){(0,o.assert)(!Yn,"__referenceConstructor has already been defined"),Yn=e}(ro),function(e){(0,o.assert)(!nr,"__referenceConstructor has already been defined"),nr=e}(ro);var Do="FIREBASE_DATABASE_EMULATOR_HOST",Lo={},Mo=!1;function Fo(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Gi(o,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Do]),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=Gi(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new Q(Q.OWNER):new G(e.name,e.options,t);di("Invalid Firebase Database URL",s),Pe(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Lo[t.name];i||(i={},Lo[t.name]=i);var o=i[e.toURLString()];o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Ii(e,Mo,n,r),i[e.toURLString()]=o,o}(u,e,l,new H(e.name,n));return new jo(h,e)}var jo=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(Ei(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new ro(this._repo,Ie())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return null!==this._rootInternal&&(!function(e,t){var n=Lo[t];n&&n[e.key]===e||C("Database "+t+"("+e.repoInfo_+") has already been deleted."),Li(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&C("Cannot call "+e+" on a deleted database.")},e}();function Uo(e,t,n,r){void 0===r&&(r={}),(e=(0,o.getModularInstance)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Q(Q.OWNER);else if(r.mockUserToken){var s="string"===typeof r.mockUserToken?r.mockUserToken:(0,o.createMockUserToken)(r.mockUserToken,e.app.options.projectId);a=new Q(s)}!function(e,t,n,r){e.repoInfo_=new ee(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function qo(e){var t;(e=(0,o.getModularInstance)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(wi)}var Vo={".sv":"timestamp"};var Bo=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function Ko(e,t,n){var r;if(e=(0,o.getModularInstance)(e),fi("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o.Deferred,s=vo(e,(function(){}));return function(e,t,n,r,i,a){Mi(e,"transaction on "+t);var s={path:t,update:n,onComplete:r,status:null,order:y(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ji(e,t,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{oi("transaction failed: Data returned ",c,s.path),s.status=0;var l=zr(e.transactionQueueTree_,t),h=Wr(l)||[];h.push(s),Hr(l,h);var f=void 0;"object"===typeof c&&null!==c&&(0,o.contains)(c,".priority")?(f=(0,o.safeGet)(c,".priority"),(0,o.assert)(ri(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(Tr(e.serverSyncTree_,t)||gt.EMPTY_NODE).getPriority().val();var d=ki(e),p=bt(c,f),v=Vr(p,u,d);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=v,s.currentWriteId=xi(e);var g=gr(e.serverSyncTree_,t,v,s.currentWriteId,s.applyLocally);yi(e.eventQueue_,t,g),Ui(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new io(r,new ro(e._repo,e._path),lt),a.resolve(new Bo(n,i)))}),s,i),a.promise}var zo=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,N("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),Wo=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Ho=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),t=String(t),li("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),li("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Qo(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Go=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var a,s=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),c=function(e,t){n.call(u.context,new Ho(s.database,e),t)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return vo(this._delegate,c,l),n;case"child_added":return go(this._delegate,c,l),n;case"child_removed":return bo(this._delegate,c,l),n;case"child_changed":return mo(this._delegate,c,l),n;case"child_moved":return yo(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),ui("Query.off",e,!0),(0,o.validateCallback)("Query.off","callback",t,!0),(0,o.validateContextObject)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,_o(this._delegate,e,r)}else _o(this._delegate,e)},e.prototype.get=function(){var e=this;return lo(this._delegate).then((function(t){return new Ho(e.database,t)}))},e.prototype.once=function(t,n,r,i){var a=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(e,t){var r=new Ho(a.database,e);n&&n.call(s.context,r,t),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(e){s.cancel&&s.cancel.call(s.context,e),u.reject(e)};switch(t){case"value":vo(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":go(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":bo(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":mo(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":yo(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},e.prototype.limitToFirst=function(t){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new e(this.database,Oo(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ko(e)}(t)))},e.prototype.limitToLast=function(t){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new e(this.database,Oo(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Co(e)}(t)))},e.prototype.orderByChild=function(t){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new e(this.database,Oo(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return li("orderByChild","path",e,!1),new No(e)}(t)))},e.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new e(this.database,Oo(this._delegate,new Ao))},e.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new e(this.database,Oo(this._delegate,new xo))},e.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new e(this.database,Oo(this._delegate,new Po))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new e(this.database,Oo(this._delegate,function(e,t){return void 0===e&&(e=null),ci("startAt","key",t,!0),new Eo(e,t)}(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new e(this.database,Oo(this._delegate,function(e,t){return ci("startAfter","key",t,!0),new So(e,t)}(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new e(this.database,Oo(this._delegate,function(e,t){return ci("endAt","key",t,!0),new To(e,t)}(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new e(this.database,Oo(this._delegate,function(e,t){return ci("endBefore","key",t,!0),new Io(e,t)}(t,n)))},e.prototype.equalTo=function(t,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new e(this.database,Oo(this._delegate,function(e,t){return ci("equalTo","key",t,!0),new Ro(e,t)}(t,n)))},e.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,o.validateCallback)(e,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error((0,o.errorPrefix)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new Qo(this.database,new ro(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Qo=function(e){function t(t,n){var r=e.call(this,t,new Zi(n._repo,n._path,new Dt,!1))||this;return r.database=t,r._delegate=n,r}return(0,a.__extends)(t,e),t.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new t(this.database,so(this._delegate,e))},t.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",t,!0);var n=uo(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,N("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fi("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",t,!0);var i=co(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(fi("setWithPriority",e._path),ii("setWithPriority",t,e._path,!1),si("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new o.Deferred;return Pi(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",e,!0);var t=function(e){return fi("remove",e._path),uo(e,null)}(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",e,!1),(0,o.validateCallback)("Reference.transaction","onComplete",t,!0),pi("Reference.transaction","applyLocally",n,!0);var i=Ko(this._delegate,e,{applyLocally:n}).then((function(e){return new Wo(e.committed,new Ho(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=(0,o.getModularInstance)(e),fi("setPriority",e._path),si("setPriority",t,!1);var n=new o.Deferred;return Pi(e._repo,xe(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=function(e,t){e=(0,o.getModularInstance)(e),fi("push",e._path),ii("push",t,e._path,!0);var n,r=Si(e._repo),i=Et(r),a=so(e,i),s=so(e,i);return n=null!=t?uo(s,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new t(r.database,e)}));n&&a.then((function(){return n(null)}),(function(e){return n(e)}));var s=new t(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},t.prototype.onDisconnect=function(){return fi("Reference.onDisconnect",this._delegate._path),new zo(new Ji(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Go),Yo=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),Uo(this._delegate,e,t,n)},e.prototype.ref=function(e){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),e instanceof Qo){var t=ao(this._delegate,e.toString());return new Qo(this,t)}t=oo(this._delegate,e);return new Qo(this,t)},e.prototype.refFromURL=function(e){(0,o.validateArgCount)("database.refFromURL",1,1,arguments.length);var t=ao(this._delegate,e);return new Qo(this,t)},e.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),e=this._delegate,(e=(0,o.getModularInstance)(e))._checkNotDeleted("goOffline"),void Li(e._repo);var e},e.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),qo(this._delegate)},e.ServerValue={TIMESTAMP:Vo,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}();var $o=Object.freeze({__proto__:null,forceLongPolling:function(){pe.forceDisallow(),he.forceAllow()},forceWebSockets:function(){he.forceDisallow()},isWebSocketsAvailable:function(){return pe.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Gt(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);F(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,o=e.customAuthImpl,a=e.namespace,s=e.nodeAdmin,u=void 0!==s&&s;h(r);var c=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return c.setComponent(new i.Component("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Yo(Fo(t,c,void 0,n,u),t),namespace:a}}}),Xo=ze;ze.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ze.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Jo=ge,Zo=ee,ea=Object.freeze({__proto__:null,DataConnection:Xo,RealTimeConnection:Jo,hijackHash:function(e){var t=ze.prototype.put;return ze.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){ze.prototype.put=t}},ConnectionTarget:Zo,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){Mo=e}(e)}}),ta=Yo.ServerValue;!function(t){h(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i.Component("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Yo(Fo(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Qo,Query:Go,Database:Yo,DataSnapshot:Ho,enableLogging:I,INTERNAL:$o,ServerValue:ta,TEST_ACCESS:ea}).setMultipleInstances(!0));t.registerVersion(u,c),(0,o.isNodeSdk)()&&(e.exports=n)}(r.default)},386:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(t),n.d(t,{LogLevel:function(){return o},Logger:function(){return h},setLogLevel:function(){return f},setUserLogHandler:function(){return d}});var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},971:function(e,t,n){"use strict";n.r(t),n.d(t,{CONSTANTS:function(){return i},Deferred:function(){return p},ErrorFactory:function(){return O},FirebaseError:function(){return R},MAX_VALUE_MILLIS:function(){return he},RANDOM_FACTOR:function(){return fe},Sha1:function(){return X},areCookiesEnabled:function(){return A},assert:function(){return o},assertionError:function(){return a},async:function(){return ee},base64:function(){return u},base64Decode:function(){return h},base64Encode:function(){return c},base64urlEncodeWithoutPadding:function(){return l},calculateBackoffMillis:function(){return de},contains:function(){return B},createMockUserToken:function(){return v},createSubscribe:function(){return J},decode:function(){return F},deepCopy:function(){return f},deepEqual:function(){return H},deepExtend:function(){return d},errorPrefix:function(){return re},extractQuerystring:function(){return $},getGlobal:function(){return x},getModularInstance:function(){return ve},getUA:function(){return g},isAdmin:function(){return V},isBrowser:function(){return b},isBrowserExtension:function(){return _},isElectron:function(){return T},isEmpty:function(){return z},isIE:function(){return I},isIndexedDBAvailable:function(){return C},isMobileCordova:function(){return m},isNode:function(){return y},isNodeSdk:function(){return S},isReactNative:function(){return w},isSafari:function(){return k},isUWP:function(){return E},isValidFormat:function(){return q},isValidTimestamp:function(){return j},issuedAtTime:function(){return U},jsonEval:function(){return L},map:function(){return W},ordinal:function(){return pe},querystring:function(){return Q},querystringDecode:function(){return Y},safeGet:function(){return K},stringLength:function(){return ue},stringToByteArray:function(){return se},stringify:function(){return M},validateArgCount:function(){return ne},validateCallback:function(){return oe},validateContextObject:function(){return ae},validateIndexedDBOpenable:function(){return N},validateNamespace:function(){return ie}});var r=n(388),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){var t=s(e);return u.encodeByteArray(t,!0)},l=function(e){return c(e).replace(/\./g,"")},h=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function f(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}var p=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(a)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function b(){return"object"===typeof self&&self.self===self}function _(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){return g().indexOf("Electron/")>=0}function I(){var e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return g().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function k(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){return"indexedDB"in self&&null!=indexedDB}function N(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function A(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}var P="FirebaseError",R=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name=P,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return(0,r.__extends)(t,e),t}(Error),O=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(D,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").";return new R(i,s,r)},e}();var D=/\{\$([^}]+)}/g;function L(e){return JSON.parse(e)}function M(e){return JSON.stringify(e)}var F=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=L(h(o[0])||""),n=L(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},j=function(e){var t=F(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},U=function(e){var t=F(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},q=function(e){var t=F(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},V=function(e){var t=F(e).claims;return"object"===typeof t&&!0===t.admin};function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function z(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function W(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function H(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],u=t[a];if(G(s)&&G(u)){if(!H(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){a=l[c];if(!n.includes(a))return!1}return!0}function G(e){return null!==e&&"object"===typeof e}function Q(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}function Y(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function $(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var X=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function J(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=te),void 0===r.error&&(r.error=te),void 0===r.complete&&(r.complete=te);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function ee(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}}function te(){}var ne=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function re(e,t){return e+" failed: "+t+" argument "}function ie(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(re(e,"namespace")+"must be a valid firebase namespace.")}function oe(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(re(e,t)+"must be a valid function.")}function ae(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(re(e,t)+"must be a valid context object.")}var se=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ue=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},ce=1e3,le=2,he=144e5,fe=.5;function de(e,t,n){void 0===t&&(t=ce),void 0===n&&(n=le);var r=t*Math.pow(n,e),i=Math.round(fe*r*(Math.random()-.5)*2);return Math.min(he,r+i)}function pe(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);var t=e%100;if(t>=10&&t<=20)return"th";var n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):""+e}function ve(e){return e&&e._delegate?e._delegate:e}},451:function(e,t,n){e.exports=function(){"use strict";!function(e){var t,n,r,i,o,a,s,u,c,l;function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e?String(e):e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function v(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n=v(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,n=g(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var n,r=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(e=(n=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(e)?e:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){var n;e&&(e=(n=e.split("=")).shift().replace(/\+/g," "),n=n.join("=").replace(/\+/g," "),t.append(decodeURIComponent(e),decodeURIComponent(n)))})),t}function T(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,(o="ArrayBuffer"in e)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))}),p.prototype.append=function(e,t){e=h(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=f(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},T.error=function(){var e=new T(null,{status:0,statusText:""});return e.type="error",e},l=[301,302,303,307,308],T.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new T(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=_,e.Response=T,e.fetch=function(e,t){return new Promise((function(n,i){var o=new _(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t={status:a.status,statusText:a.statusText,headers:(r=a.getAllResponseHeaders()||"",e=new p,r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":");(t=n.shift().trim())&&(n=n.join(":").trim(),e.append(t,n))})),e)};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new T(r,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function t(e){var t={exports:{}};return e(t,t.exports),t.exports}function r(e){try{return!!e()}catch(e){return!0}}function i(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function o(e){return _.call(e).slice(8,-1)}function a(e){if(null==e)throw TypeError("Can't call method on "+e);return e}function s(e){return T(a(e))}function u(e){return"object"==typeof e?null!==e:"function"==typeof e}function c(e,t){if(!u(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!u(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!u(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!u(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}function l(e){return Object(a(e))}function h(e){return k?S.createElement(e):{}}function f(e){if(!u(e))throw TypeError(String(e)+" is not an object");return e}function d(t,n){try{R(v,t,n)}catch(e){v[t]=n}return n}var p=function(e){return e&&e.Math==Math&&e},v=p("object"==typeof globalThis&&globalThis)||p("object"==typeof window&&window)||p("object"==typeof self&&self)||p("object"==typeof e&&e)||function(){return this}()||Function("return this")(),g=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),m={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,b={f:y&&!m.call({1:2},1)?function(e){return!!(e=y(this,e))&&e.enumerable}:m},_={}.toString,w="".split,T=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?w.call(e,""):Object(e)}:Object,I={}.hasOwnProperty,E=Object.hasOwn||function(e,t){return I.call(l(e),t)},S=v.document,k=u(S)&&u(S.createElement),C=!g&&!r((function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a})),N=Object.getOwnPropertyDescriptor,A={f:g?N:function(e,t){if(e=s(e),t=c(t,!0),C)try{return N(e,t)}catch(e){}if(E(e,t))return i(!b.f.call(e,t),e[t])}},x=Object.defineProperty,P={f:g?x:function(e,t,n){if(f(e),t=c(t,!0),f(n),C)try{return x(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},R=g?function(e,t,n){return P.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e},O=v[Ee="__core-js_shared__"]||d(Ee,{}),D=Function.toString;function L(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Q+Y).toString(36)}"function"!=typeof O.inspectSource&&(O.inspectSource=function(e){return D.call(e)});var M,F,j,U,q,V,B,K,z=O.inspectSource,W="function"==typeof(Pe=v.WeakMap)&&/native code/.test(z(Pe)),H=!1,G=t((function(e){(e.exports=function(e,t){return O[e]||(O[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),Q=0,Y=Math.random(),$=G("keys"),X=(p=function(e){return $[e]||($[e]=L(e))},{}),J="Object already initialized";function Z(e){return"function"==typeof e?e:void 0}function ee(e,t){return arguments.length<2?Z(he[e])||Z(v[e]):he[e]&&he[e][t]||v[e]&&v[e][t]}function te(e){return isNaN(e=+e)?0:(0<e?de:fe)(e)}function ne(e){return 0<e?pe(te(e),9007199254740991):0}function re(e,t){var n,r=s(e),i=0,o=[];for(n in r)!E(X,n)&&E(r,n)&&o.push(n);for(;t.length>i;)E(r,n=t[i++])&&(~me(o,n)||o.push(n));return o}function ie(e,t){for(var n=Te(t),r=P.f,i=A.f,o=0;o<n.length;o++){var a=n[o];E(e,a)||r(e,a,i(t,a))}}function oe(e,t){var n,r,i,o=e.target,a=e.global,s=e.stat,u=a?v:s?v[o]||d(o,{}):(v[o]||{}).prototype;if(u)for(n in t){if(r=t[n],i=e.noTargetGet?(i=xe(u,n))&&i.value:u[n],!Ae(a?n:o+(s?".":"#")+n,e.forced)&&void 0!==i){if(typeof r==typeof i)continue;ie(r,i)}(e.sham||i&&i.sham)&&R(r,"sham",!0),le(u,n,r,e)}}function ae(){}function se(e){return"<script>"+e+"</"+qe+">"}e=v.WeakMap,B=W||O.state?(M=O.state||(O.state=new e),F=M.get,j=M.has,U=M.set,q=function(e,t){if(j.call(M,e))throw new TypeError(J);return t.facade=e,U.call(M,e,t),t},V=function(e){return F.call(M,e)||{}},function(e){return j.call(M,e)}):(K=p("state"),X[K]=!0,q=function(e,t){if(E(e,K))throw new TypeError(J);return t.facade=e,R(e,K,t),t},V=function(e){return E(e,K)?e[K]:{}},function(e){return E(e,K)});var ue,ce={set:q,get:V,has:B,enforce:function(e){return B(e)?V(e):q(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=V(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},le=t((function(e){var t=ce.get,n=ce.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||E(i,"name")||R(i,"name",t),(o=n(i)).source||(o.source=r.join("string"==typeof t?t:""))),e!==v?(a?!u&&e[t]&&(s=!0):delete e[t],s?e[t]=i:R(e,t,i)):s?e[t]=i:d(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||z(this)}))})),he=v,fe=Math.ceil,de=Math.floor,pe=Math.min,ve=Math.max,ge=Math.min,me=(m=function(e){return function(t,n,r){var i,o=s(t),a=ne(o.length),u=function(e,t){return(e=te(e))<0?ve(e+t,0):ge(e,t)}(r,a);if(e&&n!=n){for(;u<a;)if((i=o[u++])!=i)return!0}else for(;u<a;u++)if((e||u in o)&&o[u]===n)return e||u||0;return!e&&-1}},m(!0),m(!1)),ye=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=ye.concat("length","prototype"),_e={f:Object.getOwnPropertyNames||function(e){return re(e,be)}},we={f:Object.getOwnPropertySymbols},Te=ee("Reflect","ownKeys")||function(e){var t=_e.f(f(e)),n=we.f;return n?t.concat(n(e)):t},Ie=/#|\.prototype\./,Ee=function(e,t){return(e=ke[Se(e)])==Ne||e!=Ce&&("function"==typeof t?r(t):!!t)},Se=Ee.normalize=function(e){return String(e).replace(Ie,".").toLowerCase()},ke=Ee.data={},Ce=Ee.NATIVE="N",Ne=Ee.POLYFILL="P",Ae=Ee,xe=A.f,Pe=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Re=p("IE_PROTO"),Oe=Object.prototype,De=Pe?Object.getPrototypeOf:function(e){return e=l(e),E(e,Re)?e[Re]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Oe:null},Le=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,r){return f(n),function(e){if(!u(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Me=Object.keys||function(e){return re(e,ye)},Fe=g?Object.defineProperties:function(e,t){f(e);for(var n,r=Me(t),i=r.length,o=0;o<i;)P.f(e,n=r[o++],t[n]);return e},je=ee("document","documentElement"),Ue="prototype",qe="script",Ve=p("IE_PROTO"),Be=function(){try{ue=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e;Be=ue?function(e){e.write(se("")),e.close();var t=e.parentWindow.Object;return e=null,t}(ue):((e=h("iframe")).style.display="none",je.appendChild(e),e.src=String("javascript:"),(e=e.contentWindow.document).open(),e.write(se("document.F=Object")),e.close(),e.F);for(var t=ye.length;t--;)delete Be[Ue][ye[t]];return Be()};X[Ve]=!0;var Ke=Object.create||function(e,t){var n;return null!==e?(ae[Ue]=f(e),n=new ae,ae[Ue]=null,n[Ve]=e):n=Be(),void 0===t?n:Fe(n,t)};function ze(e){return E($e,e)&&(Ye||"string"==typeof $e[e])||(Ye&&E(Xe,e)?$e[e]=Xe[e]:$e[e]=Je("Symbol."+e)),$e[e]}function We(e){return void 0!==e&&(Ze.Array===e||tt[et]===e)}function He(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}function Ge(e,t,n){if(He(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}W=ee("navigator","userAgent")||"",e=v.process,m=e&&e.versions,(Ee=m&&m.v8)?Pt=(xt=Ee.split("."))[0]<4?1:xt[0]+xt[1]:W&&(!(xt=W.match(/Edge\/(\d+)/))||74<=xt[1])&&(xt=W.match(/Chrome\/(\d+)/))&&(Pt=xt[1]);var Qe=Pt&&+Pt,Ye=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Qe&&Qe<41})),$e=(Pe=Ye&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,G("wks")),Xe=v.Symbol,Je=Pe?Xe:Xe&&Xe.withoutSetter||L,Ze={},et=ze("iterator"),tt=Array.prototype;function nt(e){if(null!=e)return e[ct]||e["@@iterator"]||Ze[ut(e)]}function rt(e){var t=e.return;return void 0!==t&&f(t.call(e)).value}function it(e,t){this.stopped=e,this.result=t}function ot(e,t,n){function r(e){return o&&rt(o),new it(!0,e)}function i(e){return d?(f(e),v?g(e[0],e[1],r):g(e[0],e[1])):v?g(e,r):g(e)}var o,a,s,u,c,l,h=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),g=Ge(t,h,1+d+v);if(p)o=e;else{if("function"!=typeof(p=nt(e)))throw TypeError("Target is not iterable");if(We(p)){for(a=0,s=ne(e.length);a<s;a++)if((u=i(e[a]))&&u instanceof it)return u;return new it(!1)}o=p.call(e)}for(c=o.next;!(l=c.call(o)).done;){try{u=i(l.value)}catch(e){throw rt(o),e}if("object"==typeof u&&u&&u instanceof it)return u}return new it(!1)}(e={})[ze("toStringTag")]="z",m="[object z]"===String(e);var at=ze("toStringTag"),st="Arguments"==o(function(){return arguments}()),ut=m?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(e=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),at))?e:st?o(t):"Object"==(e=o(t))&&"function"==typeof t.callee?"Arguments":e},ct=ze("iterator"),lt=function e(t,n){var r=this;return r instanceof e?(Le&&(r=Le(new Error(void 0),De(r))),void 0!==n&&R(r,"message",String(n)),ot(t,(n=[]).push,{that:n}),R(r,"errors",n),r):new e(t,n)};function ht(e,t,n){for(var r in t)le(e,r,t[r],n);return e}function ft(e,t,n){e&&!E(e=n?e:e.prototype,mt)&&gt(e,mt,{configurable:!0,value:t})}function dt(e){var t=ee(e);e=P.f,g&&t&&!t[yt]&&e(t,yt,{configurable:!0,get:function(){return this}})}function pt(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}lt.prototype=Ke(Error.prototype,{constructor:i(5,lt),message:i(5,""),name:i(5,"AggregateError")}),oe({global:!0},{AggregateError:lt}),m||le(Object.prototype,"toString",m?{}.toString:function(){return"[object "+ut(this)+"]"},{unsafe:!0});var vt=v.Promise,gt=P.f,mt=ze("toStringTag"),yt=ze("species"),bt=ze("iterator"),_t=!1;try{var wt=0;(Ft={next:function(){return{done:!!wt++}},return:function(){_t=!0}})[bt]=function(){return this},Array.from(Ft,(function(){throw 2}))}catch(Ba){}function Tt(e,t){if(!t&&!_t)return!1;var n=!1;try{var r={};r[bt]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n}function It(e,t){var n;return void 0===(e=f(e).constructor)||null==(n=f(e)[Ct])?t:He(n)}function Et(e){var t;Lt.hasOwnProperty(e)&&(t=Lt[e],delete Lt[e],t())}function St(e){return function(){Et(e)}}var kt,Ct=ze("species"),Nt=(Ee=/(?:iphone|ipod|ipad).*applewebkit/i.test(W),"process"==o(v.process)),At=v.location,xt=v.setImmediate,Pt=v.clearImmediate,Rt=v.process,Ot=(e=v.MessageChannel,v.Dispatch),Dt=0,Lt={},Mt="onreadystatechange",Ft=(m=function(e){Et(e.data)},function(e){v.postMessage(e+"",At.protocol+"//"+At.host)});xt&&Pt||(xt=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return Lt[++Dt]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},kt(Dt),Dt},Pt=function(e){delete Lt[e]},Nt?kt=function(e){Rt.nextTick(St(e))}:Ot&&Ot.now?kt=function(e){Ot.now(St(e))}:e&&!Ee?(Ht=(e=new e).port2,e.port1.onmessage=m,kt=Ge(Ht.postMessage,Ht,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts&&At&&"file:"!==At.protocol&&!r(Ft)?(kt=Ft,v.addEventListener("message",m,!1)):kt=Mt in h("script")?function(e){je.appendChild(h("script"))[Mt]=function(){je.removeChild(this),Et(e)}}:function(e){setTimeout(St(e),0)});var jt,Ut,qt,Vt,Bt,Kt,zt,Wt,Ht={set:xt,clear:Pt},Gt=(Ft=/web0s(?!.*chrome)/i.test(W),m=A.f,Ht.set),Qt=(xt=v.MutationObserver||v.WebKitMutationObserver,Pt=v.document,v.process);function Yt(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=He(t),this.reject=He(n)}function $t(e,t){return f(e),u(t)&&t.constructor===e?t:((0,(e=cn.f(e)).resolve)(t),e.promise)}function Xt(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}function Jt(e){var t;return!(!u(e)||"function"!=typeof(t=e.then))&&t}function Zt(e,t){var n;e.notified||(e.notified=!0,n=e.reactions,un((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(2===e.rejection&&An(e),e.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(yn("Promise-chain cycle")):(s=Jt(a))?s.call(a,h,f):h(a)):f(r)}catch(r){d&&!u&&d.exit(),f(r)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Cn(e)})))}function en(e,t,n){var r,i;In?((r=bn.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),v.dispatchEvent(r)):r={promise:t,reason:n},!En&&(i=v["on"+e])?i(r):e===Sn&&function(e,t){var n=v.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)}function tn(e,t,n){return function(r){e(t,r,n)}}function nn(e,t,n){e.done||(e.done=!0,(e=n||e).value=t,e.state=2,Zt(e,!0))}W=v.Promise,(m=(m=m(v,"queueMicrotask"))&&m.value)||(jt=function(){var e,t;for(Nt&&(e=Qt.domain)&&e.exit();Ut;){t=Ut.fn,Ut=Ut.next;try{t()}catch(e){throw Ut?Vt():qt=void 0,e}}qt=void 0,e&&e.enter()},Vt=Ee||Nt||Ft||!xt||!Pt?W&&W.resolve?((zt=W.resolve(void 0)).constructor=W,Wt=zt.then,function(){Wt.call(zt,jt)}):Nt?function(){Qt.nextTick(jt)}:function(){Gt.call(v,jt)}:(Bt=!0,Kt=Pt.createTextNode(""),new xt(jt).observe(Kt,{characterData:!0}),function(){Kt.data=Bt=!Bt}));var rn,on,an,sn,un=m||function(e){e={fn:e,next:void 0},qt&&(qt.next=e),Ut||(Ut=e,Vt()),qt=e},cn={f:function(e){return new Yt(e)}},ln="object"==typeof window,hn=Ht.set,fn=ze("species"),dn="Promise",pn=ce.get,vn=ce.set,gn=ce.getterFor(dn),mn=(Pt=vt&&vt.prototype,vt),yn=(xt=Pt,v.TypeError),bn=v.document,_n=v.process,wn=cn.f,Tn=wn,In=!!(bn&&bn.createEvent&&v.dispatchEvent),En="function"==typeof PromiseRejectionEvent,Sn="unhandledrejection",kn=!1,Cn=(m=Ae(dn,(function(){var e=z(mn)!==String(mn);if(!e&&66===Qe)return!0;if(51<=Qe&&/native code/.test(mn))return!1;function t(e){e((function(){}),(function(){}))}var n=new mn((function(e){e(1)}));return(n.constructor={})[fn]=t,!(kn=n.then((function(){}))instanceof t)||!e&&ln&&!En})),Ht=m||!Tt((function(e){mn.all(e).catch((function(){}))})),function(e){hn.call(v,(function(){var t,n=e.facade,r=e.value;if(Nn(e)&&(t=Xt((function(){Nt?_n.emit("unhandledRejection",r,n):en(Sn,n,r)})),e.rejection=Nt||Nn(e)?2:1,t.error))throw t.value}))}),Nn=function(e){return 1!==e.rejection&&!e.parent},An=function(e){hn.call(v,(function(){var t=e.facade;Nt?_n.emit("rejectionHandled",t):en("rejectionhandled",t,e.value)}))},xn=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw yn("Promise can't be resolved itself");var i=Jt(n);i?un((function(){var r={done:!1};try{i.call(n,tn(e,r,t),tn(nn,r,t))}catch(n){nn(r,n,t)}})):(t.value=n,t.state=1,Zt(t,!1))}catch(n){nn({done:!1},n,t)}}};if(m&&(xt=(mn=function(e){pt(this,mn,dn),He(e),rn.call(this);var t=pn(this);try{e(tn(xn,t),tn(nn,t))}catch(e){nn(t,e)}}).prototype,(rn=function(e){vn(this,{type:dn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ht(xt,{then:function(e,t){var n=gn(this),r=wn(It(this,mn));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Nt?_n.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Zt(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),on=function(){var e=new rn,t=pn(e);this.promise=e,this.resolve=tn(xn,t),this.reject=tn(nn,t)},cn.f=wn=function(e){return e===mn||e===an?new on:Tn(e)},"function"==typeof vt&&Pt!==Object.prototype)){sn=Pt.then,kn||(le(Pt,"then",(function(e,t){var n=this;return new mn((function(e,t){sn.call(n,e,t)})).then(e,t)}),{unsafe:!0}),le(Pt,"catch",xt.catch,{unsafe:!0}));try{delete Pt.constructor}catch(Ba){}Le&&Le(Pt,xt)}oe({global:!0,wrap:!0,forced:m},{Promise:mn}),ft(mn,dn,!1),dt(dn),an=ee(dn),oe({target:dn,stat:!0,forced:m},{reject:function(e){var t=wn(this);return t.reject.call(void 0,e),t.promise}}),oe({target:dn,stat:!0,forced:m},{resolve:function(e){return $t(this,e)}}),oe({target:dn,stat:!0,forced:Ht},{all:function(e){var t=this,n=wn(t),r=n.resolve,i=n.reject,o=Xt((function(){var n=He(t.resolve),o=[],a=0,s=1;ot(e,(function(e){var u=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=wn(t),r=n.reject,i=Xt((function(){var i=He(t.resolve);ot(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),oe({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=cn.f(t),r=n.resolve,i=n.reject,o=Xt((function(){var n=He(t.resolve),i=[],o=0,a=1;ot(e,(function(e){var s=o++,u=!1;i.push(void 0),a++,n.call(t,e).then((function(e){u||(u=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){u||(u=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var Pn="No one promise resolved";oe({target:"Promise",stat:!0},{any:function(e){var t=this,n=cn.f(t),r=n.resolve,i=n.reject,o=Xt((function(){var n=He(t.resolve),o=[],a=0,s=1,u=!1;ot(e,(function(e){var c=a++,l=!1;o.push(void 0),s++,n.call(t,e).then((function(e){l||u||(u=!0,r(e))}),(function(e){l||u||(l=!0,o[c]=e,--s||i(new(ee("AggregateError"))(o,Pn)))}))})),--s||i(new(ee("AggregateError"))(o,Pn))}));return o.error&&i(o.value),n.promise}}),oe({target:"Promise",proto:!0,real:!0,forced:Pt=!!vt&&r((function(){vt.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=It(this,ee("Promise")),n="function"==typeof e;return this.then(n?function(n){return $t(t,e()).then((function(){return n}))}:e,n?function(n){return $t(t,e()).then((function(){throw n}))}:e)}}),"function"==typeof vt&&(kr=ee("Promise").prototype.finally,vt.prototype.finally!==kr&&le(vt.prototype,"finally",kr,{unsafe:!0})),xt=function(e){return function(t,n){var r,i=String(a(t)),o=te(n);return t=i.length,o<0||t<=o?e?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===t||(r=i.charCodeAt(o+1))<56320||57343<r?e?i.charAt(o):n:e?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}},m={codeAt:xt(!1),charAt:xt(!0)};var Rn,On=ze("iterator");function Dn(){return this}function Ln(){return this}function Mn(e,t,n,r,o,a,s){function u(e){if(e===o&&v)return v;if(!Un&&e in d)return d[e];switch(e){case"keys":case Vn:case Bn:return function(){return new n(this,e)}}return function(){return new n(this)}}!function(e,t,n){t+=" Iterator",e.prototype=Ke(Fn,{next:i(1,n)}),ft(e,t,!1),Ze[t]=Dn}(n,t,r);var c,l,h=t+" Iterator",f=!1,d=e.prototype,p=d[qn]||d["@@iterator"]||o&&d[o],v=!Un&&p||u(o);if((r="Array"==t&&d.entries||p)&&(e=De(r.call(new e)),jn!==Object.prototype&&e.next&&(De(e)!==jn&&(Le?Le(e,jn):"function"!=typeof e[qn]&&R(e,qn,Ln)),ft(e,h,!0))),o==Vn&&p&&p.name!==Vn&&(f=!0,v=function(){return p.call(this)}),d[qn]!==v&&R(d,qn,v),Ze[t]=v,o)if(c={values:u(Vn),keys:a?v:u("keys"),entries:u(Bn)},s)for(l in c)!Un&&!f&&l in d||le(d,l,c[l]);else oe({target:t,proto:!0,forced:Un||f},c);return c}Ht=!1,[].keys&&("next"in(hr=[].keys())?(ci=De(De(hr)))!==Object.prototype&&(Rn=ci):Ht=!0),Pt=null==Rn||r((function(){var e={};return Rn[On].call(e)!==e})),E(Rn=Pt?{}:Rn,On)||R(Rn,On,(function(){return this}));var Fn=(kr={IteratorPrototype:Rn,BUGGY_SAFARI_ITERATORS:Ht}).IteratorPrototype,jn=kr.IteratorPrototype,Un=kr.BUGGY_SAFARI_ITERATORS,qn=ze("iterator"),Vn="values",Bn="entries",Kn=m.charAt,zn="String Iterator",Wn=ce.set,Hn=ce.getterFor(zn);Mn(String,"String",(function(e){Wn(this,{type:zn,string:String(e),index:0})}),(function(){var e=Hn(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(n=Kn(t,n),e.index+=n.length,{value:n,done:!1})}));var Gn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Qn=ze("unscopables"),Yn=Array.prototype;null==Yn[Qn]&&P.f(Yn,Qn,{configurable:!0,value:Ke(null)}),xt=function(e){Yn[Qn][e]=!0};var $n="Array Iterator",Xn=ce.set,Jn=ce.getterFor($n),Zn=Mn(Array,"Array",(function(e,t){Xn(this,{type:$n,target:s(e),index:0,kind:t})}),(function(){var e=Jn(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Ze.Arguments=Ze.Array,xt("keys"),xt("values"),xt("entries");var er,tr=ze("iterator"),nr=ze("toStringTag"),rr=Zn.values;for(er in Gn){var ir=v[er],or=ir&&ir.prototype;if(or){if(or[tr]!==rr)try{R(or,tr,rr)}catch(Ba){or[tr]=rr}if(or[nr]||R(or,nr,er),Gn[er])for(var ar in Zn)if(or[ar]!==Zn[ar])try{R(or,ar,Zn[ar])}catch(Ba){or[ar]=Zn[ar]}}}function sr(e,t){var n;return new(void 0===(n=ur(e)&&("function"==typeof(n=e.constructor)&&(n===Array||ur(n.prototype))||u(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===t?0:t)}he.Promise,oe({target:"Promise",stat:!0},{try:function(e){var t=cn.f(this);return((e=Xt(e)).error?t.reject:t.resolve)(e.value),t.promise}});var ur=Array.isArray||function(e){return"Array"==o(e)},cr=ze("species"),lr=[].push,hr=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(u,c,h,f){for(var d,p,v=l(u),g=T(v),m=Ge(c,h,3),y=ne(g.length),b=0,_=(f=f||sr,t?f(u,y):n||a?f(u,0):void 0);b<y;b++)if((s||b in g)&&(p=m(d=g[b],b,v),e))if(t)_[b]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return b;case 2:lr.call(_,d)}else switch(e){case 4:return!1;case 7:lr.call(_,d)}return o?-1:r||i?i:_}},fr=(ci={forEach:hr(0),map:hr(1),filter:hr(2),some:hr(3),every:hr(4),find:hr(5),findIndex:hr(6),filterOut:hr(7)}).find,dr=!0;(Pt="find")in[]&&Array(1)[Pt]((function(){dr=!1})),oe({target:"Array",proto:!0,forced:dr},{find:function(e){return fr(this,e,1<arguments.length?arguments[1]:void 0)}}),xt(Pt);var pr=Function.call;Ht=function(e,t,n){return Ge(pr,v[e].prototype[t],n)},Ht("Array","find");var vr=ci.findIndex,gr=!0;function mr(e,t,n){(t=c(t))in e?P.f(e,t,i(0,n)):e[t]=n}(kr="findIndex")in[]&&Array(1)[kr]((function(){gr=!1})),oe({target:"Array",proto:!0,forced:gr},{findIndex:function(e){return vr(this,e,1<arguments.length?arguments[1]:void 0)}}),xt(kr),Ht("Array","findIndex"),m=!Tt((function(e){Array.from(e)})),oe({target:"Array",stat:!0,forced:m},{from:function(e){var t,n,r,i,o,a,s=l(e),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,d=void 0!==h,p=(e=nt(s),0);if(d&&(h=Ge(h,2<c?arguments[2]:void 0,2)),null==e||u==Array&&We(e))for(n=new u(t=ne(s.length));p<t;p++)mr(n,p,a=d?h(s[p],p):s[p]);else for(o=(i=e.call(s)).next,n=new u;!(r=o.call(i)).done;p++)a=d?function(e,t,n,r){try{return r?t(f(n)[0],n[1]):t(n)}catch(t){throw rt(e),t}}(i,h,[r.value,p],!0):r.value,mr(n,p,a);return n.length=p,n}}),he.Array.from;var yr,br,_r=ci.some;function wr(e){return!!u(e)&&(e=ut(e),E(Ar,e)||E(xr,e))}oe({target:"Array",proto:!0,forced:!(hr=!!(br=[].some)&&r((function(){br.call(null,yr||function(){throw 1},1)})))},{some:function(e){return _r(this,e,1<arguments.length?arguments[1]:void 0)}}),Ht("Array","some"),Pt="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,xt=P.f;var Tr,Ir=(kr=v.Int8Array)&&kr.prototype,Er=(hr=(m=v.Uint8ClampedArray)&&m.prototype,kr&&De(kr)),Sr=Ir&&De(Ir),kr=((m=Object.prototype).isPrototypeOf,ze("toStringTag")),Cr=L("TYPED_ARRAY_TAG"),Nr=Pt&&!!Le&&"Opera"!==ut(v.opera),Ar=(Pt=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8}),xr={BigInt64Array:8,BigUint64Array:8};for(Tr in Ar)v[Tr]||(Nr=!1);if((!Nr||"function"!=typeof Er||Er===Function.prototype)&&(Er=function(){throw TypeError("Incorrect invocation")},Nr))for(Tr in Ar)v[Tr]&&Le(v[Tr],Er);if((!Nr||!Sr||Sr===m)&&(Sr=Er.prototype,Nr))for(Tr in Ar)v[Tr]&&Le(v[Tr].prototype,Sr);if(Nr&&De(hr)!==Sr&&Le(hr,Sr),g&&!E(Sr,kr))for(Tr in Pt=!0,xt(Sr,kr,{get:function(){return u(this)?this[Cr]:void 0}}),Ar)v[Tr]&&R(v[Tr],Cr,Tr);hr=function(e){if(wr(e))return e;throw TypeError("Target is not a typed array")},xt=function(e,t,n){if(g){if(n)for(var r in Ar)if((r=v[r])&&E(r.prototype,e))try{delete r.prototype[e]}catch(e){}Sr[e]&&!n||le(Sr,e,!n&&Nr&&Ir[e]||t)}},kr=ze("iterator"),Pt=v.Uint8Array;var Pr=Zn.values,Rr=Zn.keys,Or=Zn.entries,Dr=hr;hr=xt,Pt=!!(xt=Pt&&Pt.prototype[kr])&&("values"==xt.name||null==xt.name),xt=function(){return Pr.call(Dr(this))},hr("entries",(function(){return Or.call(Dr(this))})),hr("keys",(function(){return Rr.call(Dr(this))})),hr("values",xt,!Pt),hr(kr,xt,!Pt);var Lr=Object.assign,Mr=Object.defineProperty;xt=!Lr||r((function(){if(g&&1!==Lr({b:1},Lr(Mr({},"a",{enumerable:!0,get:function(){Mr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Lr({},e)[n]||Me(Lr({},t)).join("")!=r}))?function(e,t){for(var n=l(e),r=arguments.length,i=1,o=we.f,a=b.f;i<r;)for(var s,u=T(arguments[i++]),c=o?Me(u).concat(o(u)):Me(u),h=c.length,f=0;f<h;)s=c[f++],g&&!a.call(u,s)||(n[s]=u[s]);return n}:Lr,oe({target:"Object",stat:!0,forced:Object.assign!==xt},{assign:xt}),he.Object.assign;var Fr=b.f,jr=(Pt=function(e){return function(t){for(var n,r=s(t),i=Me(r),o=i.length,a=0,u=[];a<o;)n=i[a++],g&&!Fr.call(r,n)||u.push(e?[n,r[n]]:r[n]);return u}},(xt={entries:Pt(!0),values:Pt(!1)}).entries);oe({target:"Object",stat:!0},{entries:function(e){return jr(e)}}),he.Object.entries;var Ur=xt.values;function qr(e){if(u(t=e)&&(void 0!==(n=t[Vr])?n:"RegExp"==o(t)))throw TypeError("The method doesn't accept regular expressions");var t,n;return e}oe({target:"Object",stat:!0},{values:function(e){return Ur(e)}}),he.Object.values;var Vr=ze("match"),Br=ze("match");Pt=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[Br]=!1,"/./"[t](n)}catch(e){}}return!1},oe({target:"String",proto:!0,forced:!Pt("includes")},{includes:function(e){return!!~String(a(this)).indexOf(qr(e),1<arguments.length?arguments[1]:void 0)}}),Ht("String","includes"),xt=A.f;var Kr,zr="".startsWith,Wr=Math.min;Pt=Pt("startsWith"),oe({target:"String",proto:!0,forced:!(Kr=!(Pt||!(Kr=xt(String.prototype,"startsWith"))||Kr.writable))&&!Pt},{startsWith:function(e){var t=String(a(this));qr(e);var n=ne(Wr(1<arguments.length?arguments[1]:void 0,t.length));return e=String(e),zr?zr.call(t,e,n):t.slice(n,n+e.length)===e}}),Ht("String","startsWith"),oe({target:"String",proto:!0},{repeat:function(e){var t=String(a(this)),n="",r=te(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}}),Ht("String","repeat");var Hr,Gr=ze("species"),Qr=ze("isConcatSpreadable"),Yr=9007199254740991,$r="Maximum allowed index exceeded";function Xr(e){var t=he.Symbol||(he.Symbol={});E(t,e)||ii(t,e,{value:ri.f(e)})}function Jr(e,t){var n=bi[e]=Ke(di[ui]);return li(n,{type:si,tag:e,description:t}),g||(n.description=t),n}function Zr(e,t){f(e);var n=s(t);return t=Me(n).concat(Ni(n)),oi(t,(function(t){g&&!Ci.call(n,t)||ki(e,t,n[t])})),e}Pt=51<=Qe||!r((function(){var e=[];return e[Qr]=!1,e.concat()[0]!==e})),Hr="concat",Ht=51<=Qe||!r((function(){var e=[];return(e.constructor={})[Gr]=function(){return{foo:1}},1!==e[Hr](Boolean).foo})),oe({target:"Array",proto:!0,forced:!Pt||!Ht},{concat:function(e){for(var t,n,r,i=l(this),o=sr(i,0),a=0,s=-1,c=arguments.length;s<c;s++)if(function(e){if(!u(e))return!1;var t=e[Qr];return void 0!==t?!!t:ur(e)}(r=-1===s?i:arguments[s])){if(n=ne(r.length),Yr<a+n)throw TypeError($r);for(t=0;t<n;t++,a++)t in r&&mr(o,a,r[t])}else{if(Yr<=a)throw TypeError($r);mr(o,a++,r)}return o.length=a,o}});var ei=_e.f,ti={}.toString,ni="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ri=(Ht={f:function(e){return ni&&"[object Window]"==ti.call(e)?function(e){try{return ei(e)}catch(e){return ni.slice()}}(e):ei(s(e))}},{f:ze}),ii=P.f,oi=ci.forEach,ai=p("hidden"),si="Symbol",ui="prototype",ci=ze("toPrimitive"),li=ce.set,hi=ce.getterFor(si),fi=Object[ui],di=v.Symbol,pi=ee("JSON","stringify"),vi=A.f,gi=P.f,mi=Ht.f,yi=b.f,bi=G("symbols"),_i=G("op-symbols"),wi=G("string-to-symbol-registry"),Ti=G("symbol-to-string-registry"),Ii=(p=G("wks"),!(G=v.QObject)||!G[ui]||!G[ui].findChild),Ei=g&&r((function(){return 7!=Ke(gi({},"a",{get:function(){return gi(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=vi(fi,t);r&&delete fi[t],gi(e,t,n),r&&e!==fi&&gi(fi,t,r)}:gi,Si=Pe?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof di},ki=function e(t,n,r){return t===fi&&e(_i,n,r),f(t),n=c(n,!0),f(r),E(bi,n)?(r.enumerable?(E(t,ai)&&t[ai][n]&&(t[ai][n]=!1),r=Ke(r,{enumerable:i(0,!1)})):(E(t,ai)||gi(t,ai,i(1,{})),t[ai][n]=!0),Ei(t,n,r)):gi(t,n,r)},Ci=function(e){var t=c(e,!0);return e=yi.call(this,t),!(this===fi&&E(bi,t)&&!E(_i,t))&&(!(e||!E(this,t)||!E(bi,t)||E(this,ai)&&this[ai][t])||e)},Ni=(G=function(e,t){var n=s(e);if(e=c(t,!0),n!==fi||!E(bi,e)||E(_i,e))return!(t=vi(n,e))||!E(bi,e)||E(n,ai)&&n[ai][e]||(t.enumerable=!0),t},Pe=function(e){e=mi(s(e));var t=[];return oi(e,(function(e){E(bi,e)||E(X,e)||t.push(e)})),t},function(e){var t=e===fi,n=(e=mi(t?_i:s(e)),[]);return oi(e,(function(e){!E(bi,e)||t&&!E(fi,e)||n.push(bi[e])})),n});Ye||(le((di=function(){if(this instanceof di)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),n=function e(n){this===fi&&e.call(_i,n),E(this,ai)&&E(this[ai],t)&&(this[ai][t]=!1),Ei(this,t,i(1,n))};return g&&Ii&&Ei(fi,t,{configurable:!0,set:n}),Jr(t,e)})[ui],"toString",(function(){return hi(this).tag})),le(di,"withoutSetter",(function(e){return Jr(L(e),e)})),b.f=Ci,P.f=ki,A.f=G,_e.f=Ht.f=Pe,we.f=Ni,ri.f=function(e){return Jr(ze(e),e)},g&&(gi(di[ui],"description",{configurable:!0,get:function(){return hi(this).description}}),le(fi,"propertyIsEnumerable",Ci,{unsafe:!0}))),oe({global:!0,wrap:!0,forced:!Ye,sham:!Ye},{Symbol:di}),oi(Me(p),(function(e){Xr(e)})),oe({target:si,stat:!0,forced:!Ye},{for:function(e){var t=String(e);return E(wi,t)?wi[t]:(e=di(t),wi[t]=e,Ti[e]=t,e)},keyFor:function(e){if(!Si(e))throw TypeError(e+" is not a symbol");if(E(Ti,e))return Ti[e]},useSetter:function(){Ii=!0},useSimple:function(){Ii=!1}}),oe({target:"Object",stat:!0,forced:!Ye,sham:!g},{create:function(e,t){return void 0===t?Ke(e):Zr(Ke(e),t)},defineProperty:ki,defineProperties:Zr,getOwnPropertyDescriptor:G}),oe({target:"Object",stat:!0,forced:!Ye},{getOwnPropertyNames:Pe,getOwnPropertySymbols:Ni}),oe({target:"Object",stat:!0,forced:r((function(){we.f(1)}))},{getOwnPropertySymbols:function(e){return we.f(l(e))}}),pi&&(Vi=!Ye||r((function(){var e=di();return"[null]"!=pi([e])||"{}"!=pi({a:e})||"{}"!=pi(Object(e))})),oe({target:"JSON",stat:!0,forced:Vi},{stringify:function(e,t,n){for(var r,i=[e],o=1;o<arguments.length;)i.push(arguments[o++]);if((u(r=t)||void 0!==e)&&!Si(e))return ur(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Si(t))return t}),i[1]=t,pi.apply(null,i)}})),di[ui][ci]||R(di[ui],ci,di[ui].valueOf),ft(di,si),X[ai]=!0,Xr("asyncIterator"),G=P.f;var Ai,xi,Pi,Ri,Oi,Di=v.Symbol;!g||"function"!=typeof Di||"description"in Di.prototype&&void 0===Di().description||(Ai={},ie(xi=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof xi?new Di(e):void 0===e?Di():Di(e);return""===e&&(Ai[t]=!0),t},Di),(zi=xi.prototype=Di.prototype).constructor=xi,Pi=zi.toString,Ri="Symbol(test)"==String(Di("test")),Oi=/^Symbol\((.*)\)[^)]+$/,G(zi,"description",{configurable:!0,get:function(){var e=u(this)?this.valueOf():this,t=Pi.call(e);return E(Ai,e)?"":""===(t=Ri?t.slice(7,-1):t.replace(Oi,"$1"))?void 0:t}}),oe({global:!0,forced:!0},{Symbol:xi})),Xr("hasInstance"),Xr("isConcatSpreadable"),Xr("iterator"),Xr("match"),Xr("matchAll"),Xr("replace"),Xr("search"),Xr("species"),Xr("split"),Xr("toPrimitive"),Xr("toStringTag"),Xr("unscopables"),ft(v.JSON,"JSON",!0),ft(Math,"Math",!0),oe({global:!0},{Reflect:{}}),ft(v.Reflect,"Reflect",!0),he.Symbol,Xr("asyncDispose"),Xr("dispose"),Xr("matcher"),Xr("metadata"),Xr("observable"),Xr("patternMatch"),Xr("replaceAll"),ri.f("iterator");var Li=!r((function(){return Object.isExtensible(Object.preventExtensions({}))})),Mi=t((function(e){function t(e){n(e,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=P.f,r=L("meta"),i=0,o=Object.isExtensible||function(){return!0},a=e.exports={REQUIRED:!1,fastKey:function(e,n){if(!u(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!E(e,r)){if(!o(e))return"F";if(!n)return"E";t(e)}return e[r].objectID},getWeakData:function(e,n){if(!E(e,r)){if(!o(e))return!0;if(!n)return!1;t(e)}return e[r].weakData},onFreeze:function(e){return Li&&a.REQUIRED&&o(e)&&!E(e,r)&&t(e),e}};X[r]=!0})),Fi=(Pe=function(e,t,n){function i(e){var t=g[e];le(g,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(f&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return f&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(f&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var o,a,s,c,l,h=-1!==e.indexOf("Map"),f=-1!==e.indexOf("Weak"),d=h?"set":"add",p=v[e],g=p&&p.prototype,m=p,y={};return Ae(e,"function"!=typeof p||!(f||g.forEach&&!r((function(){(new p).entries().next()}))))?(m=n.getConstructor(t,e,h,d),Mi.REQUIRED=!0):Ae(e,!0)&&(a=(o=new m)[d](f?{}:-0,1)!=o,s=r((function(){o.has(1)})),c=Tt((function(e){new p(e)})),l=!f&&r((function(){for(var e=new p,t=5;t--;)e[d](t,t);return!e.has(-0)})),c||(((m=t((function(t,n){pt(t,m,e);var r,i,o,a=(a=new p,r=t,t=m,Le&&"function"==typeof(i=r.constructor)&&i!==t&&u(o=i.prototype)&&o!==t.prototype&&Le(a,o),a);return null!=n&&ot(n,a[d],{that:a,AS_ENTRIES:h}),a}))).prototype=g).constructor=m),(s||l)&&(i("delete"),i("has"),h&&i("get")),(l||a)&&i(d),f&&g.clear&&delete g.clear),y[e]=m,oe({global:!0,forced:m!=p},y),ft(m,e),f||n.setStrong(m,e,h),m},P.f),ji=Mi.fastKey,Ui=ce.set,qi=ce.getterFor,Vi={getConstructor:function(e,t,n,r){function i(e,t,n){var r,i=a(e),o=s(e,t);return o?o.value=n:(i.last=o={index:r=ji(t,!0),key:t,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),g?i.size++:e.size++,"F"!==r&&(i.index[r]=o)),e}var o=e((function(e,i){pt(e,o,t),Ui(e,{type:t,index:Ke(null),first:void 0,last:void 0,size:0}),g||(e.size=0),null!=i&&ot(i,e[r],{that:e,AS_ENTRIES:n})})),a=qi(t),s=function(e,t){var n,r=a(e);if("F"!==(e=ji(t)))return r.index[e];for(n=r.first;n;n=n.next)if(n.key==t)return n};return ht(o.prototype,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,g?e.size=0:this.size=0},delete:function(e){var t,n=a(this),r=s(this,e);return r&&(t=r.next,e=r.previous,delete n.index[r.index],r.removed=!0,e&&(e.next=t),t&&(t.previous=e),n.first==r&&(n.first=t),n.last==r&&(n.last=e),g?n.size--:this.size--),!!r},forEach:function(e){for(var t,n=a(this),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),ht(o.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),g&&Fi(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",i=qi(t),o=qi(r);Mn(e,t,(function(e,t){Ui(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),dt(t)}};function Bi(){for(var e,t=f(this),n=He(t.delete),r=!0,i=0,o=arguments.length;i<o;i++)e=n.call(t,arguments[i]),r=r&&e;return!!r}function Ki(e){return Map.prototype.entries.call(e)}Pe("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Vi),he.Map,ci=function(e){var t,n,r,i,o=arguments.length,a=1<o?arguments[1]:void 0;return He(this),(t=void 0!==a)&&He(a),null==e?new this:(n=[],t?(r=0,i=Ge(a,2<o?arguments[2]:void 0,2),ot(e,(function(e){n.push(i(e,r++))}))):ot(e,n.push,{that:n}),new this(n))},oe({target:"Map",stat:!0},{from:ci}),G=function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)},oe({target:"Map",stat:!0},{of:G}),oe({target:"Map",proto:!0,real:!0,forced:H},{deleteAll:function(){return Bi.apply(this,arguments)}}),oe({target:"Map",proto:!0,real:!0,forced:H},{emplace:function(e,t){var n=f(this);return t=n.has(e)&&"update"in t?t.update(n.get(e),e,n):t.insert(e,n),n.set(e,t),t}}),oe({target:"Map",proto:!0,real:!0,forced:H},{every:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return!ot(n,(function(e,n,i){if(!r(n,e,t))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),oe({target:"Map",proto:!0,real:!0,forced:H},{filter:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3),i=new(It(t,ee("Map"))),o=He(i.set);return ot(n,(function(e,n){r(n,e,t)&&o.call(i,e,n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),oe({target:"Map",proto:!0,real:!0,forced:H},{find:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return ot(n,(function(e,n,i){if(r(n,e,t))return i(n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),oe({target:"Map",proto:!0,real:!0,forced:H},{findKey:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return ot(n,(function(e,n,i){if(r(n,e,t))return i(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),oe({target:"Map",stat:!0},{groupBy:function(e,t){var n=new this;He(t);var r=He(n.has),i=He(n.get),o=He(n.set);return ot(e,(function(e){var a=t(e);r.call(n,a)?i.call(n,a).push(e):o.call(n,a,[e])})),n}}),oe({target:"Map",proto:!0,real:!0,forced:H},{includes:function(e){return ot(Ki(f(this)),(function(t,n,r){if((i=n)===(n=e)||i!=i&&n!=n)return r();var i}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),oe({target:"Map",stat:!0},{keyBy:function(e,t){var n=new this;He(t);var r=He(n.set);return ot(e,(function(e){r.call(n,t(e),e)})),n}}),oe({target:"Map",proto:!0,real:!0,forced:H},{keyOf:function(e){return ot(Ki(f(this)),(function(t,n,r){if(n===e)return r(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),oe({target:"Map",proto:!0,real:!0,forced:H},{mapKeys:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3),i=new(It(t,ee("Map"))),o=He(i.set);return ot(n,(function(e,n){o.call(i,r(n,e,t),n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),oe({target:"Map",proto:!0,real:!0,forced:H},{mapValues:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3),i=new(It(t,ee("Map"))),o=He(i.set);return ot(n,(function(e,n){o.call(i,e,r(n,e,t))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),oe({target:"Map",proto:!0,real:!0,forced:H},{merge:function(e){for(var t=f(this),n=He(t.set),r=0;r<arguments.length;)ot(arguments[r++],n,{that:t,AS_ENTRIES:!0});return t}}),oe({target:"Map",proto:!0,real:!0,forced:H},{reduce:function(e){var t=f(this),n=Ki(t),r=arguments.length<2,i=r?void 0:arguments[1];if(He(e),ot(n,(function(n,o){i=r?(r=!1,o):e(i,o,n,t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty map with no initial value");return i}}),oe({target:"Map",proto:!0,real:!0,forced:H},{some:function(e){var t=f(this),n=Ki(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return ot(n,(function(e,n,i){if(r(n,e,t))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),oe({target:"Map",proto:!0,real:!0,forced:H},{update:function(e,t){var n=f(this),r=arguments.length;He(t);var i=n.has(e);if(!i&&r<3)throw TypeError("Updating absent value");return r=i?n.get(e):He(2<r?arguments[2]:void 0)(e,n),n.set(e,t(r,e,n)),n}});var zi=function(e,t){var n,r=f(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof t&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(e)?(n=r.get(e),"function"==typeof t&&(n=t(n),r.set(e,n))):"function"==typeof i&&(n=i(),r.set(e,n)),n};function Wi(e){return Set.prototype.values.call(e)}oe({target:"Map",proto:!0,real:!0,forced:H},{upsert:zi}),oe({target:"Map",proto:!0,real:!0,forced:H},{updateOrInsert:zi}),Pe("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Vi),he.Set,oe({target:"Set",stat:!0},{from:ci}),oe({target:"Set",stat:!0},{of:G}),oe({target:"Set",proto:!0,real:!0,forced:H},{addAll:function(){return function(){for(var e=f(this),t=He(e.add),n=0,r=arguments.length;n<r;n++)t.call(e,arguments[n]);return e}.apply(this,arguments)}}),oe({target:"Set",proto:!0,real:!0,forced:H},{deleteAll:function(){return Bi.apply(this,arguments)}}),oe({target:"Set",proto:!0,real:!0,forced:H},{every:function(e){var t=f(this),n=Wi(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return!ot(n,(function(e,n){if(!r(e,e,t))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),oe({target:"Set",proto:!0,real:!0,forced:H},{difference:function(e){var t=f(this),n=new(It(t,ee("Set")))(t),r=He(n.delete);return ot(e,(function(e){r.call(n,e)})),n}}),oe({target:"Set",proto:!0,real:!0,forced:H},{filter:function(e){var t=f(this),n=Wi(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3),i=new(It(t,ee("Set"))),o=He(i.add);return ot(n,(function(e){r(e,e,t)&&o.call(i,e)}),{IS_ITERATOR:!0}),i}}),oe({target:"Set",proto:!0,real:!0,forced:H},{find:function(e){var t=f(this),n=Wi(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return ot(n,(function(e,n){if(r(e,e,t))return n(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),oe({target:"Set",proto:!0,real:!0,forced:H},{intersection:function(e){var t=f(this),n=new(It(t,ee("Set"))),r=He(t.has),i=He(n.add);return ot(e,(function(e){r.call(t,e)&&i.call(n,e)})),n}}),oe({target:"Set",proto:!0,real:!0,forced:H},{isDisjointFrom:function(e){var t=f(this),n=He(t.has);return!ot(e,(function(e,r){if(!0===n.call(t,e))return r()}),{INTERRUPTED:!0}).stopped}}),oe({target:"Set",proto:!0,real:!0,forced:H},{isSubsetOf:function(e){var t=function(e){var t=nt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return f(t.call(e))}(this),n=f(e),r=n.has;return"function"!=typeof r&&(n=new(ee("Set"))(e),r=He(n.has)),!ot(t,(function(e,t){if(!1===r.call(n,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),oe({target:"Set",proto:!0,real:!0,forced:H},{isSupersetOf:function(e){var t=f(this),n=He(t.has);return!ot(e,(function(e,r){if(!1===n.call(t,e))return r()}),{INTERRUPTED:!0}).stopped}}),oe({target:"Set",proto:!0,real:!0,forced:H},{join:function(e){var t=Wi(n=f(this)),n=void 0===e?",":String(e);return ot(t,(e=[]).push,{that:e,IS_ITERATOR:!0}),e.join(n)}}),oe({target:"Set",proto:!0,real:!0,forced:H},{map:function(e){var t=f(this),n=Wi(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3),i=new(It(t,ee("Set"))),o=He(i.add);return ot(n,(function(e){o.call(i,r(e,e,t))}),{IS_ITERATOR:!0}),i}}),oe({target:"Set",proto:!0,real:!0,forced:H},{reduce:function(e){var t=f(this),n=Wi(t),r=arguments.length<2,i=r?void 0:arguments[1];if(He(e),ot(n,(function(n){i=r?(r=!1,n):e(i,n,n,t)}),{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),oe({target:"Set",proto:!0,real:!0,forced:H},{some:function(e){var t=f(this),n=Wi(t),r=Ge(e,1<arguments.length?arguments[1]:void 0,3);return ot(n,(function(e,n){if(r(e,e,t))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),oe({target:"Set",proto:!0,real:!0,forced:H},{symmetricDifference:function(e){var t=f(this),n=new(It(t,ee("Set")))(t),r=He(n.delete),i=He(n.add);return ot(e,(function(e){r.call(n,e)||i.call(n,e)})),n}}),oe({target:"Set",proto:!0,real:!0,forced:H},{union:function(e){var t;return ot(e,He((t=new(It(t=f(this),ee("Set")))(t)).add),{that:t}),t}});var Hi=Math.floor;oe({target:"Number",stat:!0},{isInteger:function(e){return!u(e)&&isFinite(e)&&Hi(e)===e}}),he.Number.isInteger,oe({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),he.Number.isNaN;var Gi=function(e,t){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Qi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Gi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Yi=function(){return(Yi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function $i(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Xi(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Ji(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zi(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function eo(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function to(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function no(e){return e=to(e),so.encodeByteArray(e,!0)}function ro(e){try{return so.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var io={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},oo=function(e,t){if(!e)throw ao(t)},ao=function(e){return new Error("Firebase Database ("+io.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},so={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=(15&s)<<2|(l=u?e[i+2]:0)>>6,l=63&l;u||(l=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[l])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(to(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i,o,a,s=e[n++];s<128?t[r++]=String.fromCharCode(s):191<s&&s<224?(o=e[n++],t[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))):(o=e[n++],a=e[n++],t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},uo=function(e){return no(e).replace(/\./g,"")};function co(e){return lo(void 0,e)}function lo(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=lo(e[n],t[n]));return e}var ho=(fo.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},fo);function fo(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}function po(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0;if(!(t=e.sub||e.user_id))throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");return e=Yi({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:t,user_id:t,firebase:{sign_in_provider:"custom",identities:{}}},e),[uo(JSON.stringify({alg:"none",type:"JWT"})),uo(JSON.stringify(e)),""].join(".")}function vo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function go(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vo())}function mo(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return}}function yo(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function bo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _o(){return!0===io.NODE_ADMIN}function wo(){return"indexedDB"in self&&null!=indexedDB}function To(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function Io(){return!(!navigator||!navigator.cookieEnabled)}var Eo,So="FirebaseError",ko=(Qi(Co,Eo=Error),Co);function Co(e,t,n){return(t=Eo.call(this,t)||this).code=e,t.customData=n,t.name=So,Object.setPrototypeOf(t,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,No.prototype.create),t}var No=(Ao.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=t[0]||{},o=this.service+"/"+e;return e=(e=this.errors[e])?(r=i,e.replace(xo,(function(e,t){var n=r[t];return null!=n?String(n):"<"+t+"?>"}))):"Error",e=this.serviceName+": "+e+" ("+o+").",new ko(o,e,i)},Ao);function Ao(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var xo=/\{\$([^}]+)}/g;function Po(e){return JSON.parse(e)}function Ro(e){return JSON.stringify(e)}function Oo(e){var t={},n={},r={},i="";try{var o=e.split(".");t=Po(ro(o[0])||""),n=Po(ro(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}function Do(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Lo(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Mo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Fo(e,t,n){var r,i={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function jo(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=r[n];!function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}(i[0],i[1])}return t.length?"&"+t.join("&"):""}var Uo=(qo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},qo.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){var h=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782);i=(a<<5|a>>>27)+o+l+h+n[r]&4294967295,l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},qo.prototype.update=function(e,t){if(null!=e){for(var n=(t=void 0===t?e.length:t)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},qo.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},qo);function qo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}function Vo(e,t){return(t=new Bo(e,t)).subscribe.bind(t)}var Bo=(Ko.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},Ko.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},Ko.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},Ko.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=zo),void 0===r.error&&(r.error=zo),void 0===r.complete&&(r.complete=zo),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),n},Ko.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Ko.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},Ko.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},Ko.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},Ko);function Ko(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}function zo(){}function Wo(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Ho(e,t){return e+" failed: "+t+" argument "}function Go(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ho(e,t)+"must be a valid function.")}function Qo(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ho(e,t)+"must be a valid context object.")}function Yo(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t}var $o=1e3,Xo=2,Jo=144e5,Zo=.5;function ea(e,t,n){return void 0===n&&(n=Xo),n=(t=void 0===t?$o:t)*Math.pow(n,e),e=Math.round(Zo*n*(Math.random()-.5)*2),Math.min(Jo,n+e)}function ta(e){return e&&e._delegate?e._delegate:e}var na=(ra.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},ra.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},ra.prototype.setServiceProps=function(e){return this.serviceProps=e,this},ra.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},ra);function ra(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var ia="[DEFAULT]",oa=(aa.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)&&(e=new ho,this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize()))try{var n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}return this.instancesDeferred.get(t).promise},aa.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier);if(e=null!==(e=null==e?void 0:e.optional)&&void 0!==e&&e,!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(t){if(e)return null;throw t}},aa.prototype.getComponent=function(){return this.component},aa.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ia})}catch(e){}try{for(var r=Ji(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Zi(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},aa.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?ia:e),this.instancesOptions.delete(e),this.instances.delete(e)},aa.prototype.delete=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(eo(eo([],Zi(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Zi(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},aa.prototype.isComponentSet=function(){return null!=this.component},aa.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?ia:e)},aa.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?ia:e)||{}},aa.prototype.initialize=function(e){var t,n,r=void 0===(r=(e=void 0===e?{}:e).options)?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=Ji(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var u=Zi(s.value,2),c=u[0],l=u[1];i===this.normalizeInstanceIdentifier(c)&&l.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},aa.prototype.onInit=function(e,t){var n=this.normalizeInstanceIdentifier(t),r=null!==(t=this.onInitCallbacks.get(n))&&void 0!==t?t:new Set;return r.add(e),this.onInitCallbacks.set(n,r),(t=this.instances.get(n))&&e(t,n),function(){r.delete(e)}},aa.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=Ji(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},aa.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n;if(!(e=this.instances.get(t))&&this.component&&(e=this.component.instanceFactory(this.container,{instanceIdentifier:(n=t)===ia?void 0:n,options:r}),this.instances.set(t,e),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(e,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,e)}catch(e){}return e||null},aa.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=ia),!this.component||this.component.multipleInstances?e:ia},aa.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},aa);function aa(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var sa=(ua.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},ua.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},ua.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new oa(e,this);return this.providers.set(e,t),t},ua.prototype.getProviders=function(){return Array.from(this.providers.values())},ua);function ua(e){this.name=e,this.providers=new Map}var ca,la=[];function ha(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=pa[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,eo(["["+i+"]  "+e.name+":"],n))}}(ci=ca=ca||{})[ci.DEBUG=0]="DEBUG",ci[ci.VERBOSE=1]="VERBOSE",ci[ci.INFO=2]="INFO",ci[ci.WARN=3]="WARN",ci[ci.ERROR=4]="ERROR",ci[ci.SILENT=5]="SILENT";var fa={debug:ca.DEBUG,verbose:ca.VERBOSE,info:ca.INFO,warn:ca.WARN,error:ca.ERROR,silent:ca.SILENT},da=ca.INFO,pa=((G={})[ca.DEBUG]="log",G[ca.VERBOSE]="log",G[ca.INFO]="info",G[ca.WARN]="warn",G[ca.ERROR]="error",G),va=(Object.defineProperty(ga.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in ca))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),ga.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?fa[e]:e},Object.defineProperty(ga.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),ga.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.DEBUG],e)),this._logHandler.apply(this,eo([this,ca.DEBUG],e))},ga.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.VERBOSE],e)),this._logHandler.apply(this,eo([this,ca.VERBOSE],e))},ga.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.INFO],e)),this._logHandler.apply(this,eo([this,ca.INFO],e))},ga.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.WARN],e)),this._logHandler.apply(this,eo([this,ca.WARN],e))},ga.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.ERROR],e)),this._logHandler.apply(this,eo([this,ca.ERROR],e))},ga);function ga(e){this.name=e,this._logLevel=da,this._logHandler=ha,this._userLogHandler=null,la.push(this)}function ma(e){la.forEach((function(t){t.setLogLevel(e)}))}function ya(e,t){for(var n=0,r=la;n<r.length;n++)!function(n){var r=null;t&&t.level&&(r=fa[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:ca[n].toLowerCase(),message:a,args:i,type:t.name})}}(r[n])}(H={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",H["bad-app-name"]="Illegal App name: '{$appName}",H["duplicate-app"]="Firebase App named '{$appName}' already exists",H["app-deleted"]="Firebase App named '{$appName}' already deleted",H["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",H["invalid-log-argument"]="First argument to `onLog` must be null or a function.";var ba=new No("app","Firebase",ci=H),_a="@firebase/app",wa="[DEFAULT]",Ta=((G={})[_a]="fire-core",G["@firebase/analytics"]="fire-analytics",G["@firebase/app-check"]="fire-app-check",G["@firebase/auth"]="fire-auth",G["@firebase/database"]="fire-rtdb",G["@firebase/functions"]="fire-fn",G["@firebase/installations"]="fire-iid",G["@firebase/messaging"]="fire-fcm",G["@firebase/performance"]="fire-perf",G["@firebase/remote-config"]="fire-rc",G["@firebase/storage"]="fire-gcs",G["@firebase/firestore"]="fire-fst",G["fire-js"]="fire-js",G["firebase-wrapper"]="fire-js-all",G),Ia=new va("@firebase/app"),Ea=(Object.defineProperty(Sa.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(Sa.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Sa.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Sa.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},Sa.prototype._getService=function(e,t){void 0===t&&(t=wa),this.checkDestroyed_();var n=this.container.getProvider(e);return n.isInitialized()||"EXPLICIT"!==(null===(e=n.getComponent())||void 0===e?void 0:e.instantiationMode)||n.initialize(),n.getImmediate({identifier:t})},Sa.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=wa),this.container.getProvider(e).clearInstance(t)},Sa.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ia.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},Sa.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},Sa.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Sa.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ba.create("app-deleted",{appName:this.name_})},Sa);function Sa(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=co(e),this.container=new sa(t.name),this._addComponent(new na("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}Ea.prototype.name&&Ea.prototype.options||Ea.prototype.delete||console.log("dc");var ka="8.10.1";function Ca(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;if(void 0===o.name&&(o.name=wa),"string"!=typeof(i=o.name)||!i)throw ba.create("bad-app-name",{appName:String(i)});if(Do(t,i))throw ba.create("duplicate-app",{appName:i});return o=new e(n,o,r),t[i]=o},app:i,registerVersion:function(e,t,n){var r=null!==(i=Ta[e])&&void 0!==i?i:e;n&&(r+="-"+n);var i=r.match(/\s|\//);e=t.match(/\s|\//),i||e?(n=['Unable to register library "'+r+'" with version "'+t+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&e&&n.push("and"),e&&n.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),Ia.warn(n.join(" "))):o(new na(r+"-version",(function(){return{library:r,version:t}}),"VERSION"))},setLogLevel:ma,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw ba.create("invalid-log-argument");ya(e,t)},apps:null,SDK_VERSION:ka,INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"!==t?t:null}}};function i(e){if(!Do(t,e=e||wa))throw ba.create("no-app",{appName:e});return t[e]}function o(o){var a,s=o.name;if(n.has(s))return Ia.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;n.set(s,o),"PUBLIC"===o.type&&(a=function(e){if("function"!=typeof(e=void 0===e?i():e)[s])throw ba.create("invalid-app-argument",{appName:s});return e[s]()},void 0!==o.serviceProps&&lo(a,o.serviceProps),r[s]=a,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])});for(var u=0,c=Object.keys(t);u<c.length;u++){var l=c[u];t[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}H=function e(){var t=Ca(Ea);return t.INTERNAL=Yi(Yi({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){lo(t,e)},createSubscribe:Vo,ErrorFactory:No,deepExtend:lo}),t}();var Na=(Aa.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){return function(e){return"VERSION"===(null==(e=e.getComponent())?void 0:e.type)}(e)?(e=e.getImmediate()).library+"/"+e.version:null})).filter((function(e){return e})).join(" ")},Aa);function Aa(e){this.container=e}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Ia.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),($s=self.firebase.SDK_VERSION)&&0<=$s.indexOf("LITE")&&Ia.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var xa=H.initializeApp;H.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return mo()&&Ia.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),xa.apply(void 0,e)};var Pa,Ra,Oa=H;(Pa=Oa).INTERNAL.registerComponent(new na("platform-logger",(function(e){return new Na(e)}),"PRIVATE")),Pa.registerVersion(_a,"0.6.30",Ra),Pa.registerVersion("fire-js",""),Oa.registerVersion("firebase","8.10.1","app"),Oa.SDK_VERSION="8.10.1",function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return r?r.call(e):{next:(t=e,n=0,function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}})}}!function(e,n){if(n){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[e=e[e.length-1]]))!=o&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){var t;null==this.a&&(this.a=[],(t=this).c((function(){t.g()}))),this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){o(t)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).Ra(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t((function(e,t){for(var i=[],a=0;i.push(void 0),a++,o(r.value).Ra(function(t){return function(n){i[t]=n,0==--a&&e(i)}}(i.length-1),t),!(r=n.next()).done;);}))},t}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&s.test(e)?e:""}function l(){}function h(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){return"function"==h(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function _(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function w(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function T(e){return e}function I(e,t,n){this.code=k+e,this.message=t||C[e]||"",this.a=n||null}function E(e){var t=e&&e.code;return t?new I(t.substring(k.length),e.message,e.serverResponse):null}w(I,Error),I.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},I.prototype.toJSON=function(){return this.w()};var S,k="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(e){for(var t in N)if(N[t].id===e)return{firebaseEndpoint:(e=N[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function x(e){if(e)try{return e.$goog_Thenable}catch(e){return}}function P(e){var t;Error.captureStackTrace?Error.captureStackTrace(this,P):(t=Error().stack)&&(this.stack=t),e&&(this.message=String(e))}function R(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");P.call(this,n+e[r])}function O(e){throw new R("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function D(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function L(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function M(){this.b=this.a=null}S=A("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",D.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e};var F=new D((function(){return new j}),(function(e){e.reset()}));function j(){this.next=this.b=this.a=null}M.prototype.add=function(e,t){var n=F.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},q=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},V=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n,r=e.length,i=[],o=0,a="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in a&&(n=a[s],t.call(void 0,n,s,e)&&(i[o++]=n));return i},B=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},K=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function z(e,t){return 0<=U(e,t)}function W(e,t){var n;return(n=0<=(t=U(e,t)))&&Array.prototype.splice.call(e,t,1),n}function H(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length}))}function G(){return Array.prototype.concat.apply([],arguments)}function Q(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var Y,$=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},X=/&/g,J=/</g,Z=/>/g,ee=/"/g,te=/'/g,ne=/\x00/g,re=/[\x00&<>"']/;function ie(e,t){return-1!=e.indexOf(t)}function oe(e,t){return e<t?-1:t<e?1:0}var ae=a.navigator;function se(e){return ie(Y,e)}function ue(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ce(e){for(var t in e)return;return 1}function le(e){var t,n={};for(t in e)n[t]=e[t];return n}Y=ae&&(ae=ae.userAgent)?ae:"";var he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(e){for(var t,n,r=1;r<arguments.length;r++){for(t in n=arguments[r])e[t]=n[t];for(var i=0;i<he.length;i++)t=he[i],Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}}function de(e,t){e:{try{var n,r=e&&e.ownerDocument;if((n=(n=r&&(r.defaultView||r.parentWindow))||a).Element&&n.Location){var i=n;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(p(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function pe(e,t){this.a=e===ye&&t||"",this.b=me}function ve(e){return e instanceof pe&&e.constructor===pe&&e.b===me?e.a:(O("expected object of type Const, got '"+e+"'"),"type_error:Const")}pe.prototype.ta=!0,pe.prototype.sa=function(){return this.a},pe.prototype.toString=function(){return"Const{"+this.a+"}"};var ge,me={},ye={};function be(){if(void 0===ge){var e=null,t=a.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(e){a.console&&a.console.error(e.message)}ge=e}else ge=e}return ge}function _e(e,t){this.a=t===Se?e:""}function we(e){return e instanceof _e&&e.constructor===_e?e.a:(O("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}function Te(e,t){var n,r=ve(e);if(!Ee.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(Ie,(function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof pe?ve(e):encodeURIComponent(String(e))})),n=e,new _e(n=(e=be())?e.createScriptURL(n):n,Se)}_e.prototype.ta=!0,_e.prototype.sa=function(){return this.a.toString()},_e.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ie=/%{(\w+)}/g,Ee=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Se={};function ke(e,t){this.a=t===Oe?e:""}function Ce(e){return e instanceof ke&&e.constructor===ke?e.a:(O("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}ke.prototype.ta=!0,ke.prototype.sa=function(){return this.a.toString()},ke.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ne=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ae=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,xe=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pe(e){return e instanceof ke?e:(e="object"==typeof e&&e.ta?e.sa():String(e),e=xe.test(e)||(t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Ae))&&Ne.test(t[1])?new ke(e,Oe):null);var t}function Re(e){return e instanceof ke?e:(e="object"==typeof e&&e.ta?e.sa():String(e),new ke(e=xe.test(e)?e:"about:invalid#zClosurez",Oe))}var Oe={},De=new ke("about:invalid#zClosurez",Oe);function Le(e,t,n){this.a=n===Me?e:""}Le.prototype.ta=!0,Le.prototype.sa=function(){return this.a.toString()},Le.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Me={};function Fe(e,t,n,r){return e=e instanceof ke?e:Re(e),t=t||a,n=n instanceof pe?ve(n):n||"",t.open(Ce(e),n,r,void 0)}function je(e){for(var t=e.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<t.length;)n+=t.shift()+r.shift();return n+t.join("%s")}function Ue(e){return re.test(e)&&-1!=(e=-1!=(e=-1!=(e=-1!=(e=-1!=(e=-1!=e.indexOf("&")?e.replace(X,"&amp;"):e).indexOf("<")?e.replace(J,"&lt;"):e).indexOf(">")?e.replace(Z,"&gt;"):e).indexOf('"')?e.replace(ee,"&quot;"):e).indexOf("'")?e.replace(te,"&#39;"):e).indexOf("\0")&&(e=e.replace(ne,"&#0;")),e}function qe(e){return qe[" "](e),e}qe[" "]=l;var Ve,Be=se("Opera"),Ke=se("Trident")||se("MSIE"),ze=se("Edge"),We=ze||Ke,He=se("Gecko")&&!(ie(Y.toLowerCase(),"webkit")&&!se("Edge"))&&!(se("Trident")||se("MSIE"))&&!se("Edge"),Ge=ie(Y.toLowerCase(),"webkit")&&!se("Edge");function Qe(){var e=a.document;return e?e.documentMode:void 0}var Ye="",$e=($e=Y,He?/rv:([^\);]+)(\)|;)/.exec($e):ze?/Edge\/([\d\.]+)/.exec($e):Ke?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($e):Ge?/WebKit\/(\S+)/.exec($e):Be?/(?:Version)[ \/]?(\S+)/.exec($e):void 0);$e&&(Ye=$e?$e[1]:""),Ve=Ke&&null!=($e=Qe())&&$e>parseFloat(Ye)?String($e):Ye;var Xe={};function Je(e){return t=e,n=function(){for(var t=0,n=$(String(Ve)).split("."),r=$(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++)for(var a=n[o]||"",s=r[o]||"";a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=a[0].length||0!=s[0].length)&&(t=oe(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||oe(0==a[2].length,0==s[2].length)||oe(a[2],s[2]),a=a[3],s=s[3],0==t););return 0<=t},r=Xe,Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=n(t);var t,n,r}var Ze=a.document&&Ke&&(Qe()||parseInt(Ve,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(e){}var et=!Ke||9<=Number(Ze);function tt(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function nt(e,t){ue(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ot.hasOwnProperty(n)?e.setAttribute(ot[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var rt,it,ot={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function at(){var e,t=arguments,n=document,r=String(t[0]),i=t[1];return!et&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ue(i.name),'"'),i.type&&(r.push(' type="',Ue(i.type),'"'),fe(e={},i),delete e.type,i=e),r.push(">"),r=r.join("")),r=st(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):nt(r,i)),2<t.length&&function(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(d(o)){a="function"==typeof o.item;break e}}a=!1}q(a?Q(o):o,r)}}}(n,r,t),r}function st(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function ut(e){a.setTimeout((function(){throw e}),0)}function ct(e,t){it||function(){var e;it=a.Promise&&a.Promise.resolve?(e=a.Promise.resolve(void 0),function(){e.then(ft)}):function(){var e=ft;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!se("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(rt=rt||function(){var e=a.MessageChannel;if(void 0===(e=void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!se("Presto")?function(){var e=st(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=b((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}:e)||se("Trident")||se("MSIE"))return function(e){a.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){var e;void 0!==n.next&&(e=(n=n.next).Hb,n.Hb=null,e())},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}())(e):a.setImmediate(e)}}(),lt||(it(),lt=!0),ht.add(e,t)}var lt=!1,ht=new M;function ft(){for(var e,t;t=e=void 0,t=null,(e=ht).a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t;){try{t.a.call(t.b)}catch(e){ut(e)}L(F,t)}lt=!1}function dt(e,t){if(this.a=pt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=l)try{var n=this;e.call(t,(function(e){kt(n,vt,e)}),(function(e){if(!(e instanceof Ot))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}kt(n,gt,e)}))}catch(e){kt(this,gt,e)}}var pt=0,vt=2,gt=3;function mt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}mt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var yt=new D((function(){return new mt}),(function(e){e.reset()}));function bt(e,t,n){var r=yt.get();return r.g=e,r.b=t,r.f=n,r}function _t(e){if(e instanceof dt)return e;var t=new dt(l);return kt(t,vt,e),t}function wt(e){return new dt((function(t,n){n(e)}))}function Tt(e,t,n){Ct(e,t,n,null)||ct(_(t,e))}function It(e){return new dt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Tt(e[o],_(i,o,!0),_(i,o,!1));else t(r)}))}function Et(e,t){e.b||e.a!=vt&&e.a!=gt||Nt(e),e.f?e.f.next=t:e.b=t,e.f=t}function St(e,t,n,r){var i=bt(null,null,null);return i.a=new dt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(n){o(n)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Ot?o(t):e(i)}catch(t){o(t)}}:o})),Et(i.a.c=e,i),i.a}function kt(e,t,n){var r,i;e.a==pt&&(e===n&&(t=gt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ct(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Nt(e),t!=gt||n instanceof Ot||(i=n,(r=e).g=!0,ct((function(){r.g&&Rt.call(null,i)})))))}function Ct(e,t,n,r){if(e instanceof dt)return Et(e,bt(t||l,n||null,r)),1;if(x(e))return e.then(t,n,r),1;if(p(e))try{var i=e.then;if(d(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),1}catch(e){return n.call(r,e),1}}function Nt(e){e.h||(e.h=!0,ct(e.gc,e))}function At(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function xt(e,t,n,r){if(n==gt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Pt(t,n,r);else try{t.c?t.g.call(t.f):Pt(t,n,r)}catch(e){Rt.call(null,e)}L(yt,t)}function Pt(e,t,n){t==vt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}dt.prototype.then=function(e,t,n){return St(this,d(e)?e:null,d(t)?t:null,n)},dt.prototype.$goog_Thenable=!0,(e=dt.prototype).oa=function(e,t){return(e=bt(e,e,t)).c=!0,Et(this,e),this},e.o=function(e,t){return St(this,null,e,t)},e.cancel=function(e){var t;this.a==pt&&(t=new Ot(e),ct((function(){!function e(t,n){if(t.a==pt)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,!((o=s.a==t?s:o)&&1<i)));s=s.next)o||(a=s);o&&(r.a==pt&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):At(r),xt(r,o,gt,n)))}t.c=null}else kt(t,gt,n)}(this,t)}),this))},e.$c=function(e){this.a=pt,kt(this,vt,e)},e.ad=function(e){this.a=pt,kt(this,gt,e)},e.gc=function(){for(var e;e=At(this);)xt(this,e,this.a,this.i);this.h=!1};var Rt=ut;function Ot(e){P.call(this,e)}function Dt(){this.ya=this.ya,this.pa=this.pa}w(Ot,P);var Lt=0,Mt={};function Ft(e){e.ya||(e.ya=!0,e.Da(),0==Lt)||(e=Object.prototype.hasOwnProperty.call(e,v)&&e[v]||(e[v]=++g),delete Mt[e])}Dt.prototype.ya=!(Ot.prototype.name="cancel"),Dt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var jt=Object.freeze||function(e){return e},Ut=!Ke||9<=Number(Ze),qt=Ke&&!Je("9"),Vt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function Bt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Kt(e,t){if(Bt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(He){e:{try{qe(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:zt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}Bt.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Kt,Bt);var zt=jt({2:"touch",3:"pen",4:"mouse"});Kt.prototype.preventDefault=function(){Kt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,qt)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},Kt.prototype.g=function(){return this.a};var Wt="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function Gt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ht,this.wa=this.Qa=!1}function Qt(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function Yt(e){this.src=e,this.a={},this.b=0}function $t(e,t){var n=t.type;n in e.a&&W(e.a[n],t)&&(Qt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Xt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}Yt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Xt(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):((t=new Gt(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var Jt="closure_lm_"+(1e6*Math.random()|0),Zt={};function en(e,t,n,r,i){if(r&&r.once)nn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)en(e,t[o],n,r,i);else n=fn(n),e&&e[Wt]?pn(e,t,n,p(r)?!!r.capture:!!r,i):tn(e,t,n,!1,r,i)}function tn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s,u=p(i)?!!i.capture:!!i,c=ln(e);if(c||(e[Jt]=c=new Yt(e)),!(n=c.add(t,n,r,u,o)).proxy)if(a=cn,s=Ut?function(e){return a.call(s.src,s.listener,e)}:function(e){if(!(e=a.call(s.src,s.listener,e)))return e},(n.proxy=r=s).src=e,r.listener=n,e.addEventListener)void 0===(i=Vt?i:u)&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(an(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function nn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)nn(e,t[o],n,r,i);else n=fn(n),e&&e[Wt]?vn(e,t,n,p(r)?!!r.capture:!!r,i):tn(e,t,n,!0,r,i)}function rn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)rn(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=fn(n),e&&e[Wt]?(e=e.v,(t=String(t).toString())in e.a&&-1<(n=Xt(o=e.a[t],n,r,i))&&(Qt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):(e=e&&ln(e))&&(t=e.a[t.toString()],(n=(e=-1)<(e=t?Xt(t,n,r,i):e)?t[e]:null)&&on(n))}function on(e){var t,n,r;"number"!=typeof e&&e&&!e.wa&&((t=e.src)&&t[Wt]?$t(t.v,e):(n=e.type,r=e.proxy,t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(an(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ln(t))?($t(n,e),0==n.b&&(n.src=null,t[Jt]=null)):Qt(e)))}function an(e){return e in Zt?Zt[e]:Zt[e]="on"+e}function sn(e,t,n,r){var i=!0;if((e=ln(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=un(o,r),i=i&&!1!==o)}return i}function un(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&on(e),n.call(r,t)}function cn(e,t){if(e.wa)return!0;if(Ut)return un(e,new Kt(t,this));if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Kt(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=sn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=sn(r[i],e,!1,t),n=n&&o}return n}function ln(e){return(e=e[Jt])instanceof Yt?e:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(e){return d(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function dn(){Dt.call(this),this.v=new Yt(this),(this.bc=this).hb=null}function pn(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function vn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function gn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a,s,u=t[o];u&&!u.wa&&u.capture==n&&(a=u.listener,s=u.Wa||u.src,u.Qa&&$t(e.v,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}function mn(e,t,n){if(d(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function yn(e){var t=null;return new dt((function(n,r){-1==(t=mn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw a.clearTimeout(t),e}))}function bn(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function _n(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(f(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function wn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof wn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Tn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];In(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)In(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function In(e,t){return Object.prototype.hasOwnProperty.call(e,t)}w(dn,Dt),dn.prototype[Wt]=!0,dn.prototype.addEventListener=function(e,t,n,r){en(this,e,t,n,r)},dn.prototype.removeEventListener=function(e,t,n,r){rn(this,e,t,n,r)},dn.prototype.dispatchEvent=function(e){var t;if(n=this.hb)for(t=[];n;n=n.hb)t.push(n);var n=this.bc,r=e.type||e;if("string"==typeof e?e=new Bt(e,n):e instanceof Bt?e.target=e.target||n:(a=e,fe(e=new Bt(r,n),a)),a=!0,t)for(var i=t.length-1;0<=i;i--)var o=e.b=t[i],a=gn(o,r,!0,e)&&a;if(a=gn(o=e.b=n,r,!0,e)&&a,a=gn(o,r,!1,e)&&a,t)for(i=0;i<t.length;i++)a=gn(o=e.b=t[i],r,!1,e)&&a;return a},dn.prototype.Da=function(){if(dn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Qt(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=wn.prototype).X=function(){Tn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Tn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return In(this.b,e)?this.b[e]:t},e.set=function(e,t){In(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var En=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Sn?(this.i=void 0!==t?t:e.i,kn(this,e.c),this.l=e.l,this.a=e.a,Cn(this,e.g),this.f=e.f,Nn(this,Gn(e.b)),this.h=e.h):e&&(n=String(e).match(En))?(this.i=!!t,kn(this,n[1]||"",!0),this.l=On(n[2]||""),this.a=On(n[3]||"",!0),Cn(this,n[4]),this.f=On(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=On(n[7]||"")):(this.i=!!t,this.b=new Vn(null,this.i))}function kn(e,t,n){e.c=n?On(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Cn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Nn(e,t,n){var r,i;t instanceof Vn?(e.b=t,r=e.b,(i=e.i)&&!r.f&&(Bn(r),r.c=null,r.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zn(this,t),Hn(this,n,e))}),r)),r.f=i):(n||(t=Dn(t,Un)),e.b=new Vn(t,e.i))}function An(e,t,n){e.b.set(t,n)}function xn(e,t){return e.b.get(t)}function Pn(e){return e instanceof Sn?new Sn(e):new Sn(e,void 0)}function Rn(e,t,n,r){var i=new Sn(null,void 0);return e&&kn(i,e),t&&(i.a=t),n&&Cn(i,n),r&&(i.f=r),i}function On(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Dn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ln),e=n?e.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):e):null}function Ln(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Sn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Dn(t,Mn,!0),":");var n=this.a;return!n&&"file"!=t||(e.push("//"),(t=this.l)&&e.push(Dn(t,Mn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Dn(n,"/"==n.charAt(0)?jn:Fn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Dn(n,qn)),e.join("")},Sn.prototype.resolve=function(e){var t=new Sn(this),n=!!e.c;n?kn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Cn(t,e.g);else if(n=!!e.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=t.f.lastIndexOf("/"))&&(r=t.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(ie(i,"./")||ie(i,"/.")){r=0==i.lastIndexOf("/",0);for(var i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?t.f=r:n=""!==e.b.toString(),n?Nn(t,Gn(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Mn=/[#\/\?@]/g,Fn=/[#\?:]/g,jn=/[#\?]/g,Un=/[#\?@]/g,qn=/#/g;function Vn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Bn(e){e.a||(e.a=new wn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r,i=e[n].indexOf("="),o=null;0<=i?(r=e[n].substring(0,i),o=e[n].substring(i+1)):r=e[n],t(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Kn(e){var t=_n(e);if(void 0===t)throw Error("Keys are undefined");var n=new Vn(null,void 0);e=bn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?Hn(n,i,o):n.add(i,o)}return n}function zn(e,t){Bn(e),t=Qn(e,t),In(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,In((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Tn(e)))}function Wn(e,t){return Bn(e),t=Qn(e,t),In(e.a.b,t)}function Hn(e,t,n){zn(e,t),0<n.length&&(e.c=null,e.a.set(Qn(e,t),Q(n)),e.b+=n.length)}function Gn(e){var t=new Vn;return t.c=e.c,e.a&&(t.a=new wn(e.a),t.b=e.b),t}function Qn(e,t){return t=String(t),e.f?t.toLowerCase():t}function Yn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Zn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Zn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new $n,e,t),t.join("")}function $n(){}(e=Vn.prototype).add=function(e,t){Bn(this),this.c=null,e=Qn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Bn(this),this.a.forEach((function(n,r){q(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){Bn(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){Bn(this);var t=[];if("string"==typeof e)Wn(this,e)&&(t=G(t,this.a.get(Qn(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=G(t,e[n])}return t},e.set=function(e,t){return Bn(this),this.c=null,Wn(this,e=Qn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++)for(var r=t[n],i=encodeURIComponent(String(r)),o=(r=this.X(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}return this.c=e.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zn(e,t){t.push('"',e.replace(Jn,(function(e){var t=Xn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Xn[e]=t),t})),'"')}function er(){var e=br();return Ke&&Ze&&11==Ze||/Edge\/\d+/.test(e)}function tr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function nr(e,t){t=t||a.window;var n="about:blank";e&&(n=Ce(Pe(e)||De)),t.location.href=n}function rr(e){return!!((e=(e||br()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function ir(e){e=e||a.window;try{e.close()}catch(e){}}function or(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(t.target=r,ie(n,"crios/")&&(t.target="_blank")),gr(br())==pr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof ke?n:Pe(void 0!==n.href?n.href:String(n))||De,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((se("iPhone")&&!se("iPod")&&!se("iPad")||se("iPad")||se("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(de(a=st(document,"A"),"HTMLAnchorElement"),t=t instanceof ke?t:Re(t),a.href=Ce(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Fe("",r,n,a),e=Ce(t),a&&(We&&ie(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ue(e)+'">',e=new Le(e=(r=be())?r.createHTML(e):e,0,Me),r=a.document)&&(r.write((o=e)instanceof Le&&o.constructor===Le?o.a:(O("expected object of type SafeHtml, got '"+o+"' of type "+h(o)),"type_error:SafeHtml")),r.close())):(a=Fe(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ur(){var e=null;return new dt((function(t){"complete"==a.document.readyState?t():(e=function(){t()},nn(window,"load",e))})).o((function(t){throw rn(window,"load",e),t}))}function cr(e){return e=e||br(),!("file:"!==Er()&&"ionic:"!==Er()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var e=a.window;try{return e&&e!=e.top}catch(e){return}}function hr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function fr(){return Oa.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Oa.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function dr(){var e=fr();return"ReactNative"===e||"Node"===e}var pr="Firefox",vr="Chrome";function gr(e){var t=e.toLowerCase();return ie(t,"opera/")||ie(t,"opr/")||ie(t,"opios/")?"Opera":ie(t,"iemobile")?"IEMobile":ie(t,"msie")||ie(t,"trident/")?"IE":ie(t,"edge/")?"Edge":ie(t,"firefox/")?pr:ie(t,"silk/")?"Silk":ie(t,"blackberry")?"Blackberry":ie(t,"webos")?"Webos":!ie(t,"safari/")||ie(t,"chrome/")||ie(t,"crios/")||ie(t,"android")?!ie(t,"chrome/")&&!ie(t,"crios/")||ie(t,"edge/")?ie(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":vr:"Safari"}var mr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function yr(e,t){t=t||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=fr())?r=gr(i=br()):"Worker"===r&&(r=gr(i=br())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function br(){return a.navigator&&a.navigator.userAgent||""}function _r(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length?void 0:t}function wr(){try{var e=a.localStorage,t=Ar();if(e)return e.setItem(t,"1"),e.removeItem(t),!er()||!!a.indexedDB}catch(e){return hr()&&!!a.indexedDB}return!1}function Tr(){return(Ir()||"chrome-extension:"===Er()||cr())&&!dr()&&wr()&&!hr()}function Ir(){return"http:"===Er()||"https:"===Er()}function Er(){return a.location&&a.location.protocol||null}function Sr(e){return!rr(e=e||br())&&gr(e)!=pr}function kr(e){return void 0===e?null:Yn(e)}function Cr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Nr(e){if(null!==e)return JSON.parse(e)}function Ar(e){return e||Math.floor(1e9*Math.random()).toString()}function xr(e){return"Safari"!=gr(e=e||br())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Rr(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=br(),t=fr(),this.b=rr(e)||"ReactNative"===t}function Or(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Dr(){var e=a.document,t=null;return Or()||!e?_t():new dt((function(n){t=function(){Or()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}function Lr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Mr(){return _r("fireauth.oauthhelper",a)||_r("fireauth.iframe",a)}Rr.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!Ir()&&"chrome-extension:"!==Er()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Fr,jr={};function Ur(e){jr[e]||(jr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var qr={};Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Fr=2==qr.abcd}catch(e){Fr=!1}function Vr(e,t,n){Fr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Br(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Vr(e,n,t[n])}function Kr(e){var t={};return Br(t,e),t}function zr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Vr(t,n,zr(e[n]));return t}function Wr(e){var t=e&&(e[$r]?"phone":null);if(!(t&&e&&e[Yr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",e[Yr]),Vr(this,"displayName",e[Gr]||null);var n=null;Vr(this,"enrollmentTime",n=e[Qr]?new Date(e[Qr]).toUTCString():n),Vr(this,"factorId",t)}function Hr(e){try{var t=new Xr(e)}catch(e){t=null}return t}Wr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Gr="displayName",Qr="enrolledAt",Yr="mfaEnrollmentId",$r="phoneInfo";function Xr(e){Wr.call(this,e),Vr(this,"phoneNumber",e[$r])}function Jr(e){var t={},n=e[ni],r=e[ii],i=e[oi];if(e=Hr(e[ri]),!i||i!=ei&&i!=ti&&!n||i==ti&&!r||i==Zr&&!e)throw Error("Invalid checkActionCode response!");i==ti?(t[si]=n||null,t[ci]=n||null,t[ai]=r):(t[si]=r||null,t[ci]=r||null,t[ai]=n||null),t[ui]=e||null,Vr(this,hi,i),Vr(this,li,zr(t))}w(Xr,Wr),Xr.prototype.w=function(){var e=Xr.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var Zr="REVERT_SECOND_FACTOR_ADDITION",ei="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ni="email",ri="mfaInfo",ii="newEmail",oi="requestType",ai="email",si="fromEmail",ui="multiFactorInfo",ci="previousEmail",li="data",hi="operation";function fi(e){var t=xn(e=Pn(e),di)||null,n=xn(e,pi)||null,r=(r=xn(e,mi)||null)&&bi[r]||null;if(!t||!n||!r)throw new I("argument-error",di+", "+pi+"and "+mi+" are required in a valid action code URL.");Br(this,{apiKey:t,operation:r,code:n,continueUrl:xn(e,vi)||null,languageCode:xn(e,gi)||null,tenantId:xn(e,yi)||null})}var di="apiKey",pi="oobCode",vi="continueUrl",gi="languageCode",mi="mode",yi="tenantId",bi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Zr,signIn:ei,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function _i(e){try{return new fi(e)}catch(e){return null}}function wi(e){if(void 0===(t=e[ki]))throw new I("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new I("invalid-continue-uri");if(this.h=t,this.b=this.a=null,this.g=!1,(r=e[Ti])&&"object"==typeof r){var t=r[Ai],n=r[Ci],r=r[Ni];if("string"==typeof t&&t.length){if(this.a=t,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ni+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==t)throw new I("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",Ti+" property must be a non null object when specified.");if(this.f=null,(t=e[Si])&&"object"==typeof t){if("string"==typeof(t=t[xi])&&t.length)this.f=t;else if(void 0!==t)throw new I("argument-error",xi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new I("argument-error",Si+" property must be a non null object when specified.");if(void 0!==(t=e[Ei])&&"boolean"!=typeof t)throw new I("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Ii])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new I("argument-error",Ii+" property must be a non empty string when specified.");this.i=e||null}var Ti="android",Ii="dynamicLinkDomain",Ei="handleCodeInApp",Si="iOS",ki="url",Ci="installApp",Ni="minimumVersion",Ai="packageName",xi="bundleId";function Pi(e){var t,n={};for(t in n.continueUrl=e.h,n.canHandleCodeInApp=e.c,(n.androidPackageName=e.a)&&(n.androidMinimumVersion=e.b,n.androidInstallApp=e.g),n.iOSBundleId=e.f,n.dynamicLinkDomain=e.i,n)null===n[t]&&delete n[t];return n}var Ri=null;function Oi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Ri[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Ri){Ri={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ri[o]&&(Ri[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Di(e){var t=Mi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Li(e){try{return new Di(e)}catch(e){return null}}function Mi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=Oi(e);for(e=[],n=t=0;t<r.length;){var i,o,a,s=r[t++];s<128?e[n++]=String.fromCharCode(s):191<s&&s<224?(i=r[t++],e[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(a=((7&s)<<18|(63&(i=r[t++]))<<12|(63&(o=r[t++]))<<6|63&r[t++])-65536,e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(1023&a))):(i=r[t++],o=r[t++],e[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o))}return JSON.parse(e.join(""))}catch(e){}return null}Di.prototype.T=function(){return this.f},Di.prototype.l=function(){return this.c},Di.prototype.toString=function(){return this.h};var Fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ji=["client_id","response_type","scope","redirect_uri","state"],Ui={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:ji},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:ji},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:ji},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Fi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function qi(e){for(var t in Ui)if(Ui[t].fa==e)return Ui[t];return null}function Vi(e){var t={};t["facebook.com"]=Hi,t["google.com"]=Qi,t["github.com"]=Gi,t["twitter.com"]=Yi;var n=e&&e[Ki];try{if(n)return new(t[n]||Wi)(e);if(void 0!==e[Bi])return new zi(e)}catch(e){}return null}var Bi="idToken",Ki="providerId";function zi(e){var t,n=e[Ki];if(n||!e[Bi]||(t=Li(e[Bi]))&&t.b&&(n=t.b),!n)throw Error("Invalid additional user info!");t=!1,void 0!==e.isNewUser?t=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(t=!0),Vr(this,"providerId",n="anonymous"==n||"custom"==n?null:n),Vr(this,"isNewUser",t)}function Wi(e){zi.call(this,e),Vr(this,"profile",zr((e=Nr(e.rawUserInfo||"{}"))||{}))}function Hi(e){if(Wi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(e){if(Wi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function Qi(e){if(Wi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(e){if(Wi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",e.screenName||null)}function $i(e){var t=xn(r=Pn(e),"link"),n=xn(Pn(t),"link"),r=xn(r,"deep_link_id");return xn(Pn(r),"link")||r||n||t||e}function Xi(e,t){if(!e&&!t)throw new I("internal-error","Internal assert: no raw session string available");if(e&&t)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?Ji:Zi}w(Wi,zi),w(Hi,Wi),w(Gi,Wi),w(Qi,Wi),w(Yi,Wi);var Ji="enroll",Zi="signin";function eo(){}function to(e,t){return e.then((function(e){if(e[Wa]){var n=Li(e[Wa]);if(!n||t!=n.i)throw new I("user-mismatch");return e}throw new I("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==k+"user-not-found"?new I("user-mismatch"):e}))}function no(e,t){if(!t)throw new I("internal-error","failed to construct a credential");this.a=t,Vr(this,"providerId",e),Vr(this,"signInMethod",e)}function ro(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function io(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new no(e.providerId,e.pendingToken)}catch(e){}return null}function oo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Vr(this,"idToken",t.idToken),t.accessToken&&Vr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Vr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Vr(this,"accessToken",t.oauthToken),Vr(this,"secret",t.oauthTokenSecret)}Vr(this,"providerId",e),Vr(this,"signInMethod",n)}function ao(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Kn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function so(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new oo(e.providerId,t,e.signInMethod)}catch(e){}}return null}function uo(e,t){this.Qc=t||[],Br(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(qi(e)||{}).Ja||null,this.pb=null}function co(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');uo.call(this,e,[])}function lo(e){uo.call(this,e,ji),this.a=[]}function ho(){lo.call(this,"facebook.com")}function fo(e){if(!e)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new ho).credential({accessToken:t})}function po(){lo.call(this,"github.com")}function vo(e){if(!e)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new po).credential({accessToken:t})}function go(){lo.call(this,"google.com"),this.Ca("profile")}function mo(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new go).credential({idToken:n,accessToken:t})}function yo(){uo.call(this,"twitter.com",Fi)}function bo(e,t){var n=e;if(!(n=p(n)?n:{oauthToken:e,oauthTokenSecret:t}).oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new oo("twitter.com",n,"twitter.com")}function _o(e,t,n){this.a=e,this.f=t,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===To.EMAIL_LINK_SIGN_IN_METHOD?To.EMAIL_LINK_SIGN_IN_METHOD:To.EMAIL_PASSWORD_SIGN_IN_METHOD)}function wo(e){return e&&e.email&&e.password?new _o(e.email,e.password,e.signInMethod):null}function To(){Br(this,{providerId:"password",isOAuthProvider:!1})}function Io(e,t){if(!(t=Eo(t)))throw new I("argument-error","Invalid email link!");return new _o(e,t.code,To.EMAIL_LINK_SIGN_IN_METHOD)}function Eo(e){return(e=_i(e=$i(e)))&&e.operation===ei?e:null}function So(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new I("internal-error");this.a=e,Vr(this,"providerId","phone"),this.fa="phone",Vr(this,"signInMethod","phone")}function ko(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new So(t)}return null}function Co(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function No(e){try{this.a=e||Oa.auth()}catch(e){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(e,t){if(!e)throw new I("missing-verification-id");if(!t)throw new I("missing-verification-code");return new So({fb:e,eb:t})}function xo(e){if(e.temporaryProof&&e.phoneNumber)return new So({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return mo(o,n);case"facebook.com":return fo(n);case"github.com":return vo(n);case"twitter.com":return bo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new no(t,a):new oo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new lo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function Po(e){if(!e.isOAuthProvider)throw new I("invalid-oauth-provider")}function Ro(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Oo(e){return(e=e||{}).type?new Ro(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&E(e.error),e.postBody,e.tenantId):null}function Do(){this.b=null,this.a=[]}Xi.prototype.Ha=function(){return this.a?_t(this.a):_t(this.b)},Xi.prototype.w=function(){return this.type==Ji?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},eo.prototype.ka=function(){},eo.prototype.b=function(){},eo.prototype.c=function(){},eo.prototype.w=function(){},no.prototype.ka=function(e){return ds(e,ro(this))},no.prototype.b=function(e,t){var n=ro(this);return n.idToken=t,ps(e,n)},no.prototype.c=function(e,t){return to(vs(e,ro(this)),t)},no.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},oo.prototype.ka=function(e){return ds(e,ao(this))},oo.prototype.b=function(e,t){var n=ao(this);return n.idToken=t,ps(e,n)},oo.prototype.c=function(e,t){return to(vs(e,ao(this)),t)},oo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},uo.prototype.Ka=function(e){return this.Jb=le(e),this},w(co,uo),w(lo,uo),lo.prototype.Ca=function(e){return z(this.a,e)||this.a.push(e),this},lo.prototype.Rb=function(){return Q(this.a)},lo.prototype.credential=function(e,t){if(!(t=p(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!t.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new oo(this.providerId,t,this.providerId)},w(ho,lo),Vr(ho,"PROVIDER_ID","facebook.com"),Vr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(po,lo),Vr(po,"PROVIDER_ID","github.com"),Vr(po,"GITHUB_SIGN_IN_METHOD","github.com"),w(go,lo),Vr(go,"PROVIDER_ID","google.com"),Vr(go,"GOOGLE_SIGN_IN_METHOD","google.com"),w(yo,uo),Vr(yo,"PROVIDER_ID","twitter.com"),Vr(yo,"TWITTER_SIGN_IN_METHOD","twitter.com"),_o.prototype.ka=function(e){return this.signInMethod==To.EMAIL_LINK_SIGN_IN_METHOD?$s(e,Is,{email:this.a,oobCode:this.f}):$s(e,Ws,{email:this.a,password:this.f})},_o.prototype.b=function(e,t){return this.signInMethod==To.EMAIL_LINK_SIGN_IN_METHOD?$s(e,Es,{idToken:t,email:this.a,oobCode:this.f}):$s(e,Fs,{idToken:t,email:this.a,password:this.f})},_o.prototype.c=function(e,t){return to(this.ka(e),t)},_o.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Br(To,{PROVIDER_ID:"password"}),Br(To,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(To,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ka=function(e){return e.gb(Co(this))},So.prototype.b=function(e,t){var n=Co(this);return n.idToken=t,$s(e,Gs,n)},So.prototype.c=function(e,t){var n=Co(this);return n.operation="REAUTH",to(e=$s(e,Qs,n),t)},So.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},No.prototype.gb=function(e,t){var n=this.a.a;return _t(t.verify()).then((function(r){if("string"!=typeof r)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==t.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var i=p(e)?e.session:null,o=p(e)?e.phoneNumber:e;return(i=i&&i.type==Ji?i.Ha().then((function(e){return $s(n,Us,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then((function(e){return e.phoneSessionInfo.sessionInfo}))})):i&&i.type==Zi?i.Ha().then((function(t){return t={mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},$s(n,qs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))})):$s(n,Ls,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}))}))},Br(No,{PROVIDER_ID:"phone"}),Br(No,{PHONE_SIGN_IN_METHOD:"phone"}),Ro.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Ro.prototype.T=function(){return this.h},Ro.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Lo,Mo=null;function Fo(e){var t="unauthorized-domain",n=void 0,r=Pn(e);e=r.a,"chrome-extension"==(r=r.c)?n=je("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=je("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",I.call(this,t,n)}function jo(e,t,n){I.call(this,e,n),(e=t||{}).Kb&&Vr(this,"email",e.Kb),e.ea&&Vr(this,"phoneNumber",e.ea),e.credential&&Vr(this,"credential",e.credential),e.$b&&Vr(this,"tenantId",e.$b)}function Uo(e){if(e.code){var t=e.code||"";0==t.indexOf(k)&&(t=t.substring(k.length));var n={credential:xo(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new I(t,e.message||void 0);return new jo(t,n,e.message)}return null}function qo(){}function Vo(e){return e.c||(e.c=e.b())}function Bo(){}function Ko(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function zo(){}function Wo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Ho(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Go(e,t,n){this.reset(e,t,n,void 0,void 0)}function Qo(e){this.f=e,this.b=this.c=this.a=null}function Yo(e,t){this.name=e,this.value=t}w(Fo,I),w(jo,I),jo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&fe(e,t),e},jo.prototype.toJSON=function(){return this.w()},qo.prototype.c=null,w(Bo,qo),Bo.prototype.a=function(){var e=Ko(this);return e?new ActiveXObject(e):new XMLHttpRequest},Bo.prototype.b=function(){var e={};return Ko(this)&&(e[0]=!0,e[1]=!0),e},Lo=new Bo,w(zo,qo),zo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Wo;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(e=Wo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ho(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",Ho(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,Ho(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Go.prototype.a=null,Go.prototype.reset=function(e,t,n,r,i){delete this.a},Yo.prototype.toString=function(){return this.name};var $o=new Yo("SEVERE",1e3),Xo=new Yo("WARNING",900),Jo=new Yo("CONFIG",700),Zo=new Yo("FINE",500);Qo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c||(t.a?e(t.a):(O("Root logger has no level set."),null))}(this).value)for(d(t)&&(t=t()),e=new Go(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var ea,ta={},na=null;function ra(e){var t,n,r;return na||(na=new Qo(""),(ta[""]=na).c=Jo),(t=ta[e])||(t=new Qo(e),r=e.lastIndexOf("."),n=e.substr(r+1),(r=ra(e.substr(0,r))).b||(r.b={}),(r.b[n]=t).a=r,ta[e]=t),t}function ia(e,t){e&&e.log(Zo,t,void 0)}function oa(e){this.f=e}function aa(e){dn.call(this),this.u=e,this.h=void 0,this.readyState=sa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ra("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(oa,qo),oa.prototype.a=function(){return new aa(this.f)},oa.prototype.b=(ea={},function(){return ea}),w(aa,dn);var sa=0;function ua(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function ca(e){e.readyState=4,e.g=null,e.c=null,e.m=null,la(e)}function la(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ha(e){dn.call(this),this.headers=new wn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=fa,this.u=this.S=!1}(e=aa.prototype).open=function(e,t){if(this.readyState!=sa)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,la(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ca(this)),this.readyState=sa},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,la(this)),this.a&&(this.readyState=3,la(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,ua(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){var t;this.a&&((t=this.m.decode(e.value||new Uint8Array(0),{stream:!e.done}))&&(this.response=this.responseText+=t),(e.done?ca:la)(this),3==this.readyState&&ua(this))},e.tc=function(e){this.a&&(this.response=this.responseText=e,ca(this))},e.sc=function(e){this.a&&(this.response=e,ca(this))},e.Va=function(e){var t=this.i;t&&t.log(Xo,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&ca(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b)return(e=this.i)&&e.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),"";for(var e=[],t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),w(ha,dn);var fa="";ha.prototype.b=ra("goog.net.XhrIo");var da=/^https?$/i,pa=["POST","PUT"];function va(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=(e.D||Lo).a(),e.C=e.D?Vo(e.D):Vo(Lo),e.a.onreadystatechange=b(e.Wb,e);try{ia(e.b,Ea(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){return ia(e.b,Ea(e,"Error opening Xhr: "+t.message)),void ma(e,t)}t=r||"";var o,s=new wn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)q(e,t,void 0);else for(var n=_n(e),r=bn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){s.set(t,e)})),i=function(e){e:{for(var t=ga,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:"string"==typeof e?e.charAt(t):e[t]}(s.Y()),r=a.FormData&&t instanceof a.FormData,!z(pa,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{wa(e),0<e.g&&(e.u=(o=e.a,Ke&&Je(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ia(e.b,Ea(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=b(e.Ma,e)):e.s=mn(e.Ma,e.g,e)),ia(e.b,Ea(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ia(e.b,Ea(e,"Send error: "+t.message)),ma(e,t)}}function ga(e){return"content-type"==e.toLowerCase()}function ma(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ya(e),_a(e)}function ya(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ba(e){if(e.c&&void 0!==o)if(e.C[1]&&4==Ta(e)&&2==Ia(e))ia(e.b,Ea(e,"Local request error detected and ignored"));else if(e.i&&4==Ta(e))mn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ta(e)){ia(e.b,Ea(e,"Request complete")),e.c=!1;try{var t,n,r,i,s=Ia(e);e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}if((t=u)||((n=0===s)&&(!(i=String(e.l).match(En)[1]||null)&&a.self&&a.self.location&&(i=(r=a.self.location.protocol).substr(0,r.length-1)),n=!da.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Ta(e)?e.a.statusText:""}catch(t){ia(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+Ia(e)+"]",ya(e)}}finally{_a(e)}}}function _a(e,t){if(e.a){wa(e);var n=e.a,r=e.C[0]?l:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log($o,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function wa(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(a.clearTimeout(e.s),e.s=null)}function Ta(e){return e.a?e.a.readyState:0}function Ia(e){try{return 2<Ta(e)?e.a.status:-1}catch(e){return-1}}function Ea(e,t){return t+" ["+e.P+" "+e.l+" "+Ia(e)+"]"}function Sa(e){var t=Fa;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ka(e,t,n){e.a=!0,e.c=n,e.f=!t,xa(e)}function Ca(e){if(e.a){if(!e.v)throw new Pa;e.v=!1}}function Na(e,t,n,r){e.g.push([t,n,r]),e.a&&xa(e)}function Aa(e){return K(e.g,(function(e){return d(e[1])}))}function xa(e){var t;e.h&&e.a&&Aa(e)&&(n=e.h,(t=La[n])&&(a.clearTimeout(t.a),delete La[n]),e.h=0),e.b&&(e.b.l--,delete e.b);for(var n=e.c,r=t=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var u=i.call(s||e.s,n);void 0!==u&&(e.f=e.f&&(u==n||u instanceof Error),e.c=n=u),(x(n)||"function"==typeof a.Promise&&n instanceof a.Promise)&&(r=!0,e.i=!0)}catch(r){n=r,e.f=!0,Aa(e)||(t=!0)}}e.c=n,r&&(u=b(e.m,e,!0),r=b(e.m,e,!1),n instanceof Sa?(Na(n,u,r),n.C=!0):n.then(u,r)),t&&(n=new Da(n),La[n.a]=n,e.h=n.a)}function Pa(){P.call(this)}function Ra(){P.call(this)}function Da(e){this.a=a.setTimeout(b(this.c,this),0),this.b=e}(e=ha.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ia(this.b,Ea(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ia(this.b,Ea(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_a(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),_a(this,!0)),ha.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?ba(this):this.Jc())},e.Jc=function(){ba(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log($o,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ia(this.b,"Can not get response: "+e.message),null}},Sa.prototype.cancel=function(e){var t;this.a?this.c instanceof Sa&&this.c.cancel():(this.b&&(t=this.b,delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Ra,Ca(this),ka(this,!1,e)))},Sa.prototype.m=function(e,t){this.i=!1,ka(this,e,t)},Sa.prototype.then=function(e,t,n){var r,i,o=new dt((function(e,t){r=e,i=t}));return Na(this,r,(function(e){e instanceof Ra?o.cancel():i(e)})),o.then(e,t,n)},Sa.prototype.$goog_Thenable=!0,w(Pa,P),Pa.prototype.message="Deferred has already fired",Pa.prototype.name="AlreadyCalledError",w(Ra,P),Ra.prototype.message="Deferred was canceled",Ra.prototype.name="CanceledError",Da.prototype.c=function(){throw delete La[this.a],this.b};var La={};function Ma(e){var t=document,n=we(e).toString(),r=st(document,"SCRIPT"),i={Xb:r,Ma:void 0},o=new Sa(i),s=window.setTimeout((function(){ja(r,!0);var e=new Va(qa,"Timeout reached for loading script "+n);Ca(o),ka(o,!1,e)}),5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(ja(r,!1,s),Ca(o),ka(o,!0,null))},r.onerror=function(){ja(r,!0,s);var e=new Va(Ua,"Error while loading script "+n);Ca(o),ka(o,!1,e)},fe(i={},{type:"text/javascript",charset:"UTF-8"}),nt(r,i),i=e,de(e=r,"HTMLScriptElement"),e.src=we(i),(i=(i=e.ownerDocument&&e.ownerDocument.defaultView)&&i!=a?c(i.document):u=null===u?c(a.document):u)&&e.setAttribute("nonce",i),((t=((i=t)||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:i.documentElement).appendChild(r),o}function Fa(){var e;this&&this.Xb&&(e=this.Xb)&&"SCRIPT"==e.tagName&&ja(e,!0,this.Ma)}function ja(e,t,n){null!=n&&a.clearTimeout(n),e.onload=l,e.onerror=l,e.onreadystatechange=l,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ua=0,qa=1;function Va(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),P.call(this,n),this.code=e}function Ba(e){this.f=e}function Ka(e,t,n){if(this.c=e,this.l=(e=t||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Ha,this.g=le(e.secureTokenHeaders||Ga),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||Qa,this.a=le(e.firebaseHeaders||Ya),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==fr(),!(n=a.XMLHttpRequest||n&&Oa.INTERNAL.node&&Oa.INTERNAL.node.XMLHttpRequest)&&!hr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new oa(self):dr()?this.f=new Ba(n):this.f=new zo,this.b=null}w(Va,P),w(Ba,qo),Ba.prototype.a=function(){return new this.f},Ba.prototype.b=function(){return{}};var za,Wa="idToken",Ha=new Rr(3e4,6e4),Ga={"Content-Type":"application/x-www-form-urlencoded"},Qa=new Rr(3e4,6e4),Ya={"Content-Type":"application/json"};function $a(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Xa(e,t){t&&(e.l=Ja("https://securetoken.googleapis.com/v1/token",t),e.h=Ja("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=Ja("https://identitytoolkit.googleapis.com/v2/",t))}function Ja(e,t){return e=Pn(e),t=Pn(t.url),e.f=e.a+e.f,kn(e,t.c),e.a=t.a,Cn(e,t.g),e.toString()}function Za(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function es(e,t,n,r,i,o,s){var u;(e=((u=gr(u=br())==vr&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||Ke&&Ze&&!(9<Ze))&&!hr()?(za=za||new dt((function(e,t){var n,r;n=e,r=t,((window.gapi||{}).client||{}).request?n():(a[ns]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(e,t){Na(e,null,t,void 0)}(Ma(Te(ts,{onload:ns})),(function(){r(Error("CORS_UNSUPPORTED"))})))})),b(e.s,e)):b(e.u,e))(t,n,r,i,o,s)}Ka.prototype.T=function(){return this.b},Ka.prototype.u=function(e,t,n,r,i,o){if(hr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,u=new ha(this.f);o&&(u.g=Math.max(0,o),s=setTimeout((function(){u.dispatchEvent("timeout")}),o)),pn(u,"complete",(function(){s&&clearTimeout(s);var n=null;try{n=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ia(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){n=null}t&&t(n)})),vn(u,"ready",(function(){s&&clearTimeout(s),Ft(this)})),vn(u,"timeout",(function(){s&&clearTimeout(s),Ft(this),t&&t(null)})),va(u,e,n,r,i)};var ts=new pe(ye,"https://apis.google.com/js/client.js?onload=%{onload}"),ns="__fcb"+Math.floor(1e6*Math.random()).toString();function rs(e,t,n,r,i,o,a){var s=Pn(t+n);An(s,"key",e.c),a&&An(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(s,c,i[c]);return new dt((function(t,n){es(e,s.toString(),(function(e){e?e.error?n(Js(e,o||{})):t(e):n(new I("network-request-failed"))}),r,u?void 0:Yn(Cr(i)),e.a,e.v.get())}))}function is(e){if("string"!=typeof(e=e.email)||!sr.test(e))throw new I("invalid-email")}function os(e){"email"in e&&is(e)}function as(e){if(!e[Wa]){if(e.mfaPendingCredential)throw new I("multi-factor-auth-required",null,le(e));throw new I("internal-error")}}function ss(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new I("internal-error")}else{if(!e.sessionInfo)throw new I("missing-verification-id");if(!e.code)throw new I("missing-verification-code")}}Ka.prototype.s=function(e,t,n,r,i){var o=this;za.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ka.prototype.Ab=function(){return $s(this,js,{})},Ka.prototype.Cb=function(e,t){return $s(this,Ms,{idToken:e,email:t})},Ka.prototype.Db=function(e,t){return $s(this,Fs,{idToken:e,password:t})};var us={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function cs(e){if(!e.phoneVerificationInfo)throw new I("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ls(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new I("internal-error")}function hs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Wn(e=new Vn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function fs(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Uo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Uo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Uo(e)):e.errorMessage&&(t=Xs(e.errorMessage)),t)throw t;as(e)}function ds(e,t){return t.returnIdpCredential=!0,$s(e,Vs,t)}function ps(e,t){return t.returnIdpCredential=!0,$s(e,Ks,t)}function vs(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,$s(e,Bs,t)}function gs(e){if(!e.oobCode)throw new I("invalid-action-code")}(e=Ka.prototype).Eb=function(e,t){var n={idToken:e},r=[];return ue(us,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),$s(this,Ms,n)},e.wb=function(e,t){return fe(e={requestType:"PASSWORD_RESET",email:e},t),$s(this,Ps,e)},e.xb=function(e,t){return fe(e={requestType:"EMAIL_SIGNIN",email:e},t),$s(this,Ns,e)},e.vb=function(e,t){return fe(e={requestType:"VERIFY_EMAIL",idToken:e},t),$s(this,As,e)},e.Fb=function(e,t,n){return fe(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),$s(this,xs,e)},e.gb=function(e){return $s(this,Hs,e)},e.ob=function(e,t){return $s(this,Ds,{oobCode:e,newPassword:t})},e.Sa=function(e){return $s(this,ys,{oobCode:e})},e.kb=function(e){return $s(this,ms,{oobCode:e})};var ms={endpoint:"setAccountInfo",A:gs,Z:"email",B:!0},ys={endpoint:"resetPassword",A:gs,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new I("internal-error")},B:!0},bs={endpoint:"signupNewUser",A:function(e){if(is(e),!e.password)throw new I("weak-password")},G:as,V:!0,B:!0},_s={endpoint:"createAuthUri",B:!0},ws={endpoint:"deleteAccount",O:["idToken"]},Ts={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new I("internal-error")}},Is={endpoint:"emailLinkSignin",O:["email","oobCode"],A:is,G:as,V:!0,B:!0},Es={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:is,G:as,V:!0},Ss={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:cs,G:as,B:!0,Na:!0},ks={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:cs,G:as,B:!0,Na:!0},Cs={endpoint:"getAccountInfo"},Ns={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new I("internal-error");is(e)},Z:"email",B:!0},As={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new I("internal-error")},Z:"email",B:!0},xs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new I("internal-error")},Z:"email",B:!0},Ps={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new I("internal-error");is(e)},Z:"email",B:!0},Rs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Os={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new I("internal-error")}},Ds={endpoint:"resetPassword",A:gs,Z:"email",B:!0},Ls={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ms={endpoint:"setAccountInfo",O:["idToken"],A:os,V:!0},Fs={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(os(e),!e.password)throw new I("weak-password")},G:as,V:!0},js={endpoint:"signupNewUser",G:as,V:!0,B:!0},Us={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new I("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},qs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Vs={endpoint:"verifyAssertion",A:ls,Za:hs,G:fs,V:!0,B:!0},Bs={endpoint:"verifyAssertion",A:ls,Za:hs,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new I("user-not-found");if(e.errorMessage)throw Xs(e.errorMessage);as(e)},V:!0,B:!0},Ks={endpoint:"verifyAssertion",A:function(e){if(ls(e),!e.idToken)throw new I("internal-error")},Za:hs,G:fs,V:!0},zs={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new I("invalid-custom-token")},G:as,V:!0,B:!0},Ws={endpoint:"verifyPassword",A:function(e){if(is(e),!e.password)throw new I("wrong-password")},G:as,V:!0,B:!0},Hs={endpoint:"verifyPhoneNumber",A:ss,G:as,B:!0},Gs={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new I("internal-error");ss(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Uo(e);as(e)}},Qs={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ss,G:as,B:!0},Ys={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Wa]^!!e.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function $s(e,t,n){if(!function(e,t){if(!t||!t.length)return 1;if(e){for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return}return 1}}(n,t.O))return wt(new I("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return _t(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),rs(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new I("internal-error");return r[t.Z]}))}function Xs(e){return Js({error:{errors:[{message:e}],code:400,message:e}})}function Js(e,t){var n,r=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=e.error&&e.error.message||"",fe(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],t);return new I("internal-error",t=!t&&e?kr(e):t)}function Zs(e){var t;this.b=e,this.a=null,this.sb=(t=this,(ru=ru||new dt((function(e,t){function n(){Pr(),_r("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Pr(),t(Error("Network Error"))},timeout:tu.get()})}var r;_r("gapi.iframes.Iframe")?e():_r("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),a[r]=function(){_r("gapi.load")?n():t(Error("Network Error"))},_t(Ma(r=Te(eu,{onload:r}))).o((function(){t(Error("Network Error"))})))})).o((function(e){throw ru=null,e}))).then((function(){return new dt((function(e,n){_r("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),nu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var eu=new pe(ye,"https://apis.google.com/js/api.js?onload=%{onload}"),tu=new Rr(3e4,6e4),nu=new Rr(5e3,15e3),ru=null;function iu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,e=this.g?Rn((e=Pn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):Rn("https",this.l,null,"/__/auth/iframe"),this.a=e,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function ou(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function au(e){try{return Oa.app(e).auth().Ga()}catch(e){return[]}}function su(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function uu(e){var t=tr();return $s(e,Rs,{}).then((function(e){return e.authorizedDomains||[]})).then((function(e){e:{for(var n=(r=Pn(t)).c,r=r.a,i=0;i<e.length;i++){var o=e[i],a=r,s=n;if(a=0==o.indexOf("chrome-extension://")?Pn(o).a==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(ar.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){e=!0;break e}}e=!1}if(!e)throw new Fo(tr())}))}function cu(e){return e.m||(e.m=ur().then((function(){var t,n,r,i;e.u||(t=e.c,n=e.i,r=au(e.b),(i=new iu(e.s,e.g,e.b,e.f)).f=t,i.b=n,i.c=Q(r||[]),e.u=i.toString()),e.v=new Zs(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Oo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",_t(n)}return n.status="ERROR",_t(n)}))}(e)})),e.m)}function lu(e){return e.l||(e.C=e.c?yr(e.c,au(e.b)):null,e.l=new Ka(e.g,A(e.i),e.C),e.f&&Xa(e.l,e.f)),e.l}function hu(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new ou(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=le(u||null),e.f=c,e.zb(l).toString()}function fu(e){if(this.a=e||Oa.INTERNAL.reactNative&&Oa.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function du(e){this.b=e,this.a={},this.f=b(this.c,this)}iu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):zn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):zn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):zn(this.a.b,"fw"),this.a.toString()},ou.prototype.zb=function(e){return this.h=e,this},ou.prototype.toString=function(){var e;if(An(e=this.v?Rn((e=Pn(this.v.url)).c,e.a,e.g,"/emulator/auth/handler"):Rn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(e,"appName",this.c),An(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=Oa.app(this.c).auth().la()}catch(e){n=null}for(r in t.pb=n,An(e,"providerId",this.a.providerId),t=Cr((n=this.a).Jb))t[r]=t[r].toString();for(var r=n.Qc,i=(t=le(t),0);i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),ce(t)||An(e,"customParameters",kr(t))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&An(e,"scopes",n.join(",")),this.l?An(e,"redirectUrl",this.l):zn(e.b,"redirectUrl"),this.g?An(e,"eventId",this.g):zn(e.b,"eventId"),this.i?An(e,"v",this.i):zn(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!xn(e,a)&&An(e,a,this.b[a]);return this.h?An(e,"tid",this.h):zn(e.b,"tid"),this.f?An(e,"eid",this.f):zn(e.b,"eid"),(a=au(this.c)).length&&An(e,"fw",a.join(",")),e.toString()},(e=su.prototype).Pb=function(e,t,n){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){var n,r;r={type:"webStorageSupport"},cu(n=o).then((function(){return e=n.v,t=r,e.sb.then((function(){return new dt((function(n){e.a.send(t.type,t,n,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var e,t})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})).then((function(n){n||(e&&ir(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return t=e,new dt((function(e){return function n(){yn(2e3).then((function(){return t&&!t.closed?n():void e()}))}()}));var t})).then((function(){if(!a)return yn(n).then((function(){t(r)}))}))},e.Yb=function(){var e=br();return!Sr(e)&&!xr(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return wt(new I("popup-blocked"));if(a&&!Sr())return this.ma().o((function(t){ir(e),i(t)})),r(),_t();this.a||(this.a=uu(lu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw ir(e),i(t),t}));return r(),t})).then((function(){Po(n),a||nr(hu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=uu(lu(this)));var i=this;return this.a.then((function(){Po(t),nr(hu(i.s,i.g,i.b,e,t,tr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return cu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new I("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){H(this.h,(function(t){return t==e}))},(e=fu.prototype).get=function(e){return _t(this.a.getItem(e)).then((function(e){return e&&Nr(e)}))},e.set=function(e,t){return _t(this.a.setItem(e,kr(t)))},e.U=function(e){return _t(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var pu,vu=[];function gu(e,t,n){ce(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function mu(e){this.a=e}function yu(e){this.c=e,this.b=!1,this.a=[]}function bu(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return wt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new dt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return _u(e,c),t})).o((function(t){throw _u(e,c),t}))}function _u(e,t){var n,r;t&&(n=t.messageChannel,r=t.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(e.a,(function(e){return e==t})))}function wu(){if(!Su())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e,t,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,q(vu,(function(e){e.b==n&&(t=e)})),t||(t=new du(n),vu.push(t)),t),gu(this.v,"keyChanged",(function(e,t){return xu(r).then((function(e){return 0<e.length&&q(r.a,(function(t){t(e)})),{keyProcessed:z(e,t.key)}}))})),gu(this.v,"ping",(function(){return _t(["keyChanged"])}))):((e=a.navigator)&&e.serviceWorker?_t().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):_t(null)).then((function(e){(r.h=e)&&(r.g=new yu(new mu(e)),bu(r.g,"ping",null,!0).then((function(e){e[0].fulfilled&&z(e[0].value,"keyChanged")&&(r.s=!0)})).o((function(){})))}))}function Tu(e){return new dt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){var i;(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):(i=e,new dt((function(e,t){var n=i.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})).then((function(){return Tu(e)})).then((function(e){t(e)})).o((function(e){n(e)})))}}))}function Iu(e){return e.i||(e.i=Tu(e)),e.i}function Eu(e,t){var n=0;return new dt((function r(i,o){Iu(e).then(t).then(i).o((function(t){return 3<++n?void o(t):Iu(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}))}))}))}function Su(){try{return a.indexedDB}catch(e){return}}function ku(e){return e.objectStore("firebaseLocalStorage")}function Cu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Nu(e){return new dt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Au(e,t){return e.g&&e.h&&((n=a.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===e.h?bu(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):_t();var n}function xu(e){return Iu(e).then((function(e){var t=ku(Cu(e,!1));return t.getAll?Nu(t.getAll()):new dt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n&&typeof t[r]==typeof n[r]?"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function Pu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Ru(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=_t().then((function(){if(Su()){var e=Ar(),r="__sak"+e;return pu=pu||new wu,(n=pu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){q(t.a,(function(t){t(e)}))})),e}))}function Ou(){this.a={},this.type="inMemory"}function Du(){if(!function(){var e="Node"==fr();if(!(e=Lu()||e&&Oa.INTERNAL.node&&Oa.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==fr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Lu()||Oa.INTERNAL.node.localStorage,this.type="localStorage"}function Lu(){try{var e=a.localStorage,t=Ar();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Mu(){this.type="nullStorage"}function Fu(){if(!function(){var e="Node"==fr();if(!(e=ju()||e&&Oa.INTERNAL.node&&Oa.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==fr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=ju()||Oa.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ju(){try{var e=a.sessionStorage,t=Ar();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Uu(){var e={};e.Browser=Bu,e.Node=Ku,e.ReactNative=zu,e.Worker=Wu,this.a=e[fr()]}du.prototype.c=function(e){var t,n=e.data.eventType,r=e.data.eventId,i=this.a[n];i&&0<i.length&&(e.ports[0].postMessage({status:"ack",eventId:r,eventType:n,response:null}),t=[],q(i,(function(n){t.push(_t().then((function(){return n(e.origin,e.data.data)})))})),It(t).then((function(t){var i=[];q(t,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),q(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:i})})))},mu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},yu.prototype.close=function(){for(;0<this.a.length;)_u(this,this.a[0]);this.b=!0},(e=wu.prototype).set=function(e,t){var n=this,r=!1;return Eu(this,(function(t){return Nu((t=ku(Cu(t,!0))).get(e))})).then((function(i){return Eu(n,(function(o){if(o=ku(Cu(o,!0)),i)return i.value=t,Nu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Nu(o.add(a))}))})).then((function(){return n.c[e]=t,Au(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return Eu(this,(function(t){return Nu(ku(Cu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return Eu(this,(function(r){return n=!0,t.b++,Nu(ku(Cu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Au(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){var t;0==this.a.length&&(Pu(t=this),function e(){t.f=setTimeout((function(){t.l=xu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()),this.a.push(e)},e.ia=function(e){H(this.a,(function(t){return t==e})),0==this.a.length&&Pu(this)},(e=Ru.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){H(this.a,(function(t){return t==e}))},(e=Ou.prototype).get=function(e){return _t(this.a[e])},e.set=function(e,t){return this.a[e]=t,_t()},e.U=function(e){return delete this.a[e],_t()},e.ca=function(){},e.ia=function(){},(e=Du.prototype).get=function(e){var t=this;return _t().then((function(){return Nr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return _t().then((function(){var r=kr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return _t().then((function(){t.a.removeItem(e)}))},e.ca=function(e){a.window&&en(a.window,"storage",e)},e.ia=function(e){a.window&&rn(a.window,"storage",e)},(e=Mu.prototype).get=function(){return _t(null)},e.set=function(){return _t()},e.U=function(){return _t()},e.ca=function(){},e.ia=function(){},(e=Fu.prototype).get=function(e){var t=this;return _t().then((function(){return Nr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return _t().then((function(){var r=kr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return _t().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var qu,Vu,Bu={F:Du,cb:Fu},Ku={F:Du,cb:Fu},zu={F:fu,cb:Mu},Wu={F:Du,cb:Mu},Hu={rd:"local",NONE:"none",td:"session"};function Gu(){var e=!(xr(br())||!lr()),t=Sr(),n=wr();this.m=e,this.h=t,this.l=n,this.a={},e=qu=qu||new Uu;try{this.g=!er()&&Mr()||!a.indexedDB?new e.a.F:new Ru(new(hr()?Ou:e.a.F))}catch(e){this.g=new Ou,this.h=!0}try{this.i=new e.a.cb}catch(e){this.i=new Ou}this.v=new Ou,this.f=b(this.Zb,this),this.b={}}function Qu(){return Vu=Vu||new Gu}function Yu(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function $u(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Xu(e,t,n){return n=$u(t,n),"local"==t.F&&(e.b[n]=null),Yu(e,t.F).U(n)}function Ju(e){e.c&&(clearInterval(e.c),e.c=null)}function Zu(e){this.a=e,this.b=Qu()}(e=Gu.prototype).get=function(e,t){return Yu(this,e.F).get($u(e,t))},e.set=function(e,t,n){var r=$u(e,n),i=this,o=Yu(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){var r;e=$u(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),ce(this.a)&&(Yu(this,"local").ca(this.f),this.h||(er()||!Mr())&&a.indexedDB||!this.l||(Ju(r=this),r.c=setInterval((function(){for(var e in r.a){var t=a.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new Kt({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Zb(t))}}),1e3))),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=$u(e,t),this.a[e]&&(H(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),ce(this.a)&&(Yu(this,"local").ia(this.f),Ju(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Yu(this,"local").ia(this.f):Ju(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.nb(t))},Ke&&Ze&&10==Ze&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else q(e,b(this.nb,this))},e.nb=function(e){this.a[e]&&q(this.a[e],(function(e){e()}))};var ec,tc={name:"authEvent",F:"local"};function nc(){this.a=Qu()}function rc(e,t){this.b=ic,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ec&&(ec=a.Int32Array?new Int32Array(hc):hc),this.reset()}w(rc,(function(){this.b=-1}));for(var ic=64,oc=ic-1,ac=[],sc=0;sc<oc;sc++)ac[sc]=0;var uc=G(128,ac);function cc(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|ec[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function lc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(cc(e),i=0);else{if(!f(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(cc(e),i=0)}}e.c=i,e.g+=n}rc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var hc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fc(){rc.call(this,8,dc)}w(fc,rc);var dc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function pc(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new nc,this.g=new Zu(this.h),this.f=null,this.b=[],this.a=this.c=null}function vc(e){return new I("invalid-cordova-configuration",e)}function gc(e){var t=new fc;lc(t,e),e=[];var n=8*t.g;t.c<56?lc(t,uc,56-t.c):lc(t,uc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(cc(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return B(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}function mc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function yc(e){return e.f||(e.f=e.ma().then((function(){return new dt((function(t){function n(e){o=!0,s&&s.cancel(),bc(r).then((function(t){var n,o=i;t&&e&&e.url&&(n=null,o=(n=-1!=(o=$i(e.url)).indexOf("/__/auth/callback")?(n="object"==typeof(n=Nr(xn(n=Pn(o),"firebaseError")||null))?E(n):null)?new Ro(t.c,t.b,null,null,n,null,t.T()):new Ro(t.c,t.b,o,t.f,null,null,t.T()):n)||i),mc(r,o)}))}var r,i,o,s,u;e.Ea((function n(r){return t(r),e.Ta(n),!1})),r=e,i=new Ro("unknown",null,null,null,new I("no-auth-event")),o=!1,s=yn(500).then((function(){return bc(r).then((function(){o||mc(r,i)}))})),u=a.handleOpenURL,a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(_r("BuildInfo.packageName",a).toLowerCase()+"://")&&n({url:e}),"function"==typeof u)try{u(e)}catch(e){console.error(e)}},Mo=Mo||new Do,function(e){var t=Mo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=_r("universalLinks.subscribe",a))&&e(null,t.b))}(n)}))}))),e.f}function bc(e){var t,n=null;return(t=e.g).b.get(tc,t.a).then(Oo).then((function(t){return n=t,Xu((t=e.g).b,tc,t.a)})).then((function(){return n}))}function _c(e){this.a=e,this.b=Qu()}(e=pc.prototype).ma=function(){return this.Ia||(this.Ia=(cr(void 0)?ur().then((function(){return new dt((function(e,t){var n=a.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):wt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof _r("universalLinks.subscribe",a))throw vc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",a))throw vc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",a))throw vc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",a))throw vc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new I("cordova-not-ready")})))},e.Pb=function(e,t){return t(new I("operation-not-supported-in-this-environment")),_t()},e.Nb=function(){return wt(new I("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return wt(new I("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=_t().then((function(){return Po(t),yc(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new Ro(t,r,null,o,new I("no-auth-event"),null,i),u=_r("BuildInfo.packageName",a);if("string"!=typeof u)throw new I("invalid-cordova-configuration");var c=_r("BuildInfo.displayName",a),l={};if(br().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!br().toLowerCase().match(/android/))return wt(new I("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=gc(o),l.sessionId=o;var h=hu(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(tc,s.w(),t)})).then((function(){var t=_r("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=_r("cordova.plugins.browsertab.openUrl",a)))throw new I("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=_r("cordova.InAppBrowser.open",a)))throw new I("invalid-cordova-configuration");t=br(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new dt((function(e,t){u=function(){var t=_r("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s=s||yn(2e3).then((function(){t(new I("redirect-cancelled-by-user"))}))},l=function(){Or()&&c()},o.addEventListener("resume",c,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(e){return bc(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(e){this.b.push(e),yc(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ro("unknown",null,null,null,new I("no-auth-event")),e(t))}))},e.Ta=function(e){H(this.b,(function(t){return t==e}))};var wc={name:"pendingRedirect",F:"session"};function Tc(e){return Xu(e.b,wc,e.a)}function Ic(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new jc,this.C=new Kc,this.g=new _c(Mc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ec(this.D,this.v,this.m,S,this.J)}function Ec(e,t,n,r,i){var o=Oa.SDK_VERSION||null;return new(cr()?pc:su)(e,t,n,o,r,i)}function Sc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function kc(e){e.a.Yb()&&Sc(e).o((function(t){var n=new Ro("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Rc(t)&&e.s(n)})),e.a.Ub()||Uc(e.b)}function Cc(e,t){z(e.h,t)||e.h.push(t),e.f||(t=e.g).b.get(wc,t.a).then((function(e){return"pending"==e})).then((function(t){t?Tc(e.g).then((function(){Sc(e).o((function(t){var n=new Ro("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Rc(t)&&e.s(n)}))})):kc(e)})).o((function(){kc(e)}))}function Nc(e,t){H(e.h,(function(e){return e==t}))}Ic.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Ec(this.D,this.v,this.m,null,this.J),this.i={}},Ic.prototype.s=function(e){if(!e)throw new I("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Uc(this.b),t};var Ac=new Rr(2e3,1e4),xc=new Rr(3e4,6e4);function Pc(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Rc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Oc(e,t,n,r,i){var o,a;return(a=e.g).b.set(wc,"pending",a.a).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Rc(t))throw new I("operation-not-supported-in-this-environment");return o=t,Tc(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new dt((function(){})):Tc(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function Dc(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Ac.get())}Ic.prototype.ra=function(){return this.b.ra()};var Lc={};function Mc(e,t,n){return e=e+":"+t,n?e+":"+n.url:e}function Fc(e,t,n,r){var i=Mc(t,n,r);return Lc[i]||(Lc[i]=new Ic(e,t,n,r)),Lc[i]}function jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Uc(e){e.g||(e.g=!0,Bc(e,!1,null,null))}function qc(e){e.g&&!e.i&&Bc(e,!1,null,null)}function Vc(e,t){if(e.b=function(){return _t(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Bc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return wt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Vc(e,n):Vc(e,{user:null}),e.f=[],e.c=[]}function Kc(){}function zc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function Wc(e,t){this.a=t,Vr(this,"verificationId",e)}function Hc(e,t,n,r){return new No(e).gb(t,n).then((function(e){return new Wc(e,r)}))}function Gc(e){var t=Mi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:e,expirationTime:Lr(1e3*t.exp),authTime:Lr(1e3*t.auth_time),issuedAtTime:Lr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function Qc(e,t,n){var r=t&&t[$c];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=le(t),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;q(t[Yc]||[],(function(e){(e=Hr(e))&&i.b.push(e)})),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},jc.prototype.h=function(e,t){var n,r,i,o;e?(this.reset(),this.g=!0,n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Bc(this,!0,null,e.a),_t()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){Bc(e,s,t,null)})).o((function(t){Bc(e,s,null,t)}))}(this,e,t):wt(new I("invalid-auth-event")):(Bc(this,!1,null,null),_t())):wt(new I("invalid-auth-event"))},jc.prototype.ra=function(){var e=this;return new dt((function(t,n){var r,i;e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),r=e,i=new I("timeout"),r.a&&r.a.cancel(),r.a=yn(xc.get()).then((function(){r.b||(r.g=!0,Bc(r,!0,null,i))})))}))},Kc.prototype.h=function(e,t){var n,r,i,o,a;e?(n=e.c,r=e.b,e.a?(t.na(e.c,null,e.a,e.b),_t()):t.Fa(n,r)?(i=t,o=e.b,a=e.c,i.Fa(a,o)(e.g,e.f,e.T(),e.i).then((function(e){i.na(a,e,null,o)})).o((function(e){i.na(a,null,e,o)}))):wt(new I("invalid-auth-event"))):wt(new I("invalid-auth-event"))},Wc.prototype.confirm=function(e){return e=Ao(this.verificationId,e),this.a(e)};var Yc="mfaInfo",$c="mfaPendingCredential";function Xc(e,t,n,r){I.call(this,"multi-factor-auth-required",r,t),this.b=new Qc(e,t,n),Vr(this,"resolver",this.b)}function Jc(e,t,n){if(e&&p(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new Xc(t,e.serverResponse,n,e.message)}catch(e){}return null}function Zc(){}function el(e){Vr(this,"factorId",e.fa),this.a=e}function tl(e){if(el.call(this,e),this.a.fa!=No.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function nl(e,t){for(var n in Bt.call(this,e),t)this[n]=t[n]}function rl(e,t){this.a=e,this.b=[],this.c=b(this.yc,this),en(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&q(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[Yr]=e.uid),e.displayName&&(r[Gr]=e.displayName),e.enrollmentTime&&(r[Qr]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[$r]=e.phoneNumber);try{t=new Xr(r)}catch(e){}e=t}else e=null;e&&n.push(e)})),il(this,n)}function il(e,t){e.b=t,Vr(e,"enrolledFactors",t)}function ol(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function al(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function sl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function ul(e,t){void 0===t&&(t=e.b?(t=e.b).a-t.g:0),e.c=Date.now()+1e3*t}function cl(e,t){e.b=Li(t[Wa]||""),e.a=t.refreshToken,ul(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function ll(e,t){return n=e.f,r=t,new dt((function(e,t){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?es(n,n.l+"?key="+encodeURIComponent(n.c),(function(n){n?n.error?t(Js(n)):n.access_token&&n.refresh_token?e(n):t(new I("internal-error")):t(new I("network-request-failed"))}),"POST",Kn(r).toString(),n.g,n.m.get()):t(new I("internal-error"))})).then((function(t){return e.b=Li(t.access_token),e.a=t.refresh_token,ul(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}));var n,r}function hl(e,t){this.a=e||null,this.b=t||null,Br(this,{lastSignInTime:Lr(t||null),creationTime:Lr(e||null)})}function fl(e,t,n,r,i,o){Br(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function dl(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r,i=Oa.SDK_VERSION?yr(Oa.SDK_VERSION):null;this.a=new Ka(this.l,A(S),i),(this.u=e.emulatorConfig||null)&&Xa(this.a,this.u),this.h=new sl(this.a),Tl(this,t[Wa]),cl(this.h,t),Vr(this,"refreshToken",this.h.a),Sl(this,n||{}),dn.call(this),this.P=!1,this.s&&Tr()&&(this.b=Fc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=(r=this,new ol((function(){return r.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var e=r.h.c-Date.now()-3e5;return 0<e?e:0}))),this.ba=b(this.ib,this);var o=this;this.za=null,this.Pa=function(e){o.xa(e.h)},this.qa=null,this.Ba=function(e){pl(o,e.c)},this.$=null,this.aa=[],this.Oa=function(e){ml(o,e.f)},this.ja=null,this.S=new rl(this,n),Vr(this,"multiFactor",this.S)}function pl(e,t){e.u=t,Xa(e.a,t),e.b&&(t=e.b,e.b=Fc(e.s,e.l,e.m,e.u),e.P&&(Nc(t,e),Cc(e.b,e)))}function vl(e,t){e.qa&&rn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&en(t,"languageCodeChanged",e.Pa)}function gl(e,t){e.$&&rn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&en(t,"emulatorConfigChanged",e.Ba)}function ml(e,t){e.aa=t,Za(e.a,Oa.SDK_VERSION?yr(Oa.SDK_VERSION,e.aa):null)}function yl(e,t){e.ja&&rn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&en(t,"frameworkChanged",e.Oa)}function bl(t){try{return Oa.app(t.m).auth()}catch(e){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _l(e){e.J||e.D.b||(e.D.start(),rn(e,"tokenChanged",e.ba),en(e,"tokenChanged",e.ba))}function wl(e){rn(e,"tokenChanged",e.ba),e.D.stop()}function Tl(e,t){e.Aa=t,Vr(e,"_lat",t)}function Il(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return It(t).then((function(){return e}))}function El(e){e.b&&!e.P&&(e.P=!0,Cc(e.b,e))}function Sl(e,t){Br(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new hl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function kl(){}function Cl(e){return _t().then((function(){if(e.J)throw new I("app-deleted")}))}function Nl(e){return B(e.providerData,(function(e){return e.providerId}))}function Al(e,t){t&&(xl(e,t.providerId),e.providerData.push(t))}function xl(e,t){H(e.providerData,(function(e){return e.providerId==t}))}function Pl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Vr(e,t,n)}function Rl(e,t){var n,r;e!=t&&(Br(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",new hl((r=t.metadata).a,r.b)):Vr(e,"metadata",new hl),q(t.providerData,(function(t){Al(e,t)})),n=e.h,r=t.h,n.b=r.b,n.a=r.a,n.c=r.c,Vr(e,"refreshToken",e.h.a),il(e.S,t.S.b))}function Ol(e){return e.I().then((function(t){var n,r=e.isAnonymous;return $s((n=e).a,Cs,{idToken:t}).then(b(n.Kc,n)).then((function(){return r||Pl(e,"isAnonymous",!1),t}))}))}function Dl(e,t){t[Wa]&&e.Aa!=t[Wa]&&(cl(e.h,t),e.dispatchEvent(new nl("tokenChanged")),Tl(e,t[Wa]),Pl(e,"refreshToken",e.h.a))}function Ll(e,t){return Ol(e).then((function(){if(z(Nl(e),t))return Il(e).then((function(){throw new I("provider-already-linked")}))}))}function Ml(e,t,n){return Kr({user:e,credential:xo(t),additionalUserInfo:t=Vi(t),operationType:n})}function Fl(e,t){return Dl(e,t),e.reload().then((function(){return e}))}function jl(e,t,n,r,i){if(!Tr())return wt(new I("operation-not-supported-in-this-environment"));if(e.i&&!i)return wt(e.i);var o=qi(n.providerId),a=Ar(e.uid+":::"),s=null,u=or(s=(!Sr()||lr())&&e.s&&n.isOAuthProvider?hu(e.s,e.l,e.m,t,n,null,a,Oa.SDK_VERSION||null,null,null,e.tenantId,e.u):s,o&&o.va,o&&o.ua);return r=r().then((function(){if(ql(e),!i)return e.I().then((function(){}))})).then((function(){return Pc(e.b,u,t,n,a,!!s,e.tenantId)})).then((function(){return new dt((function(n,r){e.na(t,null,new I("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=Dc(e.b,e,t,u,a)}))})).then((function(e){return u&&ir(u),e?Kr(e):null})).o((function(e){throw u&&ir(u),e})),Vl(e,r,i)}function Ul(e,t,n,r,i){if(!Tr())return wt(new I("operation-not-supported-in-this-environment"));if(e.i&&!i)return wt(e.i);var o=null,a=Ar(e.uid+":::");return r=r().then((function(){if(ql(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Il(e)})).then((function(t){return e.ha?(t=e.ha).b.set(zl,e.w(),t.a):t})).then((function(){return Oc(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return Wl(e.ha);throw o})).then((function(){if(o)throw o})),Vl(e,r,i)}function ql(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Vl(e,t,n){var r,i=(r=e).i&&!n?(t.cancel(),wt(r.i)):t.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(r.i||r.dispatchEvent(new nl("userInvalidated")),r.i=e),e}));return e.N.push(i),i.oa((function(){W(e.N,i)})),i.o((function(t){var n=null;throw(n=t&&"auth/multi-factor-auth-required"===t.code?Jc(t.w(),bl(e),b(e.jc,e)):n)||t}))}function Bl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Wa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new dl(t,n,e);return e.providerData&&q(e.providerData,(function(e){e&&Al(i,Kr(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Kl(e){this.a=e,this.b=Qu()}Qc.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=le(t.f);return delete n[Yc],delete n[$c],fe(n,e),t.g(n)}))},w(Xc,I),Zc.prototype.tb=function(e,t,n){return t.type==Ji?(o=this,a=e,s=n,t.Ha().then((function(e){return e={idToken:e},void 0!==s&&(e.displayName=s),fe(e,{phoneVerificationInfo:Co(o.a)}),$s(a,Ss,e)}))):(r=this,i=e,t.Ha().then((function(e){return fe(e={mfaPendingCredential:e},{phoneVerificationInfo:Co(r.a)}),$s(i,ks,e)})));var r,i,o,a,s},w(el,Zc),w(tl,el),w(nl,Bt),(e=rl.prototype).yc=function(e){var t;il(this,(e=e.hd,t=[],q(e.mfaInfo||[],(function(e){(e=Hr(e))&&t.push(e)})),t))},e.Sb=function(){return this.a.I().then((function(e){return new Xi(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return Dl(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return $s(r,Ys,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=V(t.b,(function(e){return e.uid!=n}));return il(t,r),Dl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(e){return e.w()}))}}},ol.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=yn(al(t,n)).then(Dr).then((function(){return t.h()})).then((function(){e(t,!0)})).o((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},ol.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},sl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},sl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?wt(new I("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?ll(this,{grant_type:"refresh_token",refresh_token:this.a}):_t(null):_t({accessToken:this.b.toString(),refreshToken:this.a})},hl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(dl,dn),dl.prototype.xa=function(e){this.za=e,$a(this.a,e)},dl.prototype.la=function(){return this.za},dl.prototype.Ga=function(){return Q(this.aa)},dl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Vr(dl.prototype,"providerId","firebase"),(e=dl.prototype).reload=function(){var e=this;return Vl(this,Cl(this).then((function(){return Ol(e).then((function(){return Il(e)})).then(kl)})))},e.oc=function(e){return this.I(e).then((function(e){return new Gc(e)}))},e.I=function(e){var t=this;return Vl(this,Cl(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new I("internal-error");return e.accessToken!=t.Aa&&(Tl(t,e.accessToken),t.dispatchEvent(new nl("tokenChanged"))),Pl(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new I("internal-error");Sl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t,n=(t=(t=e).providerUserInfo)&&t.length?B(t,(function(e){return new fl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[],r=0;r<n.length;r++)Al(this,n[r]);Pl(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new nl("userReloaded",{hd:e}))},e.Lc=function(e){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return Vl(this,e.c(this.a,this.uid).then((function(e){return Dl(t,e),n=Ml(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return Vl(this,Ll(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Ml(t,e,"link"),Fl(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return Vl(this,Ll(this,"phone").then((function(){return Hc(bl(n),e,t,b(n.rb,n))})))},e.Mc=function(e,t){var n=this;return Vl(this,_t().then((function(){return Hc(bl(n),e,t,b(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return Vl(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Dl(t,e),t.reload()})))},e.ed=function(e){var t=this;return Vl(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Dl(t,e),t.reload()})))},e.Db=function(e){var t=this;return Vl(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return Dl(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Cl(this);var t=this;return Vl(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Dl(t,e),Pl(t,"displayName",e.displayName||null),Pl(t,"photoURL",e.photoUrl||null),q(t.providerData,(function(e){"password"===e.providerId&&(Vr(e,"displayName",t.displayName),Vr(e,"photoURL",t.photoURL))})),Il(t)})).then(kl))},e.cd=function(e){var t=this;return Vl(this,Ol(this).then((function(n){return z(Nl(t),e)?$s(t.a,Ts,{idToken:n,deleteProvider:[e]}).then((function(e){var n={};return q(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),q(Nl(t),(function(e){n[e]||xl(t,e)})),n[No.PROVIDER_ID]||Vr(t,"phoneNumber",null),Il(t)})):Il(t).then((function(){throw new I("no-such-provider")}))})))},e.delete=function(){var e=this;return Vl(this,this.I().then((function(t){return $s(e.a,ws,{idToken:t})})).then((function(){e.dispatchEvent(new nl("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");vl(e,null),gl(e,null),yl(e,null),e.N=[],e.J=!0,wl(e),Vr(e,"refreshToken",null),e.b&&Nc(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?b(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?b(this.Mb,this):null},e.Ec=function(e){var t=this;return jl(this,"linkViaPopup",e,(function(){return Ll(t,e.providerId).then((function(){return Il(t)}))}),!1)},e.Nc=function(e){return jl(this,"reauthViaPopup",e,(function(){return _t()}),!0)},e.Fc=function(e){var t=this;return Ul(this,"linkViaRedirect",e,(function(){return Ll(t,e.providerId)}),!1)},e.Oc=function(e){return Ul(this,"reauthViaRedirect",e,(function(){return _t()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Vl(this,this.I().then((function(n){return ps(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Ml(i,e,"link"),Fl(i,e)})).then((function(){return o})))},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Vl(this,_t().then((function(){return to(vs(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Ml(i,e,"reauthenticate"),Dl(i,e),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(e){var t=this,n=null;return Vl(this,this.I().then((function(t){return n=t,void 0===e||ce(e)?{}:Pi(new wi(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return Vl(this,this.I().then((function(e){return r=e,void 0===t||ce(t)?{}:Pi(new wi(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return Vl(this,e=to(_t(e),n.uid).then((function(e){return t=Ml(n,e,"reauthenticate"),Dl(n,e),n.i=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&fe(e,this.metadata.w()),q(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),fe(e,this.S.w()),e};var zl={name:"redirectUser",F:"session"};function Wl(e){return Xu(e.b,zl,e.a)}function Hl(e){var t,n,r,i;this.a=e,this.b=Qu(),this.c=null,this.f=(n=Yl("local"),r=Yl("session"),i=Yl("none"),function(e,t,n){var r=$u(t,n),i=Yu(e,t.F);return e.get(t,n).then((function(o){var s=null;try{s=Nr(a.localStorage.getItem(r))}catch(o){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}((t=this).b,n,t.a).then((function(){return t.b.get(r,t.a)})).then((function(e){return e?r:t.b.get(i,t.a).then((function(e){return e?i:t.b.get(n,t.a).then((function(e){return e?n:t.b.get(Ql,t.a).then((function(e){return e?Yl(e):n}))}))}))})).then((function(e){return t.c=e,Gl(t,e.F)})).o((function(){t.c||(t.c=n)}))),this.b.addListener(Yl("local"),this.a,b(this.g,this))}function Gl(e,t){var n,r,i=[];for(n in Hu)Hu[n]!==t&&i.push(Xu(e.b,Yl(Hu[n]),e.a));return i.push(Xu(e.b,Ql,e.a)),r=i,new dt((function(e,t){var n=r.length,i=[];if(n)for(var o=function(t,r){n--,i[t]=r,0==n&&e(i)},a=function(e){t(e)},s=0;s<r.length;s++)Tt(r[s],_(o,s),a);else e(i)}))}Hl.prototype.g=function(){var e=this,t=Yl("local");Zl(this,(function(){return _t().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Gl(e,"local").then((function(){e.c=t}))}))}))};var Ql={name:"persistence",F:"session"};function Yl(e){return{name:"authUser",F:e}}function $l(e,t){return Zl(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function Xl(e){return Zl(e,(function(){return Xu(e.b,e.c,e.a)}))}function Jl(e,t,n){return Zl(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Bl(e||{})}))}))}function Zl(e,t){return e.f=e.f.then(t,t),e.f}function eh(e){if(this.l=!1,Vr(this,"settings",new zc),Vr(this,"app",e),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var t,n,r,i,o,a;e=Oa.SDK_VERSION?yr(Oa.SDK_VERSION):null,this.a=new Ka(this.app.options&&this.app.options.apiKey,A(S),e),this.P=[],this.s=[],this.N=[],this.Pa=Oa.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Oa.INTERNAL.createSubscribe(b(this.Ac,this)),sh(this,null),this.i=new Hl(this.app.options.apiKey+":"+this.app.name),this.D=new Kl(this.app.options.apiKey+":"+this.app.name),this.$=fh(this,(n=(t=this).app.options.authDomain,e=function(e){var t=function(e,t){return e.b.get(zl,e.a).then((function(e){return e&&t&&(e.authDomain=t),Bl(e||{})}))}(e.D,e.app.options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),Wl(e.D)}));return fh(e,t)}(t).then((function(){return Jl(t.i,n,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return $l(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Xl(t.i)}))):null})).then((function(e){sh(t,e||null)})),fh(t,e))),this.h=fh(this,(r=this).$.then((function(){return oh(r)})).o((function(){})).then((function(){if(!r.l)return r.ja()})).o((function(){})).then((function(){var e;r.l||(r.ba=!0,(e=r.i).b.addListener(Yl("local"),e.a,r.ja))}))),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,a=i.app.options.apiKey,o&&Tr()&&(i.Oa=i.$.then((function(){var e;if(!i.l)return i.b=Fc(o,a,i.app.name,i.R),Cc(i.b,i),ch(i)&&El(ch(i)),i.m&&(El(i.m),(e=i.m).xa(i.la()),vl(e,i),ml(e=i.m,i.J),yl(e,i),pl(e=i.m,i.R),gl(e,i),i.m=null),i.b}))),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,dn.call(this),e=this,Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){var e;return this.R?Kr({protocol:(e=Pn(this.R.url)).c,host:e.a,port:e.g,options:Kr({disableWarnings:this.R.ec})}):null},enumerable:!1}),this.J=[],this.R=null}function th(e){Bt.call(this,"languageCodeChanged"),this.h=e}function nh(e){Bt.call(this,"emulatorConfigChanged"),this.c=e}function rh(e){Bt.call(this,"frameworkChanged"),this.f=e}function ih(e){return e.Oa||wt(new I("auth-domain-config-required"))}function oh(e){if(!Tr())return wt(new I("operation-not-supported-in-this-environment"));var t=ih(e).then((function(){return e.b.ra()})).then((function(e){return e?Kr(e):null}));return fh(e,t)}function ah(e,t){var n={};return n.apiKey=e.app.options.apiKey,n.authDomain=e.app.options.authDomain,n.appName=e.app.name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return r=n,i=t,o=e.D,a=e.Ga(),s=new dl(r,i),o&&(s.ha=o),a&&ml(s,a),s.reload().then((function(){return s}));var r,i,o,a,s})).then((function(t){return ch(e)&&t.uid==ch(e).uid?Rl(ch(e),t):(sh(e,t),El(t)),e.da(t)})).then((function(){hh(e)}))}function sh(e,t){var n,r;ch(e)&&(n=ch(e),r=e.Ba,H(n.W,(function(e){return e==r})),rn(ch(e),"tokenChanged",e.qa),rn(ch(e),"userDeleted",e.za),rn(ch(e),"userInvalidated",e.Aa),wl(ch(e))),t&&(t.W.push(e.Ba),en(t,"tokenChanged",e.qa),en(t,"userDeleted",e.za),en(t,"userInvalidated",e.Aa),0<e.u&&_l(t)),Vr(e,"currentUser",t),t&&(t.xa(e.la()),vl(t,e),ml(t,e.J),yl(t,e),pl(t,e.R),gl(t,e))}function uh(e,t){var n=null,r=null;return fh(e,t.then((function(t){return n=xo(t),r=Vi(t),ah(e,t)}),(function(t){var n=null;throw(n=t&&"auth/multi-factor-auth-required"===t.code?Jc(t.w(),e,b(e.kc,e)):n)||t})).then((function(){return Kr({user:ch(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ch(e){return e.currentUser}function lh(e){return ch(e)&&ch(e)._lat||null}function hh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](lh(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](lh(e))}}function fh(e,t){return e.P.push(t),t.oa((function(){W(e.P,t)})),t}function dh(){}function ph(){this.a={},this.b=1e12}Hl.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");e:{for(r in Hu)if(Hu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(fr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Su()&&"none"!==e)throw n;break;default:if(!wr()&&"none"!==e)throw n}}(e),Zl(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,Gl(n,e)})).then((function(){if(n.c=Yl(e),t)return n.b.set(n.c,t,n.a)})):_t()}))},w(eh,dn),w(th,Bt),w(nh,Bt),w(rh,Bt),(e=eh.prototype).yb=function(e){return fh(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,$a(this.a,this.aa),this.dispatchEvent(new th(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=a.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=t=!!t&&!!t.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!n&&ur().then((function(){var e=a.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),a.document.body.appendChild(e)})),this.R={url:e,ec:t},this.settings.jb=!0,Xa(this.a,this.R),this.dispatchEvent(new nh(this.R))}var n},e.Gc=function(e){this.J.push(e),Za(this.a,Oa.SDK_VERSION?yr(Oa.SDK_VERSION,this.J):null),this.dispatchEvent(new rh(this.J))},e.Ga=function(){return Q(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:ch(this)&&ch(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?b(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return uh(i,ds(i.a,o))}))},e.Xc=function(e){if(!Tr())return wt(new I("operation-not-supported-in-this-environment"));var t=this,n=qi(e.providerId),r=Ar(),i=null,o=or(i=(!Sr()||lr())&&this.app.options.authDomain&&e.isOAuthProvider?hu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Oa.SDK_VERSION||null,null,null,this.T(),this.R):i,n&&n.va,n&&n.ua);return fh(this,n=ih(this).then((function(n){return Pc(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new dt((function(e,n){t.na("signInViaPopup",null,new I("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=Dc(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&ir(o),e?Kr(e):null})).o((function(e){throw o&&ir(o),e})))},e.Yc=function(e){if(!Tr())return wt(new I("operation-not-supported-in-this-environment"));var t=this;return fh(this,ih(this).then((function(){return Zl(e=t.i,(function(){return e.b.set(Ql,e.c.F,e.a)}));var e})).then((function(){return Oc(t.b,"signInViaRedirect",e,void 0,t.T())})))},e.ra=function(){var e=this;return oh(this).then((function(t){return e.b&&qc(e.b.b),t})).o((function(t){throw e.b&&qc(e.b.b),t}))},e.dd=function(e){if(!e)return wt(new I("null-user"));if(this.S!=e.tenantId)return wt(new I("tenant-id-mismatch"));var t=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,a,s,u=(r=e,i=n,o=t.D,a=t.Ga(),s=r.h,(n={})[Wa]=s.b&&s.b.toString(),n.refreshToken=s.a,i=new dl(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),a&&ml(i,a),Rl(i,r),i);return fh(this,this.h.then((function(){if(t.app.options.apiKey!=e.l)return u.reload()})).then((function(){return ch(t)&&e.uid==ch(t).uid?(Rl(ch(t),e),t.da(e)):(sh(t,u),El(u),t.da(u))})).then((function(){hh(t)})))},e.Bb=function(){var e=this;return fh(this,this.h.then((function(){return e.b&&qc(e.b.b),ch(e)?(sh(e,null),Xl(e.i).then((function(){hh(e)}))):_t()})))},e.Zc=function(){var e=this;return Jl(this.i,this.app.options.authDomain).then((function(t){if(!e.l){var n,r;if((n=ch(e)&&t)&&(n=ch(e).uid,r=t.uid,n=null!=n&&""!==n&&null!=r&&""!==r&&n==r),n)return Rl(ch(e),t),ch(e).I();(ch(e)||t)&&(sh(e,t),t&&(El(t),t.ha=e.D),e.b&&Cc(e.b,e),hh(e))}}))},e.da=function(e){return $l(this.i,e)},e.mc=function(){hh(this),this.da(ch(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return uh(t,_t(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(ch(t))}))},e.Ac=function(e){var t,n,r=this;n=function(){e.next(ch(r))},(t=this).N.push(n),fh(t,t.h.then((function(){!t.l&&z(t.N,n)&&t.W!==t.getUid()&&(t.W=t.getUid(),n(lh(t)))})))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof e?e(ch(r)):"function"==typeof e.next&&e.next(ch(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof e?e(ch(r)):"function"==typeof e.next&&e.next(ch(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this;return fh(this,this.h.then((function(){return ch(t)?ch(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return uh(t,$s(t.a,zs,{token:e}))})).then((function(e){var n=e.user;return Pl(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return uh(n,$s(n.a,Ws,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return uh(n,$s(n.a,bs,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return uh(t,e.ka(t.a))}))},e.Sc=function(e){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=ch(e);if(t&&t.isAnonymous){var n=Kr({providerId:null,isNewUser:!1});return Kr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(e,e.a.Ab()).then((function(t){var n=t.user;return Pl(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return ch(this)&&ch(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&ch(this)&&_l(ch(this))},e.Pc=function(e){var t=this;q(this.s,(function(n){n==e&&t.u--})),this.u<0&&(this.u=0),0==this.u&&ch(this)&&wl(ch(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),fh(this,this.h.then((function(){t.l||z(t.s,e)&&e(lh(t))})))},e.removeAuthTokenListener=function(e){H(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(Yl("local"),e.a,this.ja),this.b&&(Nc(this.b,this),qc(this.b.b)),Promise.resolve()},e.hc=function(e){return fh(this,$s(this.a,_s,{identifier:e,continueUri:Ir()?tr():"http://localhost"}).then((function(e){return e.signinMethods||[]})))},e.Bc=function(e){return!!Eo(e)},e.xb=function(e,t){var n=this;return fh(this,_t().then((function(){var e=new wi(t);if(!e.c)throw new I("argument-error",Ei+" must be true when sending sign in link to email");return Pi(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return fh(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return fh(this,this.a.Sa(e).then((function(e){return new Jr(e)})))},e.kb=function(e){return fh(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return fh(this,_t().then((function(){return void 0===t||ce(t)?{}:Pi(new wi(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return fh(this,Hc(this,e,t,b(this.ab,this)))},e.Vc=function(e,t){var n=this;return fh(this,_t().then((function(){var r=t||tr(),i=Io(e,r);if(!(r=Eo(r)))throw new I("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new I("tenant-id-mismatch");return n.ab(i)})))},dh.prototype.render=function(){},dh.prototype.reset=function(){},dh.prototype.getResponse=function(){},dh.prototype.execute=function(){};var vh=null;function gh(e,t){return(t=mh(t))&&e.a[t]||null}function mh(e){return(e=void 0===e?1e12:e)?e.toString():null}function yh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=tt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():en(this.f,"click",this.i)}function bh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function _h(){}function wh(){}ph.prototype.render=function(e,t){return this.a[this.b.toString()]=new yh(e,t),this.b++},ph.prototype.reset=function(e){var t=gh(this,e);e=mh(e),t&&e&&(t.delete(),delete this.a[e])},ph.prototype.getResponse=function(e){return(e=gh(this,e))?e.getResponse():null},ph.prototype.execute=function(e){(e=gh(this,e))&&e.execute()},yh.prototype.getResponse=function(){return bh(this),this.b},yh.prototype.execute=function(){bh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(t){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(t){}e.h&&e.execute()}),6e4)}),500))},yh.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,rn(this.f,"click",this.i)},Vr(_h,"FACTOR_ID","phone"),wh.prototype.g=function(){return _t(vh=vh||new ph)},wh.prototype.c=function(){};var Th=null;function Ih(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Eh=new pe(ye,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sh=new Rr(3e4,6e4);Ih.prototype.g=function(e){var t=this;return new dt((function(n,r){var i=setTimeout((function(){r(new I("network-request-failed"))}),Sh.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){var o;a.grecaptcha?(t.f=e,o=a.grecaptcha.render,a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)):(clearTimeout(i),r(new I("internal-error"))),delete a[t.a]},_t(Ma(Te(Eh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Ih.prototype.c=function(){this.b--};var kh=null;function Ch(e,t,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,s=s?Th=Th||new wh:kh=kh||new Ih,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xh])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ph],!a.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!tt(t)||!this.i&&tt(t).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ka(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Nh];this.a[Nh]=function(e){var t;Rh(u,e),"function"==typeof c?c(e):"string"!=typeof c||"function"==typeof(t=_r(c,a))&&t(e)};var l=this.a[Ah];this.a[Ah]=function(){var e;Rh(u,null),"function"==typeof l?l():"string"!=typeof l||"function"==typeof(e=_r(l,a))&&e()}}var Nh="callback",Ah="expired-callback",xh="sitekey",Ph="size";function Rh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Oh(e,t){return e.h.push(t),t.oa((function(){W(e.h,t)})),t}function Dh(e){if(e.J)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Lh(e,t,n){var r=!1;try{this.b=n||Oa.app()}catch(e){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=Oa.SDK_VERSION?yr(Oa.SDK_VERSION,o):null,Ch.call(this,n,e,t,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,A(S),r)}function Mh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],i<0||i>=Fh.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Fh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new I("argument-error",e+" failed: "+r)}(e=Ch.prototype).Ia=function(){var e=this;return this.f||(this.f=Oh(this,_t().then((function(){if(Ir()&&!hr())return ur();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,$s(e.s,Os,{})})).then((function(t){e.a[xh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t}))))},e.render=function(){Dh(this);var e=this;return Oh(this,this.Ia().then((function(){var t,n;return null===e.c&&(n=e.v,e.i||(t=tt(n),n=at("DIV"),t.appendChild(n)),e.c=e.g.render(n,e.a)),e.c})))},e.verify=function(){Dh(this);var e=this;return Oh(this,this.render().then((function(t){return new dt((function(n){var r,i=e.g.getResponse(t);i?n(i):(e.l.push(r=function(t){var i;t&&(i=r,H(e.l,(function(e){return e==i})),n(t))}),e.i&&e.g.execute(e.c))}))})))},e.reset=function(){Dh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Dh(this),this.J=!0,this.m.c();for(var e,t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(t=tt(this.v);e=t.firstChild;)t.removeChild(e)},w(Lh,Ch);var Fh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function jh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function Uh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function qh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Vh(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function Bh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function Kh(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function zh(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}}function Wh(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Hh(e,t){return p(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function Gh(e){return p(e)&&"string"==typeof e.uid}function Qh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}}function Yh(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function $h(e,t){for(var n in t){var r=t[n].name;e[r]=Zh(r,e[n],t[n].j)}}function Xh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:_((function(e){return this[e]}),n),set:_((function(e,t,n,r){Mh(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function Jh(e,t,n,r){e[t]=Zh(t,n,r)}function Zh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Mh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=(e=e.split("."))[e.length-1];for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}$h(eh.prototype,{kb:{name:"applyActionCode",j:[jh("code")]},Sa:{name:"checkActionCode",j:[jh("code")]},ob:{name:"confirmPasswordReset",j:[jh("code"),jh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[jh("email"),jh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[jh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[jh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yh(qh(),Vh(),"nextOrObserver"),Vh("opt_error",!0),Vh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yh(qh(),Vh(),"nextOrObserver"),Vh("opt_error",!0),Vh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[jh("email"),Yh(qh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[jh("email"),qh("actionCodeSettings")]},yb:{name:"setPersistence",j:[jh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Kh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Kh()]},Tc:{name:"signInWithCustomToken",j:[jh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[jh("email"),jh("password")]},Vc:{name:"signInWithEmailLink",j:[jh("email"),jh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[jh("phoneNumber"),Qh()]},Xc:{name:"signInWithPopup",j:[Wh()]},Yc:{name:"signInWithRedirect",j:[Wh()]},dd:{name:"updateCurrentUser",j:[Yh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof dl)}},Bh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[jh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[jh("url"),qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[jh("code")]}}),Xh(eh.prototype,{lc:{name:"languageCode",lb:Yh(jh(),Bh(),"languageCode")},ti:{name:"tenantId",lb:Yh(jh(),Bh(),"tenantId")}}),(eh.Persistence=Hu).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",$h(dl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Uh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Uh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Kh()]},rb:{name:"linkWithCredential",j:[Kh()]},Dc:{name:"linkWithPhoneNumber",j:[jh("phoneNumber"),Qh()]},Ec:{name:"linkWithPopup",j:[Wh()]},Fc:{name:"linkWithRedirect",j:[Wh()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Kh()]},ub:{name:"reauthenticateWithCredential",j:[Kh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[jh("phoneNumber"),Qh()]},Nc:{name:"reauthenticateWithPopup",j:[Wh()]},Oc:{name:"reauthenticateWithRedirect",j:[Wh()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yh(qh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[jh(null,!0)]},cd:{name:"unlink",j:[jh("provider")]},Cb:{name:"updateEmail",j:[jh("email")]},Db:{name:"updatePassword",j:[jh("password")]},ed:{name:"updatePhoneNumber",j:[Kh("phone")]},Eb:{name:"updateProfile",j:[qh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[jh("email"),Yh(qh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(dt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Xh(zc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Uh("appVerificationDisabledForTesting")}}),$h(Wc.prototype,{confirm:{name:"confirm",j:[jh("verificationCode")]}}),Jh(eo,"fromJSON",(function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[so,wo,ko,io],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Yh(jh(),qh(),"json")]),Jh(To,"credential",(function(e,t){return new _o(e,t)}),[jh("email"),jh("password")]),$h(_o.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(ho.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(ho,"credential",fo,[Yh(jh(),qh(),"token")]),Jh(To,"credentialWithLink",Io,[jh("email"),jh("emailLink")]),$h(po.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(po,"credential",vo,[Yh(jh(),qh(),"token")]),$h(go.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(go,"credential",mo,[Yh(jh(),Yh(qh(),Bh()),"idToken"),Yh(jh(),Bh(),"accessToken",!0)]),$h(yo.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Jh(yo,"credential",bo,[Yh(jh(),qh(),"token"),jh("secret",!0)]),$h(lo.prototype,{Ca:{name:"addScope",j:[jh("scope")]},credential:{name:"credential",j:[Yh(jh(),Yh(qh(),Bh()),"optionsOrIdToken"),Yh(jh(),Bh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),$h(oo.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(no.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),Jh(No,"credential",Ao,[jh("verificationId"),jh("verificationCode")]),$h(No.prototype,{gb:{name:"verifyPhoneNumber",j:[Yh(jh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?Hh(e.session,Ji)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?Hh(e.session,Zi)&&Gh(e.multiFactorHint):e.session&&e.multiFactorUid?Hh(e.session,Zi)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),Qh()]}}),$h(So.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(I.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(jo.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Fo.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Xc.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Qc.prototype,{Rc:{name:"resolveSignIn",j:[zh()]}}),$h(rl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[zh(),jh("displayName",!0)]},bd:{name:"unenroll",j:[Yh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Gh},jh(),"multiFactorInfoIdentifier")]}}),$h(Lh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jh(fi,"parseLink",_i,[jh("link")]),Jh(_h,"assertion",(function(e){return new tl(e)}),[Kh("phone")]),function(){if(void 0===Oa||!Oa.INTERNAL||!Oa.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ei,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Zr,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:eo,Error:I};Jh(e,"EmailAuthProvider",To,[]),Jh(e,"FacebookAuthProvider",ho,[]),Jh(e,"GithubAuthProvider",po,[]),Jh(e,"GoogleAuthProvider",go,[]),Jh(e,"TwitterAuthProvider",yo,[]),Jh(e,"OAuthProvider",lo,[jh("providerId")]),Jh(e,"SAMLAuthProvider",co,[jh("providerId")]),Jh(e,"PhoneAuthProvider",No,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof eh)}}]),Jh(e,"RecaptchaVerifier",Lh,[Yh(jh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof Oa.app.App)}}]),Jh(e,"ActionCodeURL",fi,[]),Jh(e,"PhoneMultiFactorGenerator",_h,[]),Oa.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new eh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),Oa.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:b((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:b(e.nc,e),addAuthTokenListener:b(e.cc,e),removeAuthTokenListener:b(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Oa.registerVersion("@firebase/auth","0.16.8"),Oa.INTERNAL.extendNamespace({User:dl})}()}.apply("undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Da="";function La(e){Da=e}var Ma=(Fa.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ro(t))},Fa.prototype.get=function(e){return null==(e=this.domStorage_.getItem(this.prefixedName_(e)))?null:Po(e)},Fa.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},Fa.prototype.prefixedName_=function(e){return this.prefix_+e},Fa.prototype.toString=function(){return this.domStorage_.toString()},Fa);function Fa(e){this.domStorage_=e,this.prefix_="firebase:"}var ja=(Ua.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},Ua.prototype.get=function(e){return Do(this.cache_,e)?this.cache_[e]:null},Ua.prototype.remove=function(e){delete this.cache_[e]},Ua);function Ua(){this.cache_={},this.isInMemoryStorage=!0}function qa(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i,o=e.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,oo(++r<e.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(e.charCodeAt(r)-56320)),o<128?t[n++]=o:(o<2048?t[n++]=o>>6|192:(o<65536?t[n++]=o>>12|224:(t[n++]=o>>18|240,t[n++]=o>>12&63|128),t[n++]=o>>6&63|128),t[n++]=63&o|128)}return t}(e);return(e=new Uo).update(t),e=e.digest(),so.encodeByteArray(e)}function Va(e,t){oo(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?($a.logLevel=ca.VERBOSE,Za=$a.log.bind($a),t&&Ya.set("logging_enabled",!0)):"function"==typeof e?Za=e:(Za=null,Ya.remove("logging_enabled"))}function Ba(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+Ja.apply(void 0,eo([],Zi(e)));$a.error(n)}function Ka(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)}function za(e,t){return e===t?0:e<t?-1:1}function Wa(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ro(t))}function Ha(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)n<i+t?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r}ci=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ma(t)}}catch(e){}return new ja};var Ga,Qa=ci("localStorage"),Ya=ci("sessionStorage"),$a=new va("@firebase/database"),Xa=(Ga=1,function(){return Ga++}),Ja=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var o=t[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=e.apply(null,o):r+="object"==typeof o?Ro(o):o,r+=" "}return r},Za=null,es=!0,ts=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!0===es&&(es=!1,null===Za&&!0===Ya.get("logging_enabled")&&Va(!0)),Za&&(e=Ja.apply(null,t),Za(e))},ns=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ts.apply(void 0,eo([e],Zi(t)))}},rs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+Ja.apply(void 0,eo([],Zi(e)));throw $a.error(n),new Error(n)},is=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+Ja.apply(void 0,eo([],Zi(e)));$a.warn(n)},os="[MIN_NAME]",as="[MAX_NAME]",ss=function(e,t){if(e===t)return 0;if(e===os||t===as)return-1;if(t===os||e===as)return 1;var n=vs(e),r=vs(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null===r&&e<t?-1:1},us=function e(t){if("object"!=typeof t||null===t)return Ro(t);var n,r=[];for(n in t)r.push(n);r.sort();for(var i="{",o=0;o<r.length;o++)0!==o&&(i+=","),i+=Ro(r[o]),i+=":",i+=e(t[r[o]]);return i+"}"};function cs(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function ls(e){var t,n,r,i;oo(!Ka(e),"Invalid JSON number"),0===e?t=1/e==-1/(r=n=0)?1:0:(t=e<0,r=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();var s=o.join(""),u="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function hs(e,t){return"object"==typeof(t=setTimeout(e,t))&&t.unref&&t.unref(),t}var fs=new RegExp("^-?(0*)\\d{1,10}$"),ds=-2147483648,ps=2147483647,vs=function(e){return fs.test(e)&&(e=Number(e),ds<=e&&e<=ps)?e:null},gs=function(e){try{e()}catch(t){setTimeout((function(){var n=t.stack||"";throw is("Exception was thrown by user callback.",n),t}),Math.floor(0))}},ms=(ys.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},ys.prototype.addTokenChangeListener=function(e){var t;null!==(t=this.appCheckProvider)&&void 0!==t&&t.get().then((function(t){return t.addTokenListener(e)}))},ys.prototype.notifyForInvalidToken=function(){is('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},ys);function ys(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null!=t&&t.get().then((function(e){return n.appCheck=e}))}var bs=(_s.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(ts("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},_s.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},_s.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},_s.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',is(e)},_s);function _s(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}var ws=(Ts.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},Ts.prototype.addTokenChangeListener=function(e){e(this.accessToken)},Ts.prototype.removeTokenChangeListener=function(e){},Ts.prototype.notifyForInvalidToken=function(){},Ts.OWNER="owner",Ts);function Ts(e){this.accessToken=e}var Is=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Es="websocket",Ss="long_polling",ks=(Cs.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Cs.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Cs.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qa.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Cs.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},Cs.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return e+this.host+"/"+t},Cs);function Cs(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qa.get("host:"+e)||this._host}function Ns(e,t,n){var r;if(oo("string"==typeof t,"typeof type must == string"),oo("object"==typeof n,"typeof params must == object"),t===Es)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ss)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}((t=e).host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams)&&(n.ns=e.namespace);var i=[];return cs(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var As=(xs.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Do(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},xs.prototype.get=function(){return co(this.counters_)},xs);function xs(){this.counters_={}}var Ps={},Rs={};function Os(e){return e=e.toString(),Ps[e]||(Ps[e]=new As),Ps[e]}var Ds=(Ls.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Ls.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&gs((function(){n.onMessage_(e[t])}))}(t);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},Ls);function Ls(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Ms="pLPCommand",Fs="pRTLPCB",js=(Us.prototype.open=function(e,t){var n,r,i,o=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ds(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null}),Math.floor(3e4)),n=function(){var e;o.isClosed_||(o.scriptTagHolder=new qs((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Zi(e,5),r=n[0],i=n[1],a=n[2];if(n[3],n[4],o.incrementIncomingBytes_(e),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"===r)o.id=i,o.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,(function(){o.onClosed_()}))):o.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(r=Zi(e,2))[0],r=r[1];o.incrementIncomingBytes_(e),o.myPacketOrderer.handleResponse(n,r)}),(function(){o.onClosed_()}),o.urlFn),(e={start:"t"}).ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=o.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",o.transportSessionId&&(e.s=o.transportSessionId),o.lastSessionId&&(e.ls=o.lastSessionId),o.applicationId&&(e.p=o.applicationId),o.appCheckToken&&(e.ac=o.appCheckToken),"undefined"!=typeof location&&location.hostname&&Is.test(location.hostname)&&(e.r="f"),e=o.urlFn(e),o.log_("Connecting via long-poll to "+e),o.scriptTagHolder.addTag(e,(function(){})))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&i()})),window.attachEvent("onload",i)))},Us.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Us.forceAllow=function(){Us.forceAllow_=!0},Us.forceDisallow=function(){Us.forceDisallow_=!0},Us.isAvailable=function(){return!!Us.forceAllow_||!(Us.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Us.prototype.markConnectionHealthy=function(){},Us.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Us.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Us.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Us.prototype.send=function(e){e=Ro(e),this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var t=Ha(e=no(e),1840),n=0;n<t.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,t.length,t[n]),this.curSegmentNum++},Us.prototype.addDisconnectPingFrame=function(e,t){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Us.prototype.incrementIncomingBytes_=function(e){e=Ro(e).length,this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},Us);function Us(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ns(e),this.stats_=Os(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Ns(t,Ss,e)}}var qs=(Vs.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ts("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},Vs.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},Vs.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},Vs.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(e={}).id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var e=this.urlFn(e),t="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+t.length<=1870;){var r=this.pendingSegs.shift();t=t+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d,n++}return this.addLongPollTag_(e+=t,this.currentSerial),!0}return!1},Vs.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},Vs.prototype.addLongPollTag_=function(e,t){var n=this;function r(){n.outstandingRequests.delete(t),n.newRequest_()}this.outstandingRequests.add(t);var i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},Vs.prototype.addTag=function(e,t){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){ts("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))},Vs);function Vs(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Xa(),window[Ms+this.uniqueCallbackIdentifier]=e,window[Fs+this.uniqueCallbackIdentifier]=t,this.myIFrame=Vs.createIFrame_(),t="",t="<html><body>"+(t=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':t)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(t),this.myIFrame.doc.close()}catch(e){ts("frame writing exception"),e.stack&&ts(e.stack),ts(e)}}var Bs=null;"undefined"!=typeof MozWebSocket?Bs=MozWebSocket:"undefined"!=typeof WebSocket&&(Bs=WebSocket);var Ks=(zs.connectionURL_=function(e,t,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&Is.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),Ns(e,Es,i)},zs.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qa.set("previous_websocket_failure",!0);try{_o()||(r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new Bs(this.connURL,[],r))}catch(e){this.log_("Error instantiating WebSocket.");var r=e.message||e.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection."),(e=e.message||e.data)&&n.log_(e),n.onClosed_()}},zs.prototype.start=function(){},zs.forceDisallow=function(){zs.forceDisallow_=!0},zs.isAvailable=function(){var e,t=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0),!t&&null!==Bs&&!zs.forceDisallow_},zs.previouslyFailed=function(){return Qa.isInMemoryStorage||!0===Qa.get("previous_websocket_failure")},zs.prototype.markConnectionHealthy=function(){Qa.remove("previous_websocket_failure")},zs.prototype.appendFrame_=function(e){this.frames.push(e),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,e=Po(e),this.onMessage(e))},zs.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},zs.prototype.extractFrameCount_=function(e){if(oo(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},zs.prototype.handleIncomingFrame=function(e){null!==this.mySock&&(e=e.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),(null!==this.frames||null!==(e=this.extractFrameCount_(e)))&&this.appendFrame_(e))},zs.prototype.send=function(e){this.resetKeepAlive(),e=Ro(e),this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var t=Ha(e,16384);1<t.length&&this.sendString_(String(t.length));for(var n=0;n<t.length;n++)this.sendString_(t[n])},zs.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},zs.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},zs.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},zs.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},zs.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},zs.responsesRequiredToBeHealthy=2,zs.healthyTimeout=3e4,zs);function zs(e,t,n,r,i,o,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ns(this.connId),this.stats_=Os(t),this.connURL=zs.connectionURL_(t,o,a,r),this.nodeAdmin=t.nodeAdmin}var Ws=(Object.defineProperty(Hs,"ALL_TRANSPORTS",{get:function(){return[js,Ks]},enumerable:!1,configurable:!0}),Hs.prototype.initTransports_=function(e){var t,n,r=Ks&&Ks.isAvailable(),i=r&&!Ks.previouslyFailed();if(e.webSocketOnly&&(r||is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ks];else{var o=this.transports_=[];try{for(var a=Ji(Hs.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}},Hs.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Hs.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Hs);function Hs(e){this.initTransports_(e)}var Gs=(Qs.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0)),0<(t=t.healthyTimeout||0)&&(this.healthyTimeout_=hs((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(t)))},Qs.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Qs.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},Qs.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},Qs.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},Qs.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Qs.prototype.onSecondaryControl_=function(e){"t"in e&&("a"===(e=e.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Qs.prototype.onSecondaryMessageReceived_=function(e){var t=Wa("t",e);if(e=Wa("d",e),"c"===t)this.onSecondaryControl_(e);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(e)}},Qs.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Qs.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Qs.prototype.onPrimaryMessageReceived_=function(e){var t=Wa("t",e);e=Wa("d",e),"c"===t?this.onControl_(e):"d"===t&&this.onDataMessage_(e)},Qs.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},Qs.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Qs.prototype.onControl_=function(e){var t=Wa("t",e);if("d"in e)if(e=e.d,"h"===t)this.onHandshake_(e);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(e):"r"===t?this.onReset_(e):"e"===t?Ba("Server Error: "+e):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ba("Unknown control packet command: "+t)},Qs.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&is("Protocol version mismatch detected"),this.tryStartUpgrade_())},Qs.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},Qs.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_);e=this.disconnReceiver_(this.secondaryConn_),this.secondaryConn_.open(n,e),hs((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},Qs.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},Qs.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hs((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},Qs.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Qs.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},Qs.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Qs.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},Qs.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},Qs.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Qs.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Qs);function Qs(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ns("c:"+this.id+":"),this.transportManager_=new Ws(t),this.log_("Connection created"),this.start_()}function Ys(){}Ys.prototype.put=function(e,t,n,r){},Ys.prototype.merge=function(e,t,n,r){},Ys.prototype.refreshAuthToken=function(e){},Ys.prototype.refreshAppCheckToken=function(e){},Ys.prototype.onDisconnectPut=function(e,t,n){},Ys.prototype.onDisconnectMerge=function(e,t,n){},Ys.prototype.onDisconnectCancel=function(e,t){},Ys.prototype.reportStats=function(e){},G=Ys;var $s=(Xs.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=eo([],Zi(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},Xs.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n}),(e=this.getInitialEvent(e))&&t.apply(n,e)},Xs.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},Xs.prototype.validateEventType_=function(e){oo(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},Xs);function Xs(e){this.allowedEvents_=e,this.listeners_={},oo(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}var Js,Zs=(Qi(eu,Js=$s),eu.getInstance=function(){return new eu},eu.prototype.getInitialEvent=function(e){return oo("online"===e,"Unknown event type: "+e),[this.online_]},eu.prototype.currentlyOnline=function(){return this.online_},eu);function eu(){var e=Js.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||go()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}var tu=32,nu=768,ru=(iu.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},iu);function iu(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}function ou(){return new ru("")}function au(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function su(e){return e.pieces_.length-e.pieceNum_}function uu(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new ru(e.pieces_,t)}function cu(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function lu(e,t){return e.pieces_.slice(e.pieceNum_+(t=void 0===t?0:t))}function hu(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ru(t,0)}function fu(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ru)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)0<i[r].length&&n.push(i[r])}return new ru(n,0)}function du(e){return e.pieceNum_>=e.pieces_.length}function pu(e,t){var n=au(e),r=au(t);if(null===n)return t;if(n===r)return pu(uu(e),uu(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function vu(e,t){for(var n=lu(e,0),r=lu(t,0),i=0;i<n.length&&i<r.length;i++){var o=ss(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function gu(e,t){if(su(e)!==su(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function mu(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(su(e)>su(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var yu=function(e,t){this.errorPrefix_=t,this.parts_=lu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Yo(this.parts_[n]);bu(this)};function bu(e){if(e.byteLength_>nu)throw new Error(e.errorPrefix_+"has a key path longer than "+nu+" bytes ("+e.byteLength_+").");if(e.parts_.length>tu)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tu+") or object contains a cycle "+_u(e))}function _u(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var wu,Tu=(Qi(Iu,wu=$s),Iu.getInstance=function(){return new Iu},Iu.prototype.getInitialEvent=function(e){return oo("visible"===e,"Unknown event type: "+e),[this.visible_]},Iu);function Iu(){var e,t,n=wu.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,(function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))}),!1),n}var Eu,Su=1e3,ku=3e5,Cu=(Qi(Nu,Eu=G),Nu.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_;t={r:r,a:e,b:t},this.log_(Ro(t)),oo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(t),n&&(this.requestCBHash_[r]=n)},Nu.prototype.get=function(e){var t=this;this.initConnection_();var n=new ho,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},Nu.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),oo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:t,query:e,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Nu.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},Nu.prototype.sendListen_=function(e){var t=this,n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);var o={p:r};e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var a=o.d,s=o.s;Nu.warnOnListenWarnings_(a,n),(t.listens.get(r)&&t.listens.get(r).get(i))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(r,i),e.onComplete&&e.onComplete(s,a))}))},Nu.warnOnListenWarnings_=function(e,t){e&&"object"==typeof e&&Do(e,"w")&&(e=Lo(e,"w"),Array.isArray(e)&&~e.indexOf("no_index")&&(e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',t=t._path.toString(),is("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+e+" at "+t+" to your security rules for better performance.")))},Nu.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},Nu.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||function(e){return"object"==typeof(e=Oo(e).claims)&&!0===e.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Nu.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},Nu.prototype.tryAuth=function(){var e,t,n,r=this;this.connected_&&this.authToken_&&(t=function(e){return!!(e=Oo(e).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")}(e=this.authToken_)?"auth":"gauth",n={cred:e},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(function(t){var n=t.s;t=t.d||"error",r.authToken_===e&&("ok"===n?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(n,t))})))},Nu.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s;t=t.d||"error","ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,t)}))},Nu.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),oo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},Nu.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t),e={p:e},r&&(e.q=n,e.t=r),this.sendRequest("n",e)},Nu.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},Nu.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},Nu.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},Nu.prototype.sendOnDisconnect_=function(e,t,n,r){n={p:t,d:n},this.log_("onDisconnect "+e,n),this.sendRequest(e,n,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},Nu.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},Nu.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},Nu.prototype.putInternal=function(e,t,n,r,i){this.initConnection_(),n={p:t,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:e,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+t)},Nu.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},Nu.prototype.reportStats=function(e){var t=this;this.connected_&&(this.log_("reportStats",e={c:e}),this.sendRequest("s",e,(function(e){"ok"!==e.s&&(e=e.d,t.log_("reportStats","Error sending stats: "+e))})))},Nu.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+Ro(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},Nu.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ba("Unrecognized action received from server: "+Ro(e)+"\nAre you using the latest client?")},Nu.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Nu.prototype.scheduleConnect_=function(e){var t=this;oo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},Nu.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},Nu.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Su,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},Nu.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Su,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Nu.prototype.onRealtimeDisconnect_=function(){var e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Su),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),e=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-e),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Nu.prototype.establishConnection_=function(){return $i(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l=this;return Xi(this,(function(h){switch(h.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Nu.nextConnectionId_++,c=this.lastSessionId,i=!1,o=null,a=function(){o?o.close():(i=!0,n())},u=function(e){oo(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)},this.realtime_={close:a,sendRequest:u},s=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(s),this.appCheckTokenProvider_.getToken(s)])];case 2:return u=Zi.apply(void 0,[h.sent(),2]),s=u[0],u=u[1],i?ts("getToken() completed but was canceled"):(ts("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=u&&u.token,o=new Gs(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(function(e){is(e+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")}),c)),[3,4];case 3:return c=h.sent(),this.log_("Failed to get token: "+c),i||(this.repoInfo_.nodeAdmin&&is(c),a()),[3,4];case 4:return[2]}}))}))},Nu.prototype.interrupt=function(e){ts("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Nu.prototype.resume=function(e){ts("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Mo(this.interruptReasons_)&&(this.reconnectDelay_=Su,this.realtime_||this.scheduleConnect_(0))},Nu.prototype.handleTimestamp_=function(e){e-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:e})},Nu.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Nu.prototype.onListenRevoked_=function(e,t){t=t?t.map((function(e){return us(e)})).join("$"):"default",(t=this.removeListen_(e,t))&&t.onComplete&&t.onComplete("permission_denied")},Nu.prototype.removeListen_=function(e,t){var n,r=new ru(e).toString();return this.listens.has(r)?(n=(e=this.listens.get(r)).get(t),e.delete(t),0===e.size&&this.listens.delete(r)):n=void 0,n},Nu.prototype.onAuthRevoked_=function(e,t){ts("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Nu.prototype.onAppCheckRevoked_=function(e,t){ts("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())},Nu.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},Nu.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Ji(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Ji(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},Nu.prototype.sendConnectStats_=function(){var e={};e["sdk.js."+Da.replace(/\./g,"-")]=1,go()?e["framework.cordova"]=1:bo()&&(e["framework.reactnative"]=1),this.reportStats(e)},Nu.prototype.shouldReconnect_=function(){var e=Zs.getInstance().currentlyOnline();return Mo(this.interruptReasons_)&&e},Nu.nextPersistentConnectionId_=0,Nu.nextConnectionId_=0,Nu);function Nu(e,t,n,r,i,o,a,s){var u=Eu.call(this)||this;if(u.repoInfo_=e,u.applicationId_=t,u.onDataUpdate_=n,u.onConnectStatus_=r,u.onServerInfoUpdate_=i,u.authTokenProvider_=o,u.appCheckTokenProvider_=a,u.authOverride_=s,u.id=Nu.nextPersistentConnectionId_++,u.log_=ns("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingGets_=[],u.outstandingPutCount_=0,u.outstandingGetCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=Su,u.maxReconnectDelay_=ku,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.appCheckToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.invalidAppCheckTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!_o())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Tu.getInstance().on("visible",u.onVisible_,u),-1===e.host.indexOf("fblocal")&&Zs.getInstance().on("online",u.onOnline_,u),u}var Au,xu,Pu=(Ru.Wrap=function(e,t){return new Ru(e,t)},Ru);function Ru(e,t){this.name=e,this.node=t}function Ou(){}function Du(){return null!==xu&&xu.apply(this,arguments)||this}Ou.prototype.getCompare=function(){return this.compare.bind(this)},Ou.prototype.indexedValueChanged=function(e,t){return e=new Pu(os,e),t=new Pu(os,t),0!==this.compare(e,t)},Ou.prototype.minPost=function(){return Pu.MIN},Qi(Du,xu=H=Ou),Object.defineProperty(Du,"__EMPTY_NODE",{get:function(){return Au},set:function(e){Au=e},enumerable:!1,configurable:!0}),Du.prototype.compare=function(e,t){return ss(e.name,t.name)},Du.prototype.isDefinedOn=function(e){throw ao("KeyIndex.isDefinedOn not expected to be called.")},Du.prototype.indexedValueChanged=function(e,t){return!1},Du.prototype.minPost=function(){return Pu.MIN},Du.prototype.maxPost=function(){return new Pu(as,Au)},Du.prototype.makePost=function(e,t){return oo("string"==typeof e,"KeyIndex indexValue must always be a string."),new Pu(e,Au)},Du.prototype.toString=function(){return".key"};var Lu=new(ci=Du),Mu=(Fu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_.pop(),t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value};if(this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Fu.prototype.hasNext=function(){return 0<this.nodeStack_.length},Fu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},Fu);function Fu(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}var ju=(Uu.prototype.copy=function(e,t,n,r,i){return new Uu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Uu.prototype.count=function(){return this.left.count()+1+this.right.count()},Uu.prototype.isEmpty=function(){return!1},Uu.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},Uu.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Uu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Uu.prototype.minKey=function(){return this.min_().key},Uu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Uu.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},Uu.prototype.removeMin_=function(){if(this.left.isEmpty())return Bu.EMPTY_NODE;var e=this;return(e=(e=e.left.isRed_()||e.left.left.isRed_()?e:e.moveRedLeft_()).copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},Uu.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(e,t),null);else{if(0===t(e,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return Bu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()},Uu.prototype.isRed_=function(){return this.color},Uu.prototype.fixUp_=function(){var e=this;return(e=(e=e.right.isRed_()&&!e.left.isRed_()?e.rotateLeft_():e).left.isRed_()&&e.left.left.isRed_()?e.rotateRight_():e).left.isRed_()&&e.right.isRed_()?e.colorFlip_():e},Uu.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()?(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_():e},Uu.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()?(e=e.rotateRight_()).colorFlip_():e},Uu.prototype.rotateLeft_=function(){var e=this.copy(null,null,Uu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Uu.prototype.rotateRight_=function(){var e=this.copy(null,null,Uu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Uu.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Uu.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},Uu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},Uu.RED=!0,Uu.BLACK=!1,Uu);function Uu(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Uu.RED,this.left=null!=r?r:Bu.EMPTY_NODE,this.right=null!=i?i:Bu.EMPTY_NODE}function qu(){}qu.prototype.copy=function(e,t,n,r,i){return this},qu.prototype.insert=function(e,t,n){return new ju(e,t,null)},qu.prototype.remove=function(e,t){return this},qu.prototype.count=function(){return 0},qu.prototype.isEmpty=function(){return!0},qu.prototype.inorderTraversal=function(e){return!1},qu.prototype.reverseTraversal=function(e){return!1},qu.prototype.minKey=function(){return null},qu.prototype.maxKey=function(){return null},qu.prototype.check_=function(){return 0},qu.prototype.isRed_=function(){return!1},$s=qu;var Vu,Bu=(Ku.prototype.insert=function(e,t){return new Ku(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ju.BLACK,null,null))},Ku.prototype.remove=function(e){return new Ku(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ju.BLACK,null,null))},Ku.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},Ku.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Ku.prototype.isEmpty=function(){return this.root_.isEmpty()},Ku.prototype.count=function(){return this.root_.count()},Ku.prototype.minKey=function(){return this.root_.minKey()},Ku.prototype.maxKey=function(){return this.root_.maxKey()},Ku.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},Ku.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},Ku.prototype.getIterator=function(e){return new Mu(this.root_,null,this.comparator_,!1,e)},Ku.prototype.getIteratorFrom=function(e,t){return new Mu(this.root_,e,this.comparator_,!1,t)},Ku.prototype.getReverseIteratorFrom=function(e,t){return new Mu(this.root_,e,this.comparator_,!0,t)},Ku.prototype.getReverseIterator=function(e){return new Mu(this.root_,null,this.comparator_,!0,e)},Ku.EMPTY_NODE=new $s,Ku);function Ku(e,t){void 0===t&&(t=Ku.EMPTY_NODE),this.comparator_=e,this.root_=t}function zu(e,t){return ss(e.name,t.name)}function Wu(e,t){return ss(e,t)}function Hu(e){return"number"==typeof e?"number:"+ls(e):"string:"+e}var Gu,Qu,Yu,$u,Xu=function(e){var t;e.isLeafNode()?(t=e.val(),oo("string"==typeof t||"number"==typeof t||"object"==typeof t&&Do(t,".sv"),"Priority must be a string or number.")):oo(e===Vu||e.isEmpty(),"priority of unexpected type."),oo(e===Vu||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ju=(Object.defineProperty(Zu,"__childrenNodeConstructor",{get:function(){return Gu},set:function(e){Gu=e},enumerable:!1,configurable:!0}),Zu.prototype.isLeafNode=function(){return!0},Zu.prototype.getPriority=function(){return this.priorityNode_},Zu.prototype.updatePriority=function(e){return new Zu(this.value_,e)},Zu.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:Zu.__childrenNodeConstructor.EMPTY_NODE},Zu.prototype.getChild=function(e){return du(e)?this:".priority"===au(e)?this.priorityNode_:Zu.__childrenNodeConstructor.EMPTY_NODE},Zu.prototype.hasChild=function(){return!1},Zu.prototype.getPredecessorChildName=function(e,t){return null},Zu.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Zu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},Zu.prototype.updateChild=function(e,t){var n=au(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(oo(".priority"!==n||1===su(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Zu.__childrenNodeConstructor.EMPTY_NODE.updateChild(uu(e),t)))},Zu.prototype.isEmpty=function(){return!1},Zu.prototype.numChildren=function(){return 0},Zu.prototype.forEachChild=function(e,t){return!1},Zu.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Zu.prototype.hash=function(){var e,t;return null===this.lazyHash_&&(e="",this.priorityNode_.isEmpty()||(e+="priority:"+Hu(this.priorityNode_.val())+":"),e+=(t=typeof this.value_)+":",e+="number"==t?ls(this.value_):this.value_,this.lazyHash_=qa(e)),this.lazyHash_},Zu.prototype.getValue=function(){return this.value_},Zu.prototype.compareTo=function(e){return e===Zu.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Zu.__childrenNodeConstructor?-1:(oo(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},Zu.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=Zu.VALUE_TYPE_ORDER.indexOf(t),i=Zu.VALUE_TYPE_ORDER.indexOf(n);return oo(0<=r,"Unknown leaf type: "+t),oo(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r},Zu.prototype.withIndex=function(){return this},Zu.prototype.isIndexed=function(){return!0},Zu.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},Zu.VALUE_TYPE_ORDER=["object","boolean","number","string"],Zu);function Zu(e,t){void 0===t&&(t=Zu.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,oo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Xu(this.priorityNode_)}function ec(){return null!==$u&&$u.apply(this,arguments)||this}var tc=new(Qi(ec,$u=H),ec.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority();return 0===(r=n.compareTo(r))?ss(e.name,t.name):r},ec.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},ec.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},ec.prototype.minPost=function(){return Pu.MIN},ec.prototype.maxPost=function(){return new Pu(as,new Ju("[PRIORITY-POST]",Yu))},ec.prototype.makePost=function(e,t){return e=Qu(e),new Pu(t,new Ju("[PRIORITY-POST]",e))},ec.prototype.toString=function(){return".priority"},ec),nc=Math.log(2),rc=(ic.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},ic);function ic(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/nc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}var oc,ac,sc=function(e,t,n,r){e.sort(t);var i=function t(r,i){if(0==(o=i-r))return null;if(1==o)return a=e[r],s=n?n(a):a,new ju(s,a.node,ju.BLACK,null,null);r=t(r,o=parseInt(o/2,10)+r),i=t(o+1,i);var o,a=e[o],s=n?n(a):a;return new ju(s,a.node,ju.BLACK,r,i)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t,t=i(1+o,s),s=e[o],o=n?n(s):s,u(new ju(o,s.node,r,null,t))},u=function(e){r=r?r.left=e:o=e},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,ju.BLACK):(s(h,ju.BLACK),s(h,ju.RED))}return o}(new rc(e.length));return new Bu(r||t,o)},uc={},cc=(Object.defineProperty(lc,"Default",{get:function(){return oo(tc,"ChildrenNode.ts has not been loaded"),oc=oc||new lc({".priority":uc},{".priority":tc})},enumerable:!1,configurable:!0}),lc.prototype.get=function(e){var t=Lo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Bu?t:null},lc.prototype.hasIndex=function(e){return Do(this.indexSet_,e.toString())},lc.prototype.addIndex=function(e,t){oo(e!==Lu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=t.getIterator(Pu.Wrap),o=i.getNext();o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();var a=r?sc(n,e.getCompare()):uc,s=e.toString(),u=Yi({},this.indexSet_);return u[s]=e,(t=Yi({},this.indexes_))[s]=a,new lc(t,u)},lc.prototype.addToIndexes=function(e,t){var n=this;return new lc(Fo(this.indexes_,(function(r,i){var o=Lo(n.indexSet_,i);if(oo(o,"Missing index implementation for "+i),r===uc){if(o.isDefinedOn(e.node)){for(var a=[],s=t.getIterator(Pu.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),sc(a,o.getCompare())}return uc}return o=r,(o=(i=t.get(e.name))?r.remove(new Pu(e.name,i)):o).insert(e,e.node)})),this.indexSet_)},lc.prototype.removeFromIndexes=function(e,t){return new lc(Fo(this.indexes_,(function(n){if(n===uc)return n;var r=t.get(e.name);return r?n.remove(new Pu(e.name,r)):n})),this.indexSet_)},lc);function lc(e,t){this.indexes_=e,this.indexSet_=t}var hc,fc=(Object.defineProperty(dc,"EMPTY_NODE",{get:function(){return ac=ac||new dc(new Bu(Wu),null,cc.Default)},enumerable:!1,configurable:!0}),dc.prototype.isLeafNode=function(){return!1},dc.prototype.getPriority=function(){return this.priorityNode_||ac},dc.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new dc(this.children_,e,this.indexMap_)},dc.prototype.getImmediateChild=function(e){return".priority"===e?this.getPriority():null===(e=this.children_.get(e))?ac:e},dc.prototype.getChild=function(e){var t=au(e);return null===t?this:this.getImmediateChild(t).getChild(uu(e))},dc.prototype.hasChild=function(e){return null!==this.children_.get(e)},dc.prototype.updateImmediateChild=function(e,t){if(oo(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n=new Pu(e,t),r=void 0,i=void 0;return i=t.isEmpty()?(r=this.children_.remove(e),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ac:this.priorityNode_,new dc(r,n,i)},dc.prototype.updateChild=function(e,t){var n=au(e);return null===n?t:(oo(".priority"!==au(e)||1===su(e),".priority must be the last token in a path"),t=this.getImmediateChild(n).updateChild(uu(e),t),this.updateImmediateChild(n,t))},dc.prototype.isEmpty=function(){return this.children_.isEmpty()},dc.prototype.numChildren=function(){return this.children_.count()},dc.prototype.val=function(e){if(this.isEmpty())return null;var t={},n=0,r=0,i=!0;if(this.forEachChild(tc,(function(o,a){t[o]=a.val(e),n++,i&&dc.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){var o,a=[];for(o in t)a[o]=t[o];return a}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t},dc.prototype.hash=function(){var e;return null===this.lazyHash_&&(e="",this.getPriority().isEmpty()||(e+="priority:"+Hu(this.getPriority().val())+":"),this.forEachChild(tc,(function(t,n){""!==(n=n.hash())&&(e+=":"+t+":"+n)})),this.lazyHash_=""===e?"":qa(e)),this.lazyHash_},dc.prototype.getPredecessorChildName=function(e,t,n){return(n=this.resolveIndex_(n))?(t=n.getPredecessorKey(new Pu(e,t)))?t.name:null:this.children_.getPredecessorKey(e)},dc.prototype.getFirstChildName=function(e){return(e=this.resolveIndex_(e))?(e=e.minKey())&&e.name:this.children_.minKey()},dc.prototype.getFirstChild=function(e){return(e=this.getFirstChildName(e))?new Pu(e,this.children_.get(e)):null},dc.prototype.getLastChildName=function(e){return(e=this.resolveIndex_(e))?(e=e.maxKey())&&e.name:this.children_.maxKey()},dc.prototype.getLastChild=function(e){return(e=this.getLastChildName(e))?new Pu(e,this.children_.get(e)):null},dc.prototype.forEachChild=function(e,t){return(e=this.resolveIndex_(e))?e.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},dc.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},dc.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Pu.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},dc.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},dc.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Pu.Wrap),i=r.peek();null!=i&&0<t.compare(i,e);)r.getNext(),i=r.peek();return r},dc.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vc?-1:0},dc.prototype.withIndex=function(e){return e===Lu||this.indexMap_.hasIndex(e)?this:(e=this.indexMap_.addIndex(e,this.children_),new dc(this.children_,this.priorityNode_,e))},dc.prototype.isIndexed=function(e){return e===Lu||this.indexMap_.hasIndex(e)},dc.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var t=this.getIterator(tc),n=e.getIterator(tc),r=t.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i}return!1},dc.prototype.resolveIndex_=function(e){return e===Lu?null:this.indexMap_.get(e.toString())},dc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,dc);function dc(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Xu(this.priorityNode_),this.children_.isEmpty()&&oo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function pc(){return hc.call(this,new Bu(Wu),fc.EMPTY_NODE,cc.Default)||this}var vc=new(Qi(pc,hc=fc),pc.prototype.compareTo=function(e){return e===this?0:1},pc.prototype.equals=function(e){return e===this},pc.prototype.getPriority=function(){return this},pc.prototype.getImmediateChild=function(e){return fc.EMPTY_NODE},pc.prototype.isEmpty=function(){return!1},pc);Object.defineProperties(Pu,{MIN:{value:new Pu(os,fc.EMPTY_NODE)},MAX:{value:new Pu(as,vc)}}),ci.__EMPTY_NODE=fc.EMPTY_NODE,Ju.__childrenNodeConstructor=fc,Yu=Vu=vc;var gc=!0;function mc(e,t){if(void 0===t&&(t=null),null===e)return fc.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),oo(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"!=typeof(e="object"==typeof e&&".value"in e&&null!==e[".value"]?e[".value"]:e)||".sv"in e)return new Ju(e,mc(t));if(e instanceof Array||!gc){var n=fc.EMPTY_NODE;return cs(e,(function(t,r){Do(e,t)&&"."!==t.substring(0,1)&&(!(r=mc(r)).isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(t,r)))})),n.updatePriority(mc(t))}var r=[],i=!1;if(cs(e,(function(e,t){"."!==e.substring(0,1)&&((t=mc(t)).isEmpty()||(i=i||!t.getPriority().isEmpty(),r.push(new Pu(e,t))))})),0===r.length)return fc.EMPTY_NODE;var o=sc(r,zu,(function(e){return e.name}),Wu);if(i){var a=sc(r,tc.getCompare());return new fc(o,mc(t),new cc({".priority":a},{".priority":tc}))}return new fc(o,mc(t),cc.Default)}Qu=mc;var yc,bc,_c=(Qi(wc,yc=H),wc.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},wc.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},wc.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node);return 0===(r=n.compareTo(r))?ss(e.name,t.name):r},wc.prototype.makePost=function(e,t){return e=mc(e),e=fc.EMPTY_NODE.updateChild(this.indexPath_,e),new Pu(t,e)},wc.prototype.maxPost=function(){var e=fc.EMPTY_NODE.updateChild(this.indexPath_,vc);return new Pu(as,e)},wc.prototype.toString=function(){return lu(this.indexPath_,0).join("/")},wc);function wc(e){var t=yc.call(this)||this;return t.indexPath_=e,oo(!du(e)&&".priority"!==au(e),"Can't create PathIndex with empty path or .priority key"),t}function Tc(){return null!==bc&&bc.apply(this,arguments)||this}function Ic(e){if(e===""+ps)return"-";var t=vs(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?as:(t=n[i],t=Nc.charAt(Nc.indexOf(t)+1),n[i]=t,n.slice(0,i+1).join(""))}function Ec(e){if(e===""+ds)return os;var t=vs(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?""+ps:(delete n[n.length-1],n.join("")):(n[n.length-1]=Nc.charAt(Nc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Sc,kc,Cc=new(Qi(Tc,bc=H),Tc.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?ss(e.name,t.name):n},Tc.prototype.isDefinedOn=function(e){return!0},Tc.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},Tc.prototype.minPost=function(){return Pu.MIN},Tc.prototype.maxPost=function(){return Pu.MAX},Tc.prototype.makePost=function(e,t){return e=mc(e),new Pu(t,e)},Tc.prototype.toString=function(){return".value"},Tc),Nc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ac=(Sc=0,kc=[],function(e){var t=e===Sc;Sc=e;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Nc.charAt(e%64),e=Math.floor(e/64);oo(0===e,"Cannot push at time == 0");var i=n.join("");if(t){for(r=11;0<=r&&63===kc[r];r--)kc[r]=0;kc[r]++}else for(r=0;r<12;r++)kc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Nc.charAt(kc[r]);return oo(20===i.length,"nextPushId: Length should be 20."),i});function xc(e){return{type:"value",snapshotNode:e}}function Pc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Rc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Oc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Dc=(Lc.prototype.updateChild=function(e,t,n,r,i,o){oo(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Rc(t,a)):oo(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Pc(t,n)):o.trackChildChange(Oc(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},Lc.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(tc,(function(e,r){t.hasChild(e)||n.trackChildChange(Rc(e,r))})),t.isLeafNode()||t.forEachChild(tc,(function(t,r){var i;e.hasChild(t)?(i=e.getImmediateChild(t)).equals(r)||n.trackChildChange(Oc(t,r,i)):n.trackChildChange(Pc(t,r))}))),t.withIndex(this.index_)},Lc.prototype.updatePriority=function(e,t){return e.isEmpty()?fc.EMPTY_NODE:e.updatePriority(t)},Lc.prototype.filtersNodes=function(){return!1},Lc.prototype.getIndexedFilter=function(){return this},Lc.prototype.getIndex=function(){return this.index_},Lc);function Lc(e){this.index_=e}var Mc=(Fc.prototype.getStartPost=function(){return this.startPost_},Fc.prototype.getEndPost=function(){return this.endPost_},Fc.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},Fc.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Pu(t,n))||(n=fc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},Fc.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=fc.EMPTY_NODE);var r=(r=t.withIndex(this.index_)).updatePriority(fc.EMPTY_NODE),i=this;return t.forEachChild(tc,(function(e,t){i.matches(new Pu(e,t))||(r=r.updateImmediateChild(e,fc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},Fc.prototype.updatePriority=function(e,t){return e},Fc.prototype.filtersNodes=function(){return!0},Fc.prototype.getIndexedFilter=function(){return this.indexedFilter_},Fc.prototype.getIndex=function(){return this.index_},Fc.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},Fc.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},Fc);function Fc(e){this.indexedFilter_=new Dc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fc.getStartPost_(e),this.endPost_=Fc.getEndPost_(e)}var jc=(Uc.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Pu(t,n))||(n=fc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},Uc.prototype.updateFullNode=function(e,t,n){if(t.isLeafNode()||t.isEmpty())r=fc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var r=fc.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(fc.EMPTY_NODE);var s,u=void 0,c=void 0,l=void 0;i=void 0,l=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(e,t){return s(t,e)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var h=!1;i.hasNext();)a=i.getNext(),(h=!h&&l(u,a)<=0||h)&&o<this.limit_&&l(a,c)<=0?o++:r=r.updateImmediateChild(a.name,fc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},Uc.prototype.updatePriority=function(e,t){return e},Uc.prototype.filtersNodes=function(){return!0},Uc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Uc.prototype.getIndex=function(){return this.index_},Uc.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o,a;a=this.reverse_?(o=this.index_.getCompare(),function(e,t){return o(t,e)}):this.index_.getCompare();var s=e;oo(s.numChildren()===this.limit_,"");var u=new Pu(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);return l&&!n.isEmpty()&&0<=d?(null!=i&&i.trackChildChange(Oc(t,n,h)),s.updateImmediateChild(t,n)):(null!=i&&i.trackChildChange(Rc(t,h)),h=s.updateImmediateChild(t,fc.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Pc(f.name,f.node)),h.updateImmediateChild(f.name,f.node)):h)}return!n.isEmpty()&&l&&0<=a(c,u)?(null!=i&&(i.trackChildChange(Rc(c.name,c.node)),i.trackChildChange(Pc(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,fc.EMPTY_NODE)):e},Uc);function Uc(e){this.rangedFilter_=new Mc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}var qc=(Vc.prototype.hasStart=function(){return this.startSet_},Vc.prototype.hasStartAfter=function(){return this.startAfterSet_},Vc.prototype.hasEndBefore=function(){return this.endBeforeSet_},Vc.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Vc.prototype.getIndexStartValue=function(){return oo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Vc.prototype.getIndexStartName=function(){return oo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:os},Vc.prototype.hasEnd=function(){return this.endSet_},Vc.prototype.getIndexEndValue=function(){return oo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Vc.prototype.getIndexEndName=function(){return oo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:as},Vc.prototype.hasLimit=function(){return this.limitSet_},Vc.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Vc.prototype.getLimit=function(){return oo(this.limitSet_,"Only valid if limit has been set"),this.limit_},Vc.prototype.getIndex=function(){return this.index_},Vc.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Vc.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===tc},Vc.prototype.copy=function(){var e=new Vc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},Vc);function Vc(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tc}function Bc(e,t,n){return(e=e.copy()).startSet_=!0,e.indexStartValue_=t=void 0===t?null:t,null!=n?(e.startNameSet_=!0,e.indexStartName_=n):(e.startNameSet_=!1,e.indexStartName_=""),e}function Kc(e,t,n){return(e=e.copy()).endSet_=!0,e.indexEndValue_=t=void 0===t?null:t,void 0!==n?(e.endNameSet_=!0,e.indexEndName_=n):(e.endNameSet_=!1,e.indexEndName_=""),e}function zc(e,t){return(e=e.copy()).index_=t,e}function Wc(e){var t,n={};return e.isDefault()||(t=e.index_===tc?"$priority":e.index_===Cc?"$value":e.index_===Lu?"$key":(oo(e.index_ instanceof _c,"Unrecognized index type!"),e.index_.toString()),n.orderBy=Ro(t),e.startSet_&&(n.startAt=Ro(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Ro(e.indexStartName_))),e.endSet_&&(n.endAt=Ro(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Ro(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Hc(e){var t,n={};return e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_)),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_)),e.limitSet_&&(n.l=e.limit_,""===(t=e.viewFrom_)&&(t=e.isViewFromLeft()?"l":"r"),n.vf=t),e.index_!==tc&&(n.i=e.index_.toString()),n}var Gc,Qc=(Qi(Yc,Gc=G),Yc.prototype.reportStats=function(e){throw new Error("Method not implemented.")},Yc.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(oo(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},Yc.prototype.listen=function(e,t,n,r){var i=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var a=Yc.getListenId_(e,n),s={};this.listens_[a]=s,e=Wc(e._queryParams),this.restRequest_(o+".json",e,(function(e,t){null===(e=404===e?t=null:e)&&i.onDataUpdate_(o,t,!1,n),Lo(i.listens_,a)===s&&r(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},Yc.prototype.unlisten=function(e,t){t=Yc.getListenId_(e,t),delete this.listens_[t]},Yc.prototype.get=function(e){var t=this,n=Wc(e._queryParams),r=e._path.toString(),i=new ho;return this.restRequest_(r+".json",n,(function(e,n){null===(e=404===e?n=null:e)?(t.onDataUpdate_(r,n,!1,null),i.resolve(n)):i.reject(new Error(n))})),i.promise},Yc.prototype.refreshAuthToken=function(e){},Yc.prototype.restRequest_=function(e,t,n){var r=this;return(t=void 0===t?{}:t).format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){i=(o=Zi(i,2))[0];var o=o[1];i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+jo(t);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(200<=s.status&&s.status<300){try{e=Po(s.responseText)}catch(e){is("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&is("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},Yc);function Yc(e,t,n,r){var i=Gc.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=t,i.authTokenProvider_=n,i.appCheckTokenProvider_=r,i.log_=ns("p:rest:"),i.listens_={},i}var $c=(Xc.prototype.getNode=function(e){return this.rootNode_.getChild(e)},Xc.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},Xc);function Xc(){this.rootNode_=fc.EMPTY_NODE}function Jc(){return{value:null,children:new Map}}function Zc(e,t,n){var r;du(t)?(e.value=n,e.children.clear()):null!==e.value?e.value=e.value.updateChild(t,n):(r=au(t),e.children.has(r)||e.children.set(r,Jc()),Zc(e.children.get(r),t=uu(t),n))}function el(e,t,n){var r;null!==e.value?n(t,e.value):(r=function(e,r){el(r,new ru(t.toString()+"/"+e),n)},e.children.forEach((function(e,t){r(t,e)})))}var tl=(nl.prototype.get=function(){var e=this.collection_.get(),t=Yi({},e);return this.last_&&cs(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},nl);function nl(e){this.collection_=e,this.last_=null}var rl,il=(ol.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;cs(t,(function(t,i){0<i&&Do(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),hs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},ol);function ol(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tl(e),e=1e4+2e4*Math.random(),hs(this.reportStats_.bind(this),Math.floor(e))}function al(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ul(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}($s=rl=rl||{})[$s.OVERWRITE=0]="OVERWRITE",$s[$s.MERGE=1]="MERGE",$s[$s.ACK_USER_WRITE=2]="ACK_USER_WRITE",$s[$s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var cl=(ll.prototype.operationForChild=function(e){if(du(this.path)){if(null!=this.affectedTree.value)return oo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new ru(e));return new ll(ou(),t,this.revert)}return oo(au(this.path)===e,"operationForChild called for unrelated child."),new ll(uu(this.path),this.affectedTree,this.revert)},ll);function ll(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=rl.ACK_USER_WRITE,this.source=al()}var hl=(fl.prototype.operationForChild=function(e){return du(this.path)?new fl(this.source,ou()):new fl(this.source,uu(this.path))},fl);function fl(e,t){this.source=e,this.path=t,this.type=rl.LISTEN_COMPLETE}var dl=(pl.prototype.operationForChild=function(e){return du(this.path)?new pl(this.source,ou(),this.snap.getImmediateChild(e)):new pl(this.source,uu(this.path),this.snap)},pl);function pl(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=rl.OVERWRITE}var vl=(gl.prototype.operationForChild=function(e){if(du(this.path)){var t=this.children.subtree(new ru(e));return t.isEmpty()?null:t.value?new dl(this.source,ou(),t.value):new gl(this.source,ou(),t)}return oo(au(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gl(this.source,uu(this.path),this.children)},gl.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},gl);function gl(e,t,n){this.source=e,this.path=t,this.children=n,this.type=rl.MERGE}var ml=(yl.prototype.isFullyInitialized=function(){return this.fullyInitialized_},yl.prototype.isFiltered=function(){return this.filtered_},yl.prototype.isCompleteForPath=function(e){return du(e)?this.isFullyInitialized()&&!this.filtered_:(e=au(e),this.isCompleteForChild(e))},yl.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},yl.prototype.getNode=function(){return this.node_},yl);function yl(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}var bl,_l=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function wl(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Tl(e,i,"child_removed",t,r,n),Tl(e,i,"child_added",t,r,n),Tl(e,i,"child_moved",o,r,n),Tl(e,i,"child_changed",t,r,n),Tl(e,i,"value",t,r,n),i}function Tl(e,t,n,r,i,o){(r=r.filter((function(e){return e.type===n}))).sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ao("Should only compare child_ events.");return t=new Pu(t.childName,t.snapshotNode),n=new Pu(n.childName,n.snapshotNode),e.index_.compare(t,n)}(e,t,n)})),r.forEach((function(n){var r,a,s,u=(r=e,s=o,"value"===(a=n).type||"child_removed"===a.type||(a.prevName=s.getPredecessorChildName(a.childName,a.snapshotNode,r.index_)),a);i.forEach((function(r){r.respondsTo(n.type)&&t.push(r.createEvent(u,e.query_))}))}))}function Il(e,t){return{eventCache:e,serverCache:t}}function El(e,t,n,r){return Il(new ml(t,n,r),e.serverCache)}function Sl(e,t,n,r){return Il(e.eventCache,new ml(t,n,r))}function kl(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Cl(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Nl=(Al.fromObject=function(e){var t=new Al(null);return cs(e,(function(e,n){t=t.set(new ru(e),n)})),t},Al.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Al.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:ou(),value:this.value};if(du(e))return null;var n=au(e),r=this.children.get(n);return null===r||null==(t=r.findRootMostMatchingPathAndValue(uu(e),t))?null:{path:fu(new ru(n),t.path),value:t.value}},Al.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},Al.prototype.subtree=function(e){if(du(e))return this;var t=au(e);return null!==(t=this.children.get(t))?t.subtree(uu(e)):new Al(null)},Al.prototype.set=function(e,t){if(du(e))return new Al(t,this.children);var n=au(e);return t=(this.children.get(n)||new Al(null)).set(uu(e),t),t=this.children.insert(n,t),new Al(this.value,t)},Al.prototype.remove=function(e){if(du(e))return this.children.isEmpty()?new Al(null):new Al(null,this.children);var t=au(e),n=this.children.get(t);return n?(n=n.remove(uu(e)),e=void 0,e=n.isEmpty()?this.children.remove(t):this.children.insert(t,n),null===this.value&&e.isEmpty()?new Al(null):new Al(this.value,e)):this},Al.prototype.get=function(e){if(du(e))return this.value;var t=au(e);return(t=this.children.get(t))?t.get(uu(e)):null},Al.prototype.setTree=function(e,t){if(du(e))return t;var n=au(e);return e=(this.children.get(n)||new Al(null)).setTree(uu(e),t),t=void 0,t=e.isEmpty()?this.children.remove(n):this.children.insert(n,e),new Al(this.value,t)},Al.prototype.fold=function(e){return this.fold_(ou(),e)},Al.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(fu(e,r),t)})),t(e,this.value,n)},Al.prototype.findOnPath=function(e,t){return this.findOnPath_(e,ou(),t)},Al.prototype.findOnPath_=function(e,t,n){if(r=!!this.value&&n(t,this.value))return r;if(du(e))return null;var r,i=au(e);return(r=this.children.get(i))?r.findOnPath_(uu(e),fu(t,i),n):null},Al.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,ou(),t)},Al.prototype.foreachOnPath_=function(e,t,n){if(du(e))return this;this.value&&n(t,this.value);var r=au(e),i=this.children.get(r);return i?i.foreachOnPath_(uu(e),fu(t,r),n):new Al(null)},Al.prototype.foreach=function(e){this.foreach_(ou(),e)},Al.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(fu(e,n),t)})),this.value&&t(e,this.value)},Al.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},Al);function Al(e,t){void 0===t&&(t=bl=bl||new Bu(za)),this.value=e,this.children=t}var xl=(Pl.empty=function(){return new Pl(new Nl(null))},Pl);function Pl(e){this.writeTree_=e}function Rl(e,t,n){if(du(t))return new xl(new Nl(n));if(null!=(o=e.writeTree_.findRootMostValueAndPath(t))){var r=o.path,i=o.value,o=pu(r,t);return i=i.updateChild(o,n),new xl(e.writeTree_.set(r,i))}return n=new Nl(n),n=e.writeTree_.setTree(t,n),new xl(n)}function Ol(e,t,n){var r=e;return cs(n,(function(e,n){r=Rl(r,fu(t,e),n)})),r}function Dl(e,t){return du(t)?xl.empty():(t=e.writeTree_.setTree(t,new Nl(null)),new xl(t))}function Ll(e,t){return null!=Ml(e,t)}function Ml(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(pu(n.path,t)):null}function Fl(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(tc,(function(e,n){t.push(new Pu(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Pu(e,n.value))})),t}function jl(e,t){if(du(t))return e;var n=Ml(e,t);return new xl(null!=n?new Nl(n):e.writeTree_.subtree(t))}function Ul(e){return e.writeTree_.isEmpty()}function ql(e,t){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(oo(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(fu(t,n),o,r)})),r=r.getChild(t).isEmpty()||null===i?r:r.updateChild(fu(t,".priority"),i)}(ou(),e.writeTree_,t)}function Vl(e,t){return Zl(t,e)}function Bl(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));oo(0<=n,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i,o=r.visible,a=!1,s=e.allWrites.length-1;o&&0<=s;){var u=e.allWrites[s];u.visible&&(n<=s&&function(e,t){if(e.snap)return mu(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&mu(fu(e.path,n),t))return!0;return!1}(u,r.path)?o=!1:mu(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?((i=e).visibleWrites=zl(i.allWrites,Kl,ou()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?e.visibleWrites=Dl(e.visibleWrites,r.path):cs(r.children,(function(t){e.visibleWrites=Dl(e.visibleWrites,fu(r.path,t))})),!0)}function Kl(e){return e.visible}function zl(e,t,n){for(var r=xl.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)mu(n,a)?r=Rl(r,s=pu(n,a),o.snap):mu(a,n)&&(s=pu(a,n),r=Rl(r,ou(),o.snap.getChild(s)));else{if(!o.children)throw ao("WriteRecord should have .snap or .children");mu(n,a)?r=Ol(r,s=pu(n,a),o.children):mu(a,n)&&(du(s=pu(a,n))?r=Ol(r,ou(),o.children):(o=Lo(o.children,au(s)))&&(s=o.getChild(uu(s)),r=Rl(r,ou(),s)))}}}return r}function Wl(e,t,n,r,i){if(r||i){var o=jl(e.visibleWrites,t);return!i&&Ul(o)?n:i||null!=n||Ll(o,ou())?ql(zl(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(mu(e.path,t)||mu(t,e.path))}),t),n||fc.EMPTY_NODE):null}return null!=(o=Ml(e.visibleWrites,t))?o:Ul(e=jl(e.visibleWrites,t))?n:null!=n||Ll(e,ou())?ql(e,n||fc.EMPTY_NODE):null}function Hl(e,t,n,r){return Wl(e.writeTree,e.treePath,t,n,r)}function Gl(e,t){return function(e,t,n){var r=fc.EMPTY_NODE,i=Ml(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(tc,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=jl(e.visibleWrites,t);return n.forEachChild(tc,(function(e,t){t=ql(jl(o,new ru(e)),t),r=r.updateImmediateChild(e,t)})),Fl(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Fl(jl(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Ql(e,t,n,r){return i=e.writeTree,e=e.treePath,oo(n||r,"Either existingEventSnap or existingServerSnap must exist"),e=fu(e,t),Ll(i.visibleWrites,e)?null:Ul(e=jl(i.visibleWrites,e))?r.getChild(t):ql(e,r.getChild(t));var i}function Yl(e,t){return n=e.writeTree,t=fu(e.treePath,t),Ml(n.visibleWrites,t);var n}function $l(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s;if(null!=(t=Ml(e=jl(e.visibleWrites,t),ou())))s=t;else{if(null==n)return[];s=ql(e,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),l=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=l.getNext();h&&u.length<i;)0!==c(h,r)&&u.push(h),h=l.getNext();return u}(e.writeTree,e.treePath,t,n,r,i,o)}function Xl(e,t,n){return r=e.writeTree,i=e.treePath,e=n,t=fu(i,n=t),null!=(i=Ml(r.visibleWrites,t))?i:e.isCompleteForChild(n)?ql(jl(r.visibleWrites,t),e.getNode().getImmediateChild(n)):null;var r,i}function Jl(e,t){return Zl(fu(e.treePath,t),e.writeTree)}function Zl(e,t){return{treePath:e,writeTree:t}}var eh=(th.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;oo("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),oo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Oc(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Rc(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Pc(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ao("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Oc(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},th.prototype.getChanges=function(){return Array.from(this.changeMap.values())},th);function th(){this.changeMap=new Map}function nh(){}var rh=new(nh.prototype.getCompleteChild=function(e){return null},nh.prototype.getChildAfterChild=function(e,t,n){return null},nh),ih=(oh.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;return t.isCompleteForChild(e)?t.getNode().getImmediateChild(e):(t=null!=this.optCompleteServerCache_?new ml(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,Xl(this.writes_,e,t))},oh.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Cl(this.viewCache_);return 0===(e=$l(this.writes_,r,t,1,n,e)).length?null:e[0]},oh);function oh(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}function ah(e,t,n,r,i){var o,a,s,u,c,l,h,f,d=new eh;if(n.type===rl.OVERWRITE)var p=n,v=p.source.fromUser?ch(e,t,p.path,p.snap,r,i,d):(oo(p.source.fromServer,"Unknown source."),o=p.source.tagged||t.serverCache.isFiltered()&&!du(p.path),uh(e,t,p.path,p.snap,r,i,o,d));else if(n.type===rl.MERGE){var g=n;v=g.source.fromUser?(a=e,s=t,u=g.path,p=g.children,c=r,l=i,h=d,f=s,p.foreach((function(e,t){e=fu(u,e),lh(s,au(e))&&(f=ch(a,f,e,t,c,l,h))})),p.foreach((function(e,t){e=fu(u,e),lh(s,au(e))||(f=ch(a,f,e,t,c,l,h))})),f):(oo(g.source.fromServer,"Unknown source."),o=g.source.tagged||t.serverCache.isFiltered(),fh(e,t,g.path,g.children,r,i,o,d))}else if(n.type===rl.ACK_USER_WRITE){var m=n;v=m.revert?function(e,t,n,r,i,o){var a;if(null!=Yl(r,n))return t;var s,u,c=new ih(r,t,i),l=t.eventCache.getNode();return i=void 0,du(n)||".priority"===au(n)?(u=void 0,u=t.serverCache.isFullyInitialized()?Hl(r,Cl(t)):(s=t.serverCache.getNode(),oo(s instanceof fc,"serverChildren would be complete if leaf node"),Gl(r,s)),i=e.filter.updateFullNode(l,u,o)):(null==(u=Xl(r,s=au(n),t.serverCache))&&t.serverCache.isCompleteForChild(s)&&(u=l.getImmediateChild(s)),(i=null!=u?e.filter.updateChild(l,s,u,uu(n),c,o):t.eventCache.getNode().hasChild(s)?e.filter.updateChild(l,s,fc.EMPTY_NODE,uu(n),c,o):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Hl(r,Cl(t))).isLeafNode()&&(i=e.filter.updateFullNode(i,a,o))),a=t.serverCache.isFullyInitialized()||null!=Yl(r,ou()),El(t,i,a,e.filter.filtersNodes())}(e,t,m.path,r,i,d):function(e,t,n,r,i,o,a){if(null!=Yl(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(du(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return uh(e,t,n,u.getNode().getChild(n),i,o,s,a);if(du(n)){var c=new Nl(null);return u.getNode().forEachChild(Lu,(function(e,t){c=c.set(new ru(e),t)})),fh(e,t,n,c,i,o,s,a)}return t}var l=new Nl(null);return r.foreach((function(e,t){var r=fu(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),fh(e,t,n,l,i,o,s,a)}(e,t,m.path,m.affectedTree,r,i,d)}else{if(n.type!==rl.LISTEN_COMPLETE)throw ao("Unknown operation type: "+n.type);m=e,i=n.path,e=r,n=d,v=sh(m,r=Sl(t,(r=t.serverCache).getNode(),r.isFullyInitialized()||du(i),r.isFiltered()),i,e,rh,n)}return function(e,t,n){var r,i,o=t.eventCache;o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=kl(e),(0<n.length||!e.eventCache.isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(xc(kl(t))))}(t,v,d=d.getChanges()),{viewCache:v,changes:d}}function sh(e,t,n,r,i,o){var a=t.eventCache;if(null!=Yl(r,n))return t;var s,u,c,l,h=void 0,f=void 0;return h=du(n)?(oo(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()?(s=Gl(r,(s=Cl(t))instanceof fc?s:fc.EMPTY_NODE),e.filter.updateFullNode(t.eventCache.getNode(),s,o)):(u=Hl(r,Cl(t)),e.filter.updateFullNode(t.eventCache.getNode(),u,o))):".priority"===(u=au(n))?(oo(1===su(n),"Can't have a priority with additional path components"),null!=(l=Ql(r,n,c=a.getNode(),f=t.serverCache.getNode()))?e.filter.updatePriority(c,l):a.getNode()):(c=uu(n),l=void 0,null!=(l=a.isCompleteForChild(u)?(f=t.serverCache.getNode(),null!=(f=Ql(r,n,a.getNode(),f))?a.getNode().getImmediateChild(u).updateChild(c,f):a.getNode().getImmediateChild(u)):Xl(r,u,t.serverCache))?e.filter.updateChild(a.getNode(),u,l,c,i,o):a.getNode()),El(t,h,a.isFullyInitialized()||du(n),e.filter.filtersNodes())}function uh(e,t,n,r,i,o,a,s){var u=t.serverCache,c=a?e.filter:e.filter.getIndexedFilter();if(du(n))h=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var l=u.getNode().updateChild(n,r),h=c.updateFullNode(u.getNode(),l,null);else{if(a=au(n),!u.isCompleteForPath(n)&&1<su(n))return t;l=uu(n),r=u.getNode().getImmediateChild(a).updateChild(l,r),h=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,l,rh,null)}return sh(e,c=Sl(t,h,u.isFullyInitialized()||du(n),c.filtersNodes()),n,i,new ih(i,c,o),s)}function ch(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new ih(i,t,o);return du(n)?(u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),El(t,u,!0,e.filter.filtersNodes())):".priority"===(s=au(n))?(u=e.filter.updatePriority(t.eventCache.getNode(),r),El(t,u,c.isFullyInitialized(),c.isFiltered())):(i=uu(n),o=c.getNode().getImmediateChild(s),u=void 0,u=du(i)?r:null!=(n=l.getCompleteChild(s))?".priority"===cu(i)&&n.getChild(hu(i)).isEmpty()?n:n.updateChild(i,r):fc.EMPTY_NODE,o.equals(u)?t:El(t,e.filter.updateChild(c.getNode(),s,u,i,l,a),c.isFullyInitialized(),e.filter.filtersNodes()))}function lh(e,t){return e.eventCache.isCompleteForChild(t)}function hh(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function fh(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u=t,c=(r=du(n)?r:new Nl(null).setTree(n,r),t.serverCache.getNode());return r.children.inorderTraversal((function(n,r){c.hasChild(n)&&(r=hh(0,t.serverCache.getNode().getImmediateChild(n),r),u=uh(e,u,new ru(n),r,i,o,a,s))})),r.children.inorderTraversal((function(n,r){var l=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;c.hasChild(n)||l||(r=hh(0,t.serverCache.getNode().getImmediateChild(n),r),u=uh(e,u,new ru(n),r,i,o,a,s))})),u}var dh,ph=(Object.defineProperty(vh.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),vh);function vh(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Dc(n.getIndex()),i=(o=n).loadsAllData()?new Dc(o.getIndex()):new(o.hasLimit()?jc:Mc)(o);this.processor_={filter:i},e=t.serverCache,n=t.eventCache;var o=r.updateFullNode(fc.EMPTY_NODE,e.getNode(),null);t=i.updateFullNode(fc.EMPTY_NODE,n.getNode(),null),r=new ml(o,e.isFullyInitialized(),r.filtersNodes()),i=new ml(t,n.isFullyInitialized(),i.filtersNodes()),this.viewCache_=Il(i,r),this.eventGenerator_=new _l(this.query_)}function gh(e){return 0===e.eventRegistrations_.length}function mh(e,t,n){var r,i=[];if(n&&(oo(null==t,"A cancel should cancel all event registrations."),r=e.query._path,e.eventRegistrations_.forEach((function(e){(e=e.createCancelEvent(n,r))&&i.push(e)}))),t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return i}function yh(e,t,n,r){t.type===rl.MERGE&&null!==t.source.queryId&&(oo(Cl(e.viewCache_),"We should always have a full cache before handling merges"),oo(kl(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_;return t=ah(e.processor_,i,t,n,r),n=e.processor_,r=t.viewCache,oo(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oo(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),oo(t.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=t.viewCache,bh(e,t.changes,t.viewCache.eventCache.getNode(),null)}function bh(e,t,n,r){return r=r?[r]:e.eventRegistrations_,wl(e.eventGenerator_,t,n,r)}var _h,wh=function(){this.views=new Map};function Th(e,t,n,r){var i,o,a=t.source.queryId;if(null!==a){var s=e.views.get(a);return oo(null!=s,"SyncTree gave us an op for an invalid query."),yh(s,t,n,r)}var u=[];try{for(var c=Ji(e.views.values()),l=c.next();!l.done;l=c.next())s=l.value,u=u.concat(yh(s,t,n,r))}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Ih(e,t,n,r,i){var o=t._queryIdentifier;return(e=e.views.get(o))?e:(e=!1,e=!!(o=Hl(n,i?r:null))||(o=r instanceof fc?Gl(n,r):fc.EMPTY_NODE,!1),i=Il(new ml(o,e,!1),new ml(r,i,!1)),new ph(t,i))}function Eh(e,t,n,r,i,o){var a;return o=Ih(e,t,r,i,o),e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),o.eventRegistrations_.push(n),t=n,o=(n=o).viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(tc,(function(e,t){a.push(Pc(e,t))})),o.isFullyInitialized()&&a.push(xc(o.getNode())),bh(n,a,o.getNode(),t)}function Sh(e,t,n,r){var i,o,a=t._queryIdentifier,s=[],u=[],c=xh(e);if("default"===a)try{for(var l=Ji(e.views.entries()),h=l.next();!h.done;h=l.next()){var f=Zi(h.value,2),d=f[0],p=f[1];u=u.concat(mh(p,n,r)),gh(p)&&(e.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(p=e.views.get(a))&&(u=u.concat(mh(p,n,r)),gh(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)));return c&&!xh(e)&&s.push((oo(dh,"Reference.ts has not been loaded"),new dh(t._repo,t._path))),{removed:s,events:u}}function kh(e){var t,n,r=[];try{for(var i=Ji(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Ch(e,t){var n,r,i,o,a,s=null;try{for(var u=Ji(e.views.values()),c=u.next();!c.done;c=u.next()){var l=c.value;s=s||(o=t,a=void 0,(a=Cl((i=l).viewCache_))&&(i.query._queryParams.loadsAllData()||!du(o)&&!a.getImmediateChild(au(o)).isEmpty())?a.getChild(o):null)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s}function Nh(e,t){return t._queryParams.loadsAllData()?Ph(e):(t=t._queryIdentifier,e.views.get(t))}function Ah(e,t){return null!=Nh(e,t)}function xh(e){return null!=Ph(e)}function Ph(e){var t,n;try{for(var r=Ji(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var Rh=1,Oh=function(e){this.listenProvider_=e,this.syncPointTree_=new Nl(null),this.pendingWriteTree_={visibleWrites:xl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Dh(e,t,n,r,i){var o,a,s,u;return o=e.pendingWriteTree_,a=t,s=n,u=i,oo(r>o.lastWriteId,"Stacking an older write on top of newer ones"),o.allWrites.push({path:a,snap:s,writeId:r,visible:u=void 0===u||u}),u&&(o.visibleWrites=Rl(o.visibleWrites,a,s)),o.lastWriteId=r,i?Bh(e,new dl(al(),t,n)):[]}function Lh(e,t,n,r){var i,o,a;return i=e.pendingWriteTree_,o=t,a=n,oo(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:a,writeId:r,visible:!0}),i.visibleWrites=Ol(i.visibleWrites,o,a),i.lastWriteId=r,n=Nl.fromObject(n),Bh(e,new vl(al(),t,n))}function Mh(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Bl(e.pendingWriteTree_,t)){var i=new Nl(null);return null!=r.snap?i=i.set(ou(),!0):cs(r.children,(function(e){i=i.set(new ru(e),!0)})),Bh(e,new cl(r.path,i,n))}return[]}function Fh(e,t,n){return Bh(e,new dl(sl(),t,n))}function jh(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||Ah(o,t))){var s=Sh(o,t,n,r);if(0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i)),n=s.removed,a=s.events,o=-1!==n.findIndex((function(e){return e._queryParams.loadsAllData()})),s=e.syncPointTree_.findOnPath(i,(function(e,t){return xh(t)})),o&&!s&&!(i=e.syncPointTree_.subtree(i)).isEmpty())for(var u=i.fold((function(e,t,n){if(t&&xh(t))return[Ph(t)];var r=[];return t&&(r=kh(t)),cs(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=(h=u[c]).query,h=zh(e,h);e.listenProvider_.startListening($h(l),Wh(e,l),h.hashFn,h.onComplete)}!s&&0<n.length&&!r&&(o?e.listenProvider_.stopListening($h(t),null):n.forEach((function(t){var n=e.queryToTagMap.get(Hh(t));e.listenProvider_.stopListening($h(t),n)}))),function(e,t){for(var n=0;n<t.length;++n){var r,i=t[n];i._queryParams.loadsAllData()||(r=Hh(i),i=e.queryToTagMap.get(r),e.queryToTagMap.delete(r),e.tagToQueryMap.delete(i))}}(e,n)}return a}function Uh(e,t,n){var r=t._path,i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){e=pu(e,r),i=i||Ch(t,e),o=o||xh(t)}));var a=e.syncPointTree_.get(r);a?(o=o||xh(a),i=i||Ch(a,ou())):(a=new wh,e.syncPointTree_=e.syncPointTree_.set(r,a)),null!=i?l=!0:(l=!1,i=fc.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){(t=Ch(t,ou()))&&(i=i.updateImmediateChild(e,t))})));var s,u,c=Ah(a,t);c||t._queryParams.loadsAllData()||(s=Hh(t),oo(!e.queryToTagMap.has(s),"View does not exist, but we have a tag"),u=Rh++,e.queryToTagMap.set(s,u),e.tagToQueryMap.set(u,s));var l=Eh(a,t,n,Vl(e.pendingWriteTree_,r),i,l);return c||o||(a=Nh(a,t),l=l.concat(function(e,t,n){var r=t._path,i=Wh(e,t);if(n=zh(e,n),n=e.listenProvider_.startListening($h(t),i,n.hashFn,n.onComplete),r=e.syncPointTree_.subtree(r),i)oo(!xh(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold((function(e,t,n){if(!du(e)&&t&&xh(t))return[Ph(t).query];var r=[];return t&&(r=r.concat(kh(t).map((function(e){return e.query})))),cs(n,(function(e,t){r=r.concat(t)})),r})),a=0;a<o.length;++a){var s=o[a];e.listenProvider_.stopListening($h(s),Wh(e,s))}return n}(e,t,a))),l}function qh(e,t,n){var r=e.pendingWriteTree_;return e=e.syncPointTree_.findOnPath(t,(function(e,n){if(e=Ch(n,pu(e,t)))return e})),Wl(r,t,e,n,!0)}function Vh(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){e=pu(e,n),r=r||Ch(t,e)}));var i=e.syncPointTree_.get(n);i?r=r||Ch(i,ou()):(i=new wh,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new ml(r,!0,!1):null;return kl(Ih(i,t,Vl(e.pendingWriteTree_,t._path),o?a.getNode():fc.EMPTY_NODE,o).viewCache_)}function Bh(e,t){return function e(t,n,r,i){if(du(t.path))return Kh(t,n,r,i);var o=n.get(ou());null==r&&null!=o&&(r=Ch(o,ou()));var a=[],s=au(t.path),u=t.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=Jl(i,s),a=a.concat(e(u,c,n,s))),o?a.concat(Th(o,t,i,r)):a}(t,e.syncPointTree_,null,Vl(e.pendingWriteTree_,ou()))}function Kh(e,t,n,r){var i=t.get(ou());null==n&&null!=i&&(n=Ch(i,ou()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=Jl(r,t);(t=e.operationForChild(t))&&(o=o.concat(Kh(t,i,a,s)))})),o=i?o.concat(Th(i,e,r,n)):o}function zh(e,t){var n=t.query,r=Wh(e,n);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||fc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Gh(e,n);return r?(r=(n=Qh(r)).path,n=n.queryId,t=pu(r,t),Yh(e,r,new hl(ul(n),t))):[]}(e,n._path,r):(i=n._path,Bh(e,new hl(sl(),i)));var i=(i="Unknown Error","too_big"===t?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?i="Client doesn't have permission to access the desired data.":"unavailable"===t&&(i="The service is unavailable"),(i=new Error(t+" at "+n._path.toString()+": "+i)).code=t.toUpperCase(),i);return jh(e,n,null,i)}}}function Wh(e,t){return t=Hh(t),e.queryToTagMap.get(t)}function Hh(e){return e._path.toString()+"$"+e._queryIdentifier}function Gh(e,t){return e.tagToQueryMap.get(t)}function Qh(e){var t=e.indexOf("$");return oo(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ru(e.substr(0,t))}}function Yh(e,t,n){var r=e.syncPointTree_.get(t);return oo(r,"Missing sync point for query tag that we're tracking"),Th(r,n,Vl(e.pendingWriteTree_,t),null)}function $h(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?(oo(_h,"Reference.ts has not been loaded"),new _h(e._repo,e._path)):e}var Xh=(Jh.prototype.getImmediateChild=function(e){return new Jh(this.node_.getImmediateChild(e))},Jh.prototype.node=function(){return this.node_},Jh);function Jh(e){this.node_=e}var Zh=(ef.prototype.getImmediateChild=function(e){return e=fu(this.path_,e),new ef(this.syncTree_,e)},ef.prototype.node=function(){return qh(this.syncTree_,this.path_)},ef);function ef(e,t){this.syncTree_=e,this.path_=t}var tf=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},nf=function(e,t,n){return e&&"object"==typeof e?(oo(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?rf(e[".sv"],t,n):"object"==typeof e[".sv"]?of(e[".sv"],t):void oo(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rf=function(e,t,n){if("timestamp"===e)return n.timestamp;oo(!1,"Unexpected server value: "+e)},of=function(e,t,n){return e.hasOwnProperty("increment")||oo(!1,"Unexpected server value: "+JSON.stringify(e,null,2)),"number"!=typeof(e=e.increment)&&oo(!1,"Unexpected increment value: "+e),t=t.node(),oo(null!=t,"Expected ChildrenNode.EMPTY_NODE for nulls"),t.isLeafNode()?"number"!=typeof(t=t.getValue())?e:t+e:e},af=function(e,t,n,r){return uf(t,new Zh(n,e),r)},sf=function(e,t,n){return uf(e,new Xh(t),n)};function uf(e,t,n){var r=e.getPriority().val(),i=nf(r,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e;return(r=nf(o.getValue(),t,n))!==o.getValue()||i!==o.getPriority().val()?new Ju(r,mc(i)):e}var a=e;return i!==e.getPriority().val()&&(a=a.updatePriority(new Ju(i))),e.forEachChild(tc,(function(e,r){var i=uf(r,t.getImmediateChild(e),n);i!==r&&(a=a.updateImmediateChild(e,i))})),a}var cf=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e=void 0===e?"":e,this.parent=t,this.node=n};function lf(e,t){for(var n=t instanceof ru?t:new ru(t),r=e,i=au(n);null!==i;){var o=Lo(r.node.children,i)||{children:{},childCount:0};r=new cf(i,r,o),i=au(n=uu(n))}return r}function hf(e){return e.node.value}function ff(e,t){e.node.value=t,gf(e)}function df(e){return 0<e.node.childCount}function pf(e,t){cs(e.node.children,(function(n,r){t(new cf(n,e,r))}))}function vf(e){return new ru(null===e.parent?e.name:vf(e.parent)+"/"+e.name)}function gf(e){var t,n,r,i;null!==e.parent&&(t=e.parent,n=e.name,i=function(e){return void 0===hf(e)&&!df(e)}(r=e),e=Do(t.node.children,n),i&&e?(delete t.node.children[n],t.node.childCount--,gf(t)):i||e||(t.node.children[n]=r.node,t.node.childCount++,gf(t)))}function mf(e){return"string"==typeof e&&0!==e.length&&!Tf.test(e)}function yf(e){return"string"==typeof e&&0!==e.length&&!If.test(e)}function bf(e,t,n,r){if(!r||void 0!==t){var i=Ho(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];cs(t,(function(e,t){if(e=new ru(e),Cf(i,t,fu(n,e)),".priority"===cu(e)&&!Sf(t))throw new Error(i+"contains an invalid value for '"+e.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(e)})),function(e,t){for(var n=0;n<t.length;n++)for(var r,i=lu(r=t[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!mf(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(vu);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&mu(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}}function _f(e,t,n){if(!n||void 0!==t){if(Ka(t))throw new Error(Ho(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sf(t))throw new Error(Ho(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function wf(e,t,n,r){if(!(r&&void 0===n||mf(n)))throw new Error(Ho(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}var Tf=/[\[\].#$\/\u0000-\u001F\u007F]/,If=/[\[\].#$\u0000-\u001F\u007F]/,Ef=10485760,Sf=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!Ka(e)||e&&"object"==typeof e&&Do(e,".sv")},kf=function(e,t,n,r){r&&void 0===t||Cf(Ho(e,"value"),t,n)},Cf=function e(t,n,r){var i=r instanceof ru?new yu(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+_u(i));if("function"==typeof n)throw new Error(t+"contains a function "+_u(i)+" with contents = "+n.toString());if(Ka(n))throw new Error(t+"contains "+n.toString()+" "+_u(i));if("string"==typeof n&&n.length>Ef/3&&Yo(n)>Ef)throw new Error(t+"contains a string greater than "+Ef+" utf8 bytes "+_u(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(cs(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!mf(n)))throw new Error(t+" contains an invalid key ("+n+") "+_u(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s;s=n,0<(n=i).parts_.length&&(n.byteLength_+=1),n.parts_.push(s),n.byteLength_+=Yo(s),bu(n),e(t,r,i),r=(n=i).parts_.pop(),n.byteLength_-=Yo(r),0<n.parts_.length&&--n.byteLength_})),o&&a)throw new Error(t+' contains ".value" child '+_u(i)+" in addition to actual children.")}},Nf=function(e,t,n,r){if(!(r&&void 0===n||yf(n)))throw new Error(Ho(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Af=function(e,t,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Nf(e,t,n,r)},xf=function(e,t){if(".info"===au(t))throw new Error(e+" failed = Can't modify data under /.info/")},Pf=function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!mf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!yf(n=n&&n.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Ho(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Rf=function(){this.eventLists_=[],this.recursionDepth_=0};function Of(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||gu(o,n.path)||(e.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&e.eventLists_.push(n)}function Df(e,t,n){Of(e,n),Mf(e,(function(e){return gu(e,t)}))}function Lf(e,t,n){Of(e,n),Mf(e,(function(e){return mu(e,t)||mu(t,e)}))}function Mf(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];i&&(t(i.path)?(function(e){for(var t=0;t<e.events.length;t++){var n,r=e.events[t];null!==r&&(e.events[t]=null,n=r.getEventRunner(),Za&&ts("event: "+r.toString()),gs(n))}}(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}var Ff="repo_interrupt",jf=25,Uf=(qf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},qf);function qf(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jc(),this.transactionQueueTree_=new cf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function Vf(e,t,n){if(e.stats_=Os(e.repoInfo_),e.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))e.server_=new Qc(e.repoInfo_,(function(t,n,r,i){zf(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Wf(e,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ro(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}e.persistentConnection_=new Cu(e.repoInfo_,t,(function(t,n,r,i){zf(e,t,n,r,i)}),(function(t){Wf(e,t)}),(function(t){var n;n=e,cs(t,(function(e,t){Hf(n,e,t)}))}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=(n=function(){return new il(e.stats_,e.server_)},t=(t=e.repoInfo_).toString(),Rs[t]||(Rs[t]=n()),Rs[t]),e.infoData_=new $c,e.infoSyncTree_=new Oh({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=Fh(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Hf(e,"connected",!1),e.serverSyncTree_=new Oh({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){r=i(n,r),Lf(e.eventQueue_,t._path,r)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Bf(e){return e=e.infoData_.getNode(new ru(".info/serverTimeOffset")).val()||0,(new Date).getTime()+e}function Kf(e){return tf({timestamp:Bf(e)})}function zf(e,t,n,r,i){e.dataUpdateCount++;var o=new ru(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a,s,u,c,l=[];t=o,0<(l=i?r?(a=Fo(n,(function(e){return mc(e)})),function(e,t,n,r){var i=Gh(e,r);return i?(i=(r=Qh(i)).path,r=r.queryId,t=pu(i,t),n=Nl.fromObject(n),Yh(e,i,new vl(ul(r),t,n))):[]}(e.serverSyncTree_,o,a,i)):(c=mc(n),a=e.serverSyncTree_,s=o,u=c,null==(i=Gh(a,c=i))?[]:(c=Qh(i),i=c.path,c=c.queryId,s=pu(i,s),Yh(a,i,new dl(ul(c),s,u)))):r?(c=Fo(n,(function(e){return mc(e)})),s=e.serverSyncTree_,u=o,r=c,r=Nl.fromObject(c),Bh(s,new vl(sl(),u,r))):(n=mc(n),Fh(e.serverSyncTree_,o,n))).length&&(t=rd(e,o)),Lf(e.eventQueue_,t,l)}function Wf(e,t){Hf(e,"connected",t),!1===t&&function(e){Zf(e,"onDisconnectEvents");var t=Kf(e),n=Jc();el(e.onDisconnect_,ou(),(function(r,i){i=af(r,i,e.serverSyncTree_,t),Zc(n,r,i)}));var r=[];el(n,ou(),(function(t,n){r=r.concat(Fh(e.serverSyncTree_,t,n)),t=sd(e,t),rd(e,t)})),e.onDisconnect_=Jc(),Lf(e.eventQueue_,ou(),r)}(e)}function Hf(e,t,n){t=new ru("/.info/"+t),n=mc(n),e.infoData_.updateSnapshot(t,n),n=Fh(e.infoSyncTree_,t,n),Lf(e.eventQueue_,t,n)}function Gf(e){return e.nextWriteId_++}function Qf(e,t,n,r,i){Zf(e,"set",{path:t.toString(),value:n,priority:r});var o=Kf(e),a=(n=mc(n,r),r=qh(e.serverSyncTree_,t),o=sf(n,r,o),Gf(e));o=Dh(e.serverSyncTree_,t,o,a,!0),Of(e.eventQueue_,o),e.server_.put(t.toString(),n.val(!0),(function(n,r){var o="ok"===n;o||is("set at "+t+" failed: "+n),o=Mh(e.serverSyncTree_,a,!o),Lf(e.eventQueue_,t,o),ed(0,i,n,r)})),n=sd(e,t),rd(e,n),Lf(e.eventQueue_,n,[])}function Yf(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&function e(t,n){if(du(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var r=t.value;return t.value=null,r.forEachChild(tc,(function(e,n){Zc(t,new ru(e),n)})),e(t,n)}return!(0<t.children.size)||(r=au(n),n=uu(n),t.children.has(r)&&e(t.children.get(r),n)&&t.children.delete(r),0===t.children.size)}(e.onDisconnect_,t),ed(0,n,r,i)}))}function $f(e,t,n,r){var i=mc(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&Zc(e.onDisconnect_,t,i),ed(0,r,n,o)}))}function Xf(e,t,n){n=".info"===au(t._path)?jh(e.infoSyncTree_,t,n):jh(e.serverSyncTree_,t,n),Df(e.eventQueue_,t._path,n)}function Jf(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ff)}function Zf(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),ts.apply(void 0,eo([r],Zi(t)))}function ed(e,t,n,r){t&&gs((function(){var e,i;"ok"===n?t(null):(i=e=(n||"error").toUpperCase(),r&&(i+=": "+r),(i=new Error(i)).code=e,t(i))}))}function td(e,t,n){return qh(e.serverSyncTree_,t,n)||fc.EMPTY_NODE}function nd(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||ad(e,t),hf(t)?(n=od(e,t),oo(0<n.length,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=u=td(e,t,r),o=(r=u.hash(),0);o<n.length;o++){var a=n[o];oo(0===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=1,a.retryCount++;var s=pu(t,a.path);i=i.updateChild(s,a.currentOutputSnapshotRaw)}var u=i.val(!0),c=t;e.server_.put(c.toString(),u,(function(r){Zf(e,"transaction put response",{path:c.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++)!function(t){n[t].status=2,i=i.concat(Mh(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()}(a);for(ad(e,lf(e.transactionQueueTree_,t)),nd(e,e.transactionQueueTree_),Lf(e.eventQueue_,t,i),a=0;a<o.length;a++)gs(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(is("transaction at "+c.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;rd(e,t)}}),r)}(e,vf(t),n)):df(t)&&pf(t,(function(t){nd(e,t)}))}function rd(e,t){var n=id(e,t);return t=vf(n),function(e,t,n){if(0!==t.length){for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),a=0;a<t.length;a++)!function(a){var s,u,c,l,h=t[a],f=pu(n,h.path),d=!1;oo(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(s=h.abortReason,i=i.concat(Mh(e.serverSyncTree_,h.currentWriteId,d=!0))):0===h.status&&(i=h.retryCount>=jf?(s="maxretry",i.concat(Mh(e.serverSyncTree_,h.currentWriteId,d=!0))):(u=td(e,h.path,o),h.currentInputSnapshot=u,void 0!==(l=t[a].update(u.val()))?(Cf("transaction failed: Data returned ",l,h.path),c=mc(l),"object"==typeof l&&null!=l&&Do(l,".priority")||(c=c.updatePriority(u.getPriority())),f=h.currentWriteId,l=Kf(e),l=sf(c,u,l),h.currentOutputSnapshotRaw=c,h.currentOutputSnapshotResolved=l,h.currentWriteId=Gf(e),o.splice(o.indexOf(f),1),(i=i.concat(Dh(e.serverSyncTree_,h.path,l,h.currentWriteId,h.applyLocally))).concat(Mh(e.serverSyncTree_,f,!0))):(s="nodata",i.concat(Mh(e.serverSyncTree_,h.currentWriteId,d=!0))))),Lf(e.eventQueue_,n,i),i=[],d&&(t[a].status=2,d=t[a].unwatcher,setTimeout(d,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))}(a);for(ad(e,e.transactionQueueTree_),a=0;a<r.length;a++)gs(r[a]);nd(e,e.transactionQueueTree_)}}(e,od(e,n),t),t}function id(e,t){for(var n=e.transactionQueueTree_,r=au(t);null!==r&&void 0===hf(n);)n=lf(n,r),r=au(t=uu(t));return n}function od(e,t){var n=[];return function e(t,n,r){var i=hf(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);pf(n,(function(n){e(t,n,r)}))}(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ad(e,t){var n=hf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ff(t,0<n.length?n:void 0)}pf(t,(function(t){ad(e,t)}))}function sd(e,t){var n=vf(id(e,t));return function(e,t,n){for(var r=e.parent;null!==r;){if(t(r))return;r=r.parent}}(t=lf(e.transactionQueueTree_,t),(function(t){ud(e,t)})),ud(e,t),function e(t,n,r,i){r&&!i&&n(t),pf(t,(function(t){e(t,n,!0,i)})),r&&i&&n(t)}(t,(function(t){ud(e,t)})),n}function ud(e,t){var n=hf(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(oo(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(oo(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Mh(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?ff(t,void 0):n.length=o+1,Lf(e.eventQueue_,vf(t),i),a=0;a<r.length;a++)gs(r[a])}}var cd=function(e,t){var n=ld(e),r=n.namespace;return"firebase.com"===n.domain&&rs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||rs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),e="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new ks(n.host,n.secure,r,t,e,"",r!==n.subdomain),path:new ru(n.pathString)}},ld=function(e){var t,n,r,i="",o="",a="",s="",u="",c=!0,l="https",h=443;return"string"==typeof e&&(0<=(r=e.indexOf("//"))&&(l=e.substring(0,r-1),e=e.substring(r+2)),-1===(t=e.indexOf("/"))&&(t=e.length),-1===(n=e.indexOf("?"))&&(n=e.length),i=e.substring(0,Math.min(t,n)),t<n&&(s=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(t,n))),n=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=Ji(e.split("&")),o=i.next();!o.done;o=i.next()){var a,s=o.value;0!==s.length&&(2===(a=s.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):is("Invalid query segment '"+s+"' in query '"+e+"'"))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,n))),0<=(r=i.indexOf(":"))?(c="https"===l||"wss"===l,h=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),a=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=a),"ns"in n&&(u=n.ns)),{host:i,port:h,domain:o,subdomain:a,secure:c,scheme:l,pathString:s,namespace:u}},hd=(fd.prototype.getPath=function(){var e=this.snapshot.ref;return("value"===this.eventType?e:e.parent)._path},fd.prototype.getEventType=function(){return this.eventType},fd.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},fd.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ro(this.snapshot.exportVal())},fd);function fd(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}var dd=(pd.prototype.getPath=function(){return this.path},pd.prototype.getEventType=function(){return"cancel"},pd.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},pd.prototype.toString=function(){return this.path.toString()+":cancel"},pd);function pd(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}var vd=(gd.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},gd.prototype.onCancel=function(e){return oo(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(gd.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),gd.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},gd);function gd(e,t){this.snapshotCallback=e,this.cancelCallback=t}var md=(yd.prototype.cancel=function(){var e=new ho;return Yf(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},yd.prototype.remove=function(){xf("OnDisconnect.remove",this._path);var e=new ho;return $f(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},yd.prototype.set=function(e){xf("OnDisconnect.set",this._path),kf("OnDisconnect.set",e,this._path,!1);var t=new ho;return $f(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},yd.prototype.setWithPriority=function(e,t){xf("OnDisconnect.setWithPriority",this._path),kf("OnDisconnect.setWithPriority",e,this._path,!1),_f("OnDisconnect.setWithPriority",t,!1);var n,r,i,o,a=new ho;return n=this._repo,r=this._path,i=a.wrapCallback((function(){})),o=mc(e,t),n.server_.onDisconnectPut(r.toString(),o.val(!0),(function(e,t){"ok"===e&&Zc(n.onDisconnect_,r,o),ed(0,i,e,t)})),a.promise},yd.prototype.update=function(e){xf("OnDisconnect.update",this._path),bf("OnDisconnect.update",e,this._path,!1);var t=new ho;return function(e,t,n,r){if(Mo(n))return ts("onDisconnect().update() called with empty data.  Don't do anything."),ed(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&cs(n,(function(n,r){r=mc(r),Zc(e.onDisconnect_,fu(t,n),r)})),ed(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},yd);function yd(e,t){this._repo=e,this._path=t}var bd=(Object.defineProperty(_d.prototype,"key",{get:function(){return du(this._path)?null:cu(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"ref",{get:function(){return new Sd(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"_queryIdentifier",{get:function(){var e=Hc(this._queryParams);return"{}"===(e=us(e))?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(_d.prototype,"_queryObject",{get:function(){return Hc(this._queryParams)},enumerable:!1,configurable:!0}),_d.prototype.isEqual=function(e){if(!((e=ta(e))instanceof _d))return!1;var t=this._repo===e._repo,n=gu(this._path,e._path);return e=this._queryIdentifier===e._queryIdentifier,t&&n&&e},_d.prototype.toJSON=function(){return this.toString()},_d.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},_d);function _d(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}function wd(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Td(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Lu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==os)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==as)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===tc){if(null!=t&&!Sf(t)||null!=n&&!Sf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(oo(e.getIndex()instanceof _c||e.getIndex()===Cc,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Id(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ed,Sd=(Qi(kd,Ed=bd),Object.defineProperty(kd.prototype,"parent",{get:function(){var e=hu(this._path);return null===e?null:new kd(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(kd.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),kd);function kd(e,t){return Ed.call(this,e,t,new qc,!1)||this}var Cd=(Object.defineProperty(Nd.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),Nd.prototype.child=function(e){var t=new ru(e);return e=Pd(this.ref,e),new Nd(this._node.getChild(t),e,tc)},Nd.prototype.exists=function(){return!this._node.isEmpty()},Nd.prototype.exportVal=function(){return this._node.val(!0)},Nd.prototype.forEach=function(e){var t=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(n,r){return e(new Nd(r,Pd(t.ref,n),tc))}))},Nd.prototype.hasChild=function(e){return e=new ru(e),!this._node.getChild(e).isEmpty()},Nd.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},Nd.prototype.toJSON=function(){return this.exportVal()},Nd.prototype.val=function(){return this._node.val()},Nd);function Nd(e,t,n){this._node=e,this.ref=t,this._index=n}function Ad(e,t){return(e=ta(e))._checkNotDeleted("ref"),void 0!==t?Pd(e._root,t):e._root}function xd(e,t){(e=ta(e))._checkNotDeleted("refFromURL");var n=cd(t,e._repo.repoInfo_.nodeAdmin);return Pf("refFromURL",n),t=n.repoInfo,e._repo.repoInfo_.isCustomHost()||t.host===e._repo.repoInfo_.host||rs("refFromURL: Host name does not match the current database: (found "+t.host+" but expected "+e._repo.repoInfo_.host+")"),Ad(e,n.path.toString())}function Pd(e,t){return(null===au((e=ta(e))._path)?Af:Nf)("child","path",t,!1),new Sd(e._repo,fu(e._path,t))}function Rd(e,t){e=ta(e),xf("set",e._path),kf("set",t,e._path,!1);var n=new ho;return Qf(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Od(e,t){bf("update",t,e._path,!1);var n=new ho;return function(e,t,n,r){Zf(e,"update",{path:t.toString(),value:n});var i,o,a=!0,s=Kf(e),u={};cs(n,(function(n,r){a=!1,u[n]=af(fu(t,n),mc(r),e.serverSyncTree_,s)})),a?(ts("update() called with empty data.  Don't do anything."),ed(0,r,"ok",void 0)):(i=Gf(e),o=Lh(e.serverSyncTree_,t,u,i),Of(e.eventQueue_,o),e.server_.merge(t.toString(),n,(function(n,o){(s="ok"===n)||is("update at "+t+" failed: "+n);var a=Mh(e.serverSyncTree_,i,!s),s=0<a.length?rd(e,t):t;Lf(e.eventQueue_,s,a),ed(0,r,n,o)})),cs(n,(function(n){n=sd(e,fu(t,n)),rd(e,n)})),Lf(e.eventQueue_,t,[]))}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Dd(e){return e=ta(e),t=e._repo,n=e,(null!=(r=Vh(t.serverSyncTree_,n))?Promise.resolve(r):t.server_.get(n).then((function(e){var r=mc(e).withIndex(n._queryParams.getIndex());return e=Fh(t.serverSyncTree_,n._path,r),Df(t.eventQueue_,n._path,e),Promise.resolve(r)}),(function(e){return Zf(t,"get for query "+Ro(n)+" failed: "+e),Promise.reject(new Error(e))}))).then((function(t){return new Cd(t,new Sd(e._repo,e._path),e._queryParams.getIndex())}));var t,n,r}var Ld=(Md.prototype.respondsTo=function(e){return"value"===e},Md.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new hd("value",this,new Cd(e.snapshotNode,new Sd(t._repo,t._path),n))},Md.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},Md.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new dd(this,e,t):null},Md.prototype.matches=function(e){return e instanceof Md&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},Md.prototype.hasAnyCallback=function(){return null!==this.callbackContext},Md);function Md(e){this.callbackContext=e}var Fd=(jd.prototype.respondsTo=function(e){return e="children_added"===e?"child_added":e,this.eventType===("children_removed"===e?"child_removed":e)},jd.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new dd(this,e,t):null},jd.prototype.createEvent=function(e,t){oo(null!=e.childName,"Child events should have a childName.");var n=Pd(new Sd(t._repo,t._path),e.childName);return t=t._queryParams.getIndex(),new hd(e.type,this,new Cd(e.snapshotNode,n,t),e.prevName)},jd.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},jd.prototype.matches=function(e){return e instanceof jd&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},jd.prototype.hasAnyCallback=function(){return!!this.callbackContext},jd);function jd(e,t){this.eventType=e,this.callbackContext=t}function Ud(e,t,n,r,i){var o;"object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce&&((i=function(t,n){Xf(e._repo,e,s),o(t,n)}).userCallback=(o=n).userCallback,i.context=n.context,n=i),n=new vd(n,a||void 0);var a,s="value"===t?new Ld(n):new Fd(t,n);return a=e._repo,t=s,t=".info"===au((n=e)._path)?Uh(a.infoSyncTree_,n,t):Uh(a.serverSyncTree_,n,t),Df(a.eventQueue_,n._path,t),function(){return Xf(e._repo,e,s)}}function qd(e,t,n,r){return Ud(e,"value",t,n,r)}function Vd(e,t,n,r){return Ud(e,"child_added",t,n,r)}function Bd(e,t,n,r){return Ud(e,"child_changed",t,n,r)}function Kd(e,t,n,r){return Ud(e,"child_moved",t,n,r)}function zd(e,t,n,r){return Ud(e,"child_removed",t,n,r)}function Wd(e,t,n){var r=null;n=n?new vd(n):null,"value"===t?r=new Ld(n):t&&(r=new Fd(t,n)),Xf(e._repo,e,r)}var Hd,Gd=(Qi(Qd,Hd=ci=function(){}),Qd.prototype._apply=function(e){kf("endAt",this._value,e._path,!0);var t=Kc(e._queryParams,this._value,this._key);if(Id(t),Td(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bd(e._repo,e._path,t,e._orderByCalled)},Qd);function Qd(e,t){var n=Hd.call(this)||this;return n._value=e,n._key=t,n}var Yd,$d=(Qi(Xd,Yd=ci),Xd.prototype._apply=function(e){var t,n,r;if(kf("endBefore",this._value,e._path,!1),Id((t=e._queryParams,n=this._value,r=this._key,(r=t.index_===Lu?Kc(t,n="string"==typeof n?Ec(n):n,r):Kc(t,n,null==r?os:Ec(r))).endBeforeSet_=!0,r)),Td(r),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bd(e._repo,e._path,r,e._orderByCalled)},Xd);function Xd(e,t){var n=Yd.call(this)||this;return n._value=e,n._key=t,n}var Jd,Zd=(Qi(ep,Jd=ci),ep.prototype._apply=function(e){kf("startAt",this._value,e._path,!0);var t=Bc(e._queryParams,this._value,this._key);if(Id(t),Td(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bd(e._repo,e._path,t,e._orderByCalled)},ep);function ep(e,t){var n=Jd.call(this)||this;return n._value=e,n._key=t,n}var tp,np=(Qi(rp,tp=ci),rp.prototype._apply=function(e){var t,n,r;if(kf("startAfter",this._value,e._path,!1),Id((t=e._queryParams,n=this._value,r=this._key,(r=t.index_===Lu?Bc(t,n="string"==typeof n?Ic(n):n,r):Bc(t,n,null==r?as:Ic(r))).startAfterSet_=!0,r)),Td(r),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bd(e._repo,e._path,r,e._orderByCalled)},rp);function rp(e,t){var n=tp.call(this)||this;return n._value=e,n._key=t,n}var ip,op=(Qi(ap,ip=ci),ap.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bd(e._repo,e._path,(t=e._queryParams,n=this._limit,(t=t.copy()).limitSet_=!0,t.limit_=n,t.viewFrom_="l",t),e._orderByCalled);var t,n},ap);function ap(e){var t=ip.call(this)||this;return t._limit=e,t}var sp,up=(Qi(cp,sp=ci),cp.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bd(e._repo,e._path,(t=e._queryParams,n=this._limit,(t=t.copy()).limitSet_=!0,t.limit_=n,t.viewFrom_="r",t),e._orderByCalled);var t,n},cp);function cp(e){var t=sp.call(this)||this;return t._limit=e,t}var lp,hp=(Qi(fp,lp=ci),fp.prototype._apply=function(e){wd(e,"orderByChild");var t=new ru(this._path);if(du(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");return t=new _c(t),Td(t=zc(e._queryParams,t)),new bd(e._repo,e._path,t,!0)},fp);function fp(e){var t=lp.call(this)||this;return t._path=e,t}var dp,pp=(Qi(vp,dp=ci),vp.prototype._apply=function(e){wd(e,"orderByKey");var t=zc(e._queryParams,Lu);return Td(t),new bd(e._repo,e._path,t,!0)},vp);function vp(){return null!==dp&&dp.apply(this,arguments)||this}var gp,mp=(Qi(yp,gp=ci),yp.prototype._apply=function(e){wd(e,"orderByPriority");var t=zc(e._queryParams,tc);return Td(t),new bd(e._repo,e._path,t,!0)},yp);function yp(){return null!==gp&&gp.apply(this,arguments)||this}var bp,_p=(Qi(wp,bp=ci),wp.prototype._apply=function(e){wd(e,"orderByValue");var t=zc(e._queryParams,Cc);return Td(t),new bd(e._repo,e._path,t,!0)},wp);function wp(){return null!==bp&&bp.apply(this,arguments)||this}var Tp,Ip,Ep,Sp=(Qi(kp,Tp=ci),kp.prototype._apply=function(e){if(kf("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gd(this._value,this._key)._apply(new Zd(this._value,this._key)._apply(e))},kp);function kp(e,t){var n=Tp.call(this)||this;return n._value=e,n._key=t,n}function Cp(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=ta(e);try{for(var a=Ji(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}Ip=Sd,oo(!dh,"__referenceConstructor has already been defined"),dh=Ip,Ep=Sd,oo(!_h,"__referenceConstructor has already been defined"),_h=Ep;var Np="FIREBASE_DATABASE_EMULATOR_HOST",Ap={},xp=!1;function Pp(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||rs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ts("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=cd(o,i),u=s.repoInfo;return r=void 0,(r="undefined"!=typeof process?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Np]:r)?(a=!0,o="http://"+r+"?ns="+u.namespace,u=(s=cd(o,i)).repoInfo):a=!s.repoInfo.secure,t=i&&a?new ws(ws.OWNER):new bs(e.name,e.options,t),Pf("Invalid Firebase Database URL",s),du(s.path)||rs("Database URL must point to the root of a Firebase Database (not including a child path)."),n=function(e,t,n,r){var i=Ap[t.name];return i||(i={},Ap[t.name]=i),(t=i[e.toURLString()])&&rs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),t=new Uf(e,xp,n,r),i[e.toURLString()]=t}(u,e,t,new ms(e.name,n)),new Rp(n,e)}var Rp=(Object.defineProperty(Op.prototype,"_repo",{get:function(){return this._instanceStarted||(Vf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(Op.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Sd(this._repo,ou())),this._rootInternal},enumerable:!1,configurable:!0}),Op.prototype._delete=function(){var e,t,n;return null!==this._rootInternal&&(e=this._repo,t=this.app.name,(n=Ap[t])&&n[e.key]===e||rs("Database "+t+"("+e.repoInfo_+") has already been deleted."),Jf(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},Op.prototype._checkNotDeleted=function(e){null===this._rootInternal&&rs("Cannot call "+e+" on a deleted database.")},Op);function Op(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}function Dp(e,t,n,r){void 0===r&&(r={}),(e=ta(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&rs("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;i.repoInfo_.nodeAdmin?(r.mockUserToken&&rs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ws(ws.OWNER)):r.mockUserToken&&(e="string"==typeof r.mockUserToken?r.mockUserToken:po(r.mockUserToken,e.app.options.projectId),o=new ws(e)),i.repoInfo_=new ks(t+":"+n,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}function Lp(e){(e=ta(e))._checkNotDeleted("goOnline"),(e=e._repo).persistentConnection_&&e.persistentConnection_.resume(Ff)}var Mp={".sv":"timestamp"},Fp=(jp.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},jp);function jp(e,t){this.committed=e,this.snapshot=t}function Up(e,t,n){if(e=ta(e),xf("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";n=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i;var r=new ho,i=qd(e,(function(){}));return function(e,t,n,r,i,o){Zf(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:Xa(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null};n=td(e,t,void 0),a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Cf("transaction failed: Data returned ",r,a.path),a.status=0,(i=hf(o=lf(e.transactionQueueTree_,t))||[]).push(a),ff(o,i),o=void 0,"object"==typeof r&&null!==r&&Do(r,".priority")?(o=Lo(r,".priority"),oo(Sf(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(qh(e.serverSyncTree_,t)||fc.EMPTY_NODE).getPriority().val(),i=Kf(e),o=mc(r,o),i=sf(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=Gf(e),a=Dh(e.serverSyncTree_,t,i,a.currentWriteId,a.applyLocally),Lf(e.eventQueue_,t,a),nd(e,e.transactionQueueTree_))}(e._repo,e._path,t,(function(t,n,i){var o;t?r.reject(t):(o=new Cd(i,new Sd(e._repo,e._path),tc),r.resolve(new Fp(n,o)))}),i,n),r.promise}var qp=(Vp.prototype.cancel=function(e){Wo("OnDisconnect.cancel",0,1,arguments.length),Go("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},Vp.prototype.remove=function(e){Wo("OnDisconnect.remove",0,1,arguments.length),Go("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},Vp.prototype.set=function(e,t){return Wo("OnDisconnect.set",1,2,arguments.length),Go("OnDisconnect.set","onComplete",t,!0),e=this._delegate.set(e),t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},Vp.prototype.setWithPriority=function(e,t,n){return Wo("OnDisconnect.setWithPriority",2,3,arguments.length),Go("OnDisconnect.setWithPriority","onComplete",n,!0),t=this._delegate.setWithPriority(e,t),n&&t.then((function(){return n(null)}),(function(e){return n(e)})),t},Vp.prototype.update=function(e,t){if(Wo("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,is("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Go("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},Vp);function Vp(e){this._delegate=e}var Bp=(Kp.prototype.toJSON=function(){return Wo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Kp);function Kp(e,t){this.committed=e,this.snapshot=t}var zp=(Wp.prototype.val=function(){return Wo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},Wp.prototype.exportVal=function(){return Wo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},Wp.prototype.toJSON=function(){return Wo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},Wp.prototype.exists=function(){return Wo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},Wp.prototype.child=function(e){return Wo("DataSnapshot.child",0,1,arguments.length),e=String(e),Nf("DataSnapshot.child","path",e,!1),new Wp(this._database,this._delegate.child(e))},Wp.prototype.hasChild=function(e){return Wo("DataSnapshot.hasChild",1,1,arguments.length),Nf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},Wp.prototype.getPriority=function(){return Wo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},Wp.prototype.forEach=function(e){var t=this;return Wo("DataSnapshot.forEach",1,1,arguments.length),Go("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(n){return e(new Wp(t._database,n))}))},Wp.prototype.hasChildren=function(){return Wo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(Wp.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),Wp.prototype.numChildren=function(){return Wo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},Wp.prototype.getRef=function(){return Wo("DataSnapshot.ref",0,0,arguments.length),new Yp(this._database,this._delegate.ref)},Object.defineProperty(Wp.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Wp);function Wp(e,t){this._database=e,this._delegate=t}var Hp=(Gp.prototype.on=function(e,t,n,r){var i=this;function o(e,n){t.call(a.context,new zp(i.database,e),n)}Wo("Query.on",2,4,arguments.length),Go("Query.on","callback",t,!1);var a=Gp.getCancelAndContextArgs_("Query.on",n,r);o.userCallback=t,o.context=a.context;var s=null===(r=a.cancel)||void 0===r?void 0:r.bind(a.context);switch(e){case"value":return qd(this._delegate,o,s),t;case"child_added":return Vd(this._delegate,o,s),t;case"child_removed":return zd(this._delegate,o,s),t;case"child_changed":return Bd(this._delegate,o,s),t;case"child_moved":return Kd(this._delegate,o,s),t;default:throw new Error(Ho("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Gp.prototype.off=function(e,t,n){var r;Wo("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ho(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e),Go("Query.off","callback",t,!0),Qo("Query.off","context",n,!0),t?((r=function(){}).userCallback=t,r.context=n,Wd(this._delegate,e,r)):Wd(this._delegate,e)},Gp.prototype.get=function(){var e=this;return Dd(this._delegate).then((function(t){return new zp(e.database,t)}))},Gp.prototype.once=function(e,t,n,r){var i=this;function o(e,n){e=new zp(i.database,e),t&&t.call(a.context,e,n),s.resolve(e)}Wo("Query.once",1,4,arguments.length),Go("Query.once","callback",t,!0);var a=Gp.getCancelAndContextArgs_("Query.once",n,r),s=new ho;function u(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)}switch(o.userCallback=t,o.context=a.context,e){case"value":qd(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":Vd(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":zd(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":Bd(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":Kd(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(Ho("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},Gp.prototype.limitToFirst=function(e){return Wo("Query.limitToFirst",1,1,arguments.length),new Gp(this.database,Cp(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new op(e)}(e)))},Gp.prototype.limitToLast=function(e){return Wo("Query.limitToLast",1,1,arguments.length),new Gp(this.database,Cp(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new up(e)}(e)))},Gp.prototype.orderByChild=function(e){return Wo("Query.orderByChild",1,1,arguments.length),new Gp(this.database,Cp(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nf("orderByChild","path",e,!1),new hp(e)}(e)))},Gp.prototype.orderByKey=function(){return Wo("Query.orderByKey",0,0,arguments.length),new Gp(this.database,Cp(this._delegate,new pp))},Gp.prototype.orderByPriority=function(){return Wo("Query.orderByPriority",0,0,arguments.length),new Gp(this.database,Cp(this._delegate,new mp))},Gp.prototype.orderByValue=function(){return Wo("Query.orderByValue",0,0,arguments.length),new Gp(this.database,Cp(this._delegate,new _p))},Gp.prototype.startAt=function(e,t){return void 0===e&&(e=null),Wo("Query.startAt",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(void 0===e&&(e=null),wf("startAt","key",t,!0),new Zd(e,t))))},Gp.prototype.startAfter=function(e,t){return void 0===e&&(e=null),Wo("Query.startAfter",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(wf("startAfter","key",t,!0),new np(e,t))))},Gp.prototype.endAt=function(e,t){return void 0===e&&(e=null),Wo("Query.endAt",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(wf("endAt","key",t,!0),new Gd(e,t))))},Gp.prototype.endBefore=function(e,t){return void 0===e&&(e=null),Wo("Query.endBefore",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(wf("endBefore","key",t,!0),new $d(e,t))))},Gp.prototype.equalTo=function(e,t){return Wo("Query.equalTo",1,2,arguments.length),new Gp(this.database,Cp(this._delegate,(wf("equalTo","key",t,!0),new Sp(e,t))))},Gp.prototype.toString=function(){return Wo("Query.toString",0,0,arguments.length),this._delegate.toString()},Gp.prototype.toJSON=function(){return Wo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},Gp.prototype.isEqual=function(e){if(Wo("Query.isEqual",1,1,arguments.length),e instanceof Gp)return this._delegate.isEqual(e._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},Gp.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Go(e,"cancel",r.cancel,!0),r.context=n,Qo(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(Ho(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(Gp.prototype,"ref",{get:function(){return new Yp(this.database,new Sd(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),Gp);function Gp(e,t){this.database=e,this._delegate=t}var Qp,Yp=(Qi($p,Qp=Hp),$p.prototype.getKey=function(){return Wo("Reference.key",0,0,arguments.length),this._delegate.key},$p.prototype.child=function(e){return Wo("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new $p(this.database,Pd(this._delegate,e))},$p.prototype.getParent=function(){Wo("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new $p(this.database,e):null},$p.prototype.getRoot=function(){return Wo("Reference.root",0,0,arguments.length),new $p(this.database,this._delegate.root)},$p.prototype.set=function(e,t){return Wo("Reference.set",1,2,arguments.length),Go("Reference.set","onComplete",t,!0),e=Rd(this._delegate,e),t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},$p.prototype.update=function(e,t){if(Wo("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,is("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xf("Reference.update",this._delegate._path),Go("Reference.update","onComplete",t,!0);var i=Od(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},$p.prototype.setWithPriority=function(e,t,n){return Wo("Reference.setWithPriority",2,3,arguments.length),Go("Reference.setWithPriority","onComplete",n,!0),t=function(e,t,n){if(xf("setWithPriority",e._path),kf("setWithPriority",t,e._path,!1),_f("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new ho;return Qf(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t),n&&t.then((function(){return n(null)}),(function(e){return n(e)})),t},$p.prototype.remove=function(e){Wo("Reference.remove",0,1,arguments.length),Go("Reference.remove","onComplete",e,!0);var t=(t=this._delegate,xf("remove",t._path),Rd(t,null));return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},$p.prototype.transaction=function(e,t,n){var r=this;return Wo("Reference.transaction",1,3,arguments.length),Go("Reference.transaction","transactionUpdate",e,!1),Go("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Ho("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n),n=Up(this._delegate,e,{applyLocally:n}).then((function(e){return new Bp(e.committed,new zp(r.database,e.snapshot))})),t&&n.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),n},$p.prototype.setPriority=function(e,t){return Wo("Reference.setPriority",1,2,arguments.length),Go("Reference.setPriority","onComplete",t,!0),e=function(e,t){e=ta(e),xf("setPriority",e._path),_f("setPriority",t,!1);var n=new ho;return Qf(e._repo,fu(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e),t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},$p.prototype.push=function(e,t){var n=this;Wo("Reference.push",0,2,arguments.length),Go("Reference.push","onComplete",t,!0);var r=function(e,t){e=ta(e),xf("push",e._path),kf("push",t,e._path,!0);var n=Bf(e._repo),r=Ac(n),i=(n=Pd(e,r),Pd(e,r));return t=null!=t?Rd(i,t).then((function(){return i})):Promise.resolve(i),n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),n}(this._delegate,e);return e=r.then((function(e){return new $p(n.database,e)})),t&&e.then((function(){return t(null)}),(function(e){return t(e)})),(r=new $p(this.database,r)).then=e.then.bind(e),r.catch=e.catch.bind(e,void 0),r},$p.prototype.onDisconnect=function(){return xf("Reference.onDisconnect",this._delegate._path),new qp(new md(this._delegate._repo,this._delegate._path))},Object.defineProperty($p.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty($p.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty($p.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),$p);function $p(e,t){var n=Qp.call(this,e,new bd(t._repo,t._path,new qc,!1))||this;return n.database=e,n._delegate=t,n}var Xp=(Jp.prototype.useEmulator=function(e,t,n){Dp(this._delegate,e,t,n=void 0===n?{}:n)},Jp.prototype.ref=function(e){if(Wo("database.ref",0,1,arguments.length),e instanceof Yp){var t=xd(this._delegate,e.toString());return new Yp(this,t)}return t=Ad(this._delegate,e),new Yp(this,t)},Jp.prototype.refFromURL=function(e){return Wo("database.refFromURL",1,1,arguments.length),e=xd(this._delegate,e),new Yp(this,e)},Jp.prototype.goOffline=function(){var e;Wo("database.goOffline",0,0,arguments.length),(e=ta(e=this._delegate))._checkNotDeleted("goOffline"),Jf(e._repo)},Jp.prototype.goOnline=function(){return Wo("database.goOnline",0,0,arguments.length),Lp(this._delegate)},Jp.ServerValue={TIMESTAMP:Mp,increment:function(e){return{".sv":{increment:e}}}},Jp);function Jp(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var Zp=Object.freeze({__proto__:null,forceLongPolling:function(){Ks.forceDisallow(),js.forceAllow()},forceWebSockets:function(){js.forceDisallow()},isWebSocketsAvailable:function(){return Ks.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){var n;e=e._delegate._repo,void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(e.statsListener_||(e.statsListener_=new tl(e.stats_)),e.statsListener_.get()):e.stats_.get(),n=Object.keys(e).reduce((function(e,t){return Math.max(t.length,e)}),0),cs(e,(function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)})))},statsIncrementCounter:function(e,t){(e=e._delegate._repo).stats_.incrementCounter(t),e.statsReporter_.statsToReport_[t]=!0},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){e._delegate._repo.interceptServerDataCallback_=t},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace;return e=void 0!==(e=e.nodeAdmin)&&e,La(r),(r=new oa("auth-internal",new sa("database-standalone"))).setComponent(new na("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Xp(Pp(t,r,void 0,n,e),t),namespace:o}}});H=Cu,Cu.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Cu.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ev,tv=Object.freeze({__proto__:null,DataConnection:H,RealTimeConnection:Gs,hijackHash:function(e){var t=Cu.prototype.put;return Cu.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Cu.prototype.put=t}},ConnectionTarget:ks,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){xp=e}}),nv=Xp.ServerValue;La((ev=Oa).SDK_VERSION),ev.INTERNAL.registerComponent(new na("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate();return t=e.getProvider("auth-internal"),e=e.getProvider("app-check-internal"),new Xp(Pp(r,t,e,n),r)}),"PUBLIC").setServiceProps({Reference:Yp,Query:Hp,Database:Xp,DataSnapshot:zp,enableLogging:Va,INTERNAL:Zp,ServerValue:nv,TEST_ACCESS:tv}).setMultipleInstances(!0)),ev.registerVersion("@firebase/database","0.11.0");var rv=function(e,t){return(rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function iv(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};var ov={},av=G||self;function sv(){}function uv(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function cv(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var lv="closure_uid_"+(1e9*Math.random()>>>0),hv=0;function fv(e,t,n){return e.call.apply(e.bind,arguments)}function dv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function pv(e,t,n){return(pv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fv:dv).apply(null,arguments)}function vv(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function gv(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,(e.prototype.constructor=e).Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function mv(){this.s=this.s,this.o=this.o}var yv={};mv.prototype.s=!1,mv.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,e=Object.prototype.hasOwnProperty.call(e,lv)&&e[lv]||(e[lv]=++hv),delete yv[e])},mv.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},_v=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function wv(){return Array.prototype.concat.apply([],arguments)}function Tv(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Iv(e){return/^[\s\xa0]*$/.test(e)}var Ev,Sv=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function kv(e,t){return-1!=e.indexOf(t)}function Cv(e,t){return e<t?-1:t<e?1:0}var Nv=av.navigator;function Av(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xv(e){var t,n={};for(t in e)n[t]=e[t];return n}Ev=Nv&&(Nv=Nv.userAgent)?Nv:"";var Pv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rv(e){for(var t,n,r=1;r<arguments.length;r++){for(t in n=arguments[r])e[t]=n[t];for(var i=0;i<Pv.length;i++)t=Pv[i],Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}}function Ov(e){return Ov[" "](e),e}Ov[" "]=sv;var Dv,Lv=kv(Ev,"Opera"),Mv=kv(Ev,"Trident")||kv(Ev,"MSIE"),Fv=kv(Ev,"Edge"),jv=Fv||Mv,Uv=kv(Ev,"Gecko")&&!(kv(Ev.toLowerCase(),"webkit")&&!kv(Ev,"Edge"))&&!(kv(Ev,"Trident")||kv(Ev,"MSIE"))&&!kv(Ev,"Edge"),qv=kv(Ev.toLowerCase(),"webkit")&&!kv(Ev,"Edge");function Vv(){var e=av.document;return e?e.documentMode:void 0}var Bv="",Kv=(Kv=Ev,Uv?/rv:([^\);]+)(\)|;)/.exec(Kv):Fv?/Edge\/([\d\.]+)/.exec(Kv):Mv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kv):qv?/WebKit\/(\S+)/.exec(Kv):Lv?/(?:Version)[ \/]?(\S+)/.exec(Kv):void 0);Kv&&(Bv=Kv?Kv[1]:""),Dv=Mv&&null!=(Kv=Vv())&&Kv>parseFloat(Bv)?String(Kv):Bv;var zv={};function Wv(){return e=function(){for(var e=0,t=Sv(String(Dv)).split("."),n=Sv("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++)for(var o=t[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(e=Cv(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Cv(0==o[2].length,0==a[2].length)||Cv(o[2],a[2]),o=o[3],a=a[3],0==e););return 0<=e},t=zv,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9);var e,t}var Hv=av.document&&Mv&&(Vv()||parseInt(Dv,10))||void 0,Gv=function(){if(!av.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{av.addEventListener("test",sv,t),av.removeEventListener("test",sv,t)}catch(e){}return e}();function Qv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Yv(e,t){if(Qv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Uv){e:{try{Ov(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$v[e.pointerType]||"",this.state=e.state,(this.i=e).defaultPrevented&&Yv.Z.h.call(this)}}Qv.prototype.h=function(){this.defaultPrevented=!0},gv(Yv,Qv);var $v={2:"touch",3:"pen",4:"mouse"};Yv.prototype.h=function(){Yv.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xv="closure_listenable_"+(1e6*Math.random()|0),Jv=0;function Zv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Jv,this.ca=this.fa=!1}function eg(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function tg(e){this.src=e,this.g={},this.h=0}function ng(e,t){var n,r,i,o=t.type;o in e.g&&(n=e.g[o],(i=0<=(r=bv(n,t)))&&Array.prototype.splice.call(n,r,1),i&&(eg(t),0==e.g[o].length&&(delete e.g[o],e.h--)))}function rg(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}tg.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=rg(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Zv(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var ig="closure_lm_"+(1e6*Math.random()|0),og={};function ag(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=dg(r),t&&t[Xv]?t.O(n,r,cv(i)?!!i.capture:!!i,o):sg(t,n,r,!0,i,o)}(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)ag(e,t[o],n,r,i);return null}return n=dg(n),e&&e[Xv]?e.N(t,n,cv(r)?!!r.capture:!!r,i):sg(e,t,n,!1,r,i)}function sg(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a,s=cv(i)?!!i.capture:!!i,u=hg(e);if(u||(e[ig]=u=new tg(e)),(n=u.add(t,n,r,s,o)).proxy)return n;if(a=lg,(n.proxy=r=function e(t){return a.call(e.src,e.listener,t)}).src=e,r.listener=n,e.addEventListener)void 0===(i=Gv?i:s)&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(cg(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ug(e){var t,n,r;"number"!=typeof e&&e&&!e.ca&&((t=e.src)&&t[Xv]?ng(t.i,e):(n=e.type,r=e.proxy,t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(cg(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hg(t))?(ng(n,e),0==n.h&&(n.src=null,t[ig]=null)):eg(e)))}function cg(e){return e in og?og[e]:og[e]="on"+e}function lg(e,t){var n,r;return!!e.ca||(t=new Yv(t,this),n=e.listener,r=e.ia||e.src,e.fa&&ug(e),n.call(r,t))}function hg(e){return(e=e[ig])instanceof tg?e:null}var fg="__closure_events_fn_"+(1e9*Math.random()>>>0);function dg(e){return"function"==typeof e?e:(e[fg]||(e[fg]=function(t){return e.handleEvent(t)}),e[fg])}function pg(){mv.call(this),this.i=new tg(this),(this.P=this).I=null}function vg(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t?t=new Qv(t,e):t instanceof Qv?t.target=t.target||e:(a=t,Rv(t=new Qv(r,e),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=t.g=n[i],a=gg(o,r,!0,t)&&a;if(a=gg(o=t.g=e,r,!0,t)&&a,a=gg(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=gg(o=t.g=n[i],r,!1,t)&&a}function gg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a,s,u=t[o];u&&!u.ca&&u.capture==n&&(a=u.listener,s=u.ia||u.src,u.fa&&ng(e.i,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}gv(pg,mv),pg.prototype[Xv]=!0,pg.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=cv(i)?!!i.capture:!!i,r=dg(r),t&&t[Xv]?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=rg(a=t.g[n],r,i,o))&&(eg(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.g[n],t.h--))):(t=t&&hg(t))&&(n=t.g[n.toString()],(r=(t=-1)<(t=n?rg(n,r,i,o):t)?n[t]:null)&&ug(r))}(this,e,t,n,r)},pg.prototype.M=function(){if(pg.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)eg(n[r]);delete t.g[e],t.h--}}this.I=null},pg.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mg=av.JSON.stringify;function yg(){this.h=this.g=null}yg.prototype.add=function(e,t){var n=bg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},$s=yg;var bg=(_g.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},new _g((function(){return new Tg}),(function(e){return e.reset()})));function _g(e,t){this.i=e,this.j=t,this.h=0,this.g=null}var wg,Tg=(Ig.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},Ig.prototype.reset=function(){this.next=this.g=this.h=null},Ig);function Ig(){this.next=this.g=this.h=null}function Eg(e,t){var n;wg||(n=av.Promise.resolve(void 0),wg=function(){n.then(Cg)}),Sg||(wg(),Sg=!0),kg.add(e,t)}var Sg=!1,kg=new $s;function Cg(){for(var e;t=e=void 0,t=null,(e=kg).g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),e=t;){try{e.h.call(e.g)}catch(e){!function(e){av.setTimeout((function(){throw e}),0)}(e)}var t=bg;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}Sg=!1}function Ng(e,t){pg.call(this),this.h=e||1,this.g=t||av,this.j=pv(this.kb,this),this.l=Date.now()}function Ag(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function xg(e,t,n){if("function"==typeof e)n&&(e=pv(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=pv(e.handleEvent,e)}return 2147483647<Number(t)?-1:av.setTimeout(e,t||0)}gv(Ng,pg),(ci=Ng.prototype).da=!1,ci.S=null,ci.kb=function(){var e;this.da&&(0<(e=Date.now()-this.l)&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vg(this,"tick"),this.da&&(Ag(this),this.start())))},ci.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ci.M=function(){Ng.Z.M.call(this),Ag(this),delete this.g};var Pg,Rg=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}rv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(Og,Pg=mv),Og.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=xg((function(){t.g=null,t.i&&(t.i=!1,e(t))}),t.j);var n=t.h;t.h=null,t.m.apply(null,n)}(this)},Og.prototype.M=function(){Pg.prototype.M.call(this),this.g&&(av.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},Og);function Og(e,t){var n=Pg.call(this)||this;return n.m=e,n.j=t,n.h=null,n.i=!1,n.g=null,n}function Dg(e){mv.call(this),this.h=e,this.g={}}gv(Dg,mv);var Lg=[];function Mg(e,t,n,r){Array.isArray(n)||(n&&(Lg[0]=n.toString()),n=Lg);for(var i=0;i<n.length;i++){var o=ag(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Fg(e){Av(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ug(e)}),e),e.g={}}function jg(){this.g=!0}function Ug(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return mg(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Dg.prototype.M=function(){Dg.Z.M.call(this),Fg(this)},Dg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jg.prototype.Aa=function(){this.g=!1},jg.prototype.info=function(){};var qg={},Vg=null;function Bg(){return Vg=Vg||new pg}function Kg(e){Qv.call(this,qg.Ma,e)}function zg(){var e=Bg();vg(e,new Kg(e))}function Wg(e,t){Qv.call(this,qg.STAT_EVENT,e),this.stat=t}function Hg(e){var t=Bg();vg(t,new Wg(t,e))}function Gg(e,t){Qv.call(this,qg.Na,e),this.size=t}function Qg(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return av.setTimeout((function(){e()}),t)}function Yg(){}function $g(e){return e.h||(e.h=e.i())}function Xg(){}function Jg(){Qv.call(this,"d")}function Zg(){Qv.call(this,"c")}function em(){}function tm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Dg(this),this.P=im,this.W=new Ng(e=jv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new nm}function nm(){this.i=null,this.g="",this.h=!1}qg.Ma="serverreachability",gv(Kg,Qv),qg.STAT_EVENT="statevent",gv(Wg,Qv),qg.Na="timingevent",gv(Gg,Qv),H={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},G={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"},Yg.prototype.h=null,$s={OPEN:"a",pb:"b",Ka:"c",Bb:"d"},gv(Jg,Qv),gv(Zg,Qv),gv(em,Yg),em.prototype.g=function(){return new XMLHttpRequest},em.prototype.i=function(){return{}};var rm=new em,im=45e3,om={},am={};function sm(e,t,n){e.K=1,e.v=Am(Im(t)),e.s=n,e.U=!0,um(e,null)}function um(e,t){e.F=Date.now(),hm(e),e.A=Im(e.v);var n,r,i,o,a,s,u=e.A,c=e.X;Array.isArray(c)||(c=[String(c)]),Bm(u.h,"t",c),e.C=0,u=e.l.H,e.h=new nm,e.g=Ky(e.l,u?t:null,!e.s),0<e.O&&(e.L=new Rg(pv(e.Ia,e,e.g),e.O)),Mg(e.V,e.g,"readystatechange",e.gb),t=e.H?xv(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zg(),n=e.j,r=e.u,i=e.A,o=e.m,a=e.X,s=e.s,n.info((function(){if(n.g)if(s)for(var e="",t=s.split("&"),u=0;u<t.length;u++){var c,l,h=t[u].split("=");1<h.length&&(c=h[0],h=h[1],e=2<=(l=c.split("_")).length&&"type"==l[1]?e+(c+"=")+h+"&":e+(c+"=redacted&"))}else e=null;else e=s;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+r+"\n"+i+"\n"+e}))}function cm(e){return e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function lm(e,t,n){for(var r,i,o,a,s,u=!0;!e.I&&e.C<n.length;){if(o=n,s=a=void 0,a=(i=e).C,(r=-1==(s=o.indexOf("\n",a))?am:(a=Number(o.substring(a,s)),isNaN(a)?om:(s+=1)+a>o.length?am:(o=o.substr(s,a),i.C=s+a,o)))==am){4==t&&(e.o=4,Hg(14),u=!1),Ug(e.j,e.m,null,"[Incomplete Response]");break}if(r==om){e.o=4,Hg(15),Ug(e.j,e.m,n,"[Invalid Chunk]"),u=!1;break}Ug(e.j,e.m,r,null),gm(e,r)}cm(e)&&r!=am&&r!=om&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Hg(16),u=!1),e.i=e.i&&u,u?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ly(t),t.L=!0,Hg(11))):(Ug(e.j,e.m,n,"[Invalid Chunked Response]"),vm(e),pm(e))}function hm(e){e.Y=Date.now()+e.P,fm(e,e.P)}function fm(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Qg(pv(e.eb,e),t)}function dm(e){e.B&&(av.clearTimeout(e.B),e.B=null)}function pm(e){0==e.l.G||e.I||jy(e.l,e)}function vm(e){dm(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ag(e.W),Fg(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gm(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$m(n.i,e)))if(n.I=e.N,!e.J&&$m(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Fy(n),ky(n)}Dy(n),Hg(18)}}else n.ta=i[1],0<n.ta-n.U&&i[2]<37500&&n.N&&0==n.A&&!n.v&&(n.v=Qg(pv(n.ab,n),6e3));if(Ym(n.i)<=1&&n.ka){try{n.ka()}catch(v){}n.ka=void 0}}else qy(n,11)}else if(!e.J&&n.g!=e||Fy(n),!Iv(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o,a,s,u,c,l,h,f,d,p,v=i[t];n.U=v[0],v=v[1],2==n.G?"c"==v[0]?(n.J=v[1],n.la=v[2],null!=(o=v[3])&&(n.ma=o,n.h.info("VER="+n.ma)),null!=(a=v[4])&&(n.za=a,n.h.info("SVER="+n.za)),null!=(s=v[5])&&"number"==typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n,(u=e.g)&&(!(c=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null)||!(l=r.i).g&&(kv(c,"spdy")||kv(c,"quic")||kv(c,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Xm(l,l.h),l.h=null)),!r.D||(h=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null)&&(r.sa=h,Nm(r.F,r.D,h))),n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),f=e,(r=n).oa=By(r,r.H?r.la:null,r.W),f.J?(Jm(r.i,f),d=f,(p=r.K)&&d.setTimeout(p),d.B&&(dm(d),hm(d)),r.g=f):Oy(r),0<n.l.length&&Ay(n)):"stop"!=v[0]&&"close"!=v[0]||qy(n,7):3==n.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?qy(n,7):Sy(n):"noop"!=v[0]&&n.j&&n.j.wa(v),n.A=0)}zg()}catch(v){}}function mm(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(uv(e)||"string"==typeof e)_v(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(uv(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(uv(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function ym(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ym)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function bm(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];_m(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)_m(i,r=e.g[t])||(i[e.g[n++]=r]=1),t++;e.g.length=n}}function _m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ci=tm.prototype).setTimeout=function(e){this.P=e},ci.gb=function(e){e=e.target;var t=this.L;t&&3==_y(e)?t.l():this.Ia(e)},ci.Ia=function(e){try{if(e==this.g)e:{var t=_y(this.g),n=this.g.Da();if(this.g.ba(),!(t<3)&&(3!=t||jv||this.g&&(this.h.h||this.g.ga()||wy(this.g)))){this.I||4!=t||7==n||zg(),dm(this);var r=this.g.ba();this.N=r;t:if(cm(this)){var i=wy(this.g);e="";var o=i.length,a=4==_y(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vm(this),pm(this);var s="";break t}this.h.i=new av.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:a&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==r,h=this.j,f=this.u,d=this.A,p=this.m,v=this.X,g=t,m=r,h.info((function(){return"XMLHTTP RESP ("+p+") [ attempt "+v+"]: "+f+"\n"+d+"\n"+g+" "+m})),this.i){if(this.$&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Iv(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Hg(12),vm(this),pm(this);break e}Ug(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gm(this,r)}this.U?(lm(this,t,s),jv&&this.i&&3==t&&(Mg(this.V,this.W,"tick",this.fb),this.W.start())):(Ug(this.j,this.m,s,null),gm(this,s)),4==t&&vm(this),this.i&&!this.I&&(4==t?jy(this.l,this):(this.i=!1,hm(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Hg(12)):(this.o=0,Hg(13)),vm(this),pm(this)}}}catch(t){}var h,f,d,p,v,g,m},ci.fb=function(){var e,t;this.g&&(e=_y(this.g),t=this.g.ga(),this.C<t.length&&(dm(this),lm(this,e,t),this.i&&4!=e&&hm(this)))},ci.cancel=function(){this.I=!0,vm(this)},ci.eb=function(){this.B=null;var e,t,n=Date.now();0<=n-this.Y?(e=this.j,t=this.A,e.info((function(){return"TIMEOUT: "+t})),2!=this.K&&(zg(),Hg(17)),vm(this),this.o=2,pm(this)):fm(this,this.Y-n)},(ci=ym.prototype).R=function(){bm(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ci.T=function(){return bm(this),this.g.concat()},ci.get=function(e,t){return _m(this.h,e)?this.h[e]:t},ci.set=function(e,t){_m(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ci.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var wm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tm(e,t){var n;this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Tm?(this.g=void 0!==t?t:e.g,Em(this,e.j),this.s=e.s,Sm(this,e.i),km(this,e.m),this.l=e.l,t=e.h,(n=new jm).i=t.i,t.g&&(n.g=new ym(t.g),n.h=t.h),Cm(this,n),this.o=e.o):e&&(n=String(e).match(wm))?(this.g=!!t,Em(this,n[1]||"",!0),this.s=xm(n[2]||""),Sm(this,n[3]||"",!0),km(this,n[4]),this.l=xm(n[5]||"",!0),Cm(this,n[6]||"",!0),this.o=xm(n[7]||"")):(this.g=!!t,this.h=new jm(null,this.g))}function Im(e){return new Tm(e)}function Em(e,t,n){e.j=n?xm(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Sm(e,t,n){e.i=n?xm(t,!0):t}function km(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cm(e,t,n){var r,i;t instanceof jm?(e.h=t,r=e.h,(i=e.g)&&!r.j&&(Um(r),r.i=null,r.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(qm(this,t),Bm(this,n,e))}),r)),r.j=i):(n||(t=Pm(t,Mm)),e.h=new jm(t,e.g))}function Nm(e,t,n){e.h.set(t,n)}function Am(e){return Nm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xm(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pm(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Rm),e=n?e.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):e):null}function Rm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tm.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pm(t,Om,!0),":");var n=this.i;return!n&&"file"!=t||(e.push("//"),(t=this.s)&&e.push(Pm(t,Om,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pm(n,"/"==n.charAt(0)?Lm:Dm,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pm(n,Fm)),e.join("")};var Om=/[#\/\?@]/g,Dm=/[#\?:]/g,Lm=/[#\?]/g,Mm=/[#\?@]/g,Fm=/#/g;function jm(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Um(e){e.g||(e.g=new ym,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r,i=e[n].indexOf("="),o=null;0<=i?(r=e[n].substring(0,i),o=e[n].substring(i+1)):r=e[n],t(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function qm(e,t){Um(e),t=Km(e,t),_m(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,_m((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&bm(e)))}function Vm(e,t){return Um(e),t=Km(e,t),_m(e.g.h,t)}function Bm(e,t,n){qm(e,t),0<n.length&&(e.i=null,e.g.set(Km(e,t),Tv(n)),e.h+=n.length)}function Km(e,t){return t=String(t),e.j?t.toLowerCase():t}(ci=jm.prototype).add=function(e,t){Um(this),this.i=null,e=Km(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ci.forEach=function(e,t){Um(this),this.g.forEach((function(n,r){_v(n,(function(n){e.call(t,n,r,this)}),this)}),this)},ci.T=function(){Um(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},ci.R=function(e){Um(this);var t=[];if("string"==typeof e)Vm(this,e)&&(t=wv(t,this.g.get(Km(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=wv(t,e[n])}return t},ci.set=function(e,t){return Um(this),this.i=null,Vm(this,e=Km(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ci.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ci.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++)for(var r=t[n],i=encodeURIComponent(String(r)),o=(r=this.R(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}return this.i=e.join("&")};var zm=function(e,t){this.h=e,this.g=t};function Wm(e){this.l=e||Gm,e=av.PerformanceNavigationTiming?0<(e=av.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(av.g&&av.g.Ea&&av.g.Ea()&&av.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Hm,Gm=10;function Qm(e){return e.h||e.g&&e.g.size>=e.j}function Ym(e){return e.h?1:e.g?e.g.size:0}function $m(e,t){return e.h?e.h==t:e.g&&e.g.has(t)}function Xm(e,t){e.g?e.g.add(t):e.h=t}function Jm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zm(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null==e.g||0===e.g.size)return Tv(e.i);var r=e.i;try{for(var i=iv(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function ey(){}function ty(){this.g=new ey}function ny(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function ry(e){this.l=e.$b||null,this.j=e.ib||!1}function iy(e,t){pg.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=oy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wm.prototype.cancel=function(){var e,t;if(this.i=Zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=iv(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},ey.prototype.stringify=function(e){return av.JSON.stringify(e,void 0)},ey.prototype.parse=function(e){return av.JSON.parse(e,void 0)},gv(ry,Yg),ry.prototype.g=function(){return new iy(this.l,this.j)},ry.prototype.i=(Hm={},function(){return Hm}),gv(iy,pg);var oy=0;function ay(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function sy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uy(e)}function uy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ci=iy.prototype).open=function(e,t){if(this.readyState!=oy)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uy(this)},ci.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||av).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ci.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sy(this)),this.readyState=oy},ci.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uy(this)),this.g&&(this.readyState=3,uy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==av.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ay(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ci.Sa=function(e){var t;this.g&&(this.u&&e.value?this.response.push(e.value):this.u||(t=e.value||new Uint8Array(0),(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)),(e.done?sy:uy)(this),3==this.readyState&&ay(this))},ci.Ua=function(e){this.g&&(this.response=this.responseText=e,sy(this))},ci.Ta=function(e){this.g&&(this.response=e,sy(this))},ci.ha=function(){this.g&&sy(this)},ci.setRequestHeader=function(e,t){this.v.append(e,t)},ci.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ci.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(iy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var cy=av.JSON.parse;function ly(e){pg.call(this),this.headers=new ym,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hy,this.K=this.L=!1}gv(ly,pg);var hy="",fy=/^https?$/i,dy=["POST","PUT"];function py(e){return"content-type"==e.toLowerCase()}function vy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gy(e),yy(e)}function gy(e){e.D||(e.D=!0,vg(e,"complete"),vg(e,"error"))}function my(e){if(e.h&&void 0!==ov&&(!e.C[1]||4!=_y(e)||2!=e.ba()))if(e.v&&4==_y(e))xg(e.Fa,0,e);else if(vg(e,"readystatechange"),4==_y(e)){e.h=!1;try{var t,n,r,i,o=e.ba();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}if((t=a)||((n=0===o)&&(!(i=String(e.H).match(wm)[1]||null)&&av.self&&av.self.location&&(i=(r=av.self.location.protocol).substr(0,r.length-1)),n=!fy.test(i?i.toLowerCase():"")),t=n),t)vg(e,"complete"),vg(e,"success");else{e.m=6;try{var s=2<_y(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",gy(e)}}finally{yy(e)}}}function yy(e,t){if(e.g){by(e);var n=e.g,r=e.C[0]?sv:null;e.g=null,e.C=null,t||vg(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function by(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(av.clearTimeout(e.A),e.A=null)}function _y(e){return e.g?e.g.readyState:0}function wy(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case hy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ty(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}var i;r||(i="",Av(n,(function(e,t){i+=t,i+=":",i+=e,i+="\r\n"})),n=i,"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Nm(e,t,n))}function Iy(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ey(e){this.za=0,this.l=[],this.h=new jg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Iy("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Iy("baseRetryDelayMs",5e3,e),this.$a=Iy("retryDelaySeedMs",1e4,e),this.Ya=Iy("forwardChannelMaxRetries",2,e),this.ra=Iy("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Wm(e&&e.concurrentRequestLimit),this.Ca=new ty,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Sy(e){var t,n;Cy(e),3==e.G&&(t=e.V++,Nm(n=Im(e.F),"SID",e.J),Nm(n,"RID",t),Nm(n,"TYPE","terminate"),Py(e,n),(t=new tm(e,e.h,t,void 0)).K=2,t.v=Am(Im(n)),n=!1,!(n=av.navigator&&av.navigator.sendBeacon?av.navigator.sendBeacon(t.v.toString(),""):n)&&av.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ky(t.l,null),t.g.ea(t.v)),t.F=Date.now(),hm(t)),Vy(e)}function ky(e){e.g&&(Ly(e),e.g.cancel(),e.g=null)}function Cy(e){ky(e),e.u&&(av.clearTimeout(e.u),e.u=null),Fy(e),e.i.cancel(),e.m&&("number"==typeof e.m&&av.clearTimeout(e.m),e.m=null)}function Ny(e,t){e.l.push(new zm(e.Za++,t)),3==e.G&&Ay(e)}function Ay(e){Qm(e.i)||e.m||(e.m=!0,Eg(e.Ha,e),e.C=0)}function xy(e,t){var n=t?t.m:e.V++,r=Im(e.F);Nm(r,"SID",e.J),Nm(r,"RID",n),Nm(r,"AID",e.U),Py(e,r),e.o&&e.s&&Ty(r,e.o,e.s),n=new tm(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ry(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Xm(e.i,n),sm(n,r,t)}function Py(e,t){e.j&&mm({},(function(e,n){Nm(t,n,e)}))}function Ry(e,t,n){n=Math.min(e.l.length,n);var r=e.j?pv(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if((c-=o)<0)o=Math.max(0,i[u].h-100),s=!1;else try{!function(e,t,n){var r=n||"";try{mm(e,(function(e,n){var i=e;cv(e)&&(i=mg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Oy(e){e.g||e.u||(e.Y=1,Eg(e.Ga,e),e.A=0)}function Dy(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Qg(pv(e.Ga,e),Uy(e,e.A)),e.A++,1)}function Ly(e){null!=e.B&&(av.clearTimeout(e.B),e.B=null)}function My(e){e.g=new tm(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Im(e.oa);Nm(t,"RID","rpc"),Nm(t,"SID",e.J),Nm(t,"CI",e.N?"0":"1"),Nm(t,"AID",e.U),Py(e,t),Nm(t,"TYPE","xmlhttp"),e.o&&e.s&&Ty(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Am(Im(t)),n.s=null,n.U=!0,um(n,e)}function Fy(e){null!=e.v&&(av.clearTimeout(e.v),e.v=null)}function jy(e,t){var n,r,i,o=null;if(e.g==t){Fy(e),Ly(e),e.g=null;var a=2}else{if(!$m(e.i,t))return;o=t.D,Jm(e.i,t),a=1}if(e.I=t.N,0!=e.G)if(t.i)1==a?(o=t.s?t.s.length:0,t=Date.now()-t.F,n=e.C,vg(a=Bg(),new Gg(a,o)),Ay(e)):Oy(e);else if(3==(n=t.o)||0==n&&0<e.I||(1!=a||(i=t,Ym((r=e).i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=i.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=Qg(pv(r.Ha,r,i),Uy(r,r.C)),r.C++,0))))&&(2!=a||!Dy(e)))switch(o&&0<o.length&&(t=e.i,t.i=t.i.concat(o)),n){case 1:qy(e,5);break;case 4:qy(e,10);break;case 3:qy(e,6);break;default:qy(e,2)}}function Uy(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function qy(e,t){var n,r,i,o;e.h.info("Error code "+t),2==t?(r=null,e.j&&(r=null),o=pv(e.jb,e),r||(r=new Tm("//www.google.com/images/cleardot.gif"),av.location&&"http"==av.location.protocol||Em(r,"https"),Am(r)),n=r.toString(),r=o,o=new jg,av.Image?((i=new Image).onload=vv(ny,o,i,"TestLoadImage: loaded",!0,r),i.onerror=vv(ny,o,i,"TestLoadImage: error",!1,r),i.onabort=vv(ny,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=vv(ny,o,i,"TestLoadImage: timeout",!1,r),av.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=n):r(!1)):Hg(2),e.G=0,e.j&&e.j.va(t),Vy(e),Cy(e)}function Vy(e){e.G=0,e.I=-1,e.j&&(0==Zm(e.i).length&&0==e.l.length||(e.i.i.length=0,Tv(e.l),e.l.length=0),e.j.ua())}function By(e,t,n){var r,i,o,a,s,u=(a=n)instanceof Tm?Im(a):new Tm(a,void 0);return""!=u.i?(t&&Sm(u,t+"."+u.i),km(u,u.m)):(r=(s=av.location).protocol,i=t?t+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new Tm(null,void 0),r&&Em(s,r),i&&Sm(s,i),o&&km(s,o),a&&(s.l=a),u=s),e.aa&&Av(e.aa,(function(e,t){Nm(u,t,e)})),t=e.D,n=e.sa,t&&n&&Nm(u,t,n),Nm(u,"VER",e.ma),Py(e,u),u}function Ky(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ly(new ry({ib:!0})):new ly(e.qa)).L=e.H,t}function zy(){}function Wy(){if(Mv&&!(10<=Number(Hv)))throw Error("Environmental error: no available transport.")}function Hy(e,t){pg.call(this),this.g=new Ey(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Iv(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Iv(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Yy(this)}function Gy(e){Jg.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qy(){Zg.call(this),this.status=1}function Yy(e){this.g=e}(ci=ly.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=(this.u||rm).g(),this.C=this.u?$g(this.u):$g(rm),this.g.onreadystatechange=pv(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void vy(this,e)}e=n||"";var i,o=new ym(this.headers);r&&mm(r,(function(e,t){o.set(t,e)})),r=function(e){e:{for(var t=py,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:"string"==typeof e?e.charAt(t):e[t]}(o.T()),n=av.FormData&&e instanceof av.FormData,0<=bv(dy,t)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{by(this),0<this.B&&((this.K=(i=this.g,Mv&&Wv()&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=pv(this.pa,this)):this.A=xg(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){vy(this,e)}},ci.pa=function(){void 0!==ov&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vg(this,"timeout"),this.abort(8))},ci.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,vg(this,"complete"),vg(this,"abort"),yy(this))},ci.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yy(this,!0)),ly.Z.M.call(this)},ci.Fa=function(){this.s||(this.F||this.v||this.l?my(this):this.cb())},ci.cb=function(){my(this)},ci.ba=function(){try{return 2<_y(this)?this.g.status:-1}catch(e){return-1}},ci.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},ci.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),cy(t)}},ci.Da=function(){return this.m},ci.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ci=Ey.prototype).ma=8,ci.G=1,ci.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},ci.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new tm(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Rv(n=xv(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ry(this,t,r),Nm(i=Im(this.F),"RID",e),Nm(i,"CVER",22),this.D&&Nm(i,"X-HTTP-Session-Id",this.D),Py(this,i),this.o&&n&&Ty(i,this.o,n),Xm(this.i,t),this.Ra&&Nm(i,"TYPE","init"),this.ja?(Nm(i,"$req",r),Nm(i,"SID","null"),t.$=!0,sm(t,i,null)):sm(t,i,r),this.G=2}}else 3==this.G&&(e?xy(this,e):0==this.l.length||Qm(this.i)||xy(this))},ci.Ga=function(){var e;this.u=null,My(this),this.$&&!(this.L||null==this.g||this.O<=0)&&(e=2*this.O,this.h.info("BP detection timer enabled: "+e),this.B=Qg(pv(this.bb,this),e))},ci.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hg(10),ky(this),My(this))},ci.ab=function(){null!=this.v&&(this.v=null,ky(this),Dy(this),Hg(19))},ci.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Hg(2)):(this.h.info("Failed to ping google.com"),Hg(1))},(ci=zy.prototype).xa=function(){},ci.wa=function(){},ci.va=function(){},ci.ua=function(){},ci.Oa=function(){},Wy.prototype.g=function(e,t){return new Hy(e,t)},gv(Hy,pg),Hy.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Eg(pv(e.hb,e,t))),Hg(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=By(e,null,e.W),Ay(e)},Hy.prototype.close=function(){Sy(this.g)},Hy.prototype.u=function(e){var t;"string"==typeof e?((t={}).__data__=e,Ny(this.g,t)):this.v?((t={}).__data__=mg(e),Ny(this.g,t)):Ny(this.g,e)},Hy.prototype.M=function(){this.g.j=null,delete this.j,Sy(this.g),delete this.g,Hy.Z.M.call(this)},gv(Gy,Jg),gv(Qy,Zg),gv(Yy,zy),Yy.prototype.xa=function(){vg(this.g,"a")},Yy.prototype.wa=function(e){vg(this.g,new Gy(e))},Yy.prototype.va=function(e){vg(this.g,new Qy)},Yy.prototype.ua=function(){vg(this.g,"b")},Wy.prototype.createWebChannel=Wy.prototype.g,Hy.prototype.send=Hy.prototype.u,Hy.prototype.open=Hy.prototype.m,H.NO_ERROR=0,H.TIMEOUT=8,H.HTTP_ERROR=6,G.COMPLETE="complete",(Xg.EventType=$s).OPEN="a",$s.CLOSE="b",$s.ERROR="c",$s.MESSAGE="d",pg.prototype.listen=pg.prototype.N,ly.prototype.listenOnce=ly.prototype.O,ly.prototype.getLastError=ly.prototype.La,ly.prototype.getLastErrorCode=ly.prototype.Da,ly.prototype.getStatus=ly.prototype.ba,ly.prototype.getResponseJson=ly.prototype.Qa,ly.prototype.getResponseText=ly.prototype.ga,ly.prototype.send=ly.prototype.ea;var $y=Bg,Xy=H,Jy=G,Zy=qg,eb=10,tb=11,nb=ry,rb=Xg,ib=ly,ob=(ab.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},ab.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},ab);function ab(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}ob.o=-1;var sb,ub={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},cb=(Qi(hb,sb=Error),hb),lb=new va("@firebase/firestore");function hb(e,t){var n=this;return(n=sb.call(this,t)||this).code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function fb(){return lb.logLevel}function db(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];lb.logLevel<=ca.DEBUG&&(t=n.map(gb),lb.debug.apply(lb,eo(["Firestore (8.10.1): "+e],t)))}function pb(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];lb.logLevel<=ca.ERROR&&(t=n.map(gb),lb.error.apply(lb,eo(["Firestore (8.10.1): "+e],t)))}function vb(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];lb.logLevel<=ca.WARN&&(t=n.map(gb),lb.warn.apply(lb,eo(["Firestore (8.10.1): "+e],t)))}function gb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function mb(e){throw pb(e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+(e=void 0===e?"Unexpected state":e)),new Error(e)}function yb(e){e||mb()}var bb=(_b.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=function(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},_b);function _b(){}function wb(e,t){return e<t?-1:t<e?1:0}function Tb(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ib(e){return e+"\0"}var Eb=(Cb.now=function(){return Cb.fromMillis(Date.now())},Cb.fromDate=function(e){return Cb.fromMillis(e.getTime())},Cb.fromMillis=function(e){var t=Math.floor(e/1e3);return new Cb(t,Math.floor(1e6*(e-1e3*t)))},Cb.prototype.toDate=function(){return new Date(this.toMillis())},Cb.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Cb.prototype._compareTo=function(e){return this.seconds===e.seconds?wb(this.nanoseconds,e.nanoseconds):wb(this.seconds,e.seconds)},Cb.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},Cb.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Cb.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Cb.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Cb),Sb=(kb.fromTimestamp=function(e){return new kb(e)},kb.min=function(){return new kb(new Eb(0,0))},kb.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},kb.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},kb.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},kb.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},kb.prototype.toTimestamp=function(){return this.timestamp},kb);function kb(e){this.timestamp=e}function Cb(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new cb(ub.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new cb(ub.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new cb(ub.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new cb(ub.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}function Nb(e){var t,n=0;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n++;return n}function Ab(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Object.defineProperty(Bb.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),Bb.prototype.isEqual=function(e){return 0===Bb.comparator(this,e)},Bb.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof Bb?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},Bb.prototype.limit=function(){return this.offset+this.length},Bb.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},Bb.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},Bb.prototype.firstSegment=function(){return this.segments[this.offset]},Bb.prototype.lastSegment=function(){return this.get(this.length-1)},Bb.prototype.get=function(e){return this.segments[this.offset+e]},Bb.prototype.isEmpty=function(){return 0===this.length},Bb.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Bb.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Bb.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},Bb.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Bb.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0};var Pb,Rb,Ob=(Qi(Vb,Rb=H=Bb),Vb.prototype.construct=function(e,t,n){return new Vb(e,t,n)},Vb.prototype.canonicalString=function(){return this.toArray().join("/")},Vb.prototype.toString=function(){return this.canonicalString()},Vb.fromString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new cb(ub.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter((function(e){return 0<e.length})))}return new Vb(n)},Vb.emptyPath=function(){return new Vb([])},Vb),Db=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lb=(Qi(qb,Pb=H),qb.prototype.construct=function(e,t,n){return new qb(e,t,n)},qb.isValidIdentifier=function(e){return Db.test(e)},qb.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qb.isValidIdentifier(e)?e:"`"+e+"`"})).join(".")},qb.prototype.toString=function(){return this.canonicalString()},qb.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},qb.keyField=function(){return new qb(["__name__"])},qb.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new cb(ub.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new cb(ub.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new cb(ub.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new cb(ub.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qb(t)},qb.emptyPath=function(){return new qb([])},qb),Mb=(Ub.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},Ub.prototype.isEqual=function(e){return Tb(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},Ub),Fb=(jb.fromBase64String=function(e){return new jb(atob(e))},jb.fromUint8Array=function(e){return new jb(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))},jb.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},jb.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},jb.prototype.approximateByteSize=function(){return 2*this.binaryString.length},jb.prototype.compareTo=function(e){return wb(this.binaryString,e.binaryString)},jb.prototype.isEqual=function(e){return this.binaryString===e.binaryString},jb);function jb(e){this.binaryString=e}function Ub(e){(this.fields=e).sort(Lb.comparator)}function qb(){return null!==Pb&&Pb.apply(this,arguments)||this}function Vb(){return null!==Rb&&Rb.apply(this,arguments)||this}function Bb(e,t,n){void 0===t?t=0:t>e.length&&mb(),void 0===n?n=e.length-t:n>e.length-t&&mb(),this.segments=e,this.offset=t,this.len=n}Fb.EMPTY_BYTE_STRING=new Fb("");var Kb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zb(e){if(yb(!!e),"string"!=typeof e)return{seconds:Wb(e.seconds),nanos:Wb(e.nanos)};var t=0,n=Kb.exec(e);return yb(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),t=Number(n)),e=new Date(e),{seconds:Math.floor(e.getTime()/1e3),nanos:t}}function Wb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hb(e){return"string"==typeof e?Fb.fromBase64String(e):Fb.fromUint8Array(e)}function Gb(e){return"server_timestamp"===(null===(e=((null===(e=null==e?void 0:e.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Qb(e){return e=zb(e.mapValue.fields.__local_write_time__.timestampValue),new Eb(e.seconds,e.nanos)}function Yb(e){return null==e}function $b(e){return 0===e&&1/e==-1/0}function Xb(e){return"number"==typeof e&&Number.isInteger(e)&&!$b(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Jb=(Zb.fromPath=function(e){return new Zb(Ob.fromString(e))},Zb.fromName=function(e){return new Zb(Ob.fromString(e).popFirst(5))},Zb.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Zb.prototype.isEqual=function(e){return null!==e&&0===Ob.comparator(this.path,e.path)},Zb.prototype.toString=function(){return this.path.toString()},Zb.comparator=function(e,t){return Ob.comparator(e.path,t.path)},Zb.isDocumentKey=function(e){return e.length%2==0},Zb.fromSegments=function(e){return new Zb(new Ob(e.slice()))},Zb);function Zb(e){this.path=e}function e_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gb(e)?4:10:mb()}function t_(e,t){var n,r,i=e_(e);if(i!==e_(t))return!1;switch(i){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qb(e).isEqual(Qb(t));case 3:return function(t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=zb(e.timestampValue);return t=zb(t.timestampValue),n.seconds===t.seconds&&n.nanos===t.nanos}(t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Hb(e.bytesValue).isEqual(Hb(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return n=t,Wb((r=e).geoPointValue.latitude)===Wb(n.geoPointValue.latitude)&&Wb(r.geoPointValue.longitude)===Wb(n.geoPointValue.longitude);case 2:return function(e,t){return"integerValue"in e&&"integerValue"in t?Wb(e.integerValue)===Wb(t.integerValue):"doubleValue"in e&&"doubleValue"in t&&((e=Wb(e.doubleValue))===(t=Wb(t.doubleValue))?$b(e)===$b(t):isNaN(e)&&isNaN(t))}(e,t);case 9:return Tb(e.arrayValue.values||[],t.arrayValue.values||[],t_);case 10:return function(){var n,r=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Nb(r)!==Nb(i))return!1;for(n in r)if(r.hasOwnProperty(n)&&(void 0===i[n]||!t_(r[n],i[n])))return!1;return!0}();default:return mb()}}function n_(e,t){return void 0!==(e.values||[]).find((function(e){return t_(e,t)}))}function r_(e,t){var n,r,i,o=e_(e),a=e_(t);if(o!==a)return wb(o,a);switch(o){case 0:return 0;case 1:return wb(e.booleanValue,t.booleanValue);case 2:return r=t,(i=Wb(e.integerValue||e.doubleValue))<(r=Wb(r.integerValue||r.doubleValue))?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return i_(e.timestampValue,t.timestampValue);case 4:return i_(Qb(e),Qb(t));case 5:return wb(e.stringValue,t.stringValue);case 6:return function(e,t){return e=Hb(e),t=Hb(t),e.compareTo(t)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=wb(n[i],r[i]);if(0!==o)return o}return wb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return n=e.geoPointValue,i=t.geoPointValue,0!==(r=wb(Wb(n.latitude),Wb(i.latitude)))?r:wb(Wb(n.longitude),Wb(i.longitude));case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=r_(n[i],r[i]);if(o)return o}return wb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=wb(r[a],o[a]);if(0!==s)return s;if(0!==(s=r_(n[r[a]],i[o[a]])))return s}return wb(r.length,o.length)}(e.mapValue,t.mapValue);default:throw mb()}}function i_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wb(e,t);var n=zb(e);return e=zb(t),0!==(t=wb(n.seconds,e.seconds))?t:wb(n.nanos,e.nanos)}function o_(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){return"time("+(e=zb(e)).seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hb(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Jb.fromName(n).toString()):"geoPointValue"in t?"geo("+(n=t.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in t?function(t){for(var n="[",r=!0,i=0,o=t.values||[];i<o.length;i++)r?r=!1:n+=",",n+=e(o[i]);return n+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var n="{",r=!0,i=0,o=Object.keys(t.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+e(t.fields[a])}return n+"}"}(t.mapValue):mb();var n}(e)}function a_(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function s_(e){return e&&"integerValue"in e}function u_(e){return!!e&&"arrayValue"in e}function c_(e){return e&&"nullValue"in e}function l_(e){return e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function h_(e){return e&&"mapValue"in e}function f_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ab(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=f_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=f_(e.arrayValue.values[r]);return n}return Object.assign({},e)}var d_=(p_.empty=function(){return new p_({mapValue:{}})},p_.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!h_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},p_.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=f_(t)},p_.prototype.setAll=function(e){var t=this,n=Lb.emptyPath(),r={},i=[];e.forEach((function(e,o){var a;n.isImmediateParentOf(o)||(a=t.getFieldsMap(n),t.applyChanges(a,r,i),r={},i=[],n=o.popLast()),e?r[o.lastSegment()]=f_(e):i.push(o.lastSegment())})),e=this.getFieldsMap(n),this.applyChanges(e,r,i)},p_.prototype.delete=function(e){var t=this.field(e.popLast());h_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},p_.prototype.isEqual=function(e){return t_(this.value,e.value)},p_.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];h_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},p_.prototype.applyChanges=function(e,t,n){Ab(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},p_.prototype.clone=function(){return new p_(f_(this.value))},p_);function p_(e){this.value=e}var v_=(m_.newInvalidDocument=function(e){return new m_(e,0,Sb.min(),d_.empty(),0)},m_.newFoundDocument=function(e,t,n){return new m_(e,1,t,n,0)},m_.newNoDocument=function(e,t){return new m_(e,2,t,d_.empty(),0)},m_.newUnknownDocument=function(e,t){return new m_(e,3,t,d_.empty(),2)},m_.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},m_.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=d_.empty(),this.documentState=0,this},m_.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=d_.empty(),this.documentState=2,this},m_.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},m_.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(m_.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(m_.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(m_.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),m_.prototype.isValidDocument=function(){return 0!==this.documentType},m_.prototype.isFoundDocument=function(){return 1===this.documentType},m_.prototype.isNoDocument=function(){return 2===this.documentType},m_.prototype.isUnknownDocument=function(){return 3===this.documentType},m_.prototype.isEqual=function(e){return e instanceof m_&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},m_.prototype.clone=function(){return new m_(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},m_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},m_),g_=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function m_(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}function y_(e,t,n,r,i,o,a){return new g_(e,t=void 0===t?null:t,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function b_(e){var t=e;return null===t.h&&(e=t.path.canonicalString(),null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((function(e){return e.field.canonicalString()+e.op.toString()+o_(e.value)})).join(","),e+="|ob:",e+=t.orderBy.map((function(e){return e.field.canonicalString()+e.dir})).join(","),Yb(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Q_(t.startAt)),t.endAt&&(e+="|ub:",e+=Q_(t.endAt)),t.h=e),t.h}function __(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n,r,i=0;i<e.orderBy.length;i++)if(n=e.orderBy[i],r=t.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(e.filters.length!==t.filters.length)return!1;for(var o,a,s=0;s<e.filters.length;s++)if(o=e.filters[s],a=t.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!t_(o.value,a.value))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!X_(e.startAt,t.startAt)&&X_(e.endAt,t.endAt)}function w_(e){return Jb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var T_,I_=(Qi(E_,T_=function(){}),E_.create=function(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.l(e,t,n):new N_(e,t,n):"array-contains"===t?new U_(e,n):"in"===t?new q_(e,n):"not-in"===t?new V_(e,n):"array-contains-any"===t?new B_(e,n):new E_(e,t,n)},E_.l=function(e,t,n){return new("in"===t?A_:x_)(e,n)},E_.prototype.matches=function(e){return e=e.data.field(this.field),"!="===this.op?null!==e&&this.m(r_(e,this.value)):null!==e&&e_(this.value)===e_(e)&&this.m(r_(e,this.value))},E_.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return 0<e;case">=":return 0<=e;default:return mb()}},E_.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},E_);function E_(e,t,n){var r=this;return(r=T_.call(this)||this).field=e,r.op=t,r.value=n,r}var S_,k_,C_,N_=(Qi(O_,C_=I_),O_.prototype.matches=function(e){return e=Jb.comparator(e.key,this.key),this.m(e)},O_),A_=(Qi(R_,k_=I_),R_.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},R_),x_=(Qi(P_,S_=I_),P_.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},P_);function P_(e,t){var n=this;return(n=S_.call(this,e,"not-in",t)||this).keys=D_(0,t),n}function R_(e,t){var n=this;return(n=k_.call(this,e,"in",t)||this).keys=D_(0,t),n}function O_(e,t,n){var r=this;return(r=C_.call(this,e,t,n)||this).key=Jb.fromName(n.referenceValue),r}function D_(e,t){return((null===(t=t.arrayValue)||void 0===t?void 0:t.values)||[]).map((function(e){return Jb.fromName(e.referenceValue)}))}var L_,M_,F_,j_,U_=(Qi(G_,j_=I_),G_.prototype.matches=function(e){return u_(e=e.data.field(this.field))&&n_(e.arrayValue,this.value)},G_),q_=(Qi(H_,F_=I_),H_.prototype.matches=function(e){return null!==(e=e.data.field(this.field))&&n_(this.value.arrayValue,e)},H_),V_=(Qi(W_,M_=I_),W_.prototype.matches=function(e){return!n_(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&null!==(e=e.data.field(this.field))&&!n_(this.value.arrayValue,e)},W_),B_=(Qi(z_,L_=I_),z_.prototype.matches=function(e){var t=this;return!(!u_(e=e.data.field(this.field))||!e.arrayValue.values)&&e.arrayValue.values.some((function(e){return n_(t.value.arrayValue,e)}))},z_),K_=function(e,t){this.position=e,this.before=t};function z_(e,t){return L_.call(this,e,"array-contains-any",t)||this}function W_(e,t){return M_.call(this,e,"not-in",t)||this}function H_(e,t){return F_.call(this,e,"in",t)||this}function G_(e,t){return j_.call(this,e,"array-contains",t)||this}function Q_(e){return(e.before?"b":"a")+":"+e.position.map(o_).join(",")}var Y_=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function $_(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Jb.comparator(Jb.fromName(a.referenceValue),n.key):r_(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function X_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!t_(e.position[n],t.position[n]))return!1;return!0}var J_=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Z_(e,t,n,r,i,o,a,s){return new J_(e,t,n,r,i,o,a,s)}function ew(e){return new J_(e)}function tw(e){return!Yb(e.limit)&&"F"===e.limitType}function nw(e){return!Yb(e.limit)&&"L"===e.limitType}function rw(e){return 0<e.explicitOrderBy.length?e.explicitOrderBy[0].field:null}function iw(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function ow(e){return null!==e.collectionGroup}function aw(e){var t=e;if(null===t.p){t.p=[];var n=iw(t);if(e=rw(t),null!==n&&null===e)n.isKeyField()||t.p.push(new Y_(n)),t.p.push(new Y_(Lb.keyField(),"asc"));else{for(var r=!1,i=0,o=t.explicitOrderBy;i<o.length;i++){var a=o[i];t.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<t.explicitOrderBy.length?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",t.p.push(new Y_(Lb.keyField(),n)))}}return t.p}function sw(e){var t=e;if(!t.T)if("F"===t.limitType)t.T=y_(t.path,t.collectionGroup,aw(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=aw(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Y_(o.field,a))}var s=t.endAt?new K_(t.endAt.position,!t.endAt.before):null;e=t.startAt?new K_(t.startAt.position,!t.startAt.before):null,t.T=y_(t.path,t.collectionGroup,n,t.filters,t.limit,s,e)}return t.T}function uw(e,t,n){return new J_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function cw(e,t){return __(sw(e),sw(t))&&e.limitType===t.limitType}function lw(e){return b_(sw(e))+"|lt:"+e.limitType}function hw(e){return"Query(target="+(n=(t=sw(e)).path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),0<t.filters.length&&(n+=", filters: ["+t.filters.map((function(e){return e.field.canonicalString()+" "+e.op+" "+o_(e.value)})).join(", ")+"]"),Yb(t.limit)||(n+=", limit: "+t.limit),0<t.orderBy.length&&(n+=", orderBy: ["+t.orderBy.map((function(e){return e.field.canonicalString()+" ("+e.dir+")"})).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Q_(t.startAt)),t.endAt&&(n+=", endAt: "+Q_(t.endAt)),"Target("+n+"); limitType=")+e.limitType+")";var t,n}function fw(e,t){return t.isFoundDocument()&&(n=e,r=t.key.path,null!==n.collectionGroup?t.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Jb.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r))&&function(t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return}return 1}(t)&&function(t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return;return 1}(t)&&(r=t,(!(t=e).startAt||$_(t.startAt,aw(t),r))&&(!t.endAt||!$_(t.endAt,aw(t),r)));var n,r}function dw(e){return function(t,n){for(var r=!1,i=0,o=aw(e);i<o.length;i++){var a=o[i],s=function(e,t,n){var r=e.field.isKeyField()?Jb.comparator(t.key,n.key):function(e,n){var r=t.data.field(e);return e=n.data.field(e),null!==r&&null!==e?r_(r,e):mb()}(e.field,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return mb()}}(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function pw(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$b(t)?"-0":t}}function vw(e){return{integerValue:""+e}}function gw(e,t){return Xb(t)?vw(t):pw(e,t)}function mw(e,t){return e instanceof xw?s_(e=t)||e&&"doubleValue"in e?t:{integerValue:0}:null}var yw,bw,_w=(Qi(Iw,bw=G=function(){this._=void 0}),Iw),ww=(Qi(Tw,yw=G),Tw);function Tw(e){var t=this;return(t=yw.call(this)||this).elements=e,t}function Iw(){return null!==bw&&bw.apply(this,arguments)||this}function Ew(e,t){for(var n=Ow(t),r=0,i=e.elements;r<i.length;r++)!function(e){n.some((function(t){return t_(t,e)}))||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Sw,kw=(Qi(Cw,Sw=G),Cw);function Cw(e){var t=this;return(t=Sw.call(this)||this).elements=e,t}function Nw(e,t){for(var n=Ow(t),r=0,i=e.elements;r<i.length;r++)!function(e){n=n.filter((function(t){return!t_(t,e)}))}(i[r]);return{arrayValue:{values:n}}}var Aw,xw=(Qi(Pw,Aw=G),Pw);function Pw(e,t){var n=this;return(n=Aw.call(this)||this).R=e,n.A=t,n}function Rw(e){return Wb(e.integerValue||e.doubleValue)}function Ow(e){return u_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Dw(e,t){this.version=e,this.transformResults=t}var Lw=function(e,t){this.field=e,this.transform=t},Mw=(Fw.none=function(){return new Fw},Fw.exists=function(e){return new Fw(void 0,e)},Fw.updateTime=function(e){return new Fw(e)},Object.defineProperty(Fw.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Fw.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},Fw);function Fw(e,t){this.updateTime=e,this.exists=t}function jw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}function Uw(e,t,n){var r,i,o,a;e instanceof zw?(i=t,o=n,jw((r=e).precondition,i)&&(a=r.value.clone(),o=$w(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument(Vw(i),a).setHasLocalMutations())):e instanceof Ww?(o=t,i=n,jw((a=e).precondition,o)&&(n=$w(a.fieldTransforms,i,o),(i=o.data).setAll(Qw(a)),i.setAll(n),o.convertToFoundDocument(Vw(o),i).setHasLocalMutations())):jw(e.precondition,t)&&t.convertToNoDocument(Sb.min())}function qw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Tb(n,r,(function(e,t){return e.field.isEqual(t.field)&&(e=e.transform,t=t.transform,e instanceof ww&&t instanceof ww||e instanceof kw&&t instanceof kw?Tb(e.elements,t.elements,t_):e instanceof xw&&t instanceof xw?t_(e.A,t.A):e instanceof _w&&t instanceof _w)}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function Vw(e){return e.isFoundDocument()?e.version:Sb.min()}var Bw,Kw,zw=(Qi(Gw,Kw=H=function(){}),Gw),Ww=(Qi(Hw,Bw=H),Hw);function Hw(e,t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Bw.call(this)||this).key=e,o.data=t,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function Gw(e,t,n,r){void 0===r&&(r=[]);var i=this;return(i=Kw.call(this)||this).key=e,i.value=t,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function Qw(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){var r;n.isEmpty()||(r=e.data.field(n),t.set(n,r))})),t}function Yw(e,t,n){var r=new Map;yb(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof ww?Ew(o,a):o instanceof kw?Nw(o,a):s))}return r}function $w(e,t,n){for(var r,i=new Map,o=0,a=e;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=t,c=void 0,u instanceof _w?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof ww?Ew(u,r):u instanceof kw?Nw(u,r):(r=Rw(u=mw(c=u,r))+Rw(c.A),s_(u)&&s_(c.A)?vw(r):pw(c.R,r))))}return i}function Xw(e){this.count=e}var Jw,Zw,eT,tT=(Qi(iT,eT=H),iT),nT=(Qi(rT,Zw=H),rT);function rT(e,t){var n=this;return(n=Zw.call(this)||this).key=e,n.precondition=t,n.type=3,n.fieldTransforms=[],n}function iT(e,t){var n=this;return(n=eT.call(this)||this).key=e,n.precondition=t,n.type=2,n.fieldTransforms=[],n}function oT(e){switch(e){case ub.OK:return mb(),0;case ub.CANCELLED:case ub.UNKNOWN:case ub.DEADLINE_EXCEEDED:case ub.RESOURCE_EXHAUSTED:case ub.INTERNAL:case ub.UNAVAILABLE:case ub.UNAUTHENTICATED:return;case ub.INVALID_ARGUMENT:case ub.NOT_FOUND:case ub.ALREADY_EXISTS:case ub.PERMISSION_DENIED:case ub.FAILED_PRECONDITION:case ub.ABORTED:case ub.OUT_OF_RANGE:case ub.UNIMPLEMENTED:case ub.DATA_LOSS:return 1;default:return mb(),0}}function aT(e){if(void 0===e)return pb("GRPC error has no .code"),ub.UNKNOWN;switch(e){case Jw.OK:return ub.OK;case Jw.CANCELLED:return ub.CANCELLED;case Jw.UNKNOWN:return ub.UNKNOWN;case Jw.DEADLINE_EXCEEDED:return ub.DEADLINE_EXCEEDED;case Jw.RESOURCE_EXHAUSTED:return ub.RESOURCE_EXHAUSTED;case Jw.INTERNAL:return ub.INTERNAL;case Jw.UNAVAILABLE:return ub.UNAVAILABLE;case Jw.UNAUTHENTICATED:return ub.UNAUTHENTICATED;case Jw.INVALID_ARGUMENT:return ub.INVALID_ARGUMENT;case Jw.NOT_FOUND:return ub.NOT_FOUND;case Jw.ALREADY_EXISTS:return ub.ALREADY_EXISTS;case Jw.PERMISSION_DENIED:return ub.PERMISSION_DENIED;case Jw.FAILED_PRECONDITION:return ub.FAILED_PRECONDITION;case Jw.ABORTED:return ub.ABORTED;case Jw.OUT_OF_RANGE:return ub.OUT_OF_RANGE;case Jw.UNIMPLEMENTED:return ub.UNIMPLEMENTED;case Jw.DATA_LOSS:return ub.DATA_LOSS;default:return mb()}}(G=Jw=Jw||{})[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var sT=(fT.prototype.insert=function(e,t){return new fT(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cT.BLACK,null,null))},fT.prototype.remove=function(e){return new fT(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cT.BLACK,null,null))},fT.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},fT.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},fT.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(fT.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),fT.prototype.minKey=function(){return this.root.minKey()},fT.prototype.maxKey=function(){return this.root.maxKey()},fT.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},fT.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},fT.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},fT.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},fT.prototype.getIterator=function(){return new uT(this.root,null,this.comparator,!1)},fT.prototype.getIteratorFrom=function(e){return new uT(this.root,e,this.comparator,!1)},fT.prototype.getReverseIterator=function(){return new uT(this.root,null,this.comparator,!0)},fT.prototype.getReverseIteratorFrom=function(e){return new uT(this.root,e,this.comparator,!0)},fT),uT=(hT.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},hT.prototype.hasNext=function(){return 0<this.nodeStack.length},hT.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},hT),cT=(lT.prototype.copy=function(e,t,n,r,i){return new lT(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},lT.prototype.isEmpty=function(){return!1},lT.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},lT.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},lT.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},lT.prototype.minKey=function(){return this.min().key},lT.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},lT.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},lT.prototype.removeMin=function(){if(this.left.isEmpty())return lT.EMPTY;var e=this;return(e=(e=e.left.isRed()||e.left.left.isRed()?e:e.moveRedLeft()).copy(null,null,null,e.left.removeMin(),null)).fixUp()},lT.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(e,t),null);else{if(0===t(e,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return lT.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},lT.prototype.isRed=function(){return this.color},lT.prototype.fixUp=function(){var e=this;return(e=(e=e.right.isRed()&&!e.left.isRed()?e.rotateLeft():e).left.isRed()&&e.left.left.isRed()?e.rotateRight():e).left.isRed()&&e.right.isRed()?e.colorFlip():e},lT.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()?(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip():e},lT.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()?(e=e.rotateRight()).colorFlip():e},lT.prototype.rotateLeft=function(){var e=this.copy(null,null,lT.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},lT.prototype.rotateRight=function(){var e=this.copy(null,null,lT.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},lT.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},lT.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},lT.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw mb();if(this.right.isRed())throw mb();var e=this.left.check();if(e!==this.right.check())throw mb();return e+(this.isRed()?0:1)},lT);function lT(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:lT.RED,this.left=null!=r?r:lT.EMPTY,this.right=null!=i?i:lT.EMPTY,this.size=this.left.size+1+this.right.size}function hT(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}function fT(e,t){this.comparator=e,this.root=t||cT.EMPTY}function dT(){this.size=0}cT.EMPTY=null,cT.RED=!0,cT.BLACK=!1,cT.EMPTY=(Object.defineProperty(dT.prototype,"key",{get:function(){throw mb()},enumerable:!1,configurable:!0}),Object.defineProperty(dT.prototype,"value",{get:function(){throw mb()},enumerable:!1,configurable:!0}),Object.defineProperty(dT.prototype,"color",{get:function(){throw mb()},enumerable:!1,configurable:!0}),Object.defineProperty(dT.prototype,"left",{get:function(){throw mb()},enumerable:!1,configurable:!0}),Object.defineProperty(dT.prototype,"right",{get:function(){throw mb()},enumerable:!1,configurable:!0}),dT.prototype.copy=function(e,t,n,r,i){return this},dT.prototype.insert=function(e,t,n){return new cT(e,t)},dT.prototype.remove=function(e,t){return this},dT.prototype.isEmpty=function(){return!0},dT.prototype.inorderTraversal=function(e){return!1},dT.prototype.reverseTraversal=function(e){return!1},dT.prototype.minKey=function(){return null},dT.prototype.maxKey=function(){return null},dT.prototype.isRed=function(){return!1},dT.prototype.checkMaxDepth=function(){return!0},dT.prototype.check=function(){return 0},new dT);var pT=(yT.prototype.has=function(e){return null!==this.data.get(e)},yT.prototype.first=function(){return this.data.minKey()},yT.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(yT.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),yT.prototype.indexOf=function(e){return this.data.indexOf(e)},yT.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},yT.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},yT.prototype.forEachWhile=function(e,t){for(var n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},yT.prototype.firstAfterOrEqual=function(e){return(e=this.data.getIteratorFrom(e)).hasNext()?e.getNext().key:null},yT.prototype.getIterator=function(){return new vT(this.data.getIterator())},yT.prototype.getIteratorFrom=function(e){return new vT(this.data.getIteratorFrom(e))},yT.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},yT.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},yT.prototype.isEmpty=function(){return this.data.isEmpty()},yT.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},yT.prototype.isEqual=function(e){if(!(e instanceof yT))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},yT.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},yT.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},yT.prototype.copy=function(e){var t=new yT(this.comparator);return t.data=e,t},yT),vT=(mT.prototype.getNext=function(){return this.iter.getNext().key},mT.prototype.hasNext=function(){return this.iter.hasNext()},mT),gT=new sT(Jb.comparator);function mT(e){this.iter=e}function yT(e){this.comparator=e,this.data=new sT(this.comparator)}var bT=new sT(Jb.comparator),_T=new sT(Jb.comparator),wT=new pT(Jb.comparator);function TT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=wT,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var IT=new pT(wb),ET=(DT.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n=new Map;return n.set(e,ST.createSynthesizedTargetChangeForCurrentChange(e,t)),new DT(Sb.min(),n,IT,gT,TT())},DT),ST=(OT.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new OT(Fb.EMPTY_BYTE_STRING,t,TT(),TT(),TT())},OT),kT=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},CT=function(e,t){this.targetId=e,this.V=t},NT=function(e,t,n,r){void 0===n&&(n=Fb.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},AT=(Object.defineProperty(RT.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(RT.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(RT.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(RT.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),RT.prototype.O=function(e){0<e.approximateByteSize()&&(this.k=!0,this.C=e)},RT.prototype.M=function(){var e=TT(),t=TT(),n=TT();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:mb()}})),new ST(this.C,this.N,e,t,n)},RT.prototype.L=function(){this.k=!1,this.D=MT()},RT.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},RT.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},RT.prototype.U=function(){this.S+=1},RT.prototype.K=function(){--this.S},RT.prototype.j=function(){this.k=!0,this.N=!0},RT),xT=(PT.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},PT.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:mb()}}))},PT.prototype.forEachTarget=function(e,t){var n=this;0<e.targetIds.length?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},PT.prototype.rt=function(e){var t=e.targetId,n=e.V.count;(e=this.ot(t))&&(w_(e=e.target)?0===n?(e=new Jb(e.path),this.tt(t,e,v_.newNoDocument(e,Sb.min()))):yb(1===n):this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t)))},PT.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);o&&(r.current&&w_(o.target)&&(o=new Jb(o.target.path),null!==t.H.get(o)||t.at(i,o)||t.tt(i,o,v_.newNoDocument(o,e))),r.$&&(n.set(i,r.M()),r.L()))}));var r=TT();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){return!(e=t.ot(e))||2===e.purpose||(i=!1)})),i&&(r=r.add(e))}));var i=new ET(e,n,this.Y,this.H,r);return this.H=gT,this.J=LT(),this.Y=new pT(wb),i},PT.prototype.Z=function(e,t){var n;this.st(e)&&(n=this.at(e,t.key)?2:0,this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e)))},PT.prototype.tt=function(e,t,n){var r;this.st(e)&&(r=this.nt(e),this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n)))},PT.prototype.removeTarget=function(e){this.G.delete(e)},PT.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},PT.prototype.U=function(e){this.nt(e).U()},PT.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new AT,this.G.set(e,t)),t},PT.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new pT(wb),this.J=this.J.insert(e,t)),t},PT.prototype.st=function(e){var t=null!==this.ot(e);return t||db("WatchChangeAggregator","Detected inactive target",e),t},PT.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},PT.prototype.it=function(e){var t=this;this.G.set(e,new AT),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},PT.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},PT);function PT(e){this.W=e,this.G=new Map,this.H=gT,this.J=LT(),this.Y=new pT(wb)}function RT(){this.S=0,this.D=MT(),this.C=Fb.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}function OT(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function DT(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function LT(){return new sT(Jb.comparator)}function MT(){return new sT(Jb.comparator)}var FT={asc:"ASCENDING",desc:"DESCENDING"},jT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UT=function(e,t){this.databaseId=e,this.I=t};function qT(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function VT(e,t){return e.I?t.toBase64():t.toUint8Array()}function BT(e){return yb(!!e),Sb.fromTimestamp((e=zb(e),new Eb(e.seconds,e.nanos)))}function KT(e,t){return new Ob(["projects",e.projectId,"databases",e.database]).child("documents").child(t).canonicalString()}function zT(e){return yb(lI(e=Ob.fromString(e))),e}function WT(e,t){return KT(e.databaseId,t.path)}function HT(e,t){if((t=zT(t)).get(1)!==e.databaseId.projectId)throw new cb(ub.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+e.databaseId.projectId);if(t.get(3)!==e.databaseId.database)throw new cb(ub.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+e.databaseId.database);return new Jb($T(t))}function GT(e,t){return KT(e.databaseId,t)}function QT(e){return 4===(e=zT(e)).length?Ob.emptyPath():$T(e)}function YT(e){return new Ob(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $T(e){return yb(4<e.length&&"documents"===e.get(4)),e.popFirst(5)}function XT(e,t,n){return{name:WT(e,t),fields:n.value.mapValue.fields}}function JT(e,t,n){var r=HT(e,t.name);return e=BT(t.updateTime),t=new d_({mapValue:{fields:t.fields}}),t=v_.newFoundDocument(r,e,t),n&&t.setHasCommittedMutations(),n?t.setHasCommittedMutations():t}function ZT(e,t){var n,r,i;if(t instanceof zw)n={update:XT(e,t.key,t.value)};else if(t instanceof tT)n={delete:WT(e,t.key)};else if(t instanceof Ww)n={update:XT(e,t.key,t.data),updateMask:(r=t.fieldMask,i=[],r.fields.forEach((function(e){return i.push(e.canonicalString())})),{fieldPaths:i})};else{if(!(t instanceof nT))return mb();n={verify:WT(e,t.key)}}return 0<t.fieldTransforms.length&&(n.updateTransforms=t.fieldTransforms.map((function(e){var t=e.transform;if(t instanceof _w)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(t instanceof ww)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:t.elements}};if(t instanceof kw)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:t.elements}};if(t instanceof xw)return{fieldPath:e.field.canonicalString(),increment:t.A};throw mb()}))),t.precondition.isNone||(n.currentDocument=void 0!==(t=t.precondition).updateTime?{updateTime:qT(e,t.updateTime.toTimestamp())}:void 0!==t.exists?{exists:t.exists}:mb()),n}function eI(e,t){var n=t.currentDocument?void 0!==(a=t.currentDocument).updateTime?Mw.updateTime(BT(a.updateTime)):void 0!==a.exists?Mw.exists(a.exists):Mw.none():Mw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n,r=null;return"setToServerValue"in t?(yb("REQUEST_TIME"===t.setToServerValue),r=new _w):"appendMissingElements"in t?(n=t.appendMissingElements.values||[],r=new ww(n)):"removeAllFromArray"in t?(n=t.removeAllFromArray.values||[],r=new kw(n)):"increment"in t?r=new xw(e,t.increment):mb(),t=Lb.fromServerFormat(t.fieldPath),new Lw(t,r)}(e,t)})):[];if(t.update){t.update.name;var i=HT(e,t.update.name),o=new d_({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(a=t.updateMask.fieldPaths||[],new Mb(a.map((function(e){return Lb.fromServerFormat(e)}))));return new Ww(i,o,a,n,r)}return new zw(i,o,n,r)}return t.delete?(r=HT(e,t.delete),new tT(r,n)):t.verify?(t=HT(e,t.verify),new nT(t,n)):mb()}function tI(e,t){return{documents:[GT(e,t.path)]}}function nI(e,t){var n={structuredQuery:{}},r=t.path;return null!==t.collectionGroup?(n.parent=GT(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=GT(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),r=function(e){if(0!==e.length)return e=e.map((function(e){if("=="===e.op){if(l_(e.value))return{unaryFilter:{field:aI(e.field),op:"IS_NAN"}};if(c_(e.value))return{unaryFilter:{field:aI(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(l_(e.value))return{unaryFilter:{field:aI(e.field),op:"IS_NOT_NAN"}};if(c_(e.value))return{unaryFilter:{field:aI(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aI(e.field),op:(t=e.op,jT[t]),value:e.value}};var t})),1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(t.filters),r&&(n.structuredQuery.where=r),r=function(e){if(0!==e.length)return e.map((function(e){return{field:aI(e.field),direction:(e=e.dir,FT[e])}}))}(t.orderBy),r&&(n.structuredQuery.orderBy=r),r=t.limit,null!==(r=e.I||Yb(r)?r:{value:r})&&(n.structuredQuery.limit=r),t.startAt&&(n.structuredQuery.startAt=iI(t.startAt)),t.endAt&&(n.structuredQuery.endAt=iI(t.endAt)),n}function rI(e){var t=QT(e.parent),n=e.structuredQuery,r=null;0<(a=n.from?n.from.length:0)&&(yb(1===a),(s=n.from[0]).allDescendants?r=s.collectionId:t=t.child(s.collectionId));var i=[];n.where&&(i=function e(t){return t?void 0!==t.unaryFilter?[cI(t)]:void 0!==t.fieldFilter?[uI(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)})):mb():[]}(n.where));var o=[],a=(e=null,null),s=null;return Z_(t,r,o=n.orderBy?n.orderBy.map((function(e){return new Y_(sI((t=e).field),function(){switch(t.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var t})):o,i,e=n.limit?Yb(i="object"==typeof(i=n.limit)?i.value:i)?null:i:e,"F",a=n.startAt?oI(n.startAt):a,s=n.endAt?oI(n.endAt):s)}function iI(e){return{before:e.before,values:e.position}}function oI(e){var t=!!e.before;return e=e.values||[],new K_(e,t)}function aI(e){return{fieldPath:e.canonicalString()}}function sI(e){return Lb.fromServerFormat(e.fieldPath)}function uI(e){return I_.create(sI(e.fieldFilter.field),function(){switch(e.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mb()}}(),e.fieldFilter.value)}function cI(e){switch(e.unaryFilter.op){case"IS_NAN":var t=sI(e.unaryFilter.field);return I_.create(t,"==",{doubleValue:NaN});case"IS_NULL":return t=sI(e.unaryFilter.field),I_.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=sI(e.unaryFilter.field);return I_.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return n=sI(e.unaryFilter.field),I_.create(n,"!=",{nullValue:"NULL_VALUE"});default:return mb()}}function lI(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)}function hI(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=fI(t)),t=function(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(e.get(n),t);return fI(t)}function fI(e){return e+"\x01\x01"}function dI(e){var t=e.length;if(yb(2<=t),2===t)return yb("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ob.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||n<a)&&mb(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:mb()}o=a+2}return new Ob(r)}function pI(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var vI=function(e,t){this.seconds=e,this.nanoseconds=t};function gI(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}function mI(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}pI.store="owner",pI.key="owner",gI.store="mutationQueues",gI.keyPath="userId",mI.store="mutations",mI.keyPath="batchId",mI.userMutationsIndex="userMutationsIndex",mI.userMutationsKeyPath=["userId","batchId"];var yI=(bI.prefixForUser=function(e){return[e]},bI.prefixForPath=function(e,t){return[e,hI(t)]},bI.key=function(e,t,n){return[e,hI(t),n]},bI);function bI(){}function _I(e,t){this.path=e,this.readTime=t}function wI(e,t){this.path=e,this.version=t}yI.store="documentMutations",yI.PLACEHOLDER=new yI;var TI=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};function II(e){this.byteSize=e}function EI(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}TI.store="remoteDocuments",TI.readTimeIndex="readTimeIndex",TI.readTimeIndexPath="readTime",TI.collectionReadTimeIndex="collectionReadTimeIndex",TI.collectionReadTimeIndexPath=["parentPath","readTime"],II.store="remoteDocumentGlobal",II.key="remoteDocumentGlobalKey",EI.store="targets",EI.keyPath="targetId",EI.queryTargetsIndexName="queryTargetsIndex",EI.queryTargetsKeyPath=["canonicalId","targetId"];var SI=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};function kI(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function CI(e,t){this.collectionId=e,this.parent=t}function NI(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}function AI(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}function xI(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}SI.store="targetDocuments",SI.keyPath=["targetId","path"],SI.documentTargetsIndex="documentTargetsIndex",SI.documentTargetsKeyPath=["path","targetId"],kI.key="targetGlobalKey",kI.store="targetGlobal",CI.store="collectionParents",CI.keyPath=["collectionId","parent"],NI.store="clientMetadata",NI.keyPath="clientId",AI.store="bundles",AI.keyPath="bundleId",xI.store="namedQueries",xI.keyPath="name";var PI,RI=eo(eo([],eo(eo([],eo(eo([],eo(eo([],[gI.store,mI.store,yI.store,TI.store,EI.store,pI.store,kI.store,SI.store]),[NI.store])),[II.store])),[CI.store])),[AI.store,xI.store]),OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",DI=(WI.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},WI.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},H=WI,function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}),LI=(zI.prototype.catch=function(e){return this.next(void 0,e)},zI.prototype.next=function(e,t){var n=this;return this.callbackAttached&&mb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new zI((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},zI.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},zI.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof zI?t:zI.resolve(t)}catch(e){return zI.reject(e)}},zI.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):zI.resolve(t)},zI.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):zI.reject(t)},zI.resolve=function(e){return new zI((function(t,n){t(e)}))},zI.reject=function(e){return new zI((function(t,n){n(e)}))},zI.waitFor=function(e){return new zI((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},zI.or=function(e){for(var t=zI.resolve(!1),n=0,r=e;n<r.length;n++)!function(e){t=t.next((function(t){return t?zI.resolve(t):e()}))}(r[n]);return t},zI.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},zI),MI=(KI.open=function(e,t,n,r){try{return new KI(t,e.transaction(r,n))}catch(e){throw new UI(t,e)}},Object.defineProperty(KI.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),KI.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(db("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},KI.prototype.store=function(e){return e=this.transaction.objectStore(e),new GI(e)},KI),FI=(BI.delete=function(e){return db("SimpleDb","Removing database:",e),YI(window.indexedDB.deleteDatabase(e)).toPromise()},BI.yt=function(){if("undefined"==typeof indexedDB)return!1;if(BI.gt())return!0;var e=vo(),t=0<(n=BI._t(e))&&n<10,n=0<(n=BI.Et(e))&&n<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||t||n)},BI.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Tt)},BI.It=function(e,t){return e.store(t)},BI._t=function(e){return e=(e=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?e[1].split("_").slice(0,2).join("."):"-1",Number(e)},BI.Et=function(e){return e=(e=e.match(/Android ([\d.]+)/i))?e[1].split(".").slice(0,2).join("."):"-1",Number(e)},BI.prototype.At=function(e){return $i(this,void 0,void 0,(function(){var t,n=this;return Xi(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(db("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){e=e.target.result,t(e)},i.onblocked=function(){r(new UI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){"VersionError"===(t=t.target.error).name?r(new cb(ub.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new UI(e,t))},i.onupgradeneeded=function(e){db("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){db("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},BI.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},BI.prototype.runTransaction=function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o,a,s;return Xi(this,(function(u){switch(u.label){case 0:i="readonly"===t,o=0,s=function(){var t,s,u;return Xi(this,(function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.At(e)];case 2:return a.db=c.sent(),t=MI.open(a.db,e,i?"readonly":"readwrite",n),s=r(t).catch((function(e){return t.abort(e),LI.reject(e)})).toPromise(),u={},s.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return s=c.sent(),u="FirebaseError"!==s.name&&o<3,db("SimpleDb","Transaction failed with error:",s.message,"Retrying:",u),a.close(),u?[3,5]:[2,{value:Promise.reject(s)}];case 5:return[2]}}))},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},BI.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},BI),jI=(Object.defineProperty(VI.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(VI.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(VI.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),VI.prototype.done=function(){this.Vt=!0},VI.prototype.Ct=function(e){this.St=e},VI.prototype.delete=function(){return YI(this.Pt.delete())},VI),UI=(Qi(qI,PI=cb),qI);function qI(e,t){var n=this;return(n=PI.call(this,ub.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+t)||this).name="IndexedDbTransactionError",n}function VI(e){this.Pt=e,this.Vt=!1,this.St=null}function BI(e,t,n){this.name=e,this.version=t,this.wt=n,12.2===BI._t(vo())&&pb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function KI(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new DI,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new UI(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){t=XI(t.target.error),n.ft.reject(new UI(e,t))}}function zI(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}function WI(){this.onCommittedListeners=[]}function HI(e){return"IndexedDbTransactionError"===e.name}var GI=(QI.prototype.put=function(e,t){return YI(e=void 0!==t?(db("SimpleDb","PUT",this.store.name,e,t),this.store.put(t,e)):(db("SimpleDb","PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},QI.prototype.add=function(e){return db("SimpleDb","ADD",this.store.name,e,e),YI(this.store.add(e))},QI.prototype.get=function(e){var t=this;return YI(this.store.get(e)).next((function(n){return db("SimpleDb","GET",t.store.name,e,n=void 0===n?null:n),n}))},QI.prototype.delete=function(e){return db("SimpleDb","DELETE",this.store.name,e),YI(this.store.delete(e))},QI.prototype.count=function(){return db("SimpleDb","COUNT",this.store.name),YI(this.store.count())},QI.prototype.Nt=function(e,t){t=this.cursor(this.options(e,t));var n=[];return this.xt(t,(function(e,t){n.push(t)})).next((function(){return n}))},QI.prototype.kt=function(e,t){return db("SimpleDb","DELETE ALL",this.store.name),(t=this.options(e,t)).Ft=!1,t=this.cursor(t),this.xt(t,(function(e,t,n){return n.delete()}))},QI.prototype.$t=function(e,t){t?n=e:(n={},t=e);var n=this.cursor(n);return this.xt(n,t)},QI.prototype.Ot=function(e){var t=this.cursor({});return new LI((function(n,r){t.onerror=function(e){e=XI(e.target.error),r(e)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},QI.prototype.xt=function(e,t){var n=[];return new LI((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i,o=e.target.result;o?(i=new jI(o),(e=t(o.primaryKey,o.value,i))instanceof LI&&(e=e.catch((function(e){return i.done(),LI.reject(e)})),n.push(e)),i.isDone?r():null===i.Dt?o.continue():o.continue(i.Dt)):r()}})).next((function(){return LI.waitFor(n)}))},QI.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},QI.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},QI);function QI(e){this.store=e}function YI(e){return new LI((function(t,n){e.onsuccess=function(e){e=e.target.result,t(e)},e.onerror=function(e){e=XI(e.target.error),n(e)}}))}var $I=!1;function XI(e){var t=FI._t(vo());if(12.2<=t&&t<13&&(t="An internal error was encountered in the Indexed Database server",0<=e.message.indexOf(t))){var n=new cb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+t+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return $I||($I=!0,setTimeout((function(){throw n}),0)),n}return e}var JI,ZI=(Qi(eE,JI=H),eE);function eE(e,t){var n=this;return(n=JI.call(this)||this).Mt=e,n.currentSequenceNumber=t,n}function tE(e,t){return FI.It(e.Mt,t)}var nE=(uE.prototype.applyToRemoteDocument=function(e,t){for(var n,r,i,o,a,s,u=t.mutationResults,c=0;c<this.mutations.length;c++){var l=this.mutations[c];l.key.isEqual(e.key)&&(n=l,r=e,i=u[c],l=s=a=o=void 0,n instanceof zw?(a=r,s=i,l=(o=n).value.clone(),o=Yw(o.fieldTransforms,a,s.transformResults),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()):n instanceof Ww?(o=r,a=i,jw((s=n).precondition,o)?(l=Yw(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(Qw(s)),n.setAll(l),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},uE.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(r=n[t]).key.isEqual(e.key)&&Uw(r,e,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(e.key)&&Uw(r,e,this.localWriteTime)},uE.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key);n=r,t.applyToLocalView(n),r.isValidDocument()||n.convertToNoDocument(Sb.min())}))},uE.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),TT())},uE.prototype.isEqual=function(e){return this.batchId===e.batchId&&Tb(this.mutations,e.mutations,qw)&&Tb(this.baseMutations,e.baseMutations,qw)},uE),rE=(sE.from=function(e,t,n){yb(e.mutations.length===n.length);for(var r=_T,i=e.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new sE(e,t,n,r)},sE),iE=(aE.prototype.withSequenceNumber=function(e){return new aE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},aE.prototype.withResumeToken=function(e,t){return new aE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},aE.prototype.withLastLimboFreeSnapshotVersion=function(e){return new aE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},aE),oE=function(e){this.Lt=e};function aE(e,t,n,r,i,o,a){void 0===i&&(i=Sb.min()),void 0===o&&(o=Sb.min()),void 0===a&&(a=Fb.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function sE(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}function uE(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}function cE(e,t){if(t.document)return JT(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Jb.fromSegments(t.noDocument.path),r=pE(t.noDocument.readTime);return n=v_.newNoDocument(n,r),t.hasCommittedMutations?n.setHasCommittedMutations():n}return t.unknownDocument?(n=Jb.fromSegments(t.unknownDocument.path),r=pE(t.unknownDocument.version),v_.newUnknownDocument(n,r)):mb()}function lE(e,t,n){var r=hE(n);if(n=t.key.path.popLast().toArray(),t.isFoundDocument()){var i={name:WT(o=e.Lt,(a=t).key),fields:a.data.value.mapValue.fields,updateTime:qT(o,a.version.toTimestamp())},o=t.hasCommittedMutations;return new TI(null,null,i,o,r,n)}if(t.isNoDocument()){var a=t.key.path.toArray();return i=dE(t.version),o=t.hasCommittedMutations,new TI(null,new _I(a,i),null,o,r,n)}return t.isUnknownDocument()?(o=t.key.path.toArray(),t=dE(t.version),new TI(new wI(o,t),null,null,!0,r,n)):mb()}function hE(e){return[(e=e.toTimestamp()).seconds,e.nanoseconds]}function fE(e){return e=new Eb(e[0],e[1]),Sb.fromTimestamp(e)}function dE(e){return e=e.toTimestamp(),new vI(e.seconds,e.nanoseconds)}function pE(e){return e=new Eb(e.seconds,e.nanoseconds),Sb.fromTimestamp(e)}function vE(e,t){for(var n=(t.baseMutations||[]).map((function(t){return eI(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map((function(t){return eI(e.Lt,t)})),s=Eb.fromMillis(t.localWriteTimeMs);return new nE(t.batchId,s,n,a)}function gE(e){var t=pE(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?pE(e.lastLimboFreeSnapshotVersion):Sb.min(),r=void 0!==e.query.documents?(yb(1===(r=e.query).documents.length),sw(ew(QT(r.documents[0])))):sw(rI(e.query));return new iE(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Fb.fromBase64String(e.resumeToken))}function mE(e,t){var n=dE(t.snapshotVersion),r=dE(t.lastLimboFreeSnapshotVersion),i=(w_(t.target)?tI:nI)(e.Lt,t.target);return e=t.resumeToken.toBase64(),new EI(t.targetId,b_(t.target),n,e,t.sequenceNumber,r,i)}function yE(e){var t=rI({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?uw(t,t.limit,"L"):t}var bE=(_E.prototype.getBundleMetadata=function(e,t){return wE(e).get(t).next((function(e){if(e)return{id:e.bundleId,createTime:pE(e.createTime),version:e.version}}))},_E.prototype.saveBundleMetadata=function(e,t){return wE(e).put({bundleId:t.id,createTime:dE(BT(t.createTime)),version:t.version})},_E.prototype.getNamedQuery=function(e,t){return TE(e).get(t).next((function(e){if(e)return{name:e.name,query:yE(e.bundledQuery),readTime:pE(e.readTime)}}))},_E.prototype.saveNamedQuery=function(e,t){return TE(e).put({name:t.name,readTime:dE(BT(t.readTime)),bundledQuery:t.bundledQuery})},_E);function _E(){}function wE(e){return tE(e,AI.store)}function TE(e){return tE(e,xI.store)}var IE=(NE.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),LI.resolve()},NE.prototype.getCollectionParents=function(e,t){return LI.resolve(this.Bt.getEntries(t))},NE),EE=(CE.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pT(Ob.comparator);return e=!r.has(n),this.index[t]=r.add(n),e},CE.prototype.has=function(e){var t=e.lastSegment();return e=e.popLast(),(t=this.index[t])&&t.has(e)},CE.prototype.getEntries=function(e){return(this.index[e]||new pT(Ob.comparator)).toArray()},CE),SE=(kE.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(this.qt.has(t))return LI.resolve();var r=t.lastSegment(),i=t.popLast();return e.addOnCommittedListener((function(){n.qt.add(t)})),i={collectionId:r,parent:hI(i)},AE(e).put(i)},kE.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ib(t),""],!1,!0);return AE(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(dI(o.parent))}return n}))},kE);function kE(){this.qt=new EE}function CE(){this.index={}}function NE(){this.Bt=new EE}function AE(e){return tE(e,CI.store)}var xE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PE=(RE.withCacheSize=function(e){return new RE(e,RE.DEFAULT_COLLECTION_PERCENTILE,RE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},RE);function RE(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}function OE(e,t,n){var r=e.store(mI.store),i=e.store(yI.store),o=[],a=(e=IDBKeyRange.only(n.batchId),0);e=r.$t({range:e},(function(e,t,n){return a++,n.delete()})),o.push(e.next((function(){yb(1===a)})));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var l=c[u],h=yI.key(t,l.key.path,n.batchId);o.push(i.delete(h)),s.push(l.key)}return LI.waitFor(o).next((function(){return s}))}function DE(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw mb();t=e.noDocument}return JSON.stringify(t).length}PE.DEFAULT_COLLECTION_PERCENTILE=10,PE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,PE.DEFAULT=new PE(41943040,PE.DEFAULT_COLLECTION_PERCENTILE,PE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),PE.DISABLED=new PE(-1,0,0);var LE=(ME.Qt=function(e,t,n,r){return yb(""!==e.uid),new ME(e.isAuthenticated()?e.uid:"",t,n,r)},ME.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jE(e).$t({index:mI.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},ME.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=UE(e),a=jE(e);return a.add({}).next((function(s){yb("number"==typeof s);for(var u,c,l,h,f,d=new nE(s,t,n,r),p=(u=i.R,c=i.userId,h=(l=d).baseMutations.map((function(e){return ZT(u.Lt,e)})),f=l.mutations.map((function(e){return ZT(u.Lt,e)})),new mI(c,l.batchId,l.localWriteTime.toMillis(),h,f)),v=[],g=new pT((function(e,t){return wb(e.canonicalString(),t.canonicalString())})),m=0,y=r;m<y.length;m++){var b=y[m],_=yI.key(i.userId,b.key.path,s);g=g.add(b.key.path.popLast()),v.push(a.put(p)),v.push(o.put(_,yI.PLACEHOLDER))}return g.forEach((function(t){v.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=d.keys()})),LI.waitFor(v).next((function(){return d}))}))},ME.prototype.lookupMutationBatch=function(e,t){var n=this;return jE(e).get(t).next((function(e){return e?(yb(e.userId===n.userId),vE(n.R,e)):null}))},ME.prototype.jt=function(e,t){var n=this;return this.Kt[t]?LI.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){return e?(e=e.keys(),n.Kt[t]=e):null}))},ME.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=(t=IDBKeyRange.lowerBound([this.userId,r]),null);return jE(e).$t({index:mI.userMutationsIndex,range:t},(function(e,t,o){t.userId===n.userId&&(yb(t.batchId>=r),i=vE(n.R,t)),o.done()})).next((function(){return i}))},ME.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jE(e).$t({index:mI.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},ME.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jE(e).Nt(mI.userMutationsIndex,n).next((function(e){return e.map((function(e){return vE(t.R,e)}))}))},ME.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=yI.prefixForPath(this.userId,t.path),i=(r=IDBKeyRange.lowerBound(r),[]);return UE(e).$t({range:r},(function(r,o,a){var s=r[0],u=r[1];if(r=r[2],u=dI(u),s===n.userId&&t.path.isEqual(u))return jE(e).get(r).next((function(e){if(!e)throw mb();yb(e.userId===n.userId),i.push(vE(n.R,e))}));a.done()})).next((function(){return i}))},ME.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new pT(wb),i=[];return t.forEach((function(t){var o=yI.prefixForPath(n.userId,t.path);o=IDBKeyRange.lowerBound(o),o=UE(e).$t({range:o},(function(e,i,o){var a=e[0],s=e[1];e=e[2],s=dI(s),a===n.userId&&t.path.isEqual(s)?r=r.add(e):o.done()})),i.push(o)})),LI.waitFor(i).next((function(){return n.Wt(e,r)}))},ME.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=(t=yI.prefixForPath(this.userId,r),t=IDBKeyRange.lowerBound(t),new pT(wb));return UE(e).$t({range:t},(function(e,t,a){var s=e[0],u=e[1];e=e[2],u=dI(u),s===n.userId&&r.isPrefixOf(u)?u.length===i&&(o=o.add(e)):a.done()})).next((function(){return n.Wt(e,o)}))},ME.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(jE(e).get(t).next((function(e){if(null===e)throw mb();yb(e.userId===n.userId),r.push(vE(n.R,e))})))})),LI.waitFor(i).next((function(){return r}))},ME.prototype.removeMutationBatch=function(e,t){var n=this;return OE(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),LI.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},ME.prototype.Gt=function(e){delete this.Kt[e]},ME.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return LI.resolve();n=IDBKeyRange.lowerBound(yI.prefixForUser(t.userId));var r=[];return UE(e).$t({range:n},(function(e,n,i){e[0]===t.userId?(e=dI(e[1]),r.push(e)):i.done()})).next((function(){yb(0===r.length)}))}))},ME.prototype.containsKey=function(e,t){return FE(e,this.userId,t)},ME.prototype.zt=function(e){var t=this;return qE(e).get(this.userId).next((function(e){return e||new gI(t.userId,-1,"")}))},ME);function ME(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}function FE(e,t,n){var r=(n=yI.prefixForPath(t,n.path))[1],i=(n=IDBKeyRange.lowerBound(n),!1);return UE(e).$t({range:n,Ft:!0},(function(e,n,o){var a=e[0],s=e[1];e[2],a===t&&s===r&&(i=!0),o.done()})).next((function(){return i}))}function jE(e){return tE(e,mI.store)}function UE(e){return tE(e,yI.store)}function qE(e){return tE(e,gI.store)}var VE=(zE.prototype.next=function(){return this.Ht+=2,this.Ht},zE.Jt=function(){return new zE(0)},zE.Yt=function(){return new zE(-1)},zE),BE=(KE.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new VE(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},KE.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return Sb.fromTimestamp(new Eb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},KE.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},KE.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},KE.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},KE.prototype.updateTargetData=function(e,t){return this.te(e,t)},KE.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return WE(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return yb(0<t.targetCount),--t.targetCount,n.Zt(e,t)}))},KE.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return WE(e).$t((function(a,s){(s=gE(s)).sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(e,s)))})).next((function(){return LI.waitFor(o)})).next((function(){return i}))},KE.prototype.forEachTarget=function(e,t){return WE(e).$t((function(e,n){n=gE(n),t(n)}))},KE.prototype.Xt=function(e){return HE(e).get(kI.key).next((function(e){return yb(null!==e),e}))},KE.prototype.Zt=function(e,t){return HE(e).put(kI.key,t)},KE.prototype.te=function(e,t){return WE(e).put(mE(this.R,t))},KE.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},KE.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},KE.prototype.getTargetData=function(e,t){var n=b_(t),r=(n=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),null);return WE(e).$t({range:n,index:EI.queryTargetsIndexName},(function(e,n,i){n=gE(n),__(t,n.target)&&(r=n,i.done())})).next((function(){return r}))},KE.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=GE(e);return t.forEach((function(t){var a=hI(t.path);i.push(o.put(new SI(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),LI.waitFor(i)},KE.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=GE(e);return LI.forEach(t,(function(t){var o=hI(t.path);return LI.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},KE.prototype.removeMatchingKeysForTargetId=function(e,t){return e=GE(e),t=IDBKeyRange.bound([t],[t+1],!1,!0),e.delete(t)},KE.prototype.getMatchingKeysForTargetId=function(e,t){t=IDBKeyRange.bound([t],[t+1],!1,!0),e=GE(e);var n=TT();return e.$t({range:t,Ft:!0},(function(e,t,r){e=dI(e[1]),e=new Jb(e),n=n.add(e)})).next((function(){return n}))},KE.prototype.containsKey=function(e,t){t=hI(t.path),t=IDBKeyRange.bound([t],[Ib(t)],!1,!0);var n=0;return GE(e).$t({index:SI.documentTargetsIndex,Ft:!0,range:t},(function(e,t,r){var i=e[0];e[1],0!==i&&(n++,r.done())})).next((function(){return 0<n}))},KE.prototype.lt=function(e,t){return WE(e).get(t).next((function(e){return e?gE(e):null}))},KE);function KE(e,t){this.referenceDelegate=e,this.R=t}function zE(e){this.Ht=e}function WE(e){return tE(e,EI.store)}function HE(e){return tE(e,kI.store)}function GE(e){return tE(e,SI.store)}function QE(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){if(e.code!==ub.FAILED_PRECONDITION||e.message!==OI)throw e;return db("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function YE(e,t){var n=e[0],r=e[1];return e=t[0],t=t[1],0===(e=wb(n,e))?wb(r,t):e}var $E=(rS.prototype.ie=function(){return++this.se},rS.prototype.re=function(e){var t=[e,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(t):YE(t,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(t))},Object.defineProperty(rS.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),rS),XE=(nS.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},nS.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(nS.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),nS.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;db("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return $i(t,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return HI(t=n.sent())?(db("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,QE(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},nS),JE=(tS.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},tS.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return LI.resolve(ob.o);var r=new $E(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},tS.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},tS.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},tS.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(db("LruGarbageCollector","Garbage collection skipped; disabled"),LI.resolve(xE)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(db("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),xE):n.fe(e,t)}))},tS.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},tS.prototype.fe=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(db("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),fb()<=ca.DEBUG&&db("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),LI.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},tS),ZE=(eS.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},eS.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},eS.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},eS.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},eS.prototype.addReference=function(e,t,n){return iS(e,n)},eS.prototype.removeReference=function(e,t,n){return iS(e,n)},eS.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},eS.prototype.markPotentiallyOrphaned=iS,eS.prototype._e=function(e,t){return r=t,i=!1,qE(n=e).Ot((function(e){return FE(n,e,r).next((function(e){return e&&(i=!0),LI.resolve(!e)}))})).next((function(){return i}));var n,r,i},eS.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){s<=t&&(s=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),GE(e).delete([0,hI(a.path)])}))})),i.push(s))})).next((function(){return LI.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},eS.prototype.removeTarget=function(e,t){return t=t.withSequenceNumber(e.currentSequenceNumber),this.db.getTargetCache().updateTargetData(e,t)},eS.prototype.updateLimboDocument=iS,eS.prototype.we=function(e,t){e=GE(e);var n,r=ob.o;return e.$t({index:SI.documentTargetsIndex},(function(e,i){var o=e[0];e[1],e=i.path,i=i.sequenceNumber,0===o?(r!==ob.o&&t(new Jb(dI(n)),r),r=i,n=e):r=ob.o})).next((function(){r!==ob.o&&t(new Jb(dI(n)),r)}))},eS.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},eS);function eS(e,t){this.db=e,this.garbageCollector=new JE(this,t)}function tS(e,t){this.ae=e,this.params=t}function nS(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}function rS(e){this.ne=e,this.buffer=new pT(YE),this.se=0}function iS(e,t){return GE(e).put((e=e.currentSequenceNumber,new SI(0,hI(t.path),e)))}var oS,aS=(fS.prototype.get=function(e){var t=this.mapKeyFn(e);if(void 0!==(t=this.inner[t]))for(var n=0,r=t;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.equalsFn(i,e))return o}},fS.prototype.has=function(e){return void 0!==this.get(e)},fS.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},fS.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},fS.prototype.forEach=function(e){Ab(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=(a=i[r])[0],a=a[1];e(o,a)}}))},fS.prototype.isEmpty=function(){return xb(this.inner)},fS),sS=(hS.prototype.getReadTime=function(e){return(e=this.changes.get(e))?e.readTime:Sb.min()},hS.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},hS.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:v_.newInvalidDocument(e),readTime:t})},hS.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?LI.resolve(n.document):this.getFromCache(e,t)},hS.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},hS.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},hS.prototype.assertNotApplied=function(){},G=hS,lS.prototype.addEntry=function(e,t,n){return pS(e).put(vS(t),n)},lS.prototype.removeEntry=function(e,t){return e=pS(e),t=vS(t),e.delete(t)},lS.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},lS.prototype.getEntry=function(e,t){var n=this;return pS(e).get(vS(t)).next((function(e){return n.ye(t,e)}))},lS.prototype.ge=function(e,t){var n=this;return pS(e).get(vS(t)).next((function(e){return{document:n.ye(t,e),size:DE(e)}}))},lS.prototype.getEntries=function(e,t){var n=this,r=gT;return this.pe(e,t,(function(e,t){t=n.ye(e,t),r=r.insert(e,t)})).next((function(){return r}))},lS.prototype.Ee=function(e,t){var n=this,r=gT,i=new sT(Jb.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,DE(t))})).next((function(){return{documents:r,Te:i}}))},lS.prototype.pe=function(e,t,n){if(t.isEmpty())return LI.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return pS(e).$t({range:r},(function(e,t,r){for(var a=Jb.fromSegments(e);o&&Jb.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},lS.prototype.getDocumentsMatchingQuery=function(e,t,n){var r,i=this,o=gT,a=t.path.length+1,s={};return n.isEqual(Sb.min())?(r=t.path.toArray(),s.range=IDBKeyRange.lowerBound(r)):(r=t.path.toArray(),n=hE(n),s.range=IDBKeyRange.lowerBound([r,n],!0),s.index=TI.collectionReadTimeIndex),pS(e).$t(s,(function(e,n,r){e.length===a&&(n=cE(i.R,n),t.path.isPrefixOf(n.key.path)?fw(t,n)&&(o=o.insert(n.key,n)):r.done())})).next((function(){return o}))},lS.prototype.newChangeBuffer=function(e){return new uS(this,!!e&&e.trackRemovals)},lS.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},lS.prototype.getMetadata=function(e){return dS(e).get(II.key).next((function(e){return yb(!!e),e}))},lS.prototype.me=function(e,t){return dS(e).put(II.key,t)},lS.prototype.ye=function(e,t){return!t||(t=cE(this.R,t)).isNoDocument()&&t.version.isEqual(Sb.min())?v_.newInvalidDocument(e):t},lS),uS=(Qi(cS,oS=G),cS.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new pT((function(e,t){return wb(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s,u=t.Ae.get(o);a.document.isValidDocument()?(s=lE(t.Ie.R,a.document,t.getReadTime(o)),i=i.add(o.path.popLast()),a=DE(s),r+=a-u,n.push(t.Ie.addEntry(e,o,s))):(r-=u,t.trackRemovals?(u=lE(t.Ie.R,v_.newNoDocument(o,Sb.min()),t.getReadTime(o)),n.push(t.Ie.addEntry(e,o,u))):n.push(t.Ie.removeEntry(e,o)))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),LI.waitFor(n)},cS.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},cS.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},cS);function cS(e,t){var n=this;return(n=oS.call(this)||this).Ie=e,n.trackRemovals=t,n.Ae=new aS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),n}function lS(e,t){this.R=e,this.Ut=t}function hS(){this.changes=new aS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}function fS(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}function dS(e){return tE(e,II.store)}function pS(e){return tE(e,TI.store)}function vS(e){return e.path.toArray()}var gS=(mS.prototype.Rt=function(e,t,n,r){var i=this;yb(n<r&&0<=n&&r<=11);var o=new MI("createOrUpgrade",t);n<1&&1<=r&&(e.createObjectStore(pI.store),(a=e).createObjectStore(gI.store,{keyPath:gI.keyPath}),a.createObjectStore(mI.store,{keyPath:mI.keyPath,autoIncrement:!0}).createIndex(mI.userMutationsIndex,mI.userMutationsKeyPath,{unique:!0}),a.createObjectStore(yI.store),yS(e),e.createObjectStore(TI.store));var a,s=LI.resolve();return n<3&&3<=r&&(0!==n&&((a=e).deleteObjectStore(SI.store),a.deleteObjectStore(EI.store),a.deleteObjectStore(kI.store),yS(e)),s=s.next((function(){return e=o.store(kI.store),t=new kI(0,0,Sb.min().toTimestamp(),0),e.put(kI.key,t);var e,t}))),n<4&&4<=r&&(s=(s=0!==n?s.next((function(){return t=e,(n=o).store(mI.store).Nt().next((function(e){t.deleteObjectStore(mI.store),t.createObjectStore(mI.store,{keyPath:mI.keyPath,autoIncrement:!0}).createIndex(mI.userMutationsIndex,mI.userMutationsKeyPath,{unique:!0});var r=n.store(mI.store);return e=e.map((function(e){return r.put(e)})),LI.waitFor(e)}));var t,n})):s).next((function(){e.createObjectStore(NI.store,{keyPath:NI.keyPath})}))),n<5&&5<=r&&(s=s.next((function(){return i.Re(o)}))),n<6&&6<=r&&(s=s.next((function(){return e.createObjectStore(II.store),i.be(o)}))),n<7&&7<=r&&(s=s.next((function(){return i.ve(o)}))),n<8&&8<=r&&(s=s.next((function(){return i.Pe(e,o)}))),n<9&&9<=r&&(s=s.next((function(){var n;(n=e).objectStoreNames.contains("remoteDocumentChanges")&&n.deleteObjectStore("remoteDocumentChanges"),(n=t.objectStore(TI.store)).createIndex(TI.readTimeIndex,TI.readTimeIndexPath,{unique:!1}),n.createIndex(TI.collectionReadTimeIndex,TI.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(s=s.next((function(){return i.Ve(o)}))),n<11&&11<=r?s.next((function(){e.createObjectStore(AI.store,{keyPath:AI.keyPath}),e.createObjectStore(xI.store,{keyPath:xI.keyPath})})):s},mS.prototype.be=function(e){var t=0;return e.store(TI.store).$t((function(e,n){t+=DE(n)})).next((function(){var n=new II(t);return e.store(II.store).put(II.key,n)}))},mS.prototype.Re=function(e){var t=this,n=e.store(gI.store),r=e.store(mI.store);return n.Nt().next((function(n){return LI.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(mI.userMutationsIndex,i).next((function(r){return LI.forEach(r,(function(r){return yb(r.userId===n.userId),r=vE(t.R,r),OE(e,n.userId,r).next((function(){}))}))}))}))}))},mS.prototype.ve=function(e){var t=e.store(SI.store),n=e.store(TI.store);return e.store(kI.store).get(kI.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new Ob(n);n=[0,hI(o)],r.push(t.get(n).next((function(n){return n?LI.resolve():t.put(new SI(0,hI(o),e.highestListenSequenceNumber))})))})).next((function(){return LI.waitFor(r)}))}))},mS.prototype.Pe=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment();return e=e.popLast(),r.put({collectionId:t,parent:hI(e)})}}e.createObjectStore(CI.store,{keyPath:CI.keyPath});var r=t.store(CI.store),i=new EE;return t.store(TI.store).$t({Ft:!0},(function(e,t){return n((e=new Ob(e)).popLast())})).next((function(){return t.store(yI.store).$t({Ft:!0},(function(e,t){e[0];var r=e[1];return e[2],n((r=dI(r)).popLast())}))}))},mS.prototype.Ve=function(e){var t=this,n=e.store(EI.store);return n.$t((function(e,r){return r=gE(r),r=mE(t.R,r),n.put(r)}))},mS);function mS(e){this.R=e}function yS(e){e.createObjectStore(SI.store,{keyPath:SI.keyPath}).createIndex(SI.documentTargetsIndex,SI.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(EI.store,{keyPath:EI.keyPath}).createIndex(EI.queryTargetsIndexName,EI.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(kI.store)}var bS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_S=(wS.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new cb(ub.FAILED_PRECONDITION,bS);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new ob(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},wS.prototype.He=function(e){var t=this;return this.Me=function(n){return $i(t,void 0,void 0,(function(){return Xi(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},wS.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return $i(t,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},wS.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return $i(t,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},wS.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return IS(t).put(new NI(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(HI(t))return db("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return db("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},wS.prototype.Je=function(e){var t=this;return TS(e).get(pI.key).next((function(e){return LI.resolve(t.tn(e))}))},wS.prototype.en=function(e){return IS(e).delete(this.clientId)},wS.prototype.nn=function(){return $i(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Xi(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=tE(e,NI.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return LI.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},wS.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},wS.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},wS.prototype.Ye=function(e){var t=this;return this.Ce?LI.resolve(!0):TS(e).get(pI.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new cb(ub.FAILED_PRECONDITION,bS);return!1}}return!(!t.networkEnabled||!t.inForeground)||IS(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground;if(e=t.networkEnabled===e.networkEnabled,n||r&&e)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&db("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},wS.prototype.shutdown=function(){return $i(this,void 0,void 0,(function(){var e=this;return Xi(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[pI.store,NI.store],(function(t){var n=new ZI(t,ob.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},wS.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},wS.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return IS(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(wS.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),wS.prototype.getMutationQueue=function(e){return LE.Qt(e,this.R,this.Ut,this.referenceDelegate)},wS.prototype.getTargetCache=function(){return this.qe},wS.prototype.getRemoteDocumentCache=function(){return this.Ue},wS.prototype.getIndexManager=function(){return this.Ut},wS.prototype.getBundleCache=function(){return this.Ke},wS.prototype.runTransaction=function(e,t,n){var r,i=this;return db("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",RI,(function(o){return r=new ZI(o,i.Ne?i.Ne.next():ob.o),"readwrite-primary"===t?i.Je(r).next((function(e){return!!e||i.Ye(r)})).next((function(t){if(!t)throw pb("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new cb(ub.FAILED_PRECONDITION,OI);return n(r)})).next((function(e){return i.Ze(r).next((function(){return e}))})):i.dn(r).next((function(){return n(r)}))})).then((function(e){return r.raiseOnCommittedEvent(),e}))},wS.prototype.dn=function(e){var t=this;return TS(e).get(pI.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new cb(ub.FAILED_PRECONDITION,bS)}))},wS.prototype.Ze=function(e){var t=new pI(this.clientId,this.allowTabSynchronization,Date.now());return TS(e).put(pI.key,t)},wS.yt=function(){return FI.yt()},wS.prototype.Xe=function(e){var t=this,n=TS(e);return n.get(pI.key).next((function(e){return t.tn(e)?(db("IndexedDbPersistence","Releasing primary lease."),n.delete(pI.key)):LI.resolve()}))},wS.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(pb("Detected an update time that is in the future: "+e+" > "+n),1))},wS.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},wS.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},wS.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),!mo()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},wS.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},wS.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return db("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return pb("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},wS.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){pb("Failed to set zombie client id.",e)}},wS.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},wS.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},wS);function wS(e,t,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!wS.yt())throw new cb(ub.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZE(this,r),this.Le=t+"main",this.R=new oE(s),this.Be=new FI(this.Le,11,new gS(this.R)),this.qe=new BE(this.referenceDelegate,this.R),this.Ut=new SE,this.Ue=(t=this.R,s=this.Ut,new sS(t,s)),this.Ke=new bE,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&pb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function TS(e){return tE(e,pI.store)}function IS(e){return tE(e,NI.store)}function ES(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}function SS(e,t){this.progress=e,this.wn=t}var kS=(OS.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},OS.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},OS.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},OS.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},OS.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},OS.prototype.getDocumentsMatchingQuery=function(e,t,n){return r=t,Jb.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(e,t.path):ow(t)?this.In(e,t,n):this.An(e,t,n);var r},OS.prototype.Tn=function(e,t){return this.mn(e,new Jb(t)).next((function(e){var t=bT;return e.isFoundDocument()?t.insert(e.key,e):t}))},OS.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=bT;return this.Ut.getCollectionParents(e,i).next((function(a){return LI.forEach(a,(function(a){var s=(s=t,a=a.child(i),new J_(a,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},OS.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=v_.newInvalidDocument(c),r=r.insert(c,l)),Uw(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){fw(t,n)||(r=r.remove(e))})),r}))},OS.prototype.Rn=function(e,t,n){for(var r=TT(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ww&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},OS),CS=(RS.Pn=function(e,t){for(var n=TT(),r=TT(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new RS(e,t.fromCache,n,r)},RS),NS=(PS.prototype.Vn=function(e){this.Sn=e},PS.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())||n.isEqual(Sb.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(o){var a=i.Cn(t,o);return(tw(t)||nw(t))&&i.Nn(t.limitType,a,r,n)?i.Dn(e,t):(fb()<=ca.DEBUG&&db("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hw(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},PS.prototype.Cn=function(e,t){var n=new pT(dw(e));return t.forEach((function(t,r){fw(e,r)&&(n=n.add(r))})),n},PS.prototype.Nn=function(e,t,n,r){return n.size!==t.size||!!(t="F"===e?t.last():t.first())&&(t.hasPendingWrites||0<t.version.compareTo(r))},PS.prototype.Dn=function(e,t){return fb()<=ca.DEBUG&&db("QueryEngine","Using full collection scan to execute query:",hw(t)),this.Sn.getDocumentsMatchingQuery(e,t,Sb.min())},PS),AS=(xS.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},xS);function xS(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new sT(wb),this.Fn=new aS(b_,__),this.$n=Sb.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new kS(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}function PS(){}function RS(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}function OS(e,t,n){this.Ue=e,this._n=t,this.Ut=n}function DS(e,t,n,r){return new AS(e,t,n,r)}function LS(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return r=(n=e)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new kS(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=TT(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function MS(e,t){var n=e;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,o,a,s,u,c,l=t.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return r=n,i=e,a=h,u=(s=(o=t).batch).keys(),c=LI.resolve(),u.forEach((function(e){c=c.next((function(){return a.getEntry(i,e)})).next((function(t){var n=o.docVersions.get(e);yb(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,o),t.isValidDocument()&&a.addEntry(t,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)})).next((function(){return h.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,l)}))}))}function FS(e){var t=e;return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function jS(e,t){var n=e,r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s,u,c,l=i.get(o);l&&(a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)}))),0<(c=t.resumeToken).approximateByteSize()&&(s=l.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber),i=i.insert(o,s),u=l,c=t,yb(0<(l=s).resumeToken.approximateByteSize()),(0===u.resumeToken.approximateByteSize()||3e8<=l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()||0<c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size)&&a.push(n.qe.updateTargetData(e,s))))}));var s,u=gT;return t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(US(e,o,t.documentUpdates,r,void 0).next((function(e){u=e}))),r.isEqual(Sb.min())||(s=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)})),a.push(s)),LI.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,u)})).next((function(){return u}))})).then((function(e){return n.kn=i,e}))}function US(e,t,n,r,i){var o=TT();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=gT;return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Sb.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||0<a.version.compareTo(s.version)||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):db("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function qS(e,t){var n=e;return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,LI.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new iE(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||0<e.snapshotVersion.compareTo(r.snapshotVersion))&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function VS(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Xi(this,(function(a){switch(a.label){case 0:i=(r=e).kn.get(t),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!HI(o=a.sent()))throw o;return db("LocalStore","Failed to update sequence numbers for target "+t+": "+o),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}}))}))}function BS(e,t,n){var r=e,i=Sb.min(),o=TT();return r.persistence.runTransaction("Execute query","readonly",(function(e){return a=r,s=e,u=sw(t),(void 0!==(a=(c=a).Fn.get(u))?LI.resolve(c.kn.get(a)):c.qe.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:Sb.min(),n?o:TT())})).next((function(e){return{documents:e,Bn:o}}));var a,s,u,c}))}function KS(e,t){var n=e,r=n.qe;return(e=n.kn.get(t))?Promise.resolve(e.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function zS(e){var t=e;return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return n=t.On,r=e,e=t.$n,i=n,o=gT,a=hE(e),e=pS(r),r=IDBKeyRange.lowerBound(a,!0),e.$t({index:TI.readTimeIndex,range:r},(function(e,t){var n=cE(i.R,t);o=o.insert(n.key,n),a=t.readTime})).next((function(){return{wn:o,readTime:fE(a)}}));var n,r,i,o,a})).then((function(e){var n=e.wn;return e=e.readTime,t.$n=e,n}))}function WS(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){return[2,(t=e).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return e=pS(e),t=Sb.min(),e.$t({index:TI.readTimeIndex,reverse:!0},(function(e,n,r){n.readTime&&(t=fE(n.readTime)),r.done()})).next((function(){return t}));var t})).then((function(e){t.$n=e}))]}))}))}var HS,GS,QS=(vk.prototype.getBundleMetadata=function(e,t){return LI.resolve(this.Qn.get(t))},vk.prototype.saveBundleMetadata=function(e,t){return this.Qn.set(t.id,{id:t.id,version:t.version,createTime:BT(t.createTime)}),LI.resolve()},vk.prototype.getNamedQuery=function(e,t){return LI.resolve(this.jn.get(t))},vk.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:t.name,query:yE(t.bundledQuery),readTime:BT(t.readTime)}),LI.resolve()},vk),YS=(pk.prototype.isEmpty=function(){return this.Wn.isEmpty()},pk.prototype.addReference=function(e,t){t=new $S(e,t),this.Wn=this.Wn.add(t),this.zn=this.zn.add(t)},pk.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},pk.prototype.removeReference=function(e,t){this.Yn(new $S(e,t))},pk.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},pk.prototype.Zn=function(e){var t=this,n=new Jb(new Ob([])),r=new $S(n,e),i=(e=new $S(n,e+1),[]);return this.zn.forEachInRange([r,e],(function(e){t.Yn(e),i.push(e.key)})),i},pk.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},pk.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},pk.prototype.es=function(e){var t=new Jb(new Ob([])),n=new $S(t,e),r=(e=new $S(t,e+1),TT());return this.zn.forEachInRange([n,e],(function(e){r=r.add(e.key)})),r},pk.prototype.containsKey=function(e){var t=new $S(e,0);return null!==(t=this.Wn.firstAfterOrEqual(t))&&e.isEqual(t.key)},pk),$S=(dk.Gn=function(e,t){return Jb.comparator(e.key,t.key)||wb(e.ns,t.ns)},dk.Hn=function(e,t){return wb(e.ns,t.ns)||Jb.comparator(e.key,t.key)},dk),XS=(fk.prototype.checkEmpty=function(e){return LI.resolve(0===this._n.length)},fk.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1],n=new nE(i,t,n,r),this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new $S(s.key,i)),this.Ut.addToCollectionParentIndex(e,s.key.path.popLast())}return LI.resolve(n)},fk.prototype.lookupMutationBatch=function(e,t){return LI.resolve(this.os(t))},fk.prototype.getNextMutationBatchAfterBatchId=function(e,t){return t=(t=this.cs(t+1))<0?0:t,LI.resolve(this._n.length>t?this._n[t]:null)},fk.prototype.getHighestUnacknowledgedBatchId=function(){return LI.resolve(0===this._n.length?-1:this.ss-1)},fk.prototype.getAllMutationBatches=function(e){return LI.resolve(this._n.slice())},fk.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new $S(t,0),i=(t=new $S(t,Number.POSITIVE_INFINITY),[]);return this.rs.forEachInRange([r,t],(function(e){e=n.os(e.ns),i.push(e)})),LI.resolve(i)},fk.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new pT(wb);return t.forEach((function(e){var t=new $S(e,0);e=new $S(e,Number.POSITIVE_INFINITY),n.rs.forEachInRange([t,e],(function(e){r=r.add(e.ns)}))})),LI.resolve(this.us(r))},fk.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1;t=n,Jb.isDocumentKey(t)||(t=t.child("")),t=new $S(new Jb(t),0);var i=new pT(wb);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.ns)),!0)}),t),LI.resolve(this.us(i))},fk.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){null!==(e=t.os(e))&&n.push(e)})),n},fk.prototype.removeMutationBatch=function(e,t){var n=this;yb(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return LI.forEach(t.mutations,(function(i){var o=new $S(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},fk.prototype.Gt=function(e){},fk.prototype.containsKey=function(e,t){var n=new $S(t,0);return n=this.rs.firstAfterOrEqual(n),LI.resolve(t.isEqual(n&&n.key))},fk.prototype.performConsistencyCheck=function(e){return this._n.length,LI.resolve()},fk.prototype.hs=function(e,t){return this.cs(e)},fk.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},fk.prototype.os=function(e){return(e=this.cs(e))<0||e>=this._n.length?null:this._n[e]},fk),JS=(hk.prototype.addEntry=function(e,t,n){var r=t.key,i=(o=this.docs.get(r))?o.size:0,o=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-i,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},hk.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},hk.prototype.getEntry=function(e,t){var n=this.docs.get(t);return LI.resolve(n?n.document.clone():v_.newInvalidDocument(t))},hk.prototype.getEntries=function(e,t){var n=this,r=gT;return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():v_.newInvalidDocument(e))})),LI.resolve(r)},hk.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=gT,i=new Jb(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=(s=o.getNext()).key,s=(u=s.value).document,u=u.readTime;if(!t.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||fw(t,s)&&(r=r.insert(s.key,s.clone()))}return LI.resolve(r)},hk.prototype.fs=function(e,t){return LI.forEach(this.docs,(function(e){return t(e)}))},hk.prototype.newChangeBuffer=function(e){return new ZS(this)},hk.prototype.getSize=function(e){return LI.resolve(this.size)},hk),ZS=(Qi(lk,GS=G),lk.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),LI.waitFor(n)},lk.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},lk.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},lk),ek=(ck.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),LI.resolve()},ck.prototype.getLastRemoteSnapshotVersion=function(e){return LI.resolve(this.lastRemoteSnapshotVersion)},ck.prototype.getHighestSequenceNumber=function(e){return LI.resolve(this.ws)},ck.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),LI.resolve(this.highestTargetId)},ck.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),LI.resolve()},ck.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new VE(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},ck.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,LI.resolve()},ck.prototype.updateTargetData=function(e,t){return this.te(t),LI.resolve()},ck.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),--this.targetCount,LI.resolve()},ck.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),LI.waitFor(o).next((function(){return i}))},ck.prototype.getTargetCount=function(e){return LI.resolve(this.targetCount)},ck.prototype.getTargetData=function(e,t){return t=this.ds.get(t)||null,LI.resolve(t)},ck.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),LI.resolve()},ck.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),LI.waitFor(i)},ck.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),LI.resolve()},ck.prototype.getMatchingKeysForTargetId=function(e,t){return t=this._s.es(t),LI.resolve(t)},ck.prototype.containsKey=function(e,t){return LI.resolve(this._s.containsKey(t))},ck),tk=(uk.prototype.start=function(){return Promise.resolve()},uk.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(uk.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),uk.prototype.setDatabaseDeletedListener=function(){},uk.prototype.setNetworkEnabled=function(){},uk.prototype.getIndexManager=function(){return this.Ut},uk.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new XS(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},uk.prototype.getTargetCache=function(){return this.qe},uk.prototype.getRemoteDocumentCache=function(){return this.Ue},uk.prototype.getBundleCache=function(){return this.Ke},uk.prototype.runTransaction=function(e,t,n){var r=this;db("MemoryPersistence","Starting transaction:",e);var i=new nk(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},uk.prototype.Is=function(e,t){return LI.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},uk),nk=(Qi(sk,HS=H),sk),rk=(ak.bs=function(e){return new ak(e)},Object.defineProperty(ak.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw mb()},enumerable:!1,configurable:!0}),ak.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),LI.resolve()},ak.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),LI.resolve()},ak.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),LI.resolve()},ak.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},ak.prototype.Es=function(){this.Rs=new Set},ak.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return LI.forEach(this.vs,(function(r){var i=Jb.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},ak.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},ak.prototype.ps=function(e){return 0},ak.prototype.Ps=function(e,t){var n=this;return LI.or([function(){return LI.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},ak),ik=(ok.prototype.isAuthenticated=function(){return null!=this.uid},ok.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},ok.prototype.isEqual=function(e){return e.uid===this.uid},ok);function ok(e){this.uid=e}function ak(e){this.persistence=e,this.As=new YS,this.Rs=null}function sk(e){var t=this;return(t=HS.call(this)||this).currentSequenceNumber=e,t}function uk(e,t){var n=this;this.gs={},this.Ne=new ob(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new ek(this),this.Ut=new IE,this.Ue=(e=this.Ut,new JS(e,(function(e){return n.referenceDelegate.ps(e)}))),this.R=new oE(t),this.Ke=new QS(this.R)}function ck(e){this.persistence=e,this.ds=new aS(b_,__),this.lastRemoteSnapshotVersion=Sb.min(),this.highestTargetId=0,this.ws=0,this._s=new YS,this.targetCount=0,this.ys=VE.Jt()}function lk(e){var t=this;return(t=GS.call(this)||this).Ie=e,t}function hk(e,t){this.Ut=e,this.ls=t,this.docs=new sT(Jb.comparator),this.size=0}function fk(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new pT($S.Gn)}function dk(e,t){this.key=e,this.ns=t}function pk(){this.Wn=new pT($S.Gn),this.zn=new pT($S.Hn)}function vk(e){this.R=e,this.Qn=new Map,this.jn=new Map}function gk(e,t){return"firestore_clients_"+e+"_"+t}function mk(e,t,n){return n="firestore_mutations_"+e+"_"+n,t.isAuthenticated()&&(n+="_"+t.uid),n}function yk(e,t){return"firestore_targets_"+e+"_"+t}ik.UNAUTHENTICATED=new ik(null),ik.GOOGLE_CREDENTIALS=new ik("google-credentials-uid"),ik.FIRST_PARTY=new ik("first-party-uid"),ik.MOCK_USER=new ik("mock-user");var bk,_k=(Kk.Vs=function(e,t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new cb(i.error.code,i.error.message)),o?new Kk(e,t,i.state,r):(pb("SharedClientState","Failed to parse mutation state for ID '"+t+"': "+n),null)},Kk.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Kk),wk=(Bk.Vs=function(e,t){var n,r=JSON.parse(t),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new cb(r.error.code,r.error.message)),i?new Bk(e,r.state,n):(pb("SharedClientState","Failed to parse target state for ID '"+e+"': "+t),null)},Bk.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Bk),Tk=(Vk.Vs=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=IT,o=0;r&&o<n.activeTargetIds.length;++o)r=Xb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Vk(e,i):(pb("SharedClientState","Failed to parse client data for instance '"+e+"': "+t),null)},Vk),Ik=(qk.Vs=function(e){var t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qk(t.clientId,t.onlineState):(pb("SharedClientState","Failed to parse online state: "+e),null)},qk),Ek=(Uk.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},Uk.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},Uk.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},Uk),Sk=(jk.yt=function(e){return!(!e||!e.localStorage)},jk.prototype.start=function(){return $i(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l=this;return Xi(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(o=h.sent(),e=0,t=o;e<t.length;e++)(n=t[e])!==this.Ns&&(r=this.getItem(gk(this.persistenceKey,n)))&&(i=Tk.Vs(n,r))&&(this.Fs=this.Fs.insert(i.clientId,i));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),s=0,u=this.$s;s<u.length;s++)c=u[s],this.ks(c);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},jk.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},jk.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},jk.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},jk.prototype.addPendingMutation=function(e){this.zs(e,"pending")},jk.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},jk.prototype.addLocalQueryTarget=function(e){var t,n="not-current";return this.isActiveQueryTarget(e)&&(!(t=this.storage.getItem(yk(this.persistenceKey,e)))||(t=wk.Vs(e,t))&&(n=t.state)),this.Js.Ds(e),this.Qs(),n},jk.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},jk.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},jk.prototype.clearQueryState=function(e){this.removeItem(yk(this.persistenceKey,e))},jk.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},jk.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},jk.prototype.setOnlineState=function(e){this.Xs(e)},jk.prototype.notifyBundleLoaded=function(){this.Zs()},jk.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},jk.prototype.getItem=function(e){var t=this.storage.getItem(e);return db("SharedClientState","READ",e,t),t},jk.prototype.setItem=function(e,t){db("SharedClientState","SET",e,t),this.storage.setItem(e,t)},jk.prototype.removeItem=function(e){db("SharedClientState","REMOVE",e),this.storage.removeItem(e)},jk.prototype.ks=function(e){var t=this,n=e;n.storageArea===this.storage&&(db("SharedClientState","EVENT",n.key,n.newValue),n.key!==this.Os?this.Se.enqueueRetryable((function(){return $i(t,void 0,void 0,(function(){var e,t,r,i;return Xi(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(t=this.si(n.key,n.newValue)))return[2,this.ii(t)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(r=this.ri(n.key,n.newValue)))return[2,this.oi(r)]}else if(n.key===this.Us){if(null!==n.newValue&&(i=this.js(n.newValue)))return[2,this.Ws(i)]}else if(n.key===this.Ms)(i=function(e){var t=ob.o;if(null!=e)try{var n=JSON.parse(e);yb("number"==typeof n),t=n}catch(e){pb("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==ob.o&&this.sequenceNumberHandler(i);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))})):pb("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(jk.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),jk.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},jk.prototype.zs=function(e,t,n){n=new _k(this.currentUser,e,t,n),e=mk(this.persistenceKey,this.currentUser,e),this.setItem(e,n.Ss())},jk.prototype.Hs=function(e){e=mk(this.persistenceKey,this.currentUser,e),this.removeItem(e)},jk.prototype.Xs=function(e){e={clientId:this.Ns,onlineState:e},this.storage.setItem(this.Us,JSON.stringify(e))},jk.prototype.Ys=function(e,t,n){var r=yk(this.persistenceKey,e);n=new wk(e,t,n),this.setItem(r,n.Ss())},jk.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},jk.prototype.ti=function(e){return(e=this.Ls.exec(e))?e[1]:null},jk.prototype.ni=function(e,t){return e=this.ti(e),Tk.Vs(e,t)},jk.prototype.si=function(e,t){var n=this.Bs.exec(e);return e=Number(n[1]),n=void 0!==n[2]?n[2]:null,_k.Vs(new ik(n),e,t)},jk.prototype.ri=function(e,t){return e=this.qs.exec(e),e=Number(e[1]),wk.Vs(e,t)},jk.prototype.js=function(e){return Ik.Vs(e)},jk.prototype.ii=function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(db("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},jk.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},jk.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},jk.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},jk.prototype.Gs=function(e){var t=IT;return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},jk),kk=(Fk.prototype.addPendingMutation=function(e){},Fk.prototype.updateMutationState=function(e,t,n){},Fk.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},Fk.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},Fk.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},Fk.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},Fk.prototype.clearQueryState=function(e){delete this.fi[e]},Fk.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},Fk.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},Fk.prototype.start=function(){return this.li=new Ek,Promise.resolve()},Fk.prototype.handleUserChange=function(e,t,n){},Fk.prototype.setOnlineState=function(e){},Fk.prototype.shutdown=function(){},Fk.prototype.writeSequenceNumber=function(e){},Fk.prototype.notifyBundleLoaded=function(){},Fk),Ck=(Mk.prototype.di=function(e){},Mk.prototype.shutdown=function(){},Mk),Nk=(Lk.prototype.di=function(e){this.gi.push(e)},Lk.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},Lk.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},Lk.prototype._i=function(){db("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},Lk.prototype.yi=function(){db("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},Lk.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Lk),Ak={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xk=(Dk.prototype.Ii=function(e){this.Ai=e},Dk.prototype.Ri=function(e){this.bi=e},Dk.prototype.onMessage=function(e){this.vi=e},Dk.prototype.close=function(){this.Ti()},Dk.prototype.send=function(e){this.Ei(e)},Dk.prototype.Pi=function(){this.Ai()},Dk.prototype.Vi=function(e){this.bi(e)},Dk.prototype.Si=function(e){this.vi(e)},Dk),Pk=(Ok.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);return db("RestConnection","Sending: ",i,n),t={},this.ki(t,r),this.Fi(e,i,t,n).then((function(e){return db("RestConnection","Received: ",e),e}),(function(t){throw vb("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},Ok.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},Ok.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},Ok.prototype.xi=function(e,t){return this.Di+"/v1/"+t+":"+Ak[e]},Qi(Rk,bk=Ok),Rk.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var a=new ib;a.listenOnce(Jy.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Xy.NO_ERROR:var t=a.getResponseJson();db("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Xy.TIMEOUT:db("Connection",'RPC "'+e+'" timed out'),o(new cb(ub.DEADLINE_EXCEEDED,"Request time out"));break;case Xy.HTTP_ERROR:var n,r,s=a.getStatus();db("Connection",'RPC "'+e+'" failed with status:',s,"response text:",a.getResponseText()),0<s?(n=a.getResponseJson().error)&&n.status&&n.message?(u=n.status.toLowerCase().replace(/_/g,"-"),r=0<=Object.values(ub).indexOf(u)?u:ub.UNKNOWN,o(new cb(r,n.message))):o(new cb(ub.UNKNOWN,"Server responded with status "+a.getStatus())):o(new cb(ub.UNAVAILABLE,"Connection failed."));break;default:mb()}}finally{db("Connection",'RPC "'+e+'" completed.')}var u}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},Rk.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new Wy,i=$y();e={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},this.useFetchStreams&&(e.xmlHttpFactory=new nb({})),this.ki(e.initMessageHeaders,t),go()||bo()||0<=vo().indexOf("Electron/")||0<=(t=vo()).indexOf("MSIE ")||0<=t.indexOf("Trident/")||0<=vo().indexOf("MSAppHost/")||yo()||(e.httpHeadersOverwriteParam="$httpHeaders"),db("Connection","Creating WebChannel: "+(n=n.join("")),e);var o=r.createWebChannel(n,e),a=!1,s=!1,u=new xk({Ei:function(e){s?db("Connection","Not sending because WebChannel is closed:",e):(a||(db("Connection","Opening WebChannel transport."),o.open(),a=!0),db("Connection","WebChannel sending:",e),o.send(e))},Ti:function(){return o.close()}});return e=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e(o,rb.EventType.OPEN,(function(){s||db("Connection","WebChannel transport opened.")})),e(o,rb.EventType.CLOSE,(function(){s||(s=!0,db("Connection","WebChannel transport closed"),u.Vi())})),e(o,rb.EventType.ERROR,(function(e){s||(s=!0,vb("Connection","WebChannel transport errored:",e),u.Vi(new cb(ub.UNAVAILABLE,"The operation could not be completed")))})),e(o,rb.EventType.MESSAGE,(function(e){var t,n,r,i;s||(yb(!!(t=e.data[0])),(n=t.error||(null===(i=t[0])||void 0===i?void 0:i.error))?(db("Connection","WebChannel received error:",n),r=n.status,e=function(){var e=Jw[r];if(void 0!==e)return aT(e)}(),i=n.message,void 0===e&&(e=ub.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,u.Vi(new cb(e,i)),o.close()):(db("Connection","WebChannel received:",t),u.Si(t)))})),e(i,Zy.STAT_EVENT,(function(e){e.stat===eb?db("Connection","Detected buffering proxy"):e.stat===tb&&db("Connection","Detected no buffering proxy")})),setTimeout((function(){u.Pi()}),0),u},Rk);function Rk(e){var t=this;return(t=bk.call(this,e)||this).forceLongPolling=e.forceLongPolling,t.autoDetectLongPolling=e.autoDetectLongPolling,t.useFetchStreams=e.useFetchStreams,t}function Ok(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function Dk(e){this.Ei=e.Ei,this.Ti=e.Ti}function Lk(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}function Mk(){}function Fk(){this.li=new Ek,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function jk(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new sT(wb),this.started=!1,this.$s=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.Os=gk(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new Ek),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function Uk(){this.activeTargetIds=IT}function qk(e,t){this.clientId=e,this.onlineState=t}function Vk(e,t){this.clientId=e,this.activeTargetIds=t}function Bk(e,t,n){this.targetId=e,this.state=t,this.error=n}function Kk(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}function zk(){return"undefined"!=typeof window?window:null}function Wk(){return"undefined"!=typeof document?document:null}function Hk(e){return new UT(e,!0)}function Gk(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return $i(o,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return gC(this)?(db("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return(t=e).Or.add(4),[4,cC(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,uC(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new tC(n,r)}var Qk,Yk,$k,Xk=(sC.prototype.reset=function(){this.qi=0},sC.prototype.Qi=function(){this.qi=this.Bi},sC.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);0<i&&db("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},sC.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},sC.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},sC.prototype.Wi=function(){return(Math.random()-.5)*this.qi},sC),Jk=(aC.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},aC.prototype.er=function(){return 2===this.state},aC.prototype.start=function(){3!==this.state?this.auth():this.nr()},aC.prototype.stop=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},aC.prototype.sr=function(){this.state=0,this.Zi.reset()},aC.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},aC.prototype.cr=function(e){this.ur(),this.stream.send(e)},aC.prototype.rr=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},aC.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},aC.prototype.close=function(e,t){return $i(this,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===ub.RESOURCE_EXHAUSTED?(pb(t.toString()),pb("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===ub.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},aC.prototype.ar=function(){},aC.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new cb(ub.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},aC.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},aC.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return $i(e,void 0,void 0,(function(){return Xi(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},aC.prototype.dr=function(e){return db("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},aC.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(db("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Qi(oC,$k=G=aC),oC.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},oC.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){if("targetChange"in t){t.targetChange;var n="NO_CHANGE"===(o=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:mb(),r=t.targetChange.targetIds||[],i=(a=t.targetChange.resumeToken,e.I?(yb(void 0===a||"string"==typeof a),Fb.fromBase64String(a||"")):(yb(void 0===a||a instanceof Uint8Array),Fb.fromUint8Array(a||new Uint8Array))),o=(s=t.targetChange.cause)&&(u=void 0===(c=s).code?ub.UNKNOWN:aT(c.code),new cb(u,c.message||"")),a=new NT(n,r,i,o||null)}else if("documentChange"in t){t.documentChange,(n=t.documentChange).document,n.document.name,n.document.updateTime,r=HT(e,n.document.name),i=BT(n.document.updateTime);var s=new d_({mapValue:{fields:n.document.fields}}),u=(o=v_.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[];a=new kT(u,c,o.key,o)}else if("documentDelete"in t)t.documentDelete,(n=t.documentDelete).document,r=HT(e,n.document),i=n.readTime?BT(n.readTime):Sb.min(),s=v_.newNoDocument(r,i),o=n.removedTargetIds||[],a=new kT([],o,s.key,s);else if("documentRemove"in t)t.documentRemove,(n=t.documentRemove).document,r=HT(e,n.document),i=n.removedTargetIds||[],a=new kT([],i,r,null);else{if(!("filter"in t))return mb();t.filter,(t=t.filter).targetId,r=new Xw(n=t.count||0),i=t.targetId,a=new CT(i,r)}return a}(this.R,e);return e=function(e){return"targetChange"in e?(e=e.targetChange).targetIds&&e.targetIds.length||!e.readTime?Sb.min():BT(e.readTime):Sb.min()}(e),this.listener._r(t,e)},oC.prototype.mr=function(e){var t,n,r,i,o={};o.database=YT(this.R),o.addTarget=(t=this.R,(r=w_(r=(n=e).target)?{documents:tI(t,r)}:{query:nI(t,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=VT(t,n.resumeToken):0<n.snapshotVersion.compareTo(Sb.min())&&(r.readTime=qT(t,n.snapshotVersion.toTimestamp())),r),this.R,i=e,(e=null==(e=function(){switch(i.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mb()}}())?null:{"goog-listen-tags":e})&&(o.labels=e),this.cr(o)},oC.prototype.yr=function(e){var t={};t.database=YT(this.R),t.removeTarget=e,this.cr(t)},oC),Zk=(Qi(iC,Yk=G),Object.defineProperty(iC.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),iC.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,Yk.prototype.start.call(this)},iC.prototype.ar=function(){this.gr&&this.Er([])},iC.prototype.wr=function(e){return this.Hi.Oi("Write",e)},iC.prototype.onMessage=function(e){if(yb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=(n=e.writeResults,r=e.commitTime,n&&0<n.length?(yb(void 0!==r),n.map((function(e){return n=r,(e=(t=e).updateTime?BT(t.updateTime):BT(n)).isEqual(Sb.min())&&(e=BT(n)),new Dw(e,t.transformResults||[]);var t,n}))):[]),n=BT(e.commitTime);return this.listener.Tr(n,t)}var r;return yb(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},iC.prototype.Ar=function(){var e={};e.database=YT(this.R),this.cr(e)},iC.prototype.Er=function(e){var t=this;e={streamToken:this.lastStreamToken,writes:e.map((function(e){return ZT(t.R,e)}))},this.cr(e)},iC),eC=(Qi(rC,Qk=function(){}),rC.prototype.br=function(){if(this.Rr)throw new cb(ub.FAILED_PRECONDITION,"The client has already been terminated.")},rC.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ub.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new cb(ub.UNKNOWN,e.toString())}))},rC.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ub.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new cb(ub.UNKNOWN,e.toString())}))},rC.prototype.terminate=function(){this.Rr=!0},rC),tC=(nC.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},nC.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},nC.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},nC.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},nC.prototype.Cr=function(e){e="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vr?(pb(e),this.Vr=!1):db("OnlineStateTracker",e)},nC.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},nC);function nC(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function rC(e,t,n){var r=this;return(r=Qk.call(this)||this).credentials=e,r.Hi=t,r.R=n,r.Rr=!1,r}function iC(e,t,n,r,i){var o=this;return(o=Yk.call(this,e,"write_stream_connection_backoff","write_stream_idle",t,n,i)||this).R=r,o.gr=!1,o}function oC(e,t,n,r,i){var o=this;return(o=$k.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i)||this).R=r,o}function aC(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Xk(e,t)}function sC(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}function uC(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:if(!gC(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function cC(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function lC(e,t){e.$r.has(t.targetId)||(e.$r.set(t.targetId,t),vC(e)?pC(e):SC(e).er()&&fC(e,t))}function hC(e,t){var n=e;e=SC(n),n.$r.delete(t),e.er()&&dC(n,t),0===n.$r.size&&(e.er()?e.ir():gC(n)&&n.Br.set("Unknown"))}function fC(e,t){e.qr.U(t.targetId),SC(e).mr(t)}function dC(e,t){e.qr.U(t),SC(e).yr(t)}function pC(e){e.qr=new xT({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),SC(e).start(),e.Br.Sr()}function vC(e){return gC(e)&&!SC(e).tr()&&0<e.$r.size}function gC(e){return 0===e.Or.size}function mC(e){e.qr=void 0}function yC(e,t,n){return $i(this,void 0,void 0,(function(){var r,i;return Xi(this,(function(o){switch(o.label){case 0:if(e.Br.set("Online"),!(t instanceof NT&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),db("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,bC(e,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof kT?e.qr.X(t):t instanceof CT?e.qr.rt(t):e.qr.et(t),n.isEqual(Sb.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,FS(e.localStore)];case 8:return i=o.sent(),0<=n.compareTo(i)?[4,(s=n,(u=(a=e).qr.ut(s)).targetChanges.forEach((function(e,t){var n;0<e.resumeToken.approximateByteSize()&&(n=a.$r.get(t))&&a.$r.set(t,n.withResumeToken(e.resumeToken,s))})),u.targetMismatches.forEach((function(e){var t=a.$r.get(e);t&&(a.$r.set(e,t.withResumeToken(Fb.EMPTY_BYTE_STRING,t.snapshotVersion)),dC(a,e),t=new iE(t.target,e,1,t.sequenceNumber),fC(a,t))})),a.remoteSyncer.applyRemoteEvent(u))]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return db("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,bC(e,i)];case 12:return o.sent(),[3,13];case 13:return[2]}var a,s,u}))}))}function bC(e,t,n){return $i(this,void 0,void 0,(function(){var r=this;return Xi(this,(function(i){switch(i.label){case 0:if(!HI(t))throw t;return e.Or.add(1),[4,cC(e)];case 1:return i.sent(),e.Br.set("Offline"),n=n||function(){return FS(e.localStore)},e.asyncQueue.enqueueRetryable((function(){return $i(r,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return db("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,uC(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function _C(e,t){return t().catch((function(n){return bC(e,n,t)}))}function wC(e){return $i(this,void 0,void 0,(function(){var t,n,r,i;return Xi(this,(function(o){switch(o.label){case 0:n=kC(t=e),r=0<t.Fr.length?t.Fr[t.Fr.length-1].batchId:-1,o.label=1;case 1:if(!(gC(t)&&t.Fr.length<10))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(a=t.localStore,s=r,(u=a).persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===s&&(s=-1),u._n.getNextMutationBatchAfterBatchId(e,s)})))];case 3:return null===(i=o.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.Fr.push(t),(e=kC(e)).er()&&e.pr&&e.Er(t.mutations)}(t,i),[3,6]);case 4:return i=o.sent(),[4,bC(t,i)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return TC(t)&&IC(t),[2]}var a,s,u}))}))}function TC(e){return gC(e)&&!kC(e).tr()&&0<e.Fr.length}function IC(e){kC(e).start()}function EC(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return n=e,t?(n.Or.delete(2),[4,uC(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,cC(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function SC(e){var t,n,r,i=this;return e.Ur||(e.Ur=(t=e.datastore,n=e.asyncQueue,r={Ii:function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){return e.$r.forEach((function(t,n){fC(e,t)})),[2]}))}))}.bind(null,e),Ri:function(e,t){return $i(this,void 0,void 0,(function(){return Xi(this,(function(n){return mC(e),vC(e)?(e.Br.Nr(t),pC(e)):e.Br.set("Unknown"),[2]}))}))}.bind(null,e),_r:yC.bind(null,e)},t.br(),new Jk(n,t.Hi,t.credentials,t.R,r)),e.Mr.push((function(t){return $i(i,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return t?(e.Ur.sr(),vC(e)?pC(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:n.sent(),mC(e),n.label=3;case 3:return[2]}}))}))}))),e.Ur}function kC(e){var t,n,r,i=this;return e.Kr||(e.Kr=(t=e.datastore,n=e.asyncQueue,r={Ii:function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){return kC(e).Ar(),[2]}))}))}.bind(null,e),Ri:function(e,t){return $i(this,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return t&&kC(e).pr?[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return oT(r=t.code)&&r!==ub.ABORTED?(n=e.Fr.shift(),kC(e).sr(),[4,_C(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,wC(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return TC(e)&&IC(e),[2]}}))}))}.bind(null,e),Ir:function(e){return $i(this,void 0,void 0,(function(){var t,n,r,i;return Xi(this,(function(o){for(t=kC(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}.bind(null,e),Tr:function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i;return Xi(this,(function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=rE.from(r,t,n),[4,_C(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,wC(e)];case 2:return o.sent(),[2]}}))}))}.bind(null,e)},t.br(),new Zk(n,t.Hi,t.credentials,t.R,r)),e.Mr.push((function(t){return $i(i,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return t?(e.Kr.sr(),[4,wC(e)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:n.sent(),0<e.Fr.length&&(db("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),n.label=4;case 4:return[2]}}))}))}))),e.Kr}var CC=(NC.createAndSchedule=function(e,t,n,r,i){return(i=new NC(e,t,Date.now()+n,r,i)).start(n),i},NC.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},NC.prototype.skipDelay=function(){return this.handleDelayElapsed()},NC.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cb(ub.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},NC.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},NC.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},NC);function NC(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new DI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}function AC(e,t){if(pb("AsyncQueue",t+": "+e),HI(e))return new cb(ub.UNAVAILABLE,t+": "+e);throw e}function xC(){this.queries=new aS(lw,cw),this.onlineState="Unknown",this.Gr=new Set}var PC=(FC.emptySet=function(e){return new FC(e.comparator)},FC.prototype.has=function(e){return null!=this.keyedMap.get(e)},FC.prototype.get=function(e){return this.keyedMap.get(e)},FC.prototype.first=function(){return this.sortedSet.minKey()},FC.prototype.last=function(){return this.sortedSet.maxKey()},FC.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},FC.prototype.indexOf=function(e){return(e=this.keyedMap.get(e))?this.sortedSet.indexOf(e):-1},Object.defineProperty(FC.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),FC.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},FC.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},FC.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},FC.prototype.isEqual=function(e){if(!(e instanceof FC))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},FC.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},FC.prototype.copy=function(e,t){var n=new FC;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},FC),RC=(MC.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);!n||0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):mb()},MC.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},MC),OC=(LC.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:0,doc:e})})),new LC(e,t,PC.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(LC.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),LC.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},LC),DC=function(){this.Wr=void 0,this.listeners=[]};function LC(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function MC(){this.Qr=new sT(Jb.comparator)}function FC(e){this.comparator=e?function(t,n){return e(t,n)||Jb.comparator(t.key,n.key)}:function(e,t){return Jb.comparator(e.key,t.key)},this.keyedMap=bT,this.sortedSet=new sT(this.comparator)}function jC(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:if(n=e,r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new DC),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return a=AC(a=s.sent(),"Initialization of query '"+hw(t.query)+"' failed"),[2,void t.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&qC(n),[2]}}))}))}function UC(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Xi(this,(function(s){return n=e,r=t.query,i=!1,(o=n.queries.get(r))&&0<=(a=o.listeners.indexOf(t))&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function qC(e){e.Gr.forEach((function(e){e.next()}))}var VC=(QC.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new OC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},QC.prototype.onError=function(e){this.Jr.error(e)},QC.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},QC.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},QC.prototype.Zr=function(e){if(0<e.docChanges.length)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},QC.prototype.no=function(e){e=OC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},QC),BC=(GC.prototype.io=function(){return"metadata"in this.payload},GC),KC=(HC.prototype.qn=function(e){return HT(this.R,e)},HC.prototype.Un=function(e){return e.metadata.exists?JT(this.R,e.document,!1):v_.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},HC.prototype.Kn=BT,HC),zC=(WC.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},WC.prototype.co=function(e){for(var t=new Map,n=new KC(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||TT()).add(a);t.set(c,l)}}return t},WC.prototype.complete=function(){return $i(this,void 0,void 0,(function(){var e,t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return Xi(this,(function(p){switch(p.label){case 0:for(i=e,o=TT(),a=gT,s=_T,u=0,c=n;u<c.length;u++)l=c[u],h=t.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,t.Un(l)),s=s.insert(h,t.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,qS(i,sw(ew(Ob.fromString("__bundle__/docs/"+r))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return US(e,f,a,Sb.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next((function(){return i.qe.addMatchingKeys(e,o,d.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}(this.localStore,new KC(this.R),this.documents,this.ro.id)];case 1:e=i.sent(),t=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(r=r[n],[4,function(e,t,n){return void 0===n&&(n=TT()),$i(this,void 0,void 0,(function(){var r,i;return Xi(this,(function(o){switch(o.label){case 0:return[4,qS(e,sw(yE(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=e).persistence.runTransaction("Save named query","readwrite",(function(e){var o=BT(t.readTime);return 0<=r.snapshotVersion.compareTo(o)?i.Ke.saveNamedQuery(e,t):(o=r.withResumeToken(Fb.EMPTY_BYTE_STRING,o),i.kn=i.kn.insert(o.targetId,o),i.qe.updateTargetData(e,o).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)})))}))]}}))}))}(this.localStore,r,t.get(r.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new SS(Object.assign({},this.progress),e))]}}))}))},WC);function WC(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=YC(e)}function HC(e){this.R=e}function GC(e,t){this.payload=e,this.byteLength=t}function QC(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function YC(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var $C=function(e){this.key=e},XC=function(e){this.key=e},JC=(Object.defineProperty(rN.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),rN.prototype._o=function(e,t){var n=this,r=t?t.mo:new RC,i=(t||this).fo,o=(t||this).mutatedKeys,a=i,s=!1,u=tw(this.query)&&i.size===this.query.limit?i.last():null,c=nw(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=fw(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations);t=!1,l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),t=!0):n.yo(l,h)||(r.track({type:2,doc:h}),t=!0,(u&&0<n.lo(h,u)||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),t=!0):l&&!h&&(r.track({type:1,doc:l}),t=!0,(u||c)&&(s=!0)),t&&(o=h?(a=a.add(h),d?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),tw(this.query)||nw(this.query))for(;a.size>this.query.limit;){var l=tw(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},rN.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},rN.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return i=e.type,o=t.type,n(i)-n(o)||r.lo(e.doc,t.doc);function n(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mb()}}var i,o})),this.po(n);var a=t?this.Eo():[];return t=(n=0===this.ho.size&&this.current?1:0)!==this.ao,this.ao=n,0!==o.length||t?{snapshot:new OC(this.query,e.fo,i,o,e.mutatedKeys,0==n,t,!1),To:a}:{To:a}},rN.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new RC,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},rN.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},rN.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},rN.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=TT(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new XC(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new $C(e))})),n},rN.prototype.Ao=function(e){return this.uo=e.Bn,this.ho=TT(),e=this._o(e.documents),this.applyChanges(e,!0)},rN.prototype.Ro=function(){return OC.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},rN),ZC=function(e,t,n){this.query=e,this.targetId=t,this.view=n},eN=function(e){this.key=e,this.bo=!1},tN=(Object.defineProperty(nN.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),nN);function nN(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new aS(lw,cw),this.Vo=new Map,this.So=new Set,this.Do=new sT(Jb.comparator),this.Co=new Map,this.No=new YS,this.xo={},this.ko=new Map,this.Fo=VE.Yt(),this.onlineState="Unknown",this.$o=void 0}function rN(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=TT(),this.mutatedKeys=TT(),this.lo=dw(e),this.fo=new PC(this.lo)}function iN(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o;return Xi(this,(function(a){switch(a.label){case 0:return(i=t.view._o(n)).Nn?[4,BS(e.localStore,t.query,!1).then((function(e){return e=e.documents,t.view._o(e,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(pN(e,t.targetId,o.To),o.snapshot)]}}))}))}(e,t,n,r)},[4,BS(e.localStore,t,!0)];case 1:return o=s.sent(),a=new JC(t,o.Bn),i=a._o(o.documents),o=ST.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),o=a.applyChanges(i,e.isPrimaryClient,o),pN(e,n,o.To),a=new ZC(t,n,a),[2,(e.Po.set(t,a),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),o.snapshot)]}}))}))}function oN(e,t,n){return $i(this,void 0,void 0,(function(){var r,i;return Xi(this,(function(o){switch(o.label){case 0:i=IN(e),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(c=i.localStore,l=t,f=c,d=Eb.now(),p=l.reduce((function(e,t){return e.add(t.key)}),TT()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return f.Mn.pn(e,p).next((function(t){h=t;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=function(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field);null!=(a=mw(o.transform,a||null))&&(n=null==n?d_.empty():n).set(o.field,a)}return n||null}(o,h.get(o.key));null!=a&&n.push(new Ww(o.key,a,function e(t){var n=[];return Ab(t.fields,(function(t,r){var i=new Lb([t]);if(h_(r))if(0===(r=e(r.mapValue).fields).length)n.push(i);else for(var o=0,a=r;o<a.length;o++){var s=a[o];n.push(i.child(s))}else n.push(i)})),new Mb(n)}(a.value.mapValue),Mw.exists(!0)))}return f._n.addMutationBatch(e,d,n,l)}))})).then((function(e){return e.applyToLocalDocumentSet(h),{batchId:e.batchId,changes:h}})))];case 2:return r=o.sent(),i.sharedClientState.addPendingMutation(r.batchId),a=i,s=r.batchId,u=n,c=(c=(c=a.xo[a.currentUser.toKey()])||new sT(wb)).insert(s,u),a.xo[a.currentUser.toKey()]=c,[4,gN(i,r.changes)];case 3:return o.sent(),[4,wC(i.remoteStore)];case 4:return o.sent(),[3,6];case 5:return i=AC(i=o.sent(),"Failed to persist write"),n.reject(i),[3,6];case 6:return[2]}var a,s,u,c,l,h,f,d,p}))}))}function aN(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:n=e,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,jS(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){(t=n.Co.get(t))&&(yb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),0<e.addedDocuments.size?t.bo=!0:0<e.modifiedDocuments.size?yb(t.bo):0<e.removedDocuments.size&&(yb(t.bo),t.bo=!1))})),[4,gN(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,QE(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function sN(e,t,n){var r;(e.isPrimaryClient&&0===n||!e.isPrimaryClient&&1===n)&&(r=[],e.Po.forEach((function(e,n){(n=n.view.zr(t)).snapshot&&r.push(n.snapshot)})),function(e,t){e.onlineState=t;var n=!1;e.queries.forEach((function(e,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].zr(t)&&(n=!0)})),n&&qC(e)}(e.eventManager,t),r.length&&e.vo._r(r),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t))}function uN(e,t,n){return $i(this,void 0,void 0,(function(){var r,i;return Xi(this,(function(o){switch(o.label){case 0:r=e,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=t,(u=a).persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var t;return u._n.lookupMutationBatch(e,s).next((function(n){return yb(null!==n),t=n.keys(),u._n.removeMutationBatch(e,n)})).next((function(){return u._n.performConsistencyCheck(e)})).next((function(){return u.Mn.pn(e,t)}))})))];case 2:return i=o.sent(),hN(r,t,n),lN(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,gN(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,QE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function cN(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:gC((n=e).remoteStore)||db("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(a=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return a._n.getHighestUnacknowledgedBatchId(e)}))];case 2:return-1===(r=o.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return i=AC(i=o.sent(),"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}var a}))}))}function lN(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function hN(e,t,n){var r=e,i=r.xo[r.currentUser.toKey()];i&&((e=i.get(t))&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i)}function fN(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||dN(e,t)}))}function dN(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(hC(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),vN(e))}function pN(e,t,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof $C?(e.No.addReference(u.key,t),r=e,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(db("SyncEngine","New document in limbo: "+o),r.So.add(i),vN(r))):u instanceof XC?(db("SyncEngine","Document no longer in limbo: "+u.key),e.No.removeReference(u.key,t),e.No.containsKey(u.key)||dN(e,u.key)):mb()}}function vN(e){for(;0<e.So.size&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new Jb(Ob.fromString(t));t=e.Fo.next(),e.Co.set(t,new eN(n)),e.Do=e.Do.insert(n,t),lC(e.remoteStore,new iE(sw(ew(n.path)),t,2,ob.o))}}function gN(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return i=[],o=[],a=[],(r=e).Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){e&&(r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e),e=CS.Pn(s.targetId,e),o.push(e))})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Xi(this,(function(c){switch(c.label){case 0:n=e,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return LI.forEach(t,(function(t){return LI.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return LI.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return c.sent(),[3,4];case 3:if(!HI(r=c.sent()))throw r;return db("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)u=o[i],a=u.targetId,u.fromCache||(s=n.kn.get(a),u=s.snapshotVersion,u=s.withLastLimboFreeSnapshotVersion(u),n.kn=n.kn.insert(a,u));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function mN(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return(n=e).currentUser.isEqual(t)?[3,3]:(db("SyncEngine","User change. New user:",t.toKey()),[4,LS(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).ko.forEach((function(e){e.forEach((function(e){e.reject(new cb(ub.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.ko.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,gN(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function yN(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o;return Xi(this,(function(a){switch(a.label){case 0:return[4,(s=(i=e).localStore,u=t,l=(c=s)._n,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return l.jt(e,u).next((function(t){return t?c.Mn.pn(e,t):LI.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,wC(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hN(i,t,r||null),lN(i,t),i.localStore._n.Gt(t)):mb(),a.label=4;case 4:return[4,gN(i,o)];case 5:return a.sent(),[3,7];case 6:db("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}var s,u,c,l}))}))}function bN(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Xi(this,(function(l){switch(l.label){case 0:return TN(n=e),IN(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,_N(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,EC(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],lC(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):c=c.then((function(){return fN(n,t),VS(n.localStore,t,!0)})),hC(n.remoteStore,t)})),[4,c]);case 4:return l.sent(),[4,_N(n,u)];case 5:return l.sent(),(h=n).Co.forEach((function(e,t){hC(h.remoteStore,t)})),h.No.ts(),h.Co=new Map,h.Do=new sT(Jb.comparator),n.$o=!1,[4,EC(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function _N(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d;return Xi(this,(function(p){switch(p.label){case 0:n=e,r=[],i=[],o=0,a=t,p.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,qS(n.localStore,sw(c[0]))]:[3,7]):[3,13];case 2:u=p.sent(),l=0,h=c,p.label=3;case 3:return l<h.length?(f=h[l],f=n.Po.get(f),[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,BS((n=e).localStore,t.query,!0)];case 1:return r=i.sent(),r=t.view.Ao(r),[2,(n.isPrimaryClient&&pN(n,t.targetId,r.To),r)]}}))}))}(n,f)]):[3,6];case 4:(f=p.sent()).snapshot&&i.push(f.snapshot),p.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,KS(n.localStore,s)];case 8:return d=p.sent(),[4,qS(n.localStore,d)];case 9:return u=p.sent(),[4,iN(n,wN(d),s,!1)];case 10:p.sent(),p.label=11;case 11:r.push(u),p.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function wN(e){return Z_(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function TN(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(e,t){var n=e;if((e=n.Co.get(t))&&e.bo)return TT().add(e.key);var r=TT();if(!(t=n.Vo.get(t)))return r;for(var i=0,o=t;i<o.length;i++){var a=o[i];a=n.Po.get(a),r=r.unionWith(a.view.wo)}return r}.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return(r=e).sharedClientState.updateQueryState(t,"rejected",n),a=r.Co.get(t),(i=a&&a.key)?(o=(o=new sT(Jb.comparator)).insert(i,v_.newNoDocument(i,Sb.min())),a=TT().add(i),a=new ET(Sb.min(),new Map,new pT(wb),o,a),[4,aN(r,a)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(i),r.Co.delete(t),vN(r),[3,4];case 2:return[4,VS(r.localStore,t,!1).then((function(){return fN(r,t,n)})).catch(QE)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}.bind(null,e),e.vo._r=function(e,t){for(var n=e,r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query;if(s=n.queries.get(s)){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&qC(n)}.bind(null,e.eventManager),e.vo.Mo=function(e,t,n){var r=e;if(e=r.queries.get(t))for(var i=0,o=e.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(t)}.bind(null,e.eventManager),e}function IN(e){return e.remoteStore.remoteSyncer.applySuccessfulWrite=function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:n=e,r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,MS(n.localStore,t)];case 2:return i=o.sent(),hN(n,r,null),lN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,gN(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,QE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uN.bind(null,e),e}function EN(e,t,n){var r=e;(function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o,a,s;return Xi(this,(function(u){switch(u.label){case 0:return u.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=u.sent(),[4,(h=e.localStore,d=h,p=BT((f=r).createTime),d.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return d.Ke.getBundleMetadata(e,f.id)})).then((function(e){return!!e&&0<=e.createTime.compareTo(p)})))];case 2:return u.sent()?[4,t.close()]:[3,4];case 3:return[2,(u.sent(),void n._completeWith({taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}))];case 4:return n._updateProgress(YC(r)),i=new zC(r,e.localStore,t.R),[4,t.Lo()];case 5:o=u.sent(),u.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=u.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=u.sent(),u.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=u.sent(),[4,gN(e,s.wn,void 0)];case 12:return u.sent(),[4,(h=e.localStore,c=r,(l=h).persistence.runTransaction("Save bundle","readwrite",(function(e){return l.Ke.saveBundleMetadata(e,c)})))];case 13:return u.sent(),n._completeWith(s.progress),[3,15];case 14:return vb("SyncEngine","Loading bundle failed with "+(s=u.sent())),n._failWith(s),[3,15];case 15:return[2]}var c,l,h,f,d,p}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var SN,kN,CN=(DN.prototype.initialize=function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return this.R=Hk(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},DN.prototype.Uo=function(e){return null},DN.prototype.Ko=function(e){return DS(this.persistence,new NS,e.initialUser,this.R)},DN.prototype.qo=function(e){return new tk(rk.bs,this.R)},DN.prototype.Bo=function(e){return new kk},DN.prototype.terminate=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},DN),NN=(Qi(ON,kN=CN),ON.prototype.initialize=function(e){return $i(this,void 0,void 0,(function(){var t=this;return Xi(this,(function(n){switch(n.label){case 0:return[4,kN.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,WS(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,IN(this.Qo.syncEngine)];case 4:return n.sent(),[4,wC(this.Qo.remoteStore)];case 5:return n.sent(),[4,this.persistence.He((function(){return t.gcScheduler&&!t.gcScheduler.started&&t.gcScheduler.start(t.localStore),Promise.resolve()}))];case 6:return n.sent(),[2]}}))}))},ON.prototype.Ko=function(e){return DS(this.persistence,new NS,e.initialUser,this.R)},ON.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new XE(t,e.asyncQueue)},ON.prototype.qo=function(e){var t=ES(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?PE.withCacheSize(this.cacheSizeBytes):PE.DEFAULT;return new _S(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zk(),Wk(),this.R,this.sharedClientState,!!this.forceOwnership)},ON.prototype.Bo=function(e){return new kk},ON),AN=(Qi(RN,SN=NN),RN.prototype.initialize=function(e){return $i(this,void 0,void 0,(function(){var t,n=this;return Xi(this,(function(r){switch(r.label){case 0:return[4,SN.prototype.initialize.call(this,e)];case 1:return r.sent(),t=this.Qo.syncEngine,this.sharedClientState instanceof Sk?(this.sharedClientState.syncEngine={ui:yN.bind(null,t),ai:function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return(i=e).$o?(db("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,zS(i.localStore)];case 3:return o=s.sent(),a=ET.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,gN(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,VS(i.localStore,t,!0)];case 6:return s.sent(),fN(i,t,r),[3,8];case 7:mb(),s.label=8;case 8:return[2]}}))}))}.bind(null,t),hi:function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return Xi(this,(function(h){switch(h.label){case 0:if(!(r=TN(e)).$o)return[3,10];i=0,o=t,h.label=1;case 1:return i<o.length?(o=o[i],r.Vo.has(o)?(db("SyncEngine","Adding an already active target "+o),[3,5]):[4,KS(r.localStore,o)]):[3,6];case 2:return a=h.sent(),[4,qS(r.localStore,a)];case 3:return s=h.sent(),[4,iN(r,wN(a),s.targetId,!1)];case 4:h.sent(),lC(r.remoteStore,s),h.label=5;case 5:return i++,[3,1];case 6:u=function(e){return Xi(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,VS(r.localStore,e,!1).then((function(){hC(r.remoteStore,e),fN(r,e)})).catch(QE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},c=0,l=n,h.label=7;case 7:return c<l.length?(l=l[c],[5,u(l)]):[3,10];case 8:h.sent(),h.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}.bind(null,t),fn:function(e){return e.localStore.persistence.fn()}.bind(null,t),ci:function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){return[2,zS((t=e).localStore).then((function(e){return gN(t,e)}))]}))}))}.bind(null,t)},[4,this.sharedClientState.start()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[4,this.persistence.He((function(e){return $i(n,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return[4,bN(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return r.sent(),[2]}}))}))},RN.prototype.Bo=function(e){var t=zk();if(!Sk.yt(t))throw new cb(ub.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ES(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sk(t,e.asyncQueue,n,e.clientId,e.initialUser)},RN),xN=(PN.prototype.initialize=function(e,t){return $i(this,void 0,void 0,(function(){var n=this;return Xi(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return sN(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=mN.bind(null,this.syncEngine),[4,EC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},PN.prototype.createEventManager=function(e){return new xC},PN.prototype.createDatastore=function(e){var t=Hk(e.databaseInfo.databaseId),n=(n=e.databaseInfo,new Pk(n));return e=e.credentials,new eC(e,n,t)},PN.prototype.createRemoteStore=function(e){var t=this,n=function(e){return sN(t.syncEngine,e,0)};return new Gk(this.localStore,this.datastore,e.asyncQueue,n,e=new(Nk.yt()?Nk:Ck))},PN.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){return o=new tN(e,t,n,r,i,o),a&&(o.$o=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},PN.prototype.terminate=function(){return function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return t=e,db("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,cC(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},PN);function PN(){}function RN(e,t){var n=this;return(n=SN.call(this,e,t,!1)||this).Qo=e,n.cacheSizeBytes=t,n.synchronizeTabs=!0,n}function ON(e,t,n){var r=this;return(r=kN.call(this)||this).Qo=e,r.cacheSizeBytes=t,r.forceOwnership=n,r.synchronizeTabs=!1,r}function DN(){this.synchronizeTabs=!1}function LN(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return $i(this,void 0,void 0,(function(){var r;return Xi(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var MN=(WN.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},WN.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},WN.prototype.Wo=function(){this.muted=!0},WN.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},WN),FN=(zN.prototype.close=function(){return this.Go.cancel()},zN.prototype.getMetadata=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){return[2,this.metadata.promise]}))}))},zN.prototype.Lo=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},zN.prototype.Ho=function(){return $i(this,void 0,void 0,(function(){var e,t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(e=r.sent())?[2,null]:(n=this.zo.decode(e),t=Number(n),isNaN(t)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(t)]);case 2:return n=r.sent(),[2,new BC(JSON.parse(n),e.length+t)]}}))}))},zN.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},zN.prototype.Jo=function(){return $i(this,void 0,void 0,(function(){var e,t;return Xi(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},zN.prototype.Xo=function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},zN.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},zN.prototype.tc=function(){return $i(this,void 0,void 0,(function(){var e,t;return Xi(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},zN),jN=(KN.prototype.lookup=function(e){return $i(this,void 0,void 0,(function(){var t,n=this;return Xi(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new cb(ub.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return r=YT((n=e).R)+"/documents",i={documents:t.map((function(e){return WT(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return i=s.sent(),o=new Map,i.forEach((function(e){var t;t=n.R,e="found"in e?function(e,t){yb(!!t.found),t.found.name,t.found.updateTime;var n=HT(e,t.found.name);return e=BT(t.found.updateTime),t=new d_({mapValue:{fields:t.found.fields}}),v_.newFoundDocument(n,e,t)}(t,e):"missing"in e?function(e,t){return yb(!!t.missing),yb(!!t.readTime),e=HT(e,t.missing),t=BT(t.readTime),v_.newNoDocument(e,t)}(t,e):mb(),o.set(e.key.toString(),e)})),a=[],[2,(t.forEach((function(e){yb(!!(e=o.get(e.toString()))),a.push(e)})),a)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},KN.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},KN.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},KN.prototype.delete=function(e){this.write(new tT(e,this.precondition(e))),this.writtenDocs.add(e.toString())},KN.prototype.commit=function(){return $i(this,void 0,void 0,(function(){var e,t=this;return Xi(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){n=Jb.fromPath(n),t.mutations.push(new nT(n,t.precondition(n)))})),[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:return r=YT((n=e).R)+"/documents",i={writes:t.map((function(e){return ZT(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},KN.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mb();t=Sb.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new cb(ub.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},KN.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Mw.updateTime(t):Mw.none()},KN.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return Mw.exists(!0);if(t.isEqual(Sb.min()))throw new cb(ub.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mw.updateTime(t)},KN.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},KN.prototype.ensureCommitNotCalled=function(){},KN),UN=(BN.prototype.run=function(){--this.ec,this.nc()},BN.prototype.nc=function(){var e=this;this.Zi.ji((function(){return $i(e,void 0,void 0,(function(){var e,t,n=this;return Xi(this,(function(r){return e=new jN(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},BN.prototype.sc=function(e){try{var t=this.updateFunction(e);return!Yb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},BN.prototype.ic=function(e){var t=this;0<this.ec&&this.rc(e)?(--this.ec,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},BN.prototype.rc=function(e){return"FirebaseError"===e.name&&("aborted"===(e=e.code)||"failed-precondition"===e||!oT(e))},BN),qN=(VN.prototype.getConfiguration=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},VN.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},VN.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new cb(ub.FAILED_PRECONDITION,"The client has already been terminated.")},VN.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new DI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return $i(e,void 0,void 0,(function(){var e;return Xi(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=AC(e=n.sent(),"Failed to shutdown persistence"),t.reject(e),[3,6];case 6:return[2]}}))}))})),t.promise},VN);function VN(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=ik.UNAUTHENTICATED,this.clientId=bb.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return $i(r,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return db("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}function BN(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Xk(this.asyncQueue,"transaction_retry")}function KN(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function zN(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new DI,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}function WN(e){this.observer=e,this.muted=!1}function HN(e,t){return $i(this,void 0,void 0,(function(){var n,r,i=this;return Xi(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),db("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return $i(i,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,LS(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function GN(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,QN(e)];case 1:return n=i.sent(),db("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return(n=e).asyncQueue.verifyOperationInProgress(),db("RemoteStore","RemoteStore received new credentials"),r=gC(n),n.Or.add(3),[4,cC(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,uC(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function QN(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(db("FirestoreClient","Using default OfflineComponentProvider"),[4,HN(e,new CN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function YN(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(db("FirestoreClient","Using default OnlineComponentProvider"),[4,GN(e,new xN)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function $N(e){return QN(e).then((function(e){return e.persistence}))}function XN(e){return QN(e).then((function(e){return e.localStore}))}function JN(e){return YN(e).then((function(e){return e.remoteStore}))}function ZN(e){return YN(e).then((function(e){return e.syncEngine}))}function eA(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,YN(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return n=TN(e),(a=n.Po.get(t))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,qS(n.localStore,sw(t))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.targetId,[4,iN(n,t,r,"current"===a)];case 3:i=s.sent(),n.isPrimaryClient&&lC(n.remoteStore,o),s.label=4;case 4:return[2,i]}}))}))}.bind(null,t.syncEngine),n.onUnlisten=function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:return r=(n=e).Po.get(t),1<(i=n.Vo.get(r.targetId)).length?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!cw(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,VS(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),hC(n.remoteStore,r.targetId),fN(n,r.targetId)})).catch(QE)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return fN(n,r.targetId),[4,VS(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}.bind(null,t.syncEngine),n)]}}))}))}function tA(e,t,n){var r=this;void 0===n&&(n={});var i=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var r;return Xi(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new MN({next:function(o){t.enqueueAndForget((function(){return UC(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new cb(ub.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new cb(ub.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new VC(ew(n.path),o,{includeMetadataChanges:!0,so:!0});return jC(e,a)},[4,eA(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function nA(e,t,n){var r=this;void 0===n&&(n={});var i=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var r;return Xi(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new MN({next:function(n){t.enqueueAndForget((function(){return UC(e,a)})),n.fromCache&&"server"===r.source?i.reject(new cb(ub.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new VC(n,o,{includeMetadataChanges:!0,so:!0});return jC(e,a)},[4,eA(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function rA(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e}var iA=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},oA=(Object.defineProperty(mA.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),mA.prototype.isEqual=function(e){return e instanceof mA&&e.projectId===this.projectId&&e.database===this.database},mA),aA=new Map,sA=(gA.prototype.getToken=function(){return Promise.resolve(null)},gA.prototype.invalidateToken=function(){},gA.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(ik.UNAUTHENTICATED)}))},gA.prototype.removeChangeListener=function(){this.changeListener=null},gA),uA=(vA.prototype.getToken=function(){return Promise.resolve(this.token)},vA.prototype.invalidateToken=function(){},vA.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},vA.prototype.removeChangeListener=function(){this.changeListener=null},vA),cA=(pA.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(db("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yb("string"==typeof n.accessToken),new rA(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},pA.prototype.invalidateToken=function(){this.forceRefresh=!0},pA.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return $i(n,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},pA.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},pA.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return yb(null===e||"string"==typeof e),new ik(e)},pA),lA=(Object.defineProperty(dA.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),dA),hA=(fA.prototype.getToken=function(){return Promise.resolve(new lA(this.hc,this.lc,this.fc))},fA.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(ik.FIRST_PARTY)}))},fA.prototype.removeChangeListener=function(){},fA.prototype.invalidateToken=function(){},fA);function fA(e,t,n){this.hc=e,this.lc=t,this.fc=n}function dA(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=ik.FIRST_PARTY}function pA(e){var t=this;function n(e){db("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)}this.currentUser=ik.UNAUTHENTICATED,this.oc=new DI,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))},e.onInit(n),setTimeout((function(){var r;t.auth||((r=e.getImmediate({optional:!0}))?n(r):(db("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve()))}),0)}function vA(e){this.token=e,this.changeListener=null}function gA(){this.changeListener=null}function mA(e,t){this.projectId=e,this.database=t||"(default)"}function yA(e,t,n){if(!n)throw new cb(ub.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function bA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new cb(ub.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function _A(e,t,n,r){if(!0===t&&!0===r)throw new cb(ub.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function wA(e){if(!Jb.isDocumentKey(e))throw new cb(ub.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function TA(e){if(Jb.isDocumentKey(e))throw new cb(ub.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function IA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":mb();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function EA(e,t){if((e="_delegate"in e?e._delegate:e)instanceof t)return e;if(t.name===e.constructor.name)throw new cb(ub.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw e=IA(e),new cb(ub.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+e)}function SA(e,t){if(t<=0)throw new cb(ub.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var kA,CA=(MA.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},MA),NA=(Object.defineProperty(LA.prototype,"app",{get:function(){if(!this._app)throw new cb(ub.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(LA.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(LA.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),LA.prototype._setSettings=function(e){if(this._settingsFrozen)throw new cb(ub.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CA(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new sA;switch(e.type){case"gapi":var t=e.client;return yb(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new hA(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new cb(ub.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},LA.prototype._getSettings=function(){return this._settings},LA.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},LA.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},LA.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},LA.prototype._terminate=function(){return(e=aA.get(this))&&(db("ComponentProvider","Removing Datastore"),aA.delete(this),e.terminate()),Promise.resolve();var e},LA),AA=(Object.defineProperty(DA.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(DA.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(DA.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(DA.prototype,"parent",{get:function(){return new PA(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),DA.prototype.withConverter=function(e){return new DA(this.firestore,e,this._key)},DA),xA=(OA.prototype.withConverter=function(e){return new OA(this.firestore,e,this._query)},OA),PA=(Qi(RA,kA=xA),Object.defineProperty(RA.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(RA.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(RA.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new AA(this.firestore,null,new Jb(e))},enumerable:!1,configurable:!0}),RA.prototype.withConverter=function(e){return new RA(this.firestore,e,this._path)},RA);function RA(e,t,n){var r=this;return(r=kA.call(this,e,t,ew(n))||this)._path=n,r.type="collection",r}function OA(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}function DA(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}function LA(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CA({}),this._settingsFrozen=!1,e instanceof oA?(this._databaseId=e,this._credentials=new sA):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cb(ub.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oA(e.options.projectId)}(e),this._credentials=new cA(t))}function MA(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new cb(ub.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new cb(ub.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}function FA(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=ta(e),yA("collection","path",t),e instanceof NA)return TA(n=Ob.fromString.apply(Ob,eo([t],r))),new PA(e,null,n);if(!(e instanceof AA||e instanceof PA))throw new cb(ub.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return TA(n=Ob.fromString.apply(Ob,eo([e.path],r)).child(Ob.fromString(t))),new PA(e.firestore,null,n)}function jA(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=ta(e),yA("doc","path",t=1===arguments.length?bb.u():t),e instanceof NA)return wA(n=Ob.fromString.apply(Ob,eo([t],r))),new AA(e,null,new Jb(n));if(!(e instanceof AA||e instanceof PA))throw new cb(ub.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wA(n=e._path.child(Ob.fromString.apply(Ob,eo([t],r)))),new AA(e.firestore,e instanceof PA?e.converter:null,new Jb(n))}function UA(e,t){return e=ta(e),t=ta(t),(e instanceof AA||e instanceof PA)&&(t instanceof AA||t instanceof PA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function qA(e,t){return e=ta(e),t=ta(t),e instanceof xA&&t instanceof xA&&e.firestore===t.firestore&&cw(e._query,t._query)&&e.converter===t.converter}var VA=(Object.defineProperty(BA.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),BA.prototype.enqueueAndForget=function(e){this.enqueue(e)},BA.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},BA.prototype.enterRestrictedMode=function(e){this._c||(this._c=!0,this.Ec=e||!1,(e=Wk())&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic))},BA.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new DI;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},BA.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},BA.prototype.bc=function(){return $i(this,void 0,void 0,(function(){var e,t=this;return Xi(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!HI(e=n.sent()))throw e;return db("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.wc.length&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},BA.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,pb("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",r=n.stack?n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack:r)),e;var n,r})).then((function(e){return t.gc=!1,e}))}));return this.dc=n},BA.prototype.enqueueAfterDelay=function(e,t,n){var r=this;return this.Ac(),-1<this.Tc.indexOf(e)&&(t=0),n=CC.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)})),this.mc.push(n),n},BA.prototype.Ac=function(){this.yc&&mb()},BA.prototype.verifyOperationInProgress=function(){},BA.prototype.Pc=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},BA.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},BA.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},BA.prototype.Dc=function(e){this.Tc.push(e)},BA.prototype.vc=function(e){e=this.mc.indexOf(e),this.mc.splice(e,1)},BA);function BA(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Xk(this,"async_queue_retry"),this.Ic=function(){var t=Wk();t&&db("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=Wk();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}function KA(e){return function(){if("object"==typeof e&&null!==e)for(var t=e,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}()}var zA,WA=(QA.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},QA.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},QA.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},QA.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},QA.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},QA.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},QA),HA=(Qi(GA,zA=NA),GA.prototype._terminate=function(){return this._firestoreClient||$A(this),this._firestoreClient.terminate()},GA);function GA(e,t){var n=this;return(n=zA.call(this,e,t)||this).type="firestore",n._queue=new VA,n._persistenceKey="name"in e?e.name:"[DEFAULT]",n}function QA(){this._progressObserver={},this._taskCompletionResolver=new DI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function YA(e){return e._firestoreClient||$A(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $A(e){var t,n,r,i=e._freezeSettings();t=e._databaseId,n=(null===(r=e._app)||void 0===r?void 0:r.options.appId)||"",r=e._persistenceKey,i=new iA(t,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams),e._firestoreClient=new qN(e._credentials,e._queue,i)}function XA(e,t,n){var r=this,i=new DI;return e.asyncQueue.enqueue((function(){return $i(r,void 0,void 0,(function(){var r;return Xi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,HN(e,n)];case 1:return o.sent(),[4,GN(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(r=o.sent()).name?r.code===ub.FAILED_PRECONDITION||r.code===ub.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function JA(e){if(e._initialized||e._terminated)throw new cb(ub.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ZA=(lx.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},lx),ex=(cx.fromBase64String=function(e){try{return new cx(Fb.fromBase64String(e))}catch(e){throw new cb(ub.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},cx.fromUint8Array=function(e){return new cx(Fb.fromUint8Array(e))},cx.prototype.toBase64=function(){return this._byteString.toBase64()},cx.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},cx.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},cx.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},cx),tx=function(e){this._methodName=e},nx=(Object.defineProperty(ux.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(ux.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),ux.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},ux.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},ux.prototype._compareTo=function(e){return wb(this._lat,e._lat)||wb(this._long,e._long)},ux),rx=/^__.*__$/,ix=(sx.prototype.toMutation=function(e,t){return null!==this.fieldMask?new Ww(e,this.data,this.fieldMask,t,this.fieldTransforms):new zw(e,this.data,t,this.fieldTransforms)},sx),ox=(ax.prototype.toMutation=function(e,t){return new Ww(e,this.data,this.fieldMask,t,this.fieldTransforms)},ax);function ax(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function sx(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function ux(e,t){if(!isFinite(e)||e<-90||90<e)throw new cb(ub.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new cb(ub.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}function cx(e){this._byteString=e}function lx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new cb(ub.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lb(e)}function hx(e){switch(e){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw mb()}}var fx=(Object.defineProperty(vx.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(vx.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),vx.prototype.xc=function(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},vx.prototype.kc=function(e){var t=null===(t=this.path)||void 0===t?void 0:t.child(e);return(t=this.xc({path:t,Fc:!1})).$c(e),t},vx.prototype.Oc=function(e){var t;return e=null===(t=this.path)||void 0===t?void 0:t.child(e),(e=this.xc({path:e,Fc:!1})).Cc(),e},vx.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},vx.prototype.Lc=function(e){return zx(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},vx.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},vx.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},vx.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(hx(this.Nc)&&rx.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},vx),dx=(px.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new fx({Nc:e,methodName:t,qc:n,path:Lb.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},px);function px(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||Hk(e)}function vx(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function gx(e){var t=e._freezeSettings(),n=Hk(e._databaseId);return new dx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mx(e,t,n,r,i,o){var a,s,u=e.Uc((o=void 0===o?{}:o).merge||o.mergeFields?2:0,t,n,i);if(qx("Data must be an object, but it was:",u,r),r=jx(r,u),o.merge)a=new Mb(u.fieldMask),s=u.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,h=o.mergeFields;l<h.length;l++){var f=Vx(t,h[l],n);if(!u.contains(f))throw new cb(ub.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Wx(c,f)||c.push(f)}a=new Mb(c),s=u.fieldTransforms.filter((function(e){return a.covers(e.field)}))}else a=null,s=u.fieldTransforms;return new ix(new d_(r),a,s)}var yx,bx=(Qi(_x,yx=tx),_x.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},_x.prototype.isEqual=function(e){return e instanceof _x},_x);function _x(){return null!==yx&&yx.apply(this,arguments)||this}function wx(e,t,n){return new fx({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var Tx,Ix,Ex,Sx,kx=(Qi(Ox,Sx=tx),Ox.prototype._toFieldTransform=function(e){return new Lw(e.path,new _w)},Ox.prototype.isEqual=function(e){return e instanceof Ox},Ox),Cx=(Qi(Rx,Ex=tx),Rx.prototype._toFieldTransform=function(e){var t=wx(this,e,!0),n=this.Kc.map((function(e){return Fx(e,t)}));return n=new ww(n),new Lw(e.path,n)},Rx.prototype.isEqual=function(e){return this===e},Rx),Nx=(Qi(Px,Ix=tx),Px.prototype._toFieldTransform=function(e){var t=wx(this,e,!0),n=this.Kc.map((function(e){return Fx(e,t)}));return n=new kw(n),new Lw(e.path,n)},Px.prototype.isEqual=function(e){return this===e},Px),Ax=(Qi(xx,Tx=tx),xx.prototype._toFieldTransform=function(e){var t=new xw(e.R,gw(e.R,this.Qc));return new Lw(e.path,t)},xx.prototype.isEqual=function(e){return this===e},xx);function xx(e,t){var n=this;return(n=Tx.call(this,e)||this).Qc=t,n}function Px(e,t){var n=this;return(n=Ix.call(this,e)||this).Kc=t,n}function Rx(e,t){var n=this;return(n=Ex.call(this,e)||this).Kc=t,n}function Ox(){return null!==Sx&&Sx.apply(this,arguments)||this}function Dx(e,t,n,r){var i=e.Uc(1,t,n);qx("Data must be an object, but it was:",i,r);var o=[],a=d_.empty();return Ab(r,(function(e,r){var s=Kx(t,e,n);r=ta(r),e=i.Oc(s),r instanceof bx?o.push(s):null!=(e=Fx(r,e))&&(o.push(s),a.set(s,e))})),r=new Mb(o),new ox(a,r,i.fieldTransforms)}function Lx(e,t,n,r,i,o){var a=e.Uc(1,t,n),s=[Vx(t,r,n)],u=[i];if(o.length%2!=0)throw new cb(ub.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Vx(t,o[c])),u.push(o[c+1]);for(var l,h,f,d=[],p=d_.empty(),v=s.length-1;0<=v;--v)Wx(d,s[v])||(l=s[v],h=ta(h=u[v]),f=a.Oc(l),h instanceof bx?d.push(l):null!=(f=Fx(h,f))&&(d.push(l),p.set(l,f)));return i=new Mb(d),new ox(p,i,a.fieldTransforms)}function Mx(e,t,n,r){return Fx(n,e.Uc((r=void 0!==r&&r)?4:3,t))}function Fx(e,t){if(Ux(e=ta(e)))return qx("Unsupported field value:",t,e),jx(e,t);if(e instanceof tx)return function(e,t){if(!hx(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");(e=e._toFieldTransform(t))&&t.fieldTransforms.push(e)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Fx(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t)}return function(t,n){if(null===(t=ta(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gw(n.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var r=Eb.fromDate(t);return{timestampValue:qT(n.R,r)}}if(t instanceof Eb)return r=new Eb(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:qT(n.R,r)};if(t instanceof nx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ex)return{bytesValue:VT(n.R,t._byteString)};if(t instanceof AA){r=n.databaseId;var i=t.firestore._databaseId;if(!i.isEqual(r))throw n.Lc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:KT(t.firestore._databaseId||n.databaseId,t._key.path)}}throw n.Lc("Unsupported field value: "+IA(t))}(0,t)}function jx(e,t){var n={};return xb(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):Ab(e,(function(e,r){null!=(r=Fx(r,t.kc(e)))&&(n[e]=r)})),{mapValue:{fields:n}}}function Ux(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Eb||e instanceof nx||e instanceof ex||e instanceof AA||e instanceof tx)}function qx(e,t,n){if(!Ux(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=IA(n))?t.Lc(e+" a custom object"):t.Lc(e+" "+n);var r}function Vx(e,t,n){if((t=ta(t))instanceof ZA)return t._internalPath;if("string"==typeof t)return Kx(e,t);throw zx("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Bx=new RegExp("[~\\*/\\[\\]]");function Kx(t,n,r){if(0<=n.search(Bx))throw zx("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,r);try{return(new(ZA.bind.apply(ZA,eo([void 0],n.split(".")))))._internalPath}catch(e){throw zx("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,r)}}function zx(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i;return t="Function "+t+"() called with invalid data",n&&(t+=" (via `toFirestore()`)"),n="",(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new cb(ub.INVALID_ARGUMENT,(t+=". ")+e+n)}function Wx(e,t){return e.some((function(e){return e.isEqual(t)}))}var Hx,Gx=(Object.defineProperty($x.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty($x.prototype,"ref",{get:function(){return new AA(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),$x.prototype.exists=function(){return null!==this._document},$x.prototype.data=function(){if(this._document){if(this._converter){var e=new Qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},$x.prototype.get=function(e){if(this._document&&null!==(e=this._document.data.field(Xx("DocumentSnapshot.get",e))))return this._userDataWriter.convertValue(e)},$x),Qx=(Qi(Yx,Hx=Gx),Yx.prototype.data=function(){return Hx.prototype.data.call(this)},Yx);function Yx(){return null!==Hx&&Hx.apply(this,arguments)||this}function $x(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}function Xx(e,t){return"string"==typeof t?Kx(e,t):(t instanceof ZA?t:t._delegate)._internalPath}var Jx,Zx,eP=(sP.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},sP),tP=(Qi(aP,Zx=Gx),aP.prototype.exists=function(){return Zx.prototype.exists.call(this)},aP.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new nP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},aP.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document&&null!==(e=this._document.data.field(Xx("DocumentSnapshot.get",e))))return this._userDataWriter.convertValue(e,t.serverTimestamps)},aP),nP=(Qi(oP,Jx=tP),oP.prototype.data=function(e){return Jx.prototype.data.call(this,e=void 0===e?{}:e)},oP),rP=(Object.defineProperty(iP.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(iP.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(iP.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),iP.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new nP(n._firestore,n._userDataWriter,r.key,r,new eP(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},iP.prototype.docChanges=function(e){if((e=!!(e=void 0===e?{}:e).includeMetadataChanges)&&this._snapshot.excludesMetadataChanges)throw new cb(ub.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new nP(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eP(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new nP(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eP(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mb()}}(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},iP);function iP(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new eP(r.hasPendingWrites,r.fromCache),this.query=n}function oP(){return null!==Jx&&Jx.apply(this,arguments)||this}function aP(e,t,n,r,i,o){var a=this;return(a=Zx.call(this,e,t,n,r,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=i,a}function sP(e,t){this.hasPendingWrites=e,this.fromCache=t}function uP(e,t){return e instanceof tP&&t instanceof tP?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof rP&&t instanceof rP&&e._firestore===t._firestore&&qA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function cP(e){if(nw(e)&&0===e.explicitOrderBy.length)throw new cb(ub.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function lP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)e=i[r]._apply(e);return e}var hP,fP,dP,pP,vP,gP=(Qi(SP,vP=H=function(){}),SP.prototype._apply=function(e){var t=gx(e.firestore);return t=function(e,t,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new cb(ub.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){NP(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(CP(n,e,c))}l={arrayValue:{values:a}}}else l=CP(n,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||NP(o,i),l=Mx(t,"where",o,"in"===i||"not-in"===i);var l=I_.create(r,i,l);return function(e,t){if(t.g()){var n=iw(e);if(null!==n&&!n.isEqual(t.field))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");null!==(n=rw(e))&&AP(0,t.field,n)}if(e=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(0<=t.indexOf(i.op))return i.op}return null}(e,function(){switch(t.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}()),null!==e)throw e===t.op?new cb(ub.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new cb(ub.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+e.toString()+"' filters.")}(e,l),l}(e._query,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc),new xA(e.firestore,e.converter,(t=(e=e._query).filters.concat([t]),new J_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),t,e.limit,e.limitType,e.startAt,e.endAt)))},SP),mP=(Qi(EP,pP=H),EP.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Y_(t,n);return t=r,null!==rw(n=e)||null!==(e=iw(n))&&AP(0,e,t.field),r}(e._query,this.jc,this.zc);return new xA(e.firestore,e.converter,(t=(e=e._query).explicitOrderBy.concat([t]),new J_(e.path,e.collectionGroup,t,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},EP),yP=(Qi(IP,dP=H),IP.prototype._apply=function(e){return new xA(e.firestore,e.converter,uw(e._query,this.Hc,this.Jc))},IP),bP=(Qi(TP,fP=H),TP.prototype._apply=function(e){var t=kP(e,this.type,this.Yc,this.Xc);return new xA(e.firestore,e.converter,(e=e._query,new J_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)))},TP),_P=(Qi(wP,hP=H),wP.prototype._apply=function(e){var t=kP(e,this.type,this.Yc,this.Xc);return new xA(e.firestore,e.converter,(e=e._query,new J_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)))},wP);function wP(e,t,n){var r=this;return(r=hP.call(this)||this).type=e,r.Yc=t,r.Xc=n,r}function TP(e,t,n){var r=this;return(r=fP.call(this)||this).type=e,r.Yc=t,r.Xc=n,r}function IP(e,t,n){var r=this;return(r=dP.call(this)||this).type=e,r.Hc=t,r.Jc=n,r}function EP(e,t){var n=this;return(n=pP.call(this)||this).jc=e,n.zc=t,n.type="orderBy",n}function SP(e,t,n){var r=this;return(r=vP.call(this)||this).jc=e,r.Wc=t,r.Gc=n,r.type="where",r}function kP(e,t,n,r){if(n[0]=ta(n[0]),n[0]instanceof Gx)return function(e,n,r,i){if(!r)throw new cb(ub.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var o=[],a=0,s=aw(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(a_(n,r.key));else{var c=r.data.field(u.field);if(Gb(c))throw new cb(ub.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c)throw u=u.field.canonicalString(),new cb(ub.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");o.push(c)}}return new K_(o,i)}(e._query,e.firestore._databaseId,n[0]._document,r);var i=gx(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new cb(ub.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ow(e)&&-1!==c.indexOf("/"))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(Ob.fromString(c));if(!Jb.isDocumentKey(l))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");l=new Jb(l),s.push(a_(t,l))}else c=Mx(n,r,c),s.push(c)}return new K_(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function CP(e,t,n){if("string"==typeof(n=ta(n))){if(""===n)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ow(t)&&-1!==n.indexOf("/"))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(t=t.path.child(Ob.fromString(n)),!Jb.isDocumentKey(t))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return a_(e,new Jb(t))}if(n instanceof AA)return a_(e,n._key);throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+IA(n)+".")}function NP(e,t){if(!Array.isArray(e)||0===e.length)throw new cb(ub.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new cb(ub.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function AP(e,t,n){if(!n.isEqual(t))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function xP(){}function PP(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}xP.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),e_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mb()}},xP.prototype.convertObject=function(e,t){var n=this,r={};return Ab(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},xP.prototype.convertGeoPoint=function(e){return new nx(Wb(e.latitude),Wb(e.longitude))},xP.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},xP.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=function e(t){return Gb(t=t.mapValue.fields.__previous_value__)?e(t):t}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qb(e));default:return null}},xP.prototype.convertTimestamp=function(e){return e=zb(e),new Eb(e.seconds,e.nanos)},xP.prototype.convertDocumentKey=function(e,t){var n=Ob.fromString(e);return yb(lI(n)),e=new oA(n.get(1),n.get(3)),n=new Jb(n.popFirst(5)),e.isEqual(t)||pb("Document "+n+" contains a document reference within a different database ("+e.projectId+"/"+e.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),n};var RP,OP=(Qi(MP,RP=G=xP),MP.prototype.convertBytes=function(e){return new ex(e)},MP.prototype.convertReference=function(e){return e=this.convertDocumentKey(e,this.firestore._databaseId),new AA(this.firestore,null,e)},MP),DP=(LP.prototype.set=function(e,t,n){return this._verifyNotCommitted(),t=PP((e=FP(e,this._firestore)).converter,t,n),n=mx(this._dataReader,"WriteBatch.set",e._key,t,null!==e.converter,n),this._mutations.push(n.toMutation(e._key,Mw.none())),this},LP.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this._verifyNotCommitted(),e=FP(e,this._firestore),t="string"==typeof(t=ta(t))||t instanceof ZA?Lx(this._dataReader,"WriteBatch.update",e._key,t,n,r):Dx(this._dataReader,"WriteBatch.update",e._key,t),this._mutations.push(t.toMutation(e._key,Mw.exists(!0))),this},LP.prototype.delete=function(e){return this._verifyNotCommitted(),e=FP(e,this._firestore),this._mutations=this._mutations.concat(new tT(e._key,Mw.none())),this},LP.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},LP.prototype._verifyNotCommitted=function(){if(this._committed)throw new cb(ub.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},LP);function LP(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gx(e)}function MP(e){var t=this;return(t=RP.call(this)||this).firestore=e,t}function FP(e,t){if((e=ta(e)).firestore!==t)throw new cb(ub.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var jP,UP=(Qi(qP,jP=G),qP.prototype.convertBytes=function(e){return new ex(e)},qP.prototype.convertReference=function(e){return e=this.convertDocumentKey(e,this.firestore._databaseId),new AA(this.firestore,null,e)},qP);function qP(e){var t=this;return(t=jP.call(this)||this).firestore=e,t}function VP(e,t,n){e=EA(e,AA);var r=EA(e.firestore,HA);return t=PP(e.converter,t,n),zP(r,[mx(gx(r),"setDoc",e._key,t,null!==e.converter,n).toMutation(e._key,Mw.none())])}function BP(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=EA(e,AA);var o=EA(e.firestore,HA),a=gx(o);return zP(o,[("string"==typeof(t=ta(t))||t instanceof ZA?Lx(a,"updateDoc",e._key,t,n,r):Dx(a,"updateDoc",e._key,t)).toMutation(e._key,Mw.exists(!0))])}function KP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e=ta(e);var r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||KA(t[i])||(r=t[i],i++);var o,a,s,u,c,l,h={includeMetadataChanges:r.includeMetadataChanges};return KA(t[i])&&(o=t[i],t[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),t[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),t[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof AA?(s=EA(e.firestore,HA),u=ew(e._key.path),l={next:function(n){t[i]&&t[i](WP(s,e,n))},error:t[i+1],complete:t[i+2]}):(a=EA(e,xA),s=EA(a.firestore,HA),u=a._query,c=new UP(s),l={next:function(e){t[i]&&t[i](new rP(s,c,a,e))},error:t[i+1],complete:t[i+2]},cP(e._query)),function(e,t,n){var r=this,i=new MN(l),o=new VC(t,i,n);return e.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return t=jC,[4,eA(e)];case 1:return[2,t.apply(void 0,[n.sent(),o])]}}))}))})),function(){i.Wo(),e.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return t=UC,[4,eA(e)];case 1:return[2,t.apply(void 0,[n.sent(),o])]}}))}))}))}}(YA(s),u,h)}function zP(e,t){return function(e,t){var n=this,r=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Xi(this,(function(i){switch(i.label){case 0:return n=oN,[4,ZN(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(YA(e),t)}function WP(e,t,n){var r=n.docs.get(t._key),i=new UP(e);return new tP(e,i,t._key,r,new eP(n.hasPendingWrites,n.fromCache),t.converter)}var HP,GP=(YP.prototype.get=function(e){var t=this,n=FP(e,this._firestore),r=new OP(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return mb();if((e=e[0]).isFoundDocument())return new Gx(t._firestore,r,e.key,e,n.converter);if(e.isNoDocument())return new Gx(t._firestore,r,n._key,null,n.converter);throw mb()}))},YP.prototype.set=function(e,t,n){return t=PP((e=FP(e,this._firestore)).converter,t,n),n=mx(this._dataReader,"Transaction.set",e._key,t,null!==e.converter,n),this._transaction.set(e._key,n),this},YP.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return e=FP(e,this._firestore),t="string"==typeof(t=ta(t))||t instanceof ZA?Lx(this._dataReader,"Transaction.update",e._key,t,n,r):Dx(this._dataReader,"Transaction.update",e._key,t),this._transaction.update(e._key,t),this},YP.prototype.delete=function(e){return e=FP(e,this._firestore),this._transaction.delete(e._key),this},Qi(QP,HP=YP),QP.prototype.get=function(e){var t=this,n=FP(e,this._firestore),r=new UP(this._firestore);return HP.prototype.get.call(this,e).then((function(e){return new tP(t._firestore,r,n._key,e._document,new eP(!1,!1),n.converter)}))},QP);function QP(e,t){var n=this;return(n=HP.call(this,e,t)||this)._firestore=e,n}function YP(e,t){this._firestore=e,this._transaction=t,this._dataReader=gx(e)}function $P(){if("undefined"==typeof Uint8Array)throw new cb(ub.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function XP(){if("undefined"==typeof atob)throw new cb(ub.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var JP,ZP=(aR.fromBase64String=function(e){return XP(),new aR(ex.fromBase64String(e))},aR.fromUint8Array=function(e){return $P(),new aR(ex.fromUint8Array(e))},aR.prototype.toBase64=function(){return XP(),this._delegate.toBase64()},aR.prototype.toUint8Array=function(){return $P(),this._delegate.toUint8Array()},aR.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},aR.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},aR),eR=(oR.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){JA(e=EA(e,HA));var n=YA(e),r=e._freezeSettings();return XA(n,e=new xN,new NN(e,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},oR.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){JA(e=EA(e,HA));var t=YA(e),n=e._freezeSettings();return XA(t,e=new xN,new AN(e,n.cacheSizeBytes))}(e._delegate)},oR.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new cb(ub.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new DI;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return $i(t,void 0,void 0,(function(){var t;return Xi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return FI.yt()?(t=e+"main",[4,FI.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(ES(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},oR),tR=(Object.defineProperty(iR.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),iR.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||vb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},iR.prototype.useEmulator=function(e,t,n){!function(e,t,n,r){void 0===r&&(r={});var i,o=(e=EA(e,NA))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&vb("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),r.mockUserToken){if("string"==typeof r.mockUserToken)a=r.mockUserToken,i=ik.MOCK_USER;else{var a=po(r.mockUserToken,null===(n=e._app)||void 0===n?void 0:n.options.projectId);if(!(r=r.mockUserToken.sub||r.mockUserToken.user_id))throw new cb(ub.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new ik(r)}e._credentials=new uA(new rA(a,i))}}(this._delegate,e,t,n=void 0===n?{}:n)},iR.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return $i(t,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,$N(e)];case 1:return t=r.sent(),[4,JN(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),(i=n).Or.delete(0),uC(i))]}var i}))}))}))}(YA(EA(this._delegate,HA)))},iR.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return $i(t,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,$N(e)];case 1:return t=r.sent(),[4,JN(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return(t=e).Or.add(0),[4,cC(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(YA(EA(this._delegate,HA)))},iR.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&_A("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},iR.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},iR.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},iR.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(t,void 0,void 0,(function(){var t;return Xi(this,(function(r){switch(r.label){case 0:return t=cN,[4,ZN(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(YA(EA(this._delegate,HA)))},iR.prototype.onSnapshotsInSync=function(e){return function(e,t){var n=this,r=new MN(t);return e.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return t=function(e,t){e.Gr.add(t),t.next()},[4,eA(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return t=function(e,t){e.Gr.delete(t)},[4,eA(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(YA(EA(this._delegate,HA)),KA(e)?e:{next:e})},Object.defineProperty(iR.prototype,"app",{get:function(){if(!this.tu)throw new cb(ub.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),iR.prototype.collection=function(e){try{return new SR(this,FA(this._delegate,e))}catch(e){throw vR(e,"collection()","Firestore.collection()")}},iR.prototype.doc=function(e){try{return new dR(this,jA(this._delegate,e))}catch(e){throw vR(e,"doc()","Firestore.doc()")}},iR.prototype.collectionGroup=function(e){try{return new TR(this,function(e,t){if(e=EA(e,NA),yA("collectionGroup","collection id",t),0<=t.indexOf("/"))throw new cb(ub.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new xA(e,null,new J_(Ob.emptyPath(),t))}(this._delegate,e))}catch(e){throw vR(e,"collectionGroup()","Firestore.collectionGroup()")}},iR.prototype.runTransaction=function(e){var t,n=this;return function(e,t){var n=this,r=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Xi(this,(function(i){switch(i.label){case 0:return[4,YN(e).then((function(e){return e.datastore}))];case 1:return n=i.sent(),new UN(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(YA(t=this._delegate),(function(r){return r=new GP(t,r),e(new sR(n,r))}))},iR.prototype.batch=function(){var e=this;return YA(this._delegate),new uR(new DP(this._delegate,(function(t){return zP(e._delegate,t)})))},iR.prototype.loadBundle=function(e){throw new cb(ub.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},iR.prototype.namedQuery=function(e){throw new cb(ub.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},iR),nR=(Qi(rR,JP=G),rR.prototype.convertBytes=function(e){return new ZP(new ex(e))},rR.prototype.convertReference=function(e){return e=this.convertDocumentKey(e,this.firestore._databaseId),dR.eu(e,this.firestore,null)},rR);function rR(e){var t=this;return(t=JP.call(this)||this).firestore=e,t}function iR(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof oA||(this.tu=e)}function oR(){}function aR(e){this._delegate=e}var sR=(fR.prototype.get=function(e){var t=this,n=RR(e);return this._delegate.get(n).then((function(e){return new _R(t._firestore,new tP(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},fR.prototype.set=function(e,t,n){return e=RR(e),n?(bA("Transaction.set",n),this._delegate.set(e,t,n)):this._delegate.set(e,t),this},fR.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=RR(e);return 2===arguments.length?this._delegate.update(o,t):(e=this._delegate).update.apply(e,eo([o,t,n],r)),this},fR.prototype.delete=function(e){return e=RR(e),this._delegate.delete(e),this},fR),uR=(hR.prototype.set=function(e,t,n){return e=RR(e),n?(bA("WriteBatch.set",n),this._delegate.set(e,t,n)):this._delegate.set(e,t),this},hR.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=RR(e);return 2===arguments.length?this._delegate.update(o,t):(e=this._delegate).update.apply(e,eo([o,t,n],r)),this},hR.prototype.delete=function(e){return e=RR(e),this._delegate.delete(e),this},hR.prototype.commit=function(){return this._delegate.commit()},hR),cR=(lR.prototype.fromFirestore=function(e,t){return e=new nP(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null),this._delegate.fromFirestore(new wR(this._firestore,e),null!=t?t:{})},lR.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},lR.nu=function(e,t){var n=lR.su,r=n.get(e);return r||(r=new WeakMap,n.set(e,r)),(n=r.get(t))||(n=new lR(e,new nR(e),t),r.set(t,n)),n},lR);function lR(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}function hR(e){this._delegate=e}function fR(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nR(e)}cR.su=new WeakMap;var dR=(pR.iu=function(e,t,n){if(e.length%2!=0)throw new cb(ub.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new pR(t,new AA(t._delegate,n,new Jb(e)))},pR.eu=function(e,t,n){return new pR(t,new AA(t._delegate,n,e))},Object.defineProperty(pR.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(pR.prototype,"parent",{get:function(){return new SR(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(pR.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),pR.prototype.collection=function(e){try{return new SR(this.firestore,FA(this._delegate,e))}catch(e){throw vR(e,"collection()","DocumentReference.collection()")}},pR.prototype.isEqual=function(e){return(e=ta(e))instanceof AA&&UA(this._delegate,e)},pR.prototype.set=function(e,t){t=bA("DocumentReference.set",t);try{return t?VP(this._delegate,e,t):VP(this._delegate,e)}catch(e){throw vR(e,"setDoc()","DocumentReference.set()")}},pR.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?BP(this._delegate,e):BP.apply(void 0,eo([this._delegate,e,t],n))}catch(e){throw vR(e,"updateDoc()","DocumentReference.update()")}},pR.prototype.delete=function(){return zP(EA((e=this._delegate).firestore,HA),[new tT(e._key,Mw.none())]);var e},pR.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=gR(t),i=mR(t,(function(t){return new _R(e.firestore,new tP(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return KP(this._delegate,r,i)},pR.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=EA(e,AA);var t=EA(e.firestore,HA),n=YA(t),r=new UP(t);return function(e,t){var n=this,r=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Xi(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i;return Xi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=t,(s=e).persistence.runTransaction("read document","readonly",(function(e){return s.Mn.mn(e,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new cb(ub.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=AC(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s}))}))},[4,XN(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new tP(t,r,e._key,n,new eP(null!==n&&n.hasLocalMutations,!0),e.converter)}))}:"server"===(null==e?void 0:e.source)?function(e){e=EA(e,AA);var t=EA(e.firestore,HA);return tA(YA(t),e._key,{source:"server"}).then((function(n){return WP(t,e,n)}))}:function(e){e=EA(e,AA);var t=EA(e.firestore,HA);return tA(YA(t),e._key).then((function(n){return WP(t,e,n)}))})(this._delegate).then((function(e){return new _R(t.firestore,new tP(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},pR.prototype.withConverter=function(e){return new pR(this.firestore,e?this._delegate.withConverter(cR.nu(this.firestore,e)):this._delegate.withConverter(null))},pR);function pR(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nR(e)}function vR(e,t,n){return e.message=e.message.replace(t,n),e}function gR(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!KA(r))return r}return{}}function mR(e,t){var n;return{next:function(e){n.next&&n.next(t(e))},error:null===(e=(n=KA(e[0])?e[0]:KA(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===e?void 0:e.bind(n),complete:null===(e=n.complete)||void 0===e?void 0:e.bind(n)}}var yR,bR,_R=(Object.defineProperty(PR.prototype,"ref",{get:function(){return new dR(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(PR.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(PR.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(PR.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),PR.prototype.data=function(e){return this._delegate.data(e)},PR.prototype.get=function(e,t){return this._delegate.get(e,t)},PR.prototype.isEqual=function(e){return uP(this._delegate,e._delegate)},PR),wR=(Qi(xR,bR=_R),xR.prototype.data=function(e){return this._delegate.data(e)},xR),TR=(AR.prototype.where=function(e,t,n){try{return new AR(this.firestore,lP(this._delegate,(r=n,i=t,o=Xx("where",e),new gP(o,i,r))))}catch(e){throw vR(e,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},AR.prototype.orderBy=function(e,t){try{return new AR(this.firestore,lP(this._delegate,(n=void 0===t?"asc":t,r=Xx("orderBy",e),new mP(r,n))))}catch(e){throw vR(e,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},AR.prototype.limit=function(e){try{return new AR(this.firestore,lP(this._delegate,(SA("limit",t=e),new yP("limit",t,"F"))))}catch(e){throw vR(e,"limit()","Query.limit()")}var t},AR.prototype.limitToLast=function(e){try{return new AR(this.firestore,lP(this._delegate,(SA("limitToLast",t=e),new yP("limitToLast",t,"L"))))}catch(e){throw vR(e,"limitToLast()","Query.limitToLast()")}var t},AR.prototype.startAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new AR(this.firestore,lP(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new bP("startAt",e,!0)}.apply(void 0,e)))}catch(e){throw vR(e,"startAt()","Query.startAt()")}},AR.prototype.startAfter=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new AR(this.firestore,lP(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new bP("startAfter",e,!1)}.apply(void 0,e)))}catch(e){throw vR(e,"startAfter()","Query.startAfter()")}},AR.prototype.endBefore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new AR(this.firestore,lP(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new _P("endBefore",e,!0)}.apply(void 0,e)))}catch(e){throw vR(e,"endBefore()","Query.endBefore()")}},AR.prototype.endAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new AR(this.firestore,lP(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new _P("endAt",e,!1)}.apply(void 0,e)))}catch(e){throw vR(e,"endAt()","Query.endAt()")}},AR.prototype.isEqual=function(e){return qA(this._delegate,e._delegate)},AR.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=EA(e,xA);var t=EA(e.firestore,HA),n=YA(t),r=new UP(t);return function(e,t){var n=this,r=new DI;return e.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Xi(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,BS(e,t,!0)];case 1:return o=a.sent(),r=new JC(t,o.Bn),i=r._o(o.documents),i=r.applyChanges(i,!1),n.resolve(i.snapshot),[3,3];case 2:return i=a.sent(),o=AC(i,"Failed to execute query '"+t+" against cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,XN(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new rP(t,r,e,n)}))}:"server"===(null==e?void 0:e.source)?function(e){e=EA(e,xA);var t=EA(e.firestore,HA),n=YA(t),r=new UP(t);return nA(n,e._query,{source:"server"}).then((function(n){return new rP(t,r,e,n)}))}:function(e){e=EA(e,xA);var t=EA(e.firestore,HA),n=YA(t),r=new UP(t);return cP(e._query),nA(n,e._query).then((function(n){return new rP(t,r,e,n)}))})(this._delegate).then((function(e){return new ER(t.firestore,new rP(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},AR.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=gR(t),i=mR(t,(function(t){return new ER(e.firestore,new rP(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return KP(this._delegate,r,i)},AR.prototype.withConverter=function(e){return new AR(this.firestore,e?this._delegate.withConverter(cR.nu(this.firestore,e)):this._delegate.withConverter(null))},AR),IR=(Object.defineProperty(NR.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(NR.prototype,"doc",{get:function(){return new wR(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(NR.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(NR.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),NR),ER=(Object.defineProperty(CR.prototype,"query",{get:function(){return new TR(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new wR(e._firestore,t)}))},enumerable:!1,configurable:!0}),CR.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IR(t._firestore,e)}))},CR.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new wR(n._firestore,r))}))},CR.prototype.isEqual=function(e){return uP(this._delegate,e._delegate)},CR),SR=(Qi(kR,yR=TR),Object.defineProperty(kR.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(kR.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(kR.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new dR(this.firestore,e):null},enumerable:!1,configurable:!0}),kR.prototype.doc=function(e){try{return new dR(this.firestore,void 0===e?jA(this._delegate):jA(this._delegate,e))}catch(e){throw vR(e,"doc()","CollectionReference.doc()")}},kR.prototype.add=function(e){var t,n,r,i=this;return n=e,e=EA((t=this._delegate).firestore,HA),r=jA(t),n=PP(t.converter,n),zP(e,[mx(gx(t.firestore),"addDoc",r._key,n,null!==t.converter,{}).toMutation(r._key,Mw.exists(!1))]).then((function(){return r})).then((function(e){return new dR(i.firestore,e)}))},kR.prototype.isEqual=function(e){return UA(this._delegate,e._delegate)},kR.prototype.withConverter=function(e){return new kR(this.firestore,e?this._delegate.withConverter(cR.nu(this.firestore,e)):this._delegate.withConverter(null))},kR);function kR(e,t){var n=this;return(n=yR.call(this,e,t)||this).firestore=e,n._delegate=t,n}function CR(e,t){this._firestore=e,this._delegate=t}function NR(e,t){this._firestore=e,this._delegate=t}function AR(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nR(e)}function xR(){return null!==bR&&bR.apply(this,arguments)||this}function PR(e,t){this._firestore=e,this._delegate=t}function RR(e){return EA(e,AA)}function OR(e){this._delegate=e}function DR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(ZA.bind.apply(ZA,eo([void 0],e)))}function LR(e){return t=this._delegate,n=e,r=YA(t=EA(t,HA)),e=new WA,function(e,t,r){var i,o=this,a=(i=n,t=Hk(t),i=function(e){if(e instanceof Uint8Array)return LN(e,void 0);if(e instanceof ArrayBuffer)return LN(new Uint8Array(e),void 0);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new FN(i,t));e.asyncQueue.enqueueAndForget((function(){return $i(o,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return t=EN,[4,ZN(e)];case 1:return t.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(r,t._databaseId,e),e;var t,n,r}function MR(e){var t=this,n=this._delegate;return function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return $i(n,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=e;return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,XN(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(YA(n=EA(n,HA)),e).then((function(e){return e?new xA(n,null,e.query):null})).then((function(e){return e?new TR(t,e):null}))}DR.documentId=function(){return new DR(Lb.keyField().canonicalString())},DR.prototype.isEqual=function(e){return(e=ta(e))instanceof ZA&&this._delegate._internalPath.isEqual(e._internalPath)},H=DR,OR.serverTimestamp=function(){var e=new kx("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new OR(e)},OR.delete=function(){var e=new bx("deleteField");return e._methodName="FieldValue.delete",new OR(e)},OR.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Cx("arrayUnion",e)}.apply(void 0,e);return n._methodName="FieldValue.arrayUnion",new OR(n)},OR.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Nx("arrayRemove",e)}.apply(void 0,e);return n._methodName="FieldValue.arrayRemove",new OR(n)},OR.increment=function(e){return(e=new Ax("increment",e))._methodName="FieldValue.increment",new OR(e)},OR.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)};var FR,jR,UR={Firestore:tR,GeoPoint:nx,Timestamp:Eb,Blob:ZP,Transaction:sR,WriteBatch:uR,DocumentReference:dR,DocumentSnapshot:_R,Query:TR,QueryDocumentSnapshot:wR,QuerySnapshot:ER,CollectionReference:SR,FieldPath:H,FieldValue:G=OR,setLogLevel:function(e){lb.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(FR=Oa).INTERNAL.registerComponent(new na("firestore",(function(e){var t=e.getProvider("app").getImmediate();return e=e.getProvider("auth-internal"),new tR(t,new HA(t,e),new eR)}),"PUBLIC").setServiceProps(Object.assign({},UR))),FR.registerVersion("@firebase/firestore","2.4.1"),(jR=tR).prototype.loadBundle=LR,jR.prototype.namedQuery=MR;var qR,VR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},BR=(Qi(KR,qR=Error),KR);function KR(e,t,n){return t=qR.call(this,t)||this,Object.setPrototypeOf(t,KR.prototype),t.code=e,t.details=n,t}function zR(e,t,n){var r=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;e=void 0;try{var o=t&&t.error;if(o){var a=o.status;if("string"==typeof a){if(!VR[a])return new BR("internal","internal");r=VR[a],i=a}var s=o.message;"string"==typeof s&&(i=s),void 0!==(e=o.details)&&(e=n.decode(e))}}catch(e){}return"ok"===r?null:new BR(r,i,e)}var WR=(HR.prototype.getAuthToken=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},HR.prototype.getInstanceIdToken=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},HR.prototype.getContext=function(){return $i(this,void 0,void 0,(function(){var e,t;return Xi(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},HR);function HR(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}function GR(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}var QR=(YR.prototype.encode=function(e){var t=this;if(null==e)return null;if("number"==typeof(e=e instanceof Number?e.valueOf():e)&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return GR(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},YR.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?GR(e,(function(e){return t.decode(e)})):e},YR);function YR(){}var $R,XR,JR,ZR=(Object.defineProperty(eO.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),eO.prototype._url=function(e){var t=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e:this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e},eO.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},eO.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},eO.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},eO.prototype.postJSON=function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},eO.prototype.getAppCheckToken=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},eO.prototype.call=function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o,a,s;return Xi(this,(function(u){switch(u.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=u.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,c=s,h=new Promise((function(e,t){l=setTimeout((function(){t(new BR("deadline-exceeded","deadline-exceeded"))}),c)})),s=(a={timer:l,promise:h}).timer,a=a.promise,[4,Promise.race([tO(s,this.postJSON(r,i,o)),a,tO(s,this.cancelAllRequests)])];case 2:if(!(a=u.sent()))throw new BR("cancelled","Firebase Functions instance was deleted.");if(s=zR(a.status,a.json,this.serializer))throw s;if(!a.json)throw new BR("internal","Response is not valid JSON object.");if(void 0===(s=void 0===(s=a.json.data)?a.json.result:s))throw new BR("internal","Response is missing data field.");return[2,{data:this.serializer.decode(s)}]}var c,l,h}))}))},eO);function eO(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new QR,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new WR(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(e){this.customDomain=null,this.region=i}}function tO(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}function nO(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function rO(e,t,n){var r,i=new Promise((function(i,o){nO(r=e[t].apply(e,n)).then(i,o)}));return i.request=r,i}function iO(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function oO(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return rO(this[t],r,arguments)})}))}function aO(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function sO(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return e=this[t],(n=rO(e,r,arguments)).then((function(e){if(e)return new cO(e,n.request)}));var e,n})}))}function uO(e){this._index=e}function cO(e,t){this._cursor=e,this._request=t}function lO(e){this._store=e}function hO(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function fO(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new hO(n)}function dO(e){this._db=e}function pO(e,t,n){var r=(t=rO(indexedDB,"open",[e,t])).request;return r&&(r.onupgradeneeded=function(e){n&&n(new fO(r.result,e.oldVersion,r.transaction))}),t.then((function(e){return new dO(e)}))}function vO(e){return rO(indexedDB,"deleteDatabase",[e])}$R=Oa,XR=fetch.bind(self),JR={Functions:ZR},$R.INTERNAL.registerComponent(new na("functions",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return t=e.getProvider("app-check-internal"),e=e.getProvider("messaging"),new ZR(r,i,e,t,n,XR)}),"PUBLIC").setServiceProps(JR).setMultipleInstances(!0)),Oa.registerVersion("@firebase/functions","0.6.16"),iO(uO,"_index",["name","keyPath","multiEntry","unique"]),oO(uO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),sO(uO,"_index",IDBIndex,["openCursor","openKeyCursor"]),iO(cO,"_cursor",["direction","key","primaryKey","value"]),oO(cO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(cO.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),nO(t._request).then((function(e){if(e)return new cO(e,t._request)}))}))})})),lO.prototype.createIndex=function(){return new uO(this._store.createIndex.apply(this._store,arguments))},lO.prototype.index=function(){return new uO(this._store.index.apply(this._store,arguments))},iO(lO,"_store",["name","keyPath","indexNames","autoIncrement"]),oO(lO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),sO(lO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),aO(lO,"_store",IDBObjectStore,["deleteIndex"]),hO.prototype.objectStore=function(){return new lO(this._tx.objectStore.apply(this._tx,arguments))},iO(hO,"_tx",["objectStoreNames","mode"]),aO(hO,"_tx",IDBTransaction,["abort"]),fO.prototype.createObjectStore=function(){return new lO(this._db.createObjectStore.apply(this._db,arguments))},iO(fO,"_db",["name","version","objectStoreNames"]),aO(fO,"_db",IDBDatabase,["deleteObjectStore","close"]),dO.prototype.transaction=function(){return new hO(this._db.transaction.apply(this._db,arguments))},iO(dO,"_db",["name","version","objectStoreNames"]),aO(dO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[lO,uO].forEach((function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var t=(r=arguments,Array.prototype.slice.call(r)),n=t[t.length-1],r=this._store||this._index,i=r[e].apply(r,t.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[uO,lO].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})}));var gO=1e4,mO="w:0.4.32",yO="FIS_v2",bO="https://firebaseinstallations.googleapis.com/v1",_O=36e5,wO=((H={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',H["not-registered"]="Firebase Installation is not registered.",H["installation-not-found"]="Firebase Installation not found.",H["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',H["app-offline"]="Could not process request. Application offline.",H["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",new No("installations","Installations",G=H));function TO(e){return e instanceof ko&&e.code.includes("request-failed")}function IO(e){return e=e.projectId,bO+"/projects/"+e+"/installations"}function EO(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function SO(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,t.json()];case 1:return n=(n=r.sent()).error,[2,wO.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}}))}))}function kO(e){return e=e.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function CO(e,t){return t=t.refreshToken,(e=kO(e)).append("Authorization",yO+" "+t),e}function NO(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return 500<=(t=n.sent()).status&&t.status<600?[2,e()]:[2,t]}}))}))}function AO(e){return new Promise((function(t){setTimeout(t,e)}))}var xO=/^[cdef][\w-]{21}$/,PO="";function RO(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return btoa(String.fromCharCode.apply(String,eo([],Zi(e)))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22);return xO.test(t)?t:PO}catch(e){return PO}}function OO(e){return e.appName+"!"+e.appId}var DO=new Map;function LO(e,t){MO(e=OO(e),t),function(e,t){var n=jO();n&&n.postMessage({key:e,fid:t}),UO()}(e,t)}function MO(e,t){var n,r;if(e=DO.get(e))try{for(var i=Ji(e),o=i.next();!o.done;o=i.next())(0,o.value)(t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var FO=null;function jO(){return!FO&&"BroadcastChannel"in self&&((FO=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){MO(e.data.key,e.data.fid)}),FO}function UO(){0===DO.size&&FO&&(FO.close(),FO=null)}var qO,VO="firebase-installations-database",BO=1,KO="firebase-installations-store",zO=null;function WO(){return zO=zO||pO(VO,BO,(function(e){0===e.oldVersion&&e.createObjectStore(KO)}))}function HO(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return n=OO(e),[4,WO()];case 1:return i=a.sent(),r=i.transaction(KO,"readwrite"),[4,(i=r.objectStore(KO)).get(n)];case 2:return o=a.sent(),[4,i.put(t,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),o&&o.fid===t.fid||LO(e,t.fid),[2,t]}}))}))}function GO(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return t=OO(e),[4,WO()];case 1:return[4,(n=(n=r.sent()).transaction(KO,"readwrite")).objectStore(KO).delete(t)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}function QO(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return n=OO(e),[4,WO()];case 1:return i=s.sent(),r=i.transaction(KO,"readwrite"),[4,(i=r.objectStore(KO)).get(n)];case 2:return o=s.sent(),void 0!==(a=t(o))?[3,4]:[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(a,n)];case 5:s.sent(),s.label=6;case 6:return[4,r.complete];case 7:return s.sent(),!a||o&&o.fid===a.fid||LO(e,a.fid),[2,a]}}))}))}function YO(e){return $i(this,void 0,void 0,(function(){var t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,QO(e,(function(n){return n=XO(n||{fid:RO(),registrationStatus:0}),n=function(e,t){return 0!==t.registrationStatus?1===t.registrationStatus?{installationEntry:t,registrationPromise:function(e){return $i(this,void 0,void 0,(function(){var t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,$O(e)];case 1:t=i.sent(),i.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,AO(100)];case 3:return i.sent(),[4,$O(e)];case 4:return t=i.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,YO(e)];case 6:return r=i.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,t]}}))}))}(e)}:{installationEntry:t}:navigator.onLine?(e=function(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(e,t){var n=t.fid;return $i(this,void 0,void 0,(function(){var t,r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return t=IO(e),r=kO(e),a={fid:n,authVersion:yO,appId:e.appId,sdkVersion:mO},i={method:"POST",headers:r,body:JSON.stringify(a)},[4,NO((function(){return fetch(t,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:EO(a.authToken)}];case 3:return[4,SO("Create Installation",o)];case 4:throw s.sent()}}))}))}(e,t)];case 1:return n=i.sent(),[2,HO(e,n)];case 2:return TO(r=i.sent())&&409===r.customData.serverCode?[4,GO(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,HO(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()}),{installationEntry:t,registrationPromise:e}):{installationEntry:t,registrationPromise:Promise.reject(wO.create("app-offline"))}}(e,n),t=n.registrationPromise,n.installationEntry}))];case 1:return(n=i.sent()).fid!==PO?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function $O(e){return QO(e,(function(e){if(!e)throw wO.create("installation-not-found");return XO(e)}))}function XO(e){return 1===(t=e).registrationStatus&&t.registrationTime+gO<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function JO(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return $i(this,void 0,void 0,(function(){var e,i,o,a,s;return Xi(this,(function(u){switch(u.label){case 0:return e=function(e,t){return t=t.fid,IO(e)+"/"+t+"/authTokens:generate"}(n,t),i=CO(n,t),(s=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:mO}},o={method:"POST",headers:i,body:JSON.stringify(s)},[4,NO((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,EO(s=u.sent())];case 3:return[4,SO("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function ZO(e,t){return void 0===t&&(t=!1),$i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:return[4,QO(e.appConfig,(function(r){if(!tD(r))throw wO.create("not-registered");var i,o=r.authToken;if(t||2!==(i=o).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+_O}(i)){if(1===o.requestStatus)return n=function(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,eD(e.appConfig)];case 1:n=r.sent(),r.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,AO(100)];case 3:return r.sent(),[4,eD(e.appConfig)];case 4:return n=r.sent(),[3,2];case 5:return 0===(n=n.authToken).requestStatus?[2,ZO(e,t)]:[2,n]}}))}))}(e,t),r;if(!navigator.onLine)throw wO.create("app-offline");return i=r,o={requestStatus:1,requestTime:Date.now()},o=Yi(Yi({},i),{authToken:o}),n=function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,JO(e,t)];case 1:return n=o.sent(),i=Yi(Yi({},t),{authToken:n}),[4,HO(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!TO(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,GO(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Yi(Yi({},t),{authToken:{requestStatus:0}}),[4,HO(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}return r}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function eD(e){return QO(e,(function(e){if(!tD(e))throw wO.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+gO<Date.now()?Yi(Yi({},e),{authToken:{requestStatus:0}}):e}))}function tD(e){return void 0!==e&&2===e.registrationStatus}function nD(e,t){return void 0===t&&(t=!1),$i(this,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return[4,function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return[4,YO(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(e.appConfig)];case 1:return n.sent(),[4,ZO(e,t)];case 2:return[2,n.sent().token]}}))}))}function rD(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:return n=function(e,t){return t=t.fid,IO(e)+"/"+t}(e,t),i=CO(e,t),r={method:"DELETE",headers:i},[4,NO((function(){return fetch(n,r)}))];case 1:return(i=o.sent()).ok?[3,3]:[4,SO("Delete Installation",i)];case 2:throw o.sent();case 3:return[2]}}))}))}function iD(e,t){var n=e.appConfig;return function(e,t){jO();var n=OO(e);(e=DO.get(n))||(e=new Set,DO.set(n,e)),e.add(t)}(n,t),function(){var e,r,i;r=t,i=OO(e=n),(e=DO.get(i))&&(e.delete(r),0===e.size&&DO.delete(i),UO())}}function oD(e){return wO.create("missing-app-config-values",{valueName:e})}(qO=Oa).INTERNAL.registerComponent(new na("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw oD("App Configuration");if(!e.name)throw oD("App Name");try{for(var r=Ji(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw oD(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,YO(e.appConfig)];case 1:return t=r.sent(),n=t.installationEntry,(t.registrationPromise||ZO(e)).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(e){return nD(n,e)},delete:function(){return function(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,QO(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw wO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw wO.create("app-offline");case 3:return[4,rD(t,n)];case 4:return r.sent(),[4,GO(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return iD(n,e)}}}),"PUBLIC")),qO.registerVersion("@firebase/installations","0.4.32"),(H={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',H["only-available-in-window"]="This method is available in a Window context.",H["only-available-in-sw"]="This method is available in a service worker context.",H["permission-default"]="The notification permission was not granted and dismissed instead.",H["permission-blocked"]="The notification permission was not granted and blocked instead.",H["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",H["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",H["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",H["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",H["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",H["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",H["token-update-no-token"]="FCM returned no token when updating the user to push.",H["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",H["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",H["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",H["invalid-vapid-key"]="The public VAPID key must be a string.",H["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.";var aD,sD=new No("messaging","Messaging",G=H),uD="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cD="https://fcmregistrations.googleapis.com/v1",lD="FCM_MSG",hD="google.c.a.c_id";function fD(e){return e=new Uint8Array(e),btoa(String.fromCharCode.apply(String,eo([],Zi(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(H=aD=aD||{}).PUSH_RECEIVED="push-received",H.NOTIFICATION_CLICKED="notification-clicked";var dD="fcm_token_details_db",pD=5,vD="fcm_token_object_Store";function gD(e){return $i(this,void 0,void 0,(function(){var t,n=this;return Xi(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(e){return e.name})).includes(dD))return[2,null];r.label=2;case 2:return t=null,[4,pO(dD,pD,(function(r){return $i(n,void 0,void 0,(function(){var n,i,o;return Xi(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(vD)?[4,(o=r.transaction.objectStore(vD)).index("fcmSenderId").get(e)]:[2];case 1:return n=a.sent(),[4,o.clear()];case 2:if(a.sent(),!n)return[2];if(2===r.oldVersion){if(!(i=n).auth||!i.p256dh||!i.endpoint)return[2];t={token:i.fcmToken,createTime:null!==(o=i.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:i.auth,p256dh:i.p256dh,endpoint:i.endpoint,swScope:i.swScope,vapidKey:"string"==typeof i.vapidKey?i.vapidKey:fD(i.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(t={token:(i=n).fcmToken,createTime:i.createTime,subscriptionOptions:{auth:fD(i.auth),p256dh:fD(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:fD(i.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,vO(dD)];case 4:return r.sent(),[4,vO("fcm_vapid_details_db")];case 5:return r.sent(),[4,vO("undefined")];case 6:return r.sent(),[2,function(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(t)?t:null]}}))}))}var mD="firebase-messaging-database",yD=1,bD="firebase-messaging-store",_D=null;function wD(){return _D=_D||pO(mD,yD,(function(e){0===e.oldVersion&&e.createObjectStore(bD)}))}function TD(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return t=ED(e),[4,wD()];case 1:return[4,r.sent().transaction(bD).objectStore(bD).get(t)];case 2:return(t=r.sent())?[2,t]:[3,3];case 3:return[4,gD(e.appConfig.senderId)];case 4:return(n=r.sent())?[4,ID(e,n)]:[3,6];case 5:return r.sent(),[2,n];case 6:return[2]}}))}))}function ID(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return n=ED(e),[4,wD()];case 1:return[4,(r=(r=i.sent()).transaction(bD,"readwrite")).objectStore(bD).put(t,n)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2,t]}}))}))}function ED(e){return e.appConfig.appId}function SD(e,t){return $i(this,void 0,void 0,(function(){var n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,CD(e)];case 1:n={method:"DELETE",headers:n=i.sent()},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(kD(e.appConfig)+"/"+t,n)];case 3:return[4,i.sent().json()];case 4:if((n=i.sent()).error)throw r=n.error.message,sD.create("token-unsubscribe-failed",{errorInfo:r});return[3,6];case 5:throw r=i.sent(),sD.create("token-unsubscribe-failed",{errorInfo:r});case 6:return[2]}}))}))}function kD(e){return e=e.projectId,cD+"/projects/"+e+"/registrations"}function CD(e){var t=e.appConfig,n=e.installations;return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function ND(e){var t=e.p256dh,n=e.auth;return t={web:{endpoint:e.endpoint,auth:n,p256dh:t}},(e=e.vapidKey)!==uD&&(t.web.applicationPubKey=e),t}function AD(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Xi(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw sD.create("permission-blocked");return[4,function(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}(t)})]}}))}))}(t,n)];case 1:return o=a.sent(),[4,TD(e)];case 2:return r=a.sent(),i={vapidKey:n,swScope:t.scope,endpoint:o.endpoint,auth:fD(o.getKey("auth")),p256dh:fD(o.getKey("p256dh"))},r?[3,3]:[2,PD(e,i)];case 3:if(s=r.subscriptionOptions,u=i.vapidKey===s.vapidKey,c=i.endpoint===s.endpoint,l=i.auth===s.auth,s=i.p256dh===s.p256dh,u&&c&&l&&s)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,SD(e,r.token)];case 5:return a.sent(),[3,7];case 6:return o=a.sent(),console.warn(o),[3,7];case 7:return[2,PD(e,i)];case 8:return Date.now()>=r.createTime+6048e5?[2,function(e,t,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return[4,CD(e)];case 1:n=a.sent(),r=ND(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(kD(e.appConfig)+"/"+t.token,r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),sD.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,sD.create("token-update-failed",{errorInfo:o});if(!i.token)throw sD.create("token-update-no-token");return[2,i.token]}}))}))}(t,e)];case 1:return r=a.sent(),i=Yi(Yi({},e),{token:r,createTime:Date.now()}),[4,ID(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,xD(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}({token:r.token,createTime:Date.now(),subscriptionOptions:i},e,t)]:[2,r.token];case 9:return[2]}var s,u,c,l}))}))}function xD(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,TD(e)];case 1:return(n=r.sent())?[4,SD(e,n.token)]:[3,4];case 2:return r.sent(),[4,function(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return t=ED(e),[4,wD()];case 1:return[4,(n=(n=r.sent()).transaction(bD,"readwrite")).objectStore(bD).delete(t)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}(e)];case 3:r.sent(),r.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(n=r.sent())?[2,n.unsubscribe()]:[2,!0]}}))}))}function PD(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,function(e,t){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return[4,CD(e)];case 1:n=a.sent(),r=ND(t),r={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(kD(e.appConfig),r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),sD.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,sD.create("token-subscribe-failed",{errorInfo:o});if(!i.token)throw sD.create("token-subscribe-no-token");return[2,i.token]}}))}))}(e,t)];case 1:return n={token:n=r.sent(),createTime:Date.now(),subscriptionOptions:t},[4,ID(e,n)];case 2:return r.sent(),[2,n.token]}}))}))}function RD(e){return"object"==typeof e&&e&&hD in e}function OD(e){return new Promise((function(t){setTimeout(t,e)}))}var DD=(Object.defineProperty(LD.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),LD.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw sD.create("invalid-bg-handler");this.bgMessageHandler=e},LD.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},LD.prototype.getToken=function(){var e;return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return this.vapidKey?[3,2]:[4,TD(this.firebaseDependencies)];case 1:t=n.sent(),this.vapidKey=null!==(e=null===(e=null==t?void 0:t.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==e?e:uD,n.label=2;case 2:return[2,AD(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},LD.prototype.deleteToken=function(){return xD(this.firebaseDependencies,self.registration)},LD.prototype.requestPermission=function(){throw sD.create("only-available-in-window")},LD.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw sD.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw sD.create("invalid-vapid-key");this.vapidKey=e},LD.prototype.useServiceWorker=function(){throw sD.create("only-available-in-window")},LD.prototype.onMessage=function(){throw sD.create("only-available-in-window")},LD.prototype.onTokenRefresh=function(){throw sD.create("only-available-in-window")},LD.prototype.onPush=function(e){return $i(this,void 0,void 0,(function(){var t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return(r=function(e){if(!(e=e.data))return null;try{return e.json()}catch(e){return null}}(e))?[4,MD()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(t=i.sent()).some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))?[2,function(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=aD.PUSH_RECEIVED;try{for(var i=Ji(e),o=i.next();!o.done;o=i.next())o.value.postMessage(t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(t,r)]:(n=!1,r.notification?[4,function(e){var t=e.actions,n=Notification.maxActions;return t&&n&&t.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(n=e.title)&&void 0!==n?n:"",e)}(((c=Yi({},(s=r).notification)).data=((u={})[lD]=s,u),c))]:[3,3]);case 2:i.sent(),n=!0,i.label=3;case 3:return!0===n&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=a={from:(o=r).from,collapseKey:o.collapse_key,messageId:o.fcm_message_id},(u=o).notification&&(s.notification={},(c=u.notification.title)&&(s.notification.title=c),(c=u.notification.body)&&(s.notification.body=c),(u=u.notification.image)&&(s.notification.image=u)),s=a,(u=o).data&&(s.data=u.data),s=a,(u=o).fcmOptions&&(s.fcmOptions={},(o=u.fcmOptions.link)&&(s.fcmOptions.link=o),(u=u.fcmOptions.analytics_label)&&(s.fcmOptions.analyticsLabel=u)),r=a,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(r):this.bgMessageHandler.next(r)),[4,OD(1e3)]);case 4:return i.sent(),[2]}var o,a,s,u,c}))}))},LD.prototype.onSubChange=function(e){var t;return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return e.newSubscription?[3,2]:[4,xD(this.firebaseDependencies,self.registration)];case 1:case 5:return r.sent(),[2];case 2:return[4,TD(this.firebaseDependencies)];case 3:return n=r.sent(),[4,xD(this.firebaseDependencies,self.registration)];case 4:return r.sent(),[4,AD(this.firebaseDependencies,self.registration,null!==(t=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==t?t:uD)]}}))}))},LD.prototype.onNotificationClick=function(e){var t;return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Xi(this,(function(s){switch(s.label){case 0:return(n=null===(t=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===t?void 0:t[lD])?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(r=function(e){var t,n=null!==(t=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==t?t:null===(n=e.notification)||void 0===n?void 0:n.click_action;return n||(RD(e.data)?self.location.origin:null)}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(e){return $i(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return Xi(this,(function(u){switch(u.label){case 0:return[4,MD()];case 1:t=u.sent();try{for(n=Ji(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(u){a={error:u}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}(i)]):[2]):[2];case 1:return(a=s.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return a=s.sent(),[4,OD(3e3)];case 3:return s.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=s.sent(),s.label=6;case 6:return a?(n.messageType=aD.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,a.postMessage(n)]):[2]}}))}))},LD);function LD(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}function MD(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var FD=(Object.defineProperty(jD.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),jD.prototype.messageEventListener=function(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===aD.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(i=Object.assign({},t)).messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},t))),RD(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}var i}))}))},jD.prototype.getVapidKey=function(){return this.vapidKey},jD.prototype.getSwReg=function(){return this.swRegistration},jD.prototype.getToken=function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw sD.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,AD(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},jD.prototype.updateVapidKey=function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=uD),[2]}))}))},jD.prototype.updateSwReg=function(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw sD.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},jD.prototype.registerDefaultSw=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=t.sent(),sD.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},jD.prototype.deleteToken=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,xD(this.firebaseDependencies,this.swRegistration)]}}))}))},jD.prototype.requestPermission=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?sD.create("permission-blocked"):sD.create("permission-default")}}))}))},jD.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw sD.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw sD.create("invalid-vapid-key");this.vapidKey=e},jD.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw sD.create("invalid-sw-registration");if(this.swRegistration)throw sD.create("use-sw-after-get-token");this.swRegistration=e},jD.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},jD.prototype.setBackgroundMessageHandler=function(){throw sD.create("only-available-in-sw")},jD.prototype.onBackgroundMessage=function(){throw sD.create("only-available-in-sw")},jD.prototype.onTokenRefresh=function(){return function(){}},jD.prototype.logEvent=function(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case aD.NOTIFICATION_CLICKED:return"notification_open";case aD.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t[hD],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},jD);function jD(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}function UD(e){return sD.create("missing-app-config-values",{valueName:e})}function qD(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}G={isSupported:qD},Oa.INTERNAL.registerComponent(new na("messaging",(function(e){var t=e.getProvider("app").getImmediate();if(e={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw UD("App Configuration Object");if(!e.name)throw UD("App Name");var r=e.options;try{for(var i=Ji(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw UD(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")},!qD())throw sD.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?DD:FD)(e)}),"PUBLIC").setServiceProps(G));var VD,BD="firebasestorage.googleapis.com",KD="storageBucket",zD=(Qi(WD,VD=ko),WD.prototype._codeEquals=function(e){return HD(e)===this.code},Object.defineProperty(WD.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),WD);function WD(e,t){return(e=VD.call(this,HD(e),"Firebase Storage: "+t+" ("+HD(e)+")")||this).customData={serverResponse:null},e._baseMessage=e.message,Object.setPrototypeOf(e,WD.prototype),e}function HD(e){return"storage/"+e}function GD(){return new zD("unknown","An unknown error occurred, please check the error payload for server response.")}function QD(){return new zD("canceled","User canceled the upload/download.")}function YD(){return new zD("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $D(e){return new zD("invalid-argument",e)}function XD(){return new zD("app-deleted","The Firebase app was deleted.")}function JD(e){return new zD("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ZD(e,t){return new zD("invalid-format","String does not match format '"+e+"': "+t)}function eL(e){throw new zD("internal-error","Internal error: "+e)}var tL={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},nL=function(e,t){this.data=e,this.contentType=t||null};function rL(e,t){switch(e){case tL.RAW:return new nL(iL(t));case tL.BASE64:case tL.BASE64URL:return new nL(oL(e,t));case tL.DATA_URL:return new nL(function(e){return(e=new sL(e)).base64?oL(tL.BASE64,e.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw ZD(tL.DATA_URL,"Malformed data URL.")}return iL(t)}(e.rest)}(t),new sL(t).contentType)}throw GD()}function iL(e){for(var t=[],n=0;n<e.length;n++){var r,i,o=e.charCodeAt(n);o<=127?t.push(o):o<=2047?t.push(192|o>>6,128|63&o):55296==(64512&o)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=o,i=e.charCodeAt(++n),t.push(240|(o=65536|(1023&r)<<10|1023&i)>>18,128|o>>12&63,128|o>>6&63,128|63&o)):t.push(239,191,189):56320==(64512&o)?t.push(239,191,189):t.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(t)}function oL(e,t){switch(e){case tL.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ZD(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case tL.BASE64URL:if(r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/"),r||n)throw ZD(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw ZD(e,"Invalid character found")}for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}var aL,sL=function(e){var t;if(this.base64=!1,(this.contentType=null)===(t=e.match(/^data:([^,]+)?,/)))throw ZD(tL.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=t[1]||null;null!=r&&(this.base64=(n=";base64",(t=r).length>=n.length&&t.substring(t.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)},uL={STATE_CHANGED:"state_changed"},cL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lL(e){switch(e){case"running":case"pausing":case"canceling":return cL.RUNNING;case"paused":return cL.PAUSED;case"success":return cL.SUCCESS;case"canceled":return cL.CANCELED;default:return cL.ERROR}}(H=aL=aL||{})[H.NO_ERROR=0]="NO_ERROR",H[H.NETWORK_ERROR=1]="NETWORK_ERROR",H[H.ABORT=2]="ABORT";var hL=(fL.prototype.send=function(e,t,n,r){if(this.sent_)throw eL("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},fL.prototype.getErrorCode=function(){if(!this.sent_)throw eL("cannot .getErrorCode() before sending");return this.errorCode_},fL.prototype.getStatus=function(){if(!this.sent_)throw eL("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},fL.prototype.getResponseText=function(){if(!this.sent_)throw eL("cannot .getResponseText() before sending");return this.xhr_.responseText},fL.prototype.abort=function(){this.xhr_.abort()},fL.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},fL.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},fL.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},fL);function fL(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=aL.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=aL.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=aL.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}var dL=(pL.prototype.createConnection=function(){return new hL},pL);function pL(){}var vL=(Object.defineProperty(gL.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(gL.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),gL.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},gL.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},gL.makeFromBucketSpec=function(e,t){var n;try{n=gL.makeFromUrl(e,t)}catch(t){return new gL(e,"")}if(""===n.path)return n;throw new zD("invalid-default-bucket","Invalid default bucket '"+e+"'.")},gL.makeFromUrl=function(e,t){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(t===BD?"(?:storage.googleapis.com|storage.cloud.google.com)":t)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){n=new gL(l[c.indices.bucket],l[c.indices.path]||""),c.postModify(n);break}}if(null==n)throw new zD("invalid-url","Invalid URL '"+e+"'.");return n},gL);function gL(e,t){this.bucket=e,this.path_=t}var mL=(yL.prototype.getPromise=function(){return this.promise_},yL.prototype.cancel=function(e){},yL);function yL(e){this.promise_=Promise.reject(e)}function bL(e){return"string"==typeof e||e instanceof String}function _L(e){return wL()&&e instanceof Blob}function wL(){return"undefined"!=typeof Blob}function TL(e,t,n,r){if(r<t)throw $D("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(n<r)throw $D("Invalid value for '"+e+"'. Expected "+n+" or less.")}function IL(e,t){var n=t.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+t:t)+"/v0"+e}function EL(e){var t,n=encodeURIComponent,r="?";for(t in e)e.hasOwnProperty(t)&&(r=r+(n(t)+"=")+n(e[t])+"&");return r.slice(0,-1)}var SL=(kL.prototype.start_=function(){var e,t,n,r,i,o,a,s,u,c=this;function l(e,t){var n,r=c.resolve_,i=c.reject_,o=t.connection;if(t.wasSuccessCode)try{var a=c.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(e){i(e)}else null!==o?((n=GD()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):t.canceled?i(n=(c.appDelete_?XD:QD)()):i(n=new zD("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function h(){return 2===a}function f(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];s||(s=!0,t.apply(null,e))}function d(t){i=setTimeout((function(){i=null,e(p,h())}),t)}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];s||(e||h()||o?f.call.apply(f,eo([null,e],t)):(r<64&&(r*=2),d(1===a?(a=2,0):1e3*(r+Math.random()))))}function v(e){u||(u=!0,s||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}this.canceled_?l(0,new CL(!1,null,!0)):this.backoffId_=(e=function(e,t){var n;function r(e){var t=e.loaded;e=e.lengthComputable?e.total:-1,null!==c.progressCallback_&&c.progressCallback_(t,e)}t?e(!1,new CL(!1,null,!0)):(n=c.pool_.createConnection(),c.pendingConnection_=n,null!==c.progressCallback_&&n.addUploadProgressListener(r),n.send(c.url_,c.method_,c.body_,c.headers_).then((function(){null!==c.progressCallback_&&n.removeUploadProgressListener(r),c.pendingConnection_=null;var t,i=n.getErrorCode()===aL.NO_ERROR,o=n.getStatus();i&&!c.isRetryStatusCode_(o)?(t=-1!==c.successCodes_.indexOf(o),e(!0,new CL(t,n))):(t=n.getErrorCode()===aL.ABORT,e(!1,new CL(!1,null,t)))})))},t=l,n=this.timeout_,i=null,u=s=o=!(r=1),d(a=0),setTimeout((function(){o=!0,v(!0)}),n),v)},kL.prototype.getPromise=function(){return this.promise_},kL.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},kL.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=-1!==[408,429].indexOf(e);return e=-1!==this.additionalRetryCodes_.indexOf(e),t||n||e},kL);function kL(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}var CL=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};function NL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(wL())return new Blob(e);throw new zD("unsupported-environment","This browser doesn't seem to support creating Blobs")}var AL=(xL.prototype.size=function(){return this.size_},xL.prototype.type=function(){return this.type_},xL.prototype.slice=function(e,t){if(_L(this.data_)){var n=this.data_;return null===(r=e,i=t,i=n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null)?null:new xL(i)}var r,i;return new xL(new Uint8Array(this.data_.buffer,e,t-e),!0)},xL.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(wL()){var n=e.map((function(e){return e instanceof xL?e.data_:e}));return new xL(NL.apply(null,n))}n=e.map((function(e){return bL(e)?rL(tL.RAW,e).data:e.data_}));var r=0;n.forEach((function(e){r+=e.byteLength}));var i=new Uint8Array(r),o=0;return n.forEach((function(e){for(var t=0;t<e.length;t++)i[o++]=e[t]})),new xL(i,!0)},xL.prototype.uploadData=function(){return this.data_},xL);function xL(e,t){var n=0,r="";_L(e)?(n=(this.data_=e).size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}function PL(e){var t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(e=t)||Array.isArray(e)?null:t}function RL(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function OL(e,t){return t}var DL=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||OL},LL=null;function ML(){if(LL)return LL;var e=[];e.push(new DL("bucket")),e.push(new DL("generation")),e.push(new DL("metageneration")),e.push(new DL("name","fullPath",!0));var t=new DL("name");return t.xform=function(e,t){return!bL(t)||t.length<2?t:RL(t)},e.push(t),(t=new DL("size")).xform=function(e,t){return void 0!==t?Number(t):t},e.push(t),e.push(new DL("timeCreated")),e.push(new DL("updated")),e.push(new DL("md5Hash",null,!0)),e.push(new DL("cacheControl",null,!0)),e.push(new DL("contentDisposition",null,!0)),e.push(new DL("contentEncoding",null,!0)),e.push(new DL("contentLanguage",null,!0)),e.push(new DL("contentType",null,!0)),e.push(new DL("metadata","customMetadata",!0)),LL=e}function FL(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath;return r=new vL(n,r),t._makeStorageReference(r)}})}function jL(e,t,n){return null===(t=PL(t))?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return FL(r,e),r}(e,t,n)}function UL(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var qL="prefixes",VL="items";function BL(e,t,n){return null===(n=PL(n))?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[qL])for(var i=0,o=n[qL];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new vL(t,a));r.prefixes.push(s)}if(n[VL])for(var u=0,c=n[VL];u<c.length;u++){var l=c[u];s=e._makeStorageReference(new vL(t,l.name)),r.items.push(s)}return r}(e,t,n)}var KL=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function zL(e){if(!e)throw GD()}function WL(e,t){return function(n,r){return zL(null!==(r=jL(e,r,t))),r}}function HL(e,t){return function(n,r){return zL(null!==(r=BL(e,t,r))),r}}function GL(e,t){return function(n,r){var i=jL(e,r,t);return zL(null!==i),function(e,t,n){if(null===(t=PL(t)))return null;if(!bL(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var r=encodeURIComponent;return t.split(",").map((function(t){var i=e.bucket,o=e.fullPath;return IL("/b/"+r(i)+"/o/"+r(o),n)+EL({alt:"media",token:t})}))[0]}(i,r,e.host)}}function QL(e){return function(t,n){var r,i=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new zD("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new zD("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(r=e.bucket,new zD("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,new zD("unauthorized","User does not have permission to access '"+i+"'.")):n;return i.serverResponse=n.serverResponse,i}}function YL(e){var t=QL(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(n=e.path,i=new zD("object-not-found","Object '"+n+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function $L(e,t,n){var r=IL(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime;return(i=new KL(r,"GET",WL(e,n),i)).errorHandler=YL(t),i}function XL(e,t,n){return(n=Object.assign({},n)).fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=(e=t,(t=null)&&t.contentType||e&&e.type()||"application/octet-stream")),n}function JL(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=XL(t,r,i);if(i="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+UL(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",null===(r=AL.getBlob(i,r,"\r\n--"+s+"--")))throw YD();return s={name:u.fullPath},u=IL(o,e.host),o=e.maxUploadRetryTime,(o=new KL(u,"POST",WL(e,n),o)).urlParams=s,o.headers=a,o.body=r.uploadData(),o.errorHandler=QL(t),o}var ZL=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function eM(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){zL(!1)}return zL(!!n&&-1!==(t||["active"]).indexOf(n)),n}function tM(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=XL(t,r,i);return i={name:a.fullPath},o=IL(o,e.host),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},n=UL(a,n),e=e.maxUploadRetryTime,e=new KL(o,"POST",(function(e){var t;eM(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){zL(!1)}return zL(bL(t)),t}),e),e.urlParams=i,e.headers=r,e.body=n,e.errorHandler=QL(t),e}function nM(e,t,n,r){return e=e.maxUploadRetryTime,e=new KL(n,"POST",(function(e){var t=eM(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){zL(!1)}return n||zL(!1),n=Number(n),zL(!isNaN(n)),new ZL(n,r.size(),"final"===t)}),e),e.headers={"X-Goog-Upload-Command":"query"},e.errorHandler=QL(t),e}function rM(e,t,n,r,i,o,a,s){var u=new ZL(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new zD("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;if(0<i&&(l=Math.min(l,i)),a=u.current,i={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},null===(c=r.slice(a,a+l)))throw YD();return a=t.maxUploadRetryTime,a=new KL(n,"POST",(function(e,n){var i=eM(e,["active","final"]),a=u.current+l,s=r.size();return n="final"===i?WL(t,o)(e,n):null,new ZL(a,s,"final"===i,n)}),a),a.headers=i,a.body=c.uploadData(),a.progressCallback=s||null,a.errorHandler=QL(e),a}var iM=function(e,t,n){"function"==typeof e||null!=t||null!=n?(this.next=e,this.error=t,this.complete=n):(this.next=e.next,this.error=e.error,this.complete=e.complete)};function oM(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var aM=(sM.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},sM.prototype._shouldDoResumable=function(e){return 262144<e.size()},sM.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},sM.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},sM.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=tM(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata);n=e._ref.storage._makeRequest(r,t,n),(e._request=n).getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},sM.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=nM(e._ref.storage,e._ref._location,t,e._blob);r=e._ref.storage._makeRequest(i,n,r),(e._request=r).getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},sM.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,n=new ZL(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=rM(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(i){return e._error=i,void e._transition("error")}o=e._ref.storage._makeRequest(a,i,o),(e._request=o).getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},sM.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},sM.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=$L(e._ref.storage,e._ref._location,e._mappings);n=e._ref.storage._makeRequest(r,t,n),(e._request=n).getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},sM.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=JL(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata);n=e._ref.storage._makeRequest(r,t,n),(e._request=n).getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},sM.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},sM.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=QD(),this._state=e,this._notifyObservers()}},sM.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(sM.prototype,"snapshot",{get:function(){var e=lL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),sM.prototype.on=function(e,t,n,r){var i=this,o=new iM(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},sM.prototype.then=function(e,t){return this._promise.then(e,t)},sM.prototype.catch=function(e){return this.then(null,e)},sM.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},sM.prototype._removeObserver=function(e){-1!==(e=this._observers.indexOf(e))&&this._observers.splice(e,1)},sM.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},sM.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(lL(this._state)){case cL.SUCCESS:oM(this._resolve.bind(null,this.snapshot))();break;case cL.CANCELED:case cL.ERROR:oM(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},sM.prototype._notifyObserver=function(e){switch(lL(this._state)){case cL.RUNNING:case cL.PAUSED:e.next&&oM(e.next.bind(e,this.snapshot))();break;case cL.SUCCESS:e.complete&&oM(e.complete.bind(e))();break;case cL.CANCELED:case cL.ERROR:default:e.error&&oM(e.error.bind(e,this._error))()}},sM.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},sM.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},sM.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},sM);function sM(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=ML(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}var uM=(cM.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},cM.prototype._newRef=function(e,t){return new cM(e,t)},Object.defineProperty(cM.prototype,"root",{get:function(){var e=new vL(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(cM.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(cM.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(cM.prototype,"name",{get:function(){return RL(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(cM.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(cM.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);return null===e?null:(e=new vL(this._location.bucket,e),new cM(this._service,e))},enumerable:!1,configurable:!0}),cM.prototype._throwIfRoot=function(e){if(""===this._location.path)throw JD(e)},cM);function cM(e,t){this._service=e,this._location=t instanceof vL?t:vL.makeFromUrl(t,e.host)}function lM(e){var t={prefixes:[],items:[]};return function e(t,n,r){return $i(this,void 0,void 0,(function(){var i,o;return Xi(this,(function(a){switch(a.label){case 0:return[4,hM(t,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(o=n.items).push.apply(o,i.items),null==i.nextPageToken?[3,3]:[4,e(t,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(e,t).then((function(){return t}))}function hM(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return null!=t&&"number"==typeof t.maxResults&&TL("options.maxResults",1,1e3,t.maxResults),n=t||{},i=e.storage,o=e._location,a="/",s=n.pageToken,u=n.maxResults,c={},o.isRoot?c.prefix="":c.prefix=o.path+"/",a&&0<a.length&&(c.delimiter=a),s&&(c.pageToken=s),u&&(c.maxResults=u),s=IL(o.bucketOnlyServerUrl(),i.host),u=i.maxOperationRetryTime,(u=new KL(s,"GET",HL(i,o.bucket),u)).urlParams=c,u.errorHandler=QL(o),[4,e.storage.makeRequestWithTokens(u)];case 1:return[2,r.sent().getPromise()]}var i,o,a,s,u,c}))}))}function fM(e,t){return $i(this,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("updateMetadata"),r=e.storage,i=e._location,o=t,a=ML(),s=IL(i.fullServerUrl(),r.host),u=UL(o,a),o=r.maxOperationRetryTime,(o=new KL(s,"PATCH",WL(r,a),o)).headers={"Content-Type":"application/json; charset=utf-8"},o.body=u,o.errorHandler=YL(i),[4,e.storage.makeRequestWithTokens(o)];case 1:return[2,n.sent().getPromise()]}var r,i,o,a,s,u}))}))}function dM(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return e._throwIfRoot("getDownloadURL"),n=e.storage,r=e._location,i=ML(),o=IL(r.fullServerUrl(),n.host),a=n.maxOperationRetryTime,(a=new KL(o,"GET",GL(n,i),a)).errorHandler=YL(r),[4,e.storage.makeRequestWithTokens(a)];case 1:return[2,t.sent().getPromise().then((function(e){if(null===e)throw new zD("no-download-url","The given file does not have any download URLs.");return e}))]}var n,r,i,o,a}))}))}function pM(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return e._throwIfRoot("deleteObject"),n=e.storage,i=IL((r=e._location).fullServerUrl(),n.host),n=n.maxOperationRetryTime,(n=new KL(i,"DELETE",(function(e,t){}),n)).successCodes=[200,204],n.errorHandler=YL(r),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,t.sent().getPromise()]}var n,r,i}))}))}function vM(e,t){var n;return n=e._location.path,t=t.split("/").filter((function(e){return 0<e.length})).join("/"),t=0===n.length?t:n+"/"+t,t=new vL(e._location.bucket,t),new uM(e.storage,t)}function gM(e){return/^[A-Za-z]+:\/\//.test(e)}function mM(e,t){if(e instanceof _M){var n=e;if(null==n._bucket)throw new zD("no-default-bucket","No default bucket found. Did you set the '"+KD+"' property when initializing the app?");return n=new uM(n,n._bucket),null!=t?mM(n,t):n}return void 0!==t?vM(e,t):e}function yM(e,t){if(t&&gM(t)){if(e instanceof _M)return new uM(e,t);throw $D("To use ref(service, url), the first argument must be a Storage instance.")}return mM(e,t)}function bM(e,t){return null==(t=null==t?void 0:t[KD])?null:vL.makeFromBucketSpec(t,e)}var _M=(Object.defineProperty(wM.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=vL.makeFromBucketSpec(this._url,e):this._bucket=bM(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(wM.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){TL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(wM.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){TL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),wM.prototype._getAuthToken=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}}))}))},wM.prototype._getAppCheckToken=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},wM.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},wM.prototype._makeStorageReference=function(e){return new uM(this,e)},wM.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new mL(XD());var i,o,a,s,u,c,l=(i=e,o=this._appId,a=t,s=n,u=this._pool,c=this._firebaseVersion,e=EL(i.urlParams),t=i.url+e,e=n=Object.assign({},i.headers),o&&(e["X-Firebase-GMPID"]=o),o=n,null!==a&&0<a.length&&(o.Authorization="Firebase "+a),n["X-Firebase-Storage-Version"]="webjs/"+(null!=c?c:"AppManager"),c=n,null!==s&&(c["X-Firebase-AppCheck"]=s),new SL(t,i.method,n,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u));return this._requests.add(l),l.getPromise().then((function(){return r._requests.delete(l)}),(function(){return r._requests.delete(l)})),l},wM.prototype.makeRequestWithTokens=function(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=r.sent(),t=n[0],n=n[1],[2,this._makeRequest(e,t,n)]}}))}))},wM);function wM(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=BD,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?vL.makeFromBucketSpec(i,this._host):bM(this._host,this.app.options)}function TM(e,t,n){return(e=ta(e))._throwIfRoot("uploadBytesResumable"),new aM(e,new AL(t),n)}function IM(e){return function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=$L(e.storage,e._location,ML()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=ta(e))}function EM(e,t){return yM(e=ta(e),t)}function SM(e,t,n,r){void 0===(r=r=void 0===r?{}:r)&&(r={}),e.host="http://"+t+":"+n,(r=r.mockUserToken)&&(e._overrideAuthToken="string"==typeof r?r:po(r,e.app.options.projectId))}var kM=(Object.defineProperty(CM.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(CM.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(CM.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(CM.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),CM);function CM(e,t,n){this._delegate=e,this.task=t,this.ref=n}var NM=(Object.defineProperty(AM.prototype,"snapshot",{get:function(){return new kM(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),AM.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new kM(t,n,n._ref))}),t)},AM.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new kM(e,i,i._ref))}:{next:t.next?function(e){return t.next(new kM(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},AM);function AM(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var xM=(Object.defineProperty(PM.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new RM(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(PM.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new RM(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(PM.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),PM);function PM(e,t){this._delegate=e,this._service=t}var RM=(Object.defineProperty(OM.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(OM.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(OM.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),OM.prototype.toString=function(){return this._delegate.toString()},OM.prototype.child=function(e){return new OM(vM(this._delegate,e),this.storage)},Object.defineProperty(OM.prototype,"root",{get:function(){return new OM(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(OM.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new OM(e,this.storage)},enumerable:!1,configurable:!0}),OM.prototype.put=function(e,t){return this._throwIfRoot("put"),new NM(TM(this._delegate,e,t),this)},OM.prototype.putString=function(e,t,n){return void 0===t&&(t=tL.RAW),this._throwIfRoot("putString"),e=rL(t,e),null==(n=Yi({},n)).contentType&&null!=e.contentType&&(n.contentType=e.contentType),new NM(new aM(this._delegate,new AL(e.data,!0),n),this)},OM.prototype.listAll=function(){var e=this;return lM(ta(this._delegate)).then((function(t){return new xM(t,e.storage)}))},OM.prototype.list=function(e){var t=this;return e=e||void 0,hM(ta(this._delegate),e).then((function(e){return new xM(e,t.storage)}))},OM.prototype.getMetadata=function(){return IM(this._delegate)},OM.prototype.updateMetadata=function(e){return fM(ta(this._delegate),e)},OM.prototype.getDownloadURL=function(){return dM(ta(this._delegate))},OM.prototype.delete=function(){return this._throwIfRoot("delete"),pM(ta(this._delegate))},OM.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw JD(e)},OM);function OM(e,t){this._delegate=e,this.storage=t}var DM,LM,MM=(Object.defineProperty(FM.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(FM.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),FM.prototype.ref=function(e){if(gM(e))throw $D("ref() expected a child path but got a URL, use refFromURL instead.");return new RM(EM(this._delegate,e),this)},FM.prototype.refFromURL=function(e){if(!gM(e))throw $D("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vL.makeFromUrl(e,this._delegate.host)}catch(e){throw $D("refFromUrl() expected a valid full URL but got an invalid one.")}return new RM(EM(this._delegate,e),this)},FM.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},FM.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},FM.prototype.useEmulator=function(e,t,n){SM(this._delegate,e,t,n=void 0===n?{}:n)},FM);function FM(e,t){this.app=e,this._delegate=t}function jM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate();return t=e.getProvider("auth-internal"),e=e.getProvider("app-check-internal"),new MM(r,new _M(r,t,e,new dL,n,Oa.SDK_VERSION))}LM={TaskState:cL,TaskEvent:uL,StringFormat:tL,Storage:_M,Reference:RM},(DM=Oa).INTERNAL.registerComponent(new na("storage",jM,"PUBLIC").setServiceProps(LM).setMultipleInstances(!0)),DM.registerVersion("@firebase/storage","0.7.1");var UM,qM,VM="0.4.18",BM="FB-PERF-TRACE-MEASURE",KM="@firebase/performance/config",zM="@firebase/performance/configexpire",WM=(G="Performance",(H={})["trace started"]="Trace {$traceName} was started before.",H["trace stopped"]="Trace {$traceName} is not running.",H["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",H["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",H["no window"]="Window is not available.",H["no app id"]="App id is not available.",H["no project id"]="Project id is not available.",H["no api key"]="Api key is not available.",H["invalid cc log"]="Attempted to queue invalid cc event",H["FB not default"]="Performance can only start when Firebase app instance is the default one.",H["RC response not ok"]="RC response is not ok",H["invalid attribute name"]="Attribute name {$attributeName} is invalid.",H["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",H["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",H["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",new No("performance",G,H)),HM=new va(G);HM.logLevel=ca.INFO;var GM,QM=(YM.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},YM.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},YM.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},YM.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},YM.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},YM.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},YM.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!wo()||(HM.info("IndexedDB is not supported by current browswer"),!1):(HM.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},YM.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},YM.getInstance=function(){return UM=void 0===UM?new YM(qM):UM},YM);function YM(e){if(!(this.window=e))throw WM.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function $M(e,t){var n=e.length-t.length;if(n<0||1<n)throw WM.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var XM,JM,ZM=(eF.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw WM.create("no app id");return e},eF.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw WM.create("no project id");return e},eF.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw WM.create("no api key");return e},eF.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},eF.getInstance=function(){return GM=void 0===GM?new eF:GM},eF);function eF(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=$M("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=$M("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(G=JM=JM||{})[G.UNKNOWN=0]="UNKNOWN",G[G.VISIBLE=1]="VISIBLE",G[G.HIDDEN=2]="HIDDEN";var tF=["firebase_","google_","ga_"],nF=new RegExp("^[a-zA-Z]\\w*$");function rF(){switch(QM.getInstance().document.visibilityState){case"visible":return JM.VISIBLE;case"hidden":return JM.HIDDEN;default:return JM.UNKNOWN}}var iF="0.0.1",oF={loggingEnabled:!0},aF="FIREBASE_INSTALLATIONS_AUTH";function sF(e){var t,n=function(){var e=QM.getInstance().localStorage;if(e){var t=e.getItem(zM);if(t&&function(e){return Number(e)>Date.now()}(t)&&(e=e.getItem(KM)))try{return JSON.parse(e)}catch(e){return}}}();return n?(cF(n),Promise.resolve()):(t=e,function(){var e=ZM.getInstance().installationsService.getToken();return e.then((function(e){})),e}().then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+ZM.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+ZM.getInstance().getApiKey();return e=new Request(n,{method:"POST",headers:{Authorization:aF+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:ZM.getInstance().getAppId(),app_version:VM,sdk_version:iF})}),fetch(e).then((function(e){if(e.ok)return e.json();throw WM.create("RC response not ok")}))})).catch((function(){HM.info(uF)})).then(cF).then((function(e){var t;t=e,e=QM.getInstance().localStorage,t&&e&&(e.setItem(KM,JSON.stringify(t)),e.setItem(zM,String(Date.now()+60*ZM.getInstance().configTimeToLive*60*1e3)))}),(function(){})))}var uF="Could not fetch config, will use default configs";function cF(e){if(!e)return e;var t=ZM.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=oF.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=lF(t.tracesSamplingRate),t.logNetworkAfterSampling=lF(t.networkRequestsSamplingRate),e}function lF(e){return Math.random()<=e}var hF,fF=1;function dF(){return fF=2,hF=hF||function(){var e=QM.getInstance().document;return new Promise((function(t){var n;e&&"complete"!==e.readyState?(n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())},e.addEventListener("readystatechange",n)):t()}))}().then((function(){return(e=ZM.getInstance().installationsService.getId()).then((function(e){XM=e})),e;var e})).then(sF).then(pF,pF)}function pF(){fF=3}var vF,gF=1e4,mF=5500,yF=3,bF=1e3,_F=yF,wF=[],TF=!1;function IF(e){setTimeout((function(){var e,t;if(0!==_F)return wF.length?(t=(e=wF.splice(0,bF)).map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),void function(e,t){return function(e){var t=ZM.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||HM.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=gF;isNaN(n)||(r=Math.max(n,r)),e=e.logResponseDetails,Array.isArray(e)&&0<e.length&&"RETRY_REQUEST_LATER"===e[0].responseAction&&(wF=eo(eo([],t),wF),HM.info("Retry transport request later.")),_F=yF,IF(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ZM.getInstance().logSource,log_event:t},e).catch((function(){wF=eo(eo([],e),wF),_F--,HM.info("Tries left: "+_F+"."),IF(gF)}))):IF(gF)}),e)}function EF(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!function(e){if(!e.eventTime||!e.message)throw WM.create("invalid cc log");wF=eo(eo([],wF),[e])}({message:e.apply(void 0,t),eventTime:Date.now()})}}function SF(e,t){(vF=vF||EF(NF))(e,t)}function kF(e){var t=ZM.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&QM.getInstance().requiredApisAvailable()&&(e.isAuto&&rF()!==JM.VISIBLE||(3===fF?CF(e):dF().then((function(){return CF(e)}),(function(){return CF(e)}))))}function CF(e){var t;!XM||(t=ZM.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return SF(e,1)}),0)}function NF(e,t){return(0===t?function(e){return e={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},e={application_info:AF(),network_request_metric:e},JSON.stringify(e)}:function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};return 0!==Object.keys(e.counters).length&&(t.counters=e.counters),e=e.getAttributes(),0!==Object.keys(e).length&&(t.custom_attributes=e),t={application_info:AF(),trace_metric:t},JSON.stringify(t)})(e)}function AF(){return{google_app_id:ZM.getInstance().getAppId(),app_instance_id:XM,web_app_info:{sdk_version:VM,page_url:QM.getInstance().getUrl(),service_worker_status:"serviceWorker"in(e=QM.getInstance().navigator)?e.serviceWorker.controller?2:3:1,visibility_state:rF(),effective_connection_type:function(){var e=QM.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var e}var xF=["_fp","_fcp","_fid"],PF=(RF.prototype.start=function(){if(1!==this.state)throw WM.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},RF.prototype.stop=function(){if(2!==this.state)throw WM.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),kF(this)},RF.prototype.record=function(e,t,n){if(e<=0)throw WM.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw WM.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Yi({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}kF(this)},RF.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},RF.prototype.putMetric=function(e,t){if(n=e,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<xF.indexOf(n))&&n.startsWith("_"))throw WM.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=(e=t,(t=Math.floor(e))<e&&HM.info("Metric value should be an Integer, setting the value as : "+t+"."),t)},RF.prototype.getMetric=function(e){return this.counters[e]||0},RF.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||40<n.length)&&!tF.some((function(e){return n.startsWith(e)}))&&!!n.match(nF),i=0!==(i=t).length&&i.length<=100;if(r&&i)this.customAttributes[e]=t;else{if(!r)throw WM.create("invalid attribute name",{attributeName:e});if(!i)throw WM.create("invalid attribute value",{attributeValue:t})}},RF.prototype.getAttribute=function(e){return this.customAttributes[e]},RF.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},RF.prototype.getAttributes=function(){return Yi({},this.customAttributes)},RF.prototype.setStartTime=function(e){this.startTimeUs=e},RF.prototype.setDuration=function(e){this.durationUs=e},RF.prototype.calculateTraceMetrics=function(){var e;(e=(e=this.api.getEntriesByName(this.traceMeasure))&&e[0])&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},RF.createOobTrace=function(e,t,n){var r,i=QM.getInstance().getUrl();i&&(r=new RF("_wt_"+i,!0),i=Math.floor(1e3*QM.getInstance().getTimeOrigin()),r.setStartTime(i),e&&e[0]&&(r.setDuration(Math.floor(1e3*e[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),t&&((e=t.find((function(e){return"first-paint"===e.name})))&&e.startTime&&r.putMetric("_fp",Math.floor(1e3*e.startTime)),(t=t.find((function(e){return"first-contentful-paint"===e.name})))&&t.startTime&&r.putMetric("_fcp",Math.floor(1e3*t.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),kF(r))},RF.createUserTimingTrace=function(e){kF(new RF(e,!1,e))},RF);function RF(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=QM.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||BM+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function OF(e){var t,n,r,i=e;i&&void 0!==i.responseStart&&(n=QM.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),e=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:e,timeToResponseCompletedUs:n},t=i,(r=ZM.getInstance()).instrumentationEnabled&&(e=t.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],e!==n&&e!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout((function(){return SF(t,0)}),0)))}var DF=5e3;function LF(){XM&&(setTimeout((function(){var e,t=QM.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");t.onFirstInputDelay?(e=setTimeout((function(){PF.createOobTrace(n,r),e=void 0}),DF),t.onFirstInputDelay((function(t){e&&(clearTimeout(e),PF.createOobTrace(n,r,t))}))):PF.createOobTrace(n,r)}),0),setTimeout((function(){for(var e=QM.getInstance(),t=0,n=e.getEntriesByType("resource");t<n.length;t++)OF(n[t]);e.setupObserver("resource",OF)}),0),setTimeout((function(){for(var e=QM.getInstance(),t=0,n=e.getEntriesByType("measure");t<n.length;t++)MF(n[t]);e.setupObserver("measure",MF)}),0))}function MF(e){(e=e.name).substring(0,BM.length)!==BM&&PF.createUserTimingTrace(e)}var FF,jF=(UF.prototype.trace=function(e){return new PF(e)},Object.defineProperty(UF.prototype,"instrumentationEnabled",{get:function(){return ZM.getInstance().instrumentationEnabled},set:function(e){ZM.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(UF.prototype,"dataCollectionEnabled",{get:function(){return ZM.getInstance().dataCollectionEnabled},set:function(e){ZM.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),UF);function UF(e){this.app=e,QM.getInstance().requiredApisAvailable()&&To().then((function(e){e&&(TF||(IF(mF),TF=!0),dF().then(LF,LF))})).catch((function(e){HM.info("Environment doesn't support IndexedDB: "+e)}))}function qF(e,t){if("[DEFAULT]"!==e.name)throw WM.create("FB not default");if("undefined"==typeof window)throw WM.create("no window");return qM=window,ZM.getInstance().firebaseAppInstance=e,ZM.getInstance().installationsService=t,new jF(e)}(FF=Oa).INTERNAL.registerComponent(new na("performance",(function(e){return qF(e.getProvider("app").getImmediate(),e=e.getProvider("installations").getImmediate())}),"PUBLIC")),FF.registerVersion("@firebase/performance","0.4.18");var VF,BF,KF="firebase_id",zF="origin",WF=6e4,HF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GF="https://www.googletagmanager.com/gtag/js";(G=VF=VF||{}).EVENT="event",G.SET="set",G.CONFIG="config",(G=BF=BF||{}).ADD_SHIPPING_INFO="add_shipping_info",G.ADD_PAYMENT_INFO="add_payment_info",G.ADD_TO_CART="add_to_cart",G.ADD_TO_WISHLIST="add_to_wishlist",G.BEGIN_CHECKOUT="begin_checkout",G.CHECKOUT_PROGRESS="checkout_progress",G.EXCEPTION="exception",G.GENERATE_LEAD="generate_lead",G.LOGIN="login",G.PAGE_VIEW="page_view",G.PURCHASE="purchase",G.REFUND="refund",G.REMOVE_FROM_CART="remove_from_cart",G.SCREEN_VIEW="screen_view",G.SEARCH="search",G.SELECT_CONTENT="select_content",G.SELECT_ITEM="select_item",G.SELECT_PROMOTION="select_promotion",G.SET_CHECKOUT_OPTION="set_checkout_option",G.SHARE="share",G.SIGN_UP="sign_up",G.TIMING_COMPLETE="timing_complete",G.VIEW_CART="view_cart",G.VIEW_ITEM="view_item",G.VIEW_ITEM_LIST="view_item_list",G.VIEW_PROMOTION="view_promotion",G.VIEW_SEARCH_RESULTS="view_search_results";var QF=new va("@firebase/analytics");function YF(e,t,n,r){return function(i,o,a){return $i(this,void 0,void 0,(function(){var s;return Xi(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==VF.EVENT?[3,2]:[4,function(e,t,n,r,i){return $i(this,void 0,void 0,(function(){var o,a,s,u,c,l,h;return Xi(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(h=i.send_to,Array.isArray(h)||(h=[h]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),s=function(e){var n;if(!(n=(n=a.find((function(t){return t.measurementId===e})))&&t[n.appId]))return o=[],"break";o.push(n)},u=0,c=h;u<c.length&&(l=c[u],"break"!==s(l));u++);f.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return f.sent(),e(VF.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),QF.error(h),[3,5];case 5:return[2]}}))}))}(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==VF.CONFIG?[3,4]:[4,function(e,t,n,r,i,o){return $i(this,void 0,void 0,(function(){var a,s;return Xi(this,(function(u){switch(u.label){case 0:a=r[i],u.label=1;case 1:return u.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return u.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return(s=(s=u.sent()).find((function(e){return e.measurementId===i})))?[4,t[s.appId]]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return s=u.sent(),QF.error(s),[3,8];case 8:return e(VF.CONFIG,i,o),[2]}}))}))}(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(VF.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),QF.error(s),[3,7];case 7:return[2]}}))}))}}(G={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",G["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",G["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",G["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",G["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",G["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",G["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",G["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',G["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.';var $F=new No("analytics","Analytics",G),XF=30;function JF(e,t){void 0===t&&(t=1e3),this.throttleMetadata=e=void 0===e?{}:e,this.intervalMillis=t}var ZF=new(JF.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},JF.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},JF.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},JF);function ej(e){var t;return $i(this,void 0,void 0,(function(){var n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return n=e.appId,o=e.apiKey,o={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":o})},n=HF.replace("{app-id}",n),[4,fetch(n,o)];case 1:if(200===(r=a.sent()).status||304===r.status)return[3,6];i="",a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.json()];case 3:return o=a.sent(),null!==(t=o.error)&&void 0!==t&&t.message&&(i=o.error.message),[3,5];case 4:return a.sent(),[3,5];case 5:throw $F.create("config-fetch-failed",{httpStatus:r.status,responseMessage:i});case 6:return[2,r.json()]}}))}))}function tj(e,t,n){return void 0===t&&(t=ZF),$i(this,void 0,void 0,(function(){var r,i,o,a,s,u=this;return Xi(this,(function(c){if(a=e.options,r=a.appId,i=a.apiKey,o=a.measurementId,!r)throw $F.create("no-app-id");if(i)return a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new ij,setTimeout((function(){return $i(u,void 0,void 0,(function(){return Xi(this,(function(e){return s.abort(),[2]}))}))}),void 0!==n?n:WF),[2,function e(t,n,r,i){var o=n.throttleEndTimeMillis,a=n.backoffCount;return void 0===i&&(i=ZF),$i(this,void 0,void 0,(function(){var n,s,u,c,l;return Xi(this,(function(h){switch(h.label){case 0:n=t.appId,s=t.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,nj(r,o)];case 2:return h.sent(),[3,4];case 3:if(c=h.sent(),s)return QF.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:n,measurementId:s}];throw c;case 4:return h.trys.push([4,6,,7]),[4,ej(t)];case 5:return l=h.sent(),i.deleteThrottleMetadata(n),[2,l];case 6:if(rj(u=h.sent()))return c=503===Number(u.customData.httpStatus)?ea(a,i.intervalMillis,XF):ea(a,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:a+1},i.setThrottleMetadata(n,l),QF.debug("Calling attemptFetch again in "+c+" millis"),[2,e(t,l,r,i)];if(i.deleteThrottleMetadata(n),s)return QF.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:n,measurementId:s}];throw u;case 7:return[2]}}))}))}({appId:r,apiKey:i,measurementId:o},a,s,t)];if(o)return[2,{measurementId:o,appId:r}];throw $F.create("no-api-key")}))}))}function nj(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r($F.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function rj(e){if(e instanceof ko&&e.customData)return 429===(e=Number(e.customData.httpStatus))||500===e||503===e||504===e}var ij=(oj.prototype.addEventListener=function(e){this.listeners.push(e)},oj.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},oj);function oj(){this.listeners=[]}function aj(e,t,n,r,i,o){return $i(this,void 0,void 0,(function(){var a,s,u;return Xi(this,(function(c){switch(c.label){case 0:return(a=tj(e)).then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&QF.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return QF.error(e)})),t.push(a),s=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:return wo()?[3,1]:(QF.warn($F.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,To()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),QF.warn($F.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){if(e)return r.getId()})),[4,Promise.all([a,s])];case 1:return u=c.sent(),a=u[0],s=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(GF))return r}}()||(l=o,h=a.measurementId,(f=document.createElement("script")).src=GF+"?l="+l+"&id="+h,f.async=!0,document.head.appendChild(f)),i("js",new Date),(u={})[zF]="firebase",u.update=!0,null!=s&&(u[KF]=s),i(VF.CONFIG,a.measurementId,u),[2,a.measurementId]}var l,h,f}))}))}var sj,uj,cj={},lj=[],hj={},fj="dataLayer",dj="gtag",pj=!1;function vj(e){if(pj)throw $F.create("already-initialized");e.dataLayerName&&(fj=e.dataLayerName),e.gtagName&&(dj=e.gtagName)}function gj(e,t){i=[],yo()&&i.push("This is a browser extension environment."),Io()||i.push("Cookies are not available."),0<i.length&&(i=i.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),i=$F.create("invalid-analytics-context",{errorInfo:i}),QF.warn(i.message));var n,r,i,o=e.options.appId;if(!o)throw $F.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw $F.create("no-api-key");QF.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=cj[o])throw $F.create("already-exists",{id:o});return pj||(r=fj,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i,n=fj,r=dj,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[n].push(arguments)},window[r]&&"function"==typeof window[r]&&(i=window[r]),window[r]=YF(i,cj,lj,hj),r={gtagCore:i,wrappedGtag:window[r]},uj=r.wrappedGtag,sj=r.gtagCore,pj=!0),cj[o]=aj(e,lj,hj,t,sj,fj),{app:e,logEvent:function(e,t,n){(function(e,t,n,r,i){return $i(this,void 0,void 0,(function(){var o;return Xi(this,(function(a){switch(a.label){case 0:return i&&i.global?(e(VF.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=a.sent(),o=Yi(Yi({},r),{send_to:o}),e(VF.EVENT,n,o),a.label=3;case 3:return[2]}}))}))})(uj,cj[o],e,t,n).catch((function(e){return QF.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i;return Xi(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(VF.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(VF.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(uj,cj[o],e,t).catch((function(e){return QF.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i;return Xi(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(VF.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(VF.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(uj,cj[o],e,t).catch((function(e){return QF.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return $i(this,void 0,void 0,(function(){var i,o,a,s,u;return Xi(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(VF.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(VF.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(uj,cj[o],e,t).catch((function(e){return QF.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return $i(this,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(cj[o],e).catch((function(e){return QF.error(e)}))},INTERNAL:{delete:function(){return delete cj[o],Promise.resolve()}}}}var mj,yj="analytics";function bj(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:if(yo())return[2,!1];if(!Io())return[2,!1];if(!wo())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,To()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}(mj=Oa).INTERNAL.registerComponent(new na(yj,(function(e){return gj(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:vj,EventName:BF,isSupported:bj})),mj.INTERNAL.registerComponent(new na("analytics-internal",(function(e){try{return{logEvent:e.getProvider(yj).getImmediate().logEvent}}catch(e){throw $F.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),mj.registerVersion("@firebase/analytics","0.6.18");var _j=(wj.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t;return t=n<=e,this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+t+"."),t},wj.prototype.fetch=function(e){return $i(this,void 0,void 0,(function(){var t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=i.sent(),t=r[0],(r=r[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return n=i.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return i.sent(),[2,n]}}))}))},wj);function wj(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}(G={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",G["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",G["registration-api-key"]="Undefined API key. Check Firebase app initialization.",G["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",G["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",G["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",G["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",G["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",G["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",G["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',G["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',G["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",G["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.";var Tj=new No("remoteconfig","Remote Config",G),Ij=(Ej.prototype.fetch=function(e){return $i(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l;return Xi(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:i=h.sent(),t=i[0],r=i[1],n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},r={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:(f=void 0===f?navigator:f).languages&&f.languages[0]||f.language},r={method:"POST",headers:n,body:JSON.stringify(r)},i=fetch(i,r),r=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([i,r])];case 3:return h.sent(),[4,i];case 4:return l=h.sent(),[3,6];case 5:throw r=h.sent(),i="fetch-client-network","AbortError"===r.name&&(i="fetch-timeout"),Tj.create(i,{originalErrorMessage:r.message});case 6:if(o=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];c=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,l.json()];case 8:return c=h.sent(),[3,10];case 9:throw l=h.sent(),Tj.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:s=c.entries,u=c.state,h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===u?o=500:"NO_CHANGE"===u?o=304:"NO_TEMPLATE"!==u&&"EMPTY_CONFIG"!==u||(s={}),304!==o&&200!==o)throw Tj.create("fetch-status",{httpStatus:o});return[2,{status:o,eTag:a,config:s}]}var f}))}))},Ej);function Ej(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var Sj=(kj.prototype.addEventListener=function(e){this.listeners.push(e)},kj.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},kj);function kj(){this.listeners=[]}var Cj=["1","true","t","yes","y","on"],Nj=(Aj.prototype.asString=function(){return this._value},Aj.prototype.asBoolean=function(){return"static"!==this._source&&0<=Cj.indexOf(this._value.toLowerCase())},Aj.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)?0:e},Aj.prototype.getSource=function(){return this._source},Aj);function Aj(e,t){void 0===t&&(t=""),this._source=e,this._value=t}var xj=(Pj.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=ca.DEBUG;break;case"silent":this._logger.logLevel=ca.SILENT;break;default:this._logger.logLevel=ca.ERROR}},Object.defineProperty(Pj.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(Pj.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),Pj.prototype.activate=function(){return $i(this,void 0,void 0,(function(){var e,t;return Xi(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=n.sent(),e=t[0],t=t[1],e&&e.config&&e.eTag&&e.eTag!==t?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return n.sent(),[2,!0]}}))}))},Pj.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},Pj.prototype.fetch=function(){return $i(this,void 0,void 0,(function(){var e,t,n,r=this;return Xi(this,(function(i){switch(i.label){case 0:e=new Sj,setTimeout((function(){return $i(r,void 0,void 0,(function(){return Xi(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),a="fetch-throttle",n=(o=t)instanceof ko&&-1!==o.code.indexOf(a)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}var o,a}))}))},Pj.prototype.fetchAndActivate=function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},Pj.prototype.getAll=function(){var e=this;return function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(Yi(Yi({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},Pj.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},Pj.prototype.getNumber=function(e){return this.getValue(e).asNumber()},Pj.prototype.getString=function(e){return this.getValue(e).asString()},Pj.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new Nj("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new Nj("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new Nj("static"))},Pj);function Pj(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function Rj(e,t){return e=e.target.error||void 0,Tj.create(t,{originalErrorMessage:e&&e.message})}var Oj="app_namespace_store",Dj="firebase_remote_config",Lj=1,Mj=(Fj.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},Fj.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},Fj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},Fj.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},Fj.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},Fj.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},Fj.prototype.getActiveConfig=function(){return this.get("active_config")},Fj.prototype.setActiveConfig=function(e){return this.set("active_config",e)},Fj.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},Fj.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},Fj.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},Fj.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},Fj.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},Fj.prototype.get=function(e){return $i(this,void 0,void 0,(function(){var t,n=this;return Xi(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([Oj],"readonly").objectStore(Oj),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(Rj(e,"storage-get"))},s.onsuccess=function(e){e=e.target.result,r(e?e.value:void 0)}}catch(o){i(Tj.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},Fj.prototype.set=function(e,t){return $i(this,void 0,void 0,(function(){var n,r=this;return Xi(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([Oj],"readwrite").objectStore(Oj),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(Rj(e,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(Tj.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},Fj.prototype.delete=function(e){return $i(this,void 0,void 0,(function(){var t,n=this;return Xi(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([Oj],"readwrite").objectStore(Oj),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(Rj(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(r){i(Tj.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},Fj.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},Fj);function Fj(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open(Dj,Lj);n.onerror=function(e){t(Rj(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(Oj,{keyPath:"compositeKey"})}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}var jj=(Uj.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},Uj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},Uj.prototype.getActiveConfig=function(){return this.activeConfig},Uj.prototype.loadFromStorage=function(){return $i(this,void 0,void 0,(function(){var e,t,n;return Xi(this,(function(r){switch(r.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(e=r.sent())&&(this.lastFetchStatus=e),[4,t];case 2:return(t=r.sent())&&(this.lastSuccessfulFetchTimestampMillis=t),[4,n];case 3:return(n=r.sent())&&(this.activeConfig=n),[2]}}))}))},Uj.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},Uj.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},Uj.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},Uj);function Uj(e){this.storage=e}var qj=(Vj.prototype.fetch=function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},Vj.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return $i(this,void 0,void 0,(function(){var t,i;return Xi(this,(function(o){switch(o.label){case 0:return[4,(a=e.signal,s=n,new Promise((function(e,t){var n=Math.max(s-Date.now(),0),r=setTimeout(e,n);a.addEventListener((function(){clearTimeout(r),t(Tj.create("fetch-throttle",{throttleEndTimeMillis:s}))}))})))];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=o.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return o.sent(),[2,t];case 5:if(!function(e){if(e instanceof ko&&e.customData)return 429===(e=Number(e.customData.httpStatus))||500===e||503===e||504===e}(i=o.sent()))throw i;return i={throttleEndTimeMillis:Date.now()+ea(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(i)];case 6:return o.sent(),[2,this.attemptFetch(e,i)];case 7:return[2]}var a,s}))}))},Vj);function Vj(e,t){this.client=e,this.storage=t}var Bj,Kj="@firebase/remote-config";(Bj=Oa).INTERNAL.registerComponent(new na("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Tj.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Tj.create("registration-project-id");if(!s)throw Tj.create("registration-api-key");if(!u)throw Tj.create("registration-app-id");return n=n||"firebase",t=new Mj(u,r.name,n),e=new jj(t),(o=new va(Kj)).logLevel=ca.ERROR,u=new Ij(i,Bj.SDK_VERSION,n,a,s,u),u=new qj(u,t),u=new _j(u,t,e,o),(o=new xj(r,u,e,t,o)).ensureInitialized(),o}),"PUBLIC").setMultipleInstances(!0)),Bj.registerVersion(Kj,"0.1.43"),(G={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",G["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",G["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",G["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",G["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",G["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",G["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",G["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",G["recaptcha-error"]="ReCAPTCHA error.";var zj=new No("appCheck","AppCheck",G),Wj=new Map,Hj={activated:!1,tokenObservers:[]},Gj={enabled:!1};function Qj(e){return Wj.get(e)||Hj}function Yj(e,t){Wj.set(e,t)}var $j="https://content-firebaseappcheck.googleapis.com/v1beta",Xj="exchangeDebugToken",Jj={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},Zj=(eU.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},eU.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},eU.prototype.isRunning=function(){return!!this.pending},eU.prototype.process=function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new ho,[4,(r=this.getNextRun(e),new Promise((function(e){setTimeout(e,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new ho,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},eU.prototype.getNextRun=function(e){return e?(this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration()):(e=this.nextErrorWaitInterval,this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e)},eU);function eU(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,i<(this.nextErrorWaitInterval=r))throw new Error("Proactive refresh lower bound greater than upper bound!")}function tU(){return self.grecaptcha}function nU(e){if(!Qj(e).activated)throw zj.create("use-before-activation",{appName:e.name})}function rU(e,t){var n=e.url,r=e.body;return $i(this,void 0,void 0,(function(){var e,i,o,a,s;return Xi(this,(function(u){switch(u.label){case 0:i={"Content-Type":"application/json"},(e=t.getImmediate({optional:!0}))&&(i["X-Firebase-Client"]=e.getPlatformInfoString()),i={method:"POST",body:JSON.stringify(r),headers:i},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(n,i)];case 2:return s=u.sent(),[3,4];case 3:throw i=u.sent(),zj.create("fetch-network-error",{originalErrorMessage:i.message});case 4:if(200!==s.status)throw zj.create("fetch-status-error",{httpStatus:s.status});u.label=5;case 5:return u.trys.push([5,7,,8]),[4,s.json()];case 6:return o=u.sent(),[3,8];case 7:throw a=u.sent(),zj.create("fetch-parse-error",{originalErrorMessage:a.message});case 8:if(!(s=o.ttl.match(/^([\d.]+)(s)$/))||!s[2]||isNaN(Number(s[1])))throw zj.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+o.ttl});return a=1e3*Number(s[1]),s=Date.now(),[2,{token:o.attestationToken,expireTimeMillis:s+a,issuedAtTimeMillis:s}]}}))}))}function iU(e,t){var n=(r=e.options).projectId,r=(e=r.appId,r.apiKey);return{url:$j+"/projects/"+n+"/apps/"+e+":"+Xj+"?key="+r,body:{debug_token:t}}}var oU="firebase-app-check-database",aU=1,sU="firebase-app-check-store",uU="debug-token",cU=null;function lU(){return cU=cU||new Promise((function(e,t){try{var n=indexedDB.open(oU,aU);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){t(zj.create("storage-open",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(sU,{keyPath:"compositeKey"})}}catch(n){t(zj.create("storage-open",{originalErrorMessage:n.message}))}}))}function hU(e,t){return $i(this,void 0,void 0,(function(){var n,r,i;return Xi(this,(function(o){switch(o.label){case 0:return[4,lU()];case 1:return r=o.sent(),n=r.transaction(sU,"readwrite"),r=n.objectStore(sU),i=r.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){i.onsuccess=function(t){e()},n.onerror=function(e){t(zj.create("storage-set",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))}}))]}}))}))}function fU(e){return $i(this,void 0,void 0,(function(){var t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,lU()];case 1:return n=i.sent(),t=n.transaction(sU,"readonly"),n=t.objectStore(sU),r=n.get(e),[2,new Promise((function(e,n){r.onsuccess=function(t){t=t.target.result,e(t?t.value:void 0)},t.onerror=function(e){n(zj.create("storage-get",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))}}))]}}))}))}function dU(e){return e.options.appId+"-"+e.name}var pU=new va("@firebase/app-check");function vU(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(r){switch(r.label){case 0:if(!wo())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fU(dU(e))];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),pU.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}function gU(e,t){return wo()?hU(dU(e),t).catch((function(e){pU.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function mU(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:e=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fU(uU)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),hU(uU,e).catch((function(e){return pU.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work")),[2,e]}}))}))}var yU={error:"UNKNOWN_ERROR"};function bU(e,t,n){return void 0===n&&(n=!1),$i(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h;return Xi(this,(function(f){switch(f.label){case 0:return nU(e),r=Qj(e),i=r.token,o=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(a=f.sent())&&IU(a)&&(i=a,Yj(e,Yi(Yi({},r),{token:i})),TU(e,{token:i.token})),f.label=2;case 2:return!n&&i&&IU(i)?[2,{token:i.token}]:Gj.enabled?(s=rU,u=iU,c=[e],[4,function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){if((e=Gj).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}()]):[3,6];case 3:return[4,s.apply(void 0,[u.apply(void 0,c.concat([f.sent()])),t])];case 4:return l=f.sent(),[4,gU(e,l)];case 5:return f.sent(),Yj(e,Yi(Yi({},r),{token:l})),[2,{token:l.token}];case 6:return f.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=f.sent(),[3,9];case 8:return l=f.sent(),pU.error(l),o=l,[3,9];case 9:return i?[3,10]:(d=o,h={token:function(e){return so.encodeString(JSON.stringify(e),!1)}(yU),error:d},[3,12]);case 10:return h={token:i.token},Yj(e,Yi(Yi({},r),{token:i})),[4,gU(e,i)];case 11:f.sent(),f.label=12;case 12:return TU(e,h),[2,h]}var d}))}))}function _U(e,t,n,r,i){var o,a=Qj(e);n={next:r,error:i,type:n},(n=Yi(Yi({},a),{tokenObservers:eo(eo([],a.tokenObservers),[n])})).tokenRefresher||(t=function(e,t){var n=this;return new Zj((function(){return $i(n,void 0,void 0,(function(){var n;return Xi(this,(function(r){switch(r.label){case 0:return Qj(e).token?[3,2]:[4,bU(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,bU(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){if((n=Qj(e)).token){var t=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5,n=n.token.expireTimeMillis-3e5;return t=Math.min(t,n),Math.max(0,t-Date.now())}return 0}),Jj.RETRIAL_MIN_WAIT,Jj.RETRIAL_MAX_WAIT)}(e,t),n.tokenRefresher=t),!n.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&n.tokenRefresher.start(),a.token&&IU(a.token)?(o=a.token,Promise.resolve().then((function(){return r({token:o.token})})).catch((function(){}))):null==a.token&&a.cachedTokenPromise.then((function(e){e&&IU(e)&&r({token:e.token})})).catch((function(){})),Yj(e,n)}function wU(e,t){var n=Qj(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Yj(e,Yi(Yi({},n),{tokenObservers:r}))}function TU(e,t){for(var n=0,r=Qj(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(e){}}}function IU(e){return 0<e.expireTimeMillis-Date.now()}var EU="https://www.google.com/recaptcha/api.js";function SU(e,t){var n=Qj(e),r=new ho;Yj(e,Yi(Yi({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a=tU();return a?a.ready((function(){kU(e,t,a,i),r.resolve(a)})):(n=function(){var n=tU();if(!n)throw new Error("no recaptcha");n.ready((function(){kU(e,t,n,i),r.resolve(n)}))},(o=document.createElement("script")).src=""+EU,o.onload=n,document.head.appendChild(o)),r.promise}function kU(e,t,n,r){r=n.render(r,{sitekey:t,size:"invisible"}),t=Qj(e),Yj(e,Yi(Yi({},t),{reCAPTCHAState:Yi(Yi({},t.reCAPTCHAState),{widgetId:r})}))}var CU=(NU.prototype.getToken=function(){return $i(this,void 0,void 0,(function(){var e;return Xi(this,(function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw zj.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,function(e){return $i(this,void 0,void 0,(function(){var t;return Xi(this,(function(n){switch(n.label){case 0:return nU(e),[4,Qj(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise((function(n,r){var i=Qj(e).reCAPTCHAState;t.ready((function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),zj.create("recaptcha-error");case 4:return[2,rU((n=this._app,r=(i=n.options).projectId,n=i.appId,i=i.apiKey,{url:$j+"/projects/"+r+"/apps/"+n+":exchangeRecaptchaToken?key="+i,body:{recaptcha_token:e}}),this._platformLoggerProvider)]}var n,r,i}))}))},NU.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,SU(e,this._siteKey).catch((function(){}))},NU);function NU(e){this._siteKey=e}var AU=(xU.prototype.getToken=function(){return $i(this,void 0,void 0,(function(){var e,t;return Xi(this,(function(n){switch(n.label){case 0:if(!this._app)throw zj.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=n.sent(),t=function(e){return"object"==typeof(e=Oo(e).claims)&&e.hasOwnProperty("iat")?e.iat:null}(e.token),t=null!==t&&t<Date.now()&&0<t?1e3*t:Date.now(),[2,Yi(Yi({},e),{issuedAtTimeMillis:t})]}}))}))},xU.prototype.initialize=function(e){this._app=e},xU);function xU(e){this._customProviderOptions=e}function PU(e,t){return{app:e,activate:function(n,r){return function(e,t,n,r){var i=Qj(e);if(i.activated)throw zj.create("already-activated",{appName:e.name});(i=Yi(Yi({},i),{activated:!0})).cachedTokenPromise=vU(e).then((function(t){return t&&IU(t)&&Yj(e,Yi(Yi({},Qj(e)),{token:t})),t})),i.provider="string"==typeof t?new CU(t):t instanceof CU||t instanceof AU?t:new AU({getToken:t.getToken}),i.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,Yj(e,i),i.provider.initialize(e,n)}(e,n,t,r)},setTokenAutoRefreshEnabled:function(t){return r=t,(t=Qj(n=e)).tokenRefresher&&(!0===r?t.tokenRefresher.start():t.tokenRefresher.stop()),void Yj(n,Yi(Yi({},t),{isTokenAutoRefreshEnabled:r}));var n,r},getToken:function(n){return function(e,t,n){return $i(this,void 0,void 0,(function(){var r;return Xi(this,(function(i){switch(i.label){case 0:return[4,bU(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,t,n)},onTokenChanged:function(n,r,i){return o=e,a=t,s=r,u=function(){},r=function(){},u=null!=n.next?n.next.bind(n):n,null!=n.error?r=n.error.bind(n):s&&(r=s),_U(o,a,"EXTERNAL",u,r),function(){return wU(o,u)};var o,a,s,u},INTERNAL:{delete:function(){for(var t=0,n=Qj(e).tokenObservers;t<n.length;t++){var r=n[t];wU(e,r.next)}return Promise.resolve()}}}}var RU,OU,DU,LU,MU="app-check-internal";return(RU=Oa).INTERNAL.registerComponent(new na("appCheck",(function(e){return PU(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:CU,CustomProvider:AU}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider(MU).initialize()}))),RU.INTERNAL.registerComponent(new na(MU,(function(e){var t,n,r=e.getProvider("app").getImmediate();return e=e.getProvider("platform-logger"),t=r,n=e,{getToken:function(e){return bU(t,n,e)},addTokenListener:function(e){return _U(t,n,"INTERNAL",e)},removeTokenListener:function(e){return wU(t,e)}}}),"PUBLIC").setInstantiationMode("EXPLICIT")),RU.registerVersion("@firebase/app-check","0.3.2"),"string"!=typeof(LU=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof n.g)return n.g;throw new Error("Unable to locate global object.")}()).FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==LU.FIREBASE_APPCHECK_DEBUG_TOKEN||((OU=Gj).enabled=!0,DU=new ho,OU.token=DU,"string"==typeof LU.FIREBASE_APPCHECK_DEBUG_TOKEN?DU.resolve(LU.FIREBASE_APPCHECK_DEBUG_TOKEN):DU.resolve(mU())),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Oa.registerVersion("firebase","8.10.1","cdn"),Oa}()},110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),v=u(n),g=0;g<a.length;++g){var m=a[g];if(!o[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var y=f(n,m);try{c(t,m,y)}catch(b){}}}}return t}},348:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function g(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=g,Object.defineProperty(e,"__esModule",{value:!0})}(t)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))n.call(o,c)&&(s[c]=o[c]);if(t){a=t(o);for(var l=0;l<a.length;l++)r.call(o,a[l])&&(s[a[l]]=o[a[l]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),o=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=60103,I=60106,E=60107,S=60108,k=60114,C=60109,N=60110,A=60112,x=60113,P=60120,R=60115,O=60116,D=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;T=U("react.element"),I=U("react.portal"),E=U("react.fragment"),S=U("react.strict_mode"),k=U("react.profiler"),C=U("react.provider"),N=U("react.context"),A=U("react.forward_ref"),x=U("react.suspense"),P=U("react.suspense_list"),R=U("react.memo"),O=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var q,V="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function K(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var z=!1;function W(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function H(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case k:return"Profiler";case S:return"StrictMode";case x:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return G(e.type);case D:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,ge=(ve=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ye).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var Te=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Te[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,Ne=null;function Ae(e){if(e=ni(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=ii(t),ke(e.stateNode,e.type,t))}}function xe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Re(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Le=Re,Me=!1,Fe=!1;function je(){null===Ce&&null===Ne||(De(),Pe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var qe=!1;if(h)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ve){qe=!1}function Be(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,ze=null,We=!1,He=null,Ge={onError:function(e){Ke=!0,ze=e}};function Qe(e,t,n,r,i,o,a,s,u){Ke=!1,ze=null,Be.apply(Ge,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(a(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xe(i),e;if(o===r)return Xe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,ot=[],at=null,st=null,ut=null,ct=new Map,lt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function vt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=dt(t,n,r,i,o),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){mt(e)&&n.delete(t)}function bt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&mt(at)&&(at=null),null!==st&&mt(st)&&(st=null),null!==ut&&mt(ut)&&(ut=null),ct.forEach(yt),lt.forEach(yt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,bt)))}function wt(e){function t(t){return _t(t,e)}if(0<ot.length){_t(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&_t(at,e),null!==st&&_t(st,e),null!==ut&&_t(ut,e),ct.forEach(t),lt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Tt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Tt("Animation","AnimationEnd"),animationiteration:Tt("Animation","AnimationIteration"),animationstart:Tt("Animation","AnimationStart"),transitionend:Tt("Transition","TransitionEnd")},Et={},St={};function kt(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Et[e]=n[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=kt("animationend"),Nt=kt("animationiteration"),At=kt("animationstart"),xt=kt("transitionend"),Pt=new Map,Rt=new Map,Ot=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Lt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Mt(u),i=Lt):0!==(s&=o)&&(r=Mt(s),i=Lt)}else 0!==(o=n&~a)?(r=Mt(o),i=Lt):0!==s&&(r=Mt(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Ut(10,t):e;case 10:return 0===(e=qt(192&~t))?Ut(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function qt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(zt(e)/Wt|0)|0},zt=Math.log,Wt=Math.LN2;var Ht=o.unstable_UserBlockingPriority,Gt=o.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||De();var i=Xt,o=Me;Me=!0;try{Oe(i,e,t,n,r)}finally{(Me=o)||je()}}function $t(e,t,n,r){Gt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<ot.length&&-1<ft.indexOf(e))e=dt(null,e,t,n,r),ot.push(e);else{var o=Jt(e,t,n,r);if(null===o)i&&pt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=dt(o,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=vt(at,e,t,n,r,i),!0;case"dragenter":return st=vt(st,e,t,n,r,i),!0;case"mouseover":return ut=vt(ut,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ct.set(o,vt(ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,lt.set(o,vt(lt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;pt(e,r)}Dr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Se(r);if(null!==(i=ti(i))){var o=Ye(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=$e(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function sn(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,cn,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=sn(hn),dn=i({},hn,{view:0,detail:0}),pn=sn(dn),vn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(un=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=un=0,ln=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),gn=sn(vn),mn=sn(i({},vn,{dataTransfer:0})),yn=sn(i({},dn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(_n),Tn=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var Nn=i({},dn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),xn=sn(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(On),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var jn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),qn=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){xe(r),0<(t=Mr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function $n(e){Nr(e,0)}function Xn(e){if(X(ri(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];if(Gn(t,Yn,e,Se(e)),e=$n,Me)e(t);else{Me=!0;try{Re(e,t)}finally{Me=!1,je()}}}}function or(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function sr(e,t){if("click"===e)return Xn(t)}function ur(e,t){if("input"===e||"change"===e)return Xn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=h&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,_r=null,wr=!1;function Tr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==J(r)||("selectionStart"in(r=yr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&hr(_r,r)||(_r=r,0<(r=Mr(br,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Ot,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Rt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Qe.apply(this,arguments),Ke){if(!Ke)throw Error(a(198));var l=ze;Ke=!1,ze=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Cr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Cr(i,s,c),o=u}}}if(We)throw e=He,We=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var xr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[xr]||(e[xr]=!0,s.forEach((function(t){kr.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&kr.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=oi(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Or(o,e,i,t),a.add(s))}function Or(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=$t;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ti(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=o,i=Se(n),a=[];e:{var s=Pt.get(e);if(void 0!==s){var u=fn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Ct:case Nt:case At:u=bn;break;case xt:u=Rn;break;case"scroll":u=pn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=xn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ue(p,f))&&l.push(Lr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Zr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(h=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=xn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ri(u),d=null==c?s:ri(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ti(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Fr(d))p++;for(d=0,v=f;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)f=Fr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Fr(l),f=Fr(f)}l=null}else l=null;null!==u&&jr(a,s,u,l,!1),null!==c&&null!==h&&jr(a,h,c,l,!0)}if("select"===(u=(s=r?ri(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Jn;else if(Hn(s))if(Zn)g=ur;else{g=ar;var m=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ri(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(yr=m,br=r,_r=null);break;case"focusout":_r=br=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Tr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Tr(a,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,zn=!0)),0<(m=Mr(r,b)).length&&(b=new Tn(b,e,null,n,i),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=Kn(n))&&(b.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Vn=!0,qn);case"textInput":return(e=t.data)===qn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new Tn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Nr(a,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ue(e,n))&&r.unshift(Lr(e,o,i)),null!=(o=Ue(e,t))&&r.push(Lr(e,o,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ue(n,o))&&a.unshift(Lr(n,u,s)):i||null!=(u=Ue(n,o))&&a.push(Lr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Ur(){}var qr=null,Vr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var zr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var $r=Math.random().toString(36).slice(2),Xr="__reactFiber$"+$r,Jr="__reactProps$"+$r,Zr="__reactContainer$"+$r,ei="__reactEvents$"+$r;function ti(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Xr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Xr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ii(e){return e[Jr]||null}function oi(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var ai=[],si=-1;function ui(e){return{current:e}}function ci(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function li(e,t){si++,ai[si]=e.current,e.current=t}var hi={},fi=ui(hi),di=ui(!1),pi=hi;function vi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mi(){ci(di),ci(fi)}function yi(e,t,n){if(fi.current!==hi)throw Error(a(168));li(fi,t),li(di,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,G(t)||"Unknown",o));return i({},n,r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=fi.current,li(fi,e),li(di,di.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=bi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(di),ci(fi),li(fi,e)):ci(di),li(di,n)}var Ti=null,Ii=null,Ei=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,ki=o.unstable_cancelCallback,Ci=o.unstable_shouldYield,Ni=o.unstable_requestPaint,Ai=o.unstable_now,xi=o.unstable_getCurrentPriorityLevel,Pi=o.unstable_ImmediatePriority,Ri=o.unstable_UserBlockingPriority,Oi=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Mi={},Fi=void 0!==Ni?Ni:function(){},ji=null,Ui=null,qi=!1,Vi=Ai(),Bi=1e4>Vi?Ai:function(){return Ai()-Vi};function Ki(){switch(xi()){case Pi:return 99;case Ri:return 98;case Oi:return 97;case Di:return 96;case Li:return 95;default:throw Error(a(332))}}function zi(e){switch(e){case 99:return Pi;case 98:return Ri;case 97:return Oi;case 96:return Di;case 95:return Li;default:throw Error(a(332))}}function Wi(e,t){return e=zi(e),Ei(e,t)}function Hi(e,t,n){return e=zi(e),Si(e,t,n)}function Gi(){if(null!==Ui){var e=Ui;Ui=null,ki(e)}Qi()}function Qi(){if(!qi&&null!==ji){qi=!0;var e=0;try{var t=ji;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Si(Pi,Gi),n}finally{qi=!1}}}var Yi=w.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ui(null),Ji=null,Zi=null,eo=null;function to(){eo=Zi=Ji=null}function no(e){var t=Xi.current;ci(Xi),e.type._context._currentValue=t}function ro(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function io(e,t){Ji=e,eo=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ma=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(a(308));Zi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var ao=!1;function so(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fo(e,t,n,r){var o=e.updateQueue;ao=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,h=l=c=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,v=a;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:ao=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,Vs|=s,e.lanes=s,e.memoizedState=f}}function po(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var vo=(new r.Component).refs;function go(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),o=co(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),lo(e,o),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),o=co(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),lo(e,o),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=co(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),lo(e,i),pu(e,r,n)}};function yo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,o))}function bo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"===typeof o&&null!==o?o=oo(o):(i=gi(t)?pi:fi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function _o(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=vo,so(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=oo(o):(o=gi(t)?pi:fi.current,i.context=vi(e,o)),fo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(go(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&mo.enqueueReplaceState(i,i.state,null),fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var To=Array.isArray;function Io(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===vo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Eo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Io(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=Io(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case T:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=Io(e,null,t),n.return=e,n;case I:return(t=Xu(t,e.mode,n)).return=e,t}if(To(t)||B(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Eo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case I:return n.key===i?l(e,t,n,r):null}if(To(n)||B(n))return null!==i?null:h(e,t,n,r,null);Eo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case T:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case I:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(To(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Eo(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,g=null;null!==h&&v<s.length;v++){h.index>v?(g=h,h=null):g=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=g}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(g=p(h,i,v,s[v],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=d(i,v,y.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,g),null===h?l=b:h.sibling=b,h=b,v=m}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,g),null===h?l=y:h.sibling=y,h=y);return l}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case T:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(o.type===E){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}}else if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=Io(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===E?((r=Qu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Gu(o.type,o.key,o.props,null,e.mode,u)).ref=Io(e,r,o),u.return=e,e=u)}return s(e);case I:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=$u(o,e.mode,u)).return=e,e=r),s(e);if(To(o))return v(e,r,o,u);if(B(o))return g(e,r,o,u);if(l&&Eo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(e.type)||"Component"))}return n(e,r)}}var ko=So(!0),Co=So(!1),No={},Ao=ui(No),xo=ui(No),Po=ui(No);function Ro(e){if(e===No)throw Error(a(174));return e}function Oo(e,t){switch(li(Po,t),li(xo,e),li(Ao,No),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ao),li(Ao,t)}function Do(){ci(Ao),ci(xo),ci(Po)}function Lo(e){Ro(Po.current);var t=Ro(Ao.current),n=de(t,e.type);t!==n&&(li(xo,e),li(Ao,n))}function Mo(e){xo.current===e&&(ci(Ao),ci(xo))}var Fo=ui(0);function jo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uo=null,qo=null,Vo=!1;function Bo(e,t){var n=zu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ko(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function zo(e){if(Vo){var t=qo;if(t){var n=t;if(!Ko(e,t)){if(!(t=Gr(n.nextSibling))||!Ko(e,t))return e.flags=-1025&e.flags|2,Vo=!1,void(Uo=e);Bo(Uo,n)}Uo=e,qo=Gr(t.firstChild)}else e.flags=-1025&e.flags|2,Vo=!1,Uo=e}}function Wo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Uo=e}function Ho(e){if(e!==Uo)return!1;if(!Vo)return Wo(e),Vo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=qo;t;)Bo(e,t),t=Gr(t.nextSibling);if(Wo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){qo=Gr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}qo=null}}else qo=Uo?Gr(e.stateNode.nextSibling):null;return!0}function Go(){qo=Uo=null,Vo=!1}var Qo=[];function Yo(){for(var e=0;e<Qo.length;e++)Qo[e]._workInProgressVersionPrimary=null;Qo.length=0}var $o=w.ReactCurrentDispatcher,Xo=w.ReactCurrentBatchConfig,Jo=0,Zo=null,ea=null,ta=null,na=!1,ra=!1;function ia(){throw Error(a(321))}function oa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function aa(e,t,n,r,i,o){if(Jo=o,Zo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$o.current=null===e||null===e.memoizedState?Ra:Oa,e=n(r,i),ra){o=0;do{if(ra=!1,!(25>o))throw Error(a(301));o+=1,ta=ea=null,t.updateQueue=null,$o.current=Da,e=n(r,i)}while(ra)}if($o.current=Pa,t=null!==ea&&null!==ea.next,Jo=0,ta=ea=Zo=null,na=!1,t)throw Error(a(300));return e}function sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ta?Zo.memoizedState=ta=e:ta=ta.next=e,ta}function ua(){if(null===ea){var e=Zo.alternate;e=null!==e?e.memoizedState:null}else e=ea.next;var t=null===ta?Zo.memoizedState:ta.next;if(null!==t)ta=t,ea=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ea=e).memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},null===ta?Zo.memoizedState=ta=e:ta=ta.next=e}return ta}function ca(e,t){return"function"===typeof t?t(e):t}function la(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ea,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Jo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,Zo.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,cr(r,t.memoizedState)||(Ma=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ha(e){var t=ua(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);cr(o,t.memoizedState)||(Ma=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function fa(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Jo&e)===e)&&(t._workInProgressVersionPrimary=r,Qo.push(t))),e)return n(t._source);throw Qo.push(t),Error(a(350))}function da(e,t,n,r){var i=Os;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=$o.current,c=u.useState((function(){return fa(i,t,n)})),l=c[1],h=c[0];c=ta;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var g=Zo;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!cr(s,e)){e=n(t._source),cr(h,e)||(l(e),e=du(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-Kt(a),c=1<<u;r[u]|=e,a&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:h}).dispatch=l=xa.bind(null,Zo,e),c.queue=e,c.baseQueue=null,h=fa(i,t,n),c.memoizedState=c.baseState=h),h}function pa(e,t,n){return da(ua(),e,t,n)}function va(e){var t=sa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e}).dispatch=xa.bind(null,Zo,e),[t.memoizedState,e]}function ga(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Zo.updateQueue)?(t={lastEffect:null},Zo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ma(e){return e={current:e},sa().memoizedState=e}function ya(){return ua().memoizedState}function ba(e,t,n,r){var i=sa();Zo.flags|=e,i.memoizedState=ga(1|t,n,void 0,void 0===r?null:r)}function _a(e,t,n,r){var i=ua();r=void 0===r?null:r;var o=void 0;if(null!==ea){var a=ea.memoizedState;if(o=a.destroy,null!==r&&oa(r,a.deps))return void ga(t,n,o,r)}Zo.flags|=e,i.memoizedState=ga(1|t,n,o,r)}function wa(e,t){return ba(516,4,e,t)}function Ta(e,t){return _a(516,4,e,t)}function Ia(e,t){return _a(4,2,e,t)}function Ea(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_a(4,2,Ea.bind(null,t,e),n)}function ka(){}function Ca(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Na(e,t){var n=ua();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&oa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Aa(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Xo.transition;Xo.transition=1;try{e(!1),t()}finally{Xo.transition=n}}))}function xa(e,t,n){var r=fu(),i=du(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Zo||null!==a&&a===Zo)ra=na=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,cr(u,s))return}catch(c){}pu(e,i,r)}}var Pa={readContext:oo,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useOpaqueIdentifier:ia,unstable_isNewReconciler:!1},Ra={readContext:oo,useCallback:function(e,t){return sa().memoizedState=[e,void 0===t?null:t],e},useContext:oo,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,2,Ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,2,e,t)},useMemo:function(e,t){var n=sa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=xa.bind(null,Zo,e),[r.memoizedState,e]},useRef:ma,useState:va,useDebugValue:ka,useDeferredValue:function(e){var t=va(e),n=t[0],r=t[1];return wa((function(){var t=Xo.transition;Xo.transition=1;try{r(e)}finally{Xo.transition=t}}),[e]),n},useTransition:function(){var e=va(!1),t=e[0];return ma(e=Aa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=sa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},da(r,e,t,n)},useOpaqueIdentifier:function(){if(Vo){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(a(355))})),n=va(t)[1];return 0===(2&Zo.mode)&&(Zo.flags|=516,ga(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return va(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Oa={readContext:oo,useCallback:Ca,useContext:oo,useEffect:Ta,useImperativeHandle:Sa,useLayoutEffect:Ia,useMemo:Na,useReducer:la,useRef:ya,useState:function(){return la(ca)},useDebugValue:ka,useDeferredValue:function(e){var t=la(ca),n=t[0],r=t[1];return Ta((function(){var t=Xo.transition;Xo.transition=1;try{r(e)}finally{Xo.transition=t}}),[e]),n},useTransition:function(){var e=la(ca)[0];return[ya().current,e]},useMutableSource:pa,useOpaqueIdentifier:function(){return la(ca)[0]},unstable_isNewReconciler:!1},Da={readContext:oo,useCallback:Ca,useContext:oo,useEffect:Ta,useImperativeHandle:Sa,useLayoutEffect:Ia,useMemo:Na,useReducer:ha,useRef:ya,useState:function(){return ha(ca)},useDebugValue:ka,useDeferredValue:function(e){var t=ha(ca),n=t[0],r=t[1];return Ta((function(){var t=Xo.transition;Xo.transition=1;try{r(e)}finally{Xo.transition=t}}),[e]),n},useTransition:function(){var e=ha(ca)[0];return[ya().current,e]},useMutableSource:pa,useOpaqueIdentifier:function(){return ha(ca)[0]},unstable_isNewReconciler:!1},La=w.ReactCurrentOwner,Ma=!1;function Fa(e,t,n,r){t.child=null===e?Co(t,null,n,r):ko(t,e.child,n,r)}function ja(e,t,n,r,i){n=n.render;var o=t.ref;return io(t,i),r=aa(e,t,n,r,o,i),null===e||Ma?(t.flags|=1,Fa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function Ua(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Wu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,qa(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.flags|=1,(e=Hu(a,r)).ref=t.ref,e.return=t,t.child=e)}function qa(e,t,n,r,i,o){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Ma=!1,0===(o&i))return t.lanes=e.lanes,os(e,t,o);0!==(16384&e.flags)&&(Ma=!0)}return Ka(e,t,n,r,o)}function Va(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},Tu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Tu(t,e),null;t.memoizedState={baseLanes:0},Tu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Tu(t,r);return Fa(e,t,i,n),t.child}function Ba(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ka(e,t,n,r,i){var o=gi(n)?pi:fi.current;return o=vi(t,o),io(t,i),n=aa(e,t,n,r,o,i),null===e||Ma?(t.flags|=1,Fa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,os(e,t,i))}function za(e,t,n,r,i){if(gi(n)){var o=!0;_i(t)}else o=!1;if(io(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bo(t,n,r),wo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=oo(c):c=vi(t,c=gi(n)?pi:fi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(t,a,r,c),ao=!1;var f=t.memoizedState;a.state=f,fo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||di.current||ao?("function"===typeof l&&(go(t,n,l,r),u=t.memoizedState),(s=ao||yo(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,uo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:$i(t.type,s),a.props=c,h=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=oo(u):u=vi(t,u=gi(n)?pi:fi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&_o(t,a,r,u),ao=!1,f=t.memoizedState,a.state=f,fo(t,r,a,i);var p=t.memoizedState;s!==h||f!==p||di.current||ao?("function"===typeof d&&(go(t,n,d,r),p=t.memoizedState),(c=ao||yo(t,n,c,r,f,p,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Wa(e,t,n,r,o,i)}function Wa(e,t,n,r,i,o){Ba(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&wi(t,n,!1),os(e,t,o);r=t.stateNode,La.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,s,o)):Fa(e,t,s,o),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Ha(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Oo(e,t.containerInfo)}var Ga,Qa,Ya,$a,Xa={dehydrated:null,retryLane:0};function Ja(e,t,n){var r,i=t.pendingProps,o=Fo.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),li(Fo,1&o),null===e?(void 0!==i.fallback&&zo(t),e=i.children,o=i.fallback,a?(e=Za(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xa,e):"number"===typeof i.unstable_expectedLoadTime?(e=Za(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xa,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=ts(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Xa,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Za(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Yu(t,i,0,null),n=Qu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Hu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hu(a,s),null!==e?r=Hu(e,r):(r=Qu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ro(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fa(e,t,r.children,n),0!==(2&(r=Fo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Fo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===jo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===jo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Hu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function as(e,t){if(!Vo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&mi(),null;case 3:return Do(),ci(di),ci(fi),Yo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ho(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qa(t),null;case 5:Mo(t);var o=Ro(Po.current);if(n=t.type,null!==e&&null!=t.stateNode)Ya(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Ro(Ao.current),Ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xr]=t,r[Jr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ie(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===he.html&&(e=fe(n)),e===he.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Jr]=r,Ga(e,t,!1,!1),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sr.length;o++)Ar(Sr[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Ar("invalid",e);break;default:o=r}Ie(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&me(e,h):"number"===typeof h&&me(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ar("scroll",e):null!=h&&_(e,s,h,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Ur)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$a(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Ro(Po.current),Ro(Ao.current),Ho(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return ci(Fo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ho(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fo.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Os||0===(134217727&Vs)&&0===(134217727&Bs)||yu(Os,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Do(),Qa(t),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return no(t),null;case 19:if(ci(Fo),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)as(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=jo(e))){for(t.flags|=64,as(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Fo,1&Fo.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Hs&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=jo(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),as(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=64,s=!0,as(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Fo.current,li(Fo,s?1&t|2:1&t),n):null;case 23:case 24:return Iu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function us(e){switch(e.tag){case 1:gi(e.type)&&mi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Do(),ci(di),ci(fi),Yo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Mo(e),null;case 13:return ci(Fo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Fo),null;case 4:return Do(),null;case 10:return no(e),null;case 23:case 24:return Iu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ga=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qa=function(){},Ya=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ro(Ao.current);var a,s=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in Ie(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},$a=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){qu(e,n)}else t.current=null}function gs(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(a(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&po(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}po(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(a(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_e("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ti,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(o){qu(r,o)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){qu(t,o)}break;case 5:vs(t);break;case 4:Ss(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function Ts(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Is(e,n,t):Es(e,n,t)}function Is(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(bs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?me(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=Bi(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(a(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ns(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var As=Math.ceil,xs=w.ReactCurrentDispatcher,Ps=w.ReactCurrentOwner,Rs=0,Os=null,Ds=null,Ls=0,Ms=0,Fs=ui(0),js=0,Us=null,qs=0,Vs=0,Bs=0,Ks=0,zs=null,Ws=0,Hs=1/0;function Gs(){Hs=Bi()+500}var Qs,Ys=null,$s=!1,Xs=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,ou=0,au=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&Rs)?Bi():-1!==su?su:su=Bi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===uu&&(uu=qs),0!==Yi.transition){0!==cu&&(cu=null!==zs?zs.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Rs)&&98===e?e=Ut(12,uu):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<ou)throw ou=0,au=null,Error(a(185));if(null===(e=vu(e,t)))return null;Bt(e,t,n),e===Os&&(Bs|=t,4===js&&yu(e,Ls));var r=Ki();1===t?0!==(8&Rs)&&0===(48&Rs)?bu(e):(gu(e,n),0===Rs&&(Gs(),Gi())):(0===(4&Rs)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),gu(e,n)),zs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Kt(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var h=Lt;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ft(e,e===Os?Ls:0),t=Lt,0===r)null!==n&&(n!==Mi&&ki(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&ki(n)}15===t?(n=bu.bind(null,e),null===ji?(ji=[n],Ui=Si(Pi,Qi)):ji.push(n),n=Mi):14===t?n=Hi(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),n=Hi(n,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mu(e){if(su=-1,cu=uu=0,0!==(48&Rs))throw Error(a(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ft(e,e===Os?Ls:0);if(0===n)return null;var r=n,i=Rs;Rs|=16;var o=ku();for(Os===e&&Ls===r||(Gs(),Eu(e,r));;)try{Au();break}catch(u){Su(e,u)}if(to(),xs.current=o,Rs=i,null!==Ds?r=0:(Os=null,Ls=0,r=js),0!==(qs&Bs))Eu(e,0);else if(0!==r){if(2===r&&(Rs|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Cu(e,n))),1===r)throw t=Us,Eu(e,0),yu(e,n),gu(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:case 5:Ru(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Ws+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zr(Ru.bind(null,e),r);break}Ru(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Kt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*As(n/1960))-n)){e.timeoutHandle=zr(Ru.bind(null,e),n);break}Ru(e);break;default:throw Error(a(329))}}return gu(e,Bi()),e.callbackNode===t?mu.bind(null,e):null}function yu(e,t){for(t&=~Ks,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Rs))throw Error(a(327));if(Lu(),e===Os&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Cu(e,t);0!==(qs&Bs)&&(n=Cu(e,t=Ft(e,t)))}else n=Cu(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Rs|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Cu(e,t))),1===n)throw n=Us,Eu(e,0),yu(e,t),gu(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ru(e),gu(e,Bi()),null}function _u(e,t){var n=Rs;Rs|=1;try{return e(t)}finally{0===(Rs=n)&&(Gs(),Gi())}}function wu(e,t){var n=Rs;Rs&=-2,Rs|=8;try{return e(t)}finally{0===(Rs=n)&&(Gs(),Gi())}}function Tu(e,t){li(Fs,Ms),Ms|=t,qs|=t}function Iu(){Ms=Fs.current,ci(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Do(),ci(di),ci(fi),Yo();break;case 5:Mo(r);break;case 4:Do();break;case 13:case 19:ci(Fo);break;case 10:no(r);break;case 23:case 24:Iu()}n=n.return}Os=e,Ds=Hu(e.current,null),Ls=Ms=qs=t,js=0,Us=null,Ks=Bs=Vs=0}function Su(e,t){for(;;){var n=Ds;try{if(to(),$o.current=Pa,na){for(var r=Zo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}na=!1}if(Jo=0,ta=ea=Zo=null,ra=!1,Ps.current=null,null===n||null===n.return){js=1,Us=t,Ds=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fo.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var g=f.updateQueue;if(null===g){var m=new Set;m.add(c),f.updateQueue=m}else g.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=co(-1,1);y.tag=2,lo(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new hs,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var _=Vu.bind(null,o,c,s);c.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=cs(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,ho(f,fs(0,o,t));break e;case 1:o=u;var w=f.type,T=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==T&&"function"===typeof T.componentDidCatch&&(null===Js||!Js.has(T)))){f.flags|=4096,t&=-t,f.lanes|=t,ho(f,ds(f,o,t));break e}}f=f.return}while(null!==f)}Pu(n)}catch(I){t=I,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function ku(){var e=xs.current;return xs.current=Pa,null===e?Pa:e}function Cu(e,t){var n=Rs;Rs|=16;var r=ku();for(Os===e&&Ls===t||Eu(e,t);;)try{Nu();break}catch(i){Su(e,i)}if(to(),Rs=n,xs.current=r,null!==Ds)throw Error(a(261));return Os=null,Ls=0,js}function Nu(){for(;null!==Ds;)xu(Ds)}function Au(){for(;null!==Ds&&!Ci();)xu(Ds)}function xu(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Pu(e):Ds=t,Ps.current=null}function Pu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===js&&(js=5)}function Ru(e){var t=Ki();return Wi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Lu()}while(null!==eu);if(0!==(48&Rs))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-Kt(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ds=Os=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Rs,Rs|=32,Ps.current=null,qr=Qt,gr(s=vr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(k){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,g=s,m=null;t:for(;;){for(var y;g!==u||0!==o&&3!==g.nodeType||(f=h+o),g!==c||0!==l&&3!==g.nodeType||(d=h+l),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)m=g,g=y;for(;;){if(g===s)break t;if(m===u&&++p===o&&(f=h),m===c&&++v===l&&(d=h),null!==(y=g.nextSibling))break;m=(g=m).parentNode}g=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Vr={focusedElem:s,selectionRange:u},Qt=!1,lu=null,hu=!1,Ys=r;do{try{Du()}catch(k){if(null===Ys)throw Error(a(330));qu(Ys,k),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&me(Ys.stateNode,""),128&b){var _=Ys.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:Ts(Ys),Ys.flags&=-3;break;case 6:Ts(Ys),Ys.flags&=-3,ks(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,ks(Ys.alternate,Ys);break;case 4:ks(Ys.alternate,Ys);break;case 8:Ss(s,u=Ys);var T=u.alternate;_s(u),null!==T&&_s(T)}Ys=Ys.nextEffect}}catch(k){if(null===Ys)throw Error(a(330));qu(Ys,k),Ys=Ys.nextEffect}}while(null!==Ys);if(w=Vr,_=vr(),b=w.focusedElem,s=w.selectionRange,_!==b&&b&&b.ownerDocument&&pr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,T=Math.min(s.start,u),s=void 0===s.end?T:Math.min(s.end,u),!w.extend&&T>s&&(u=s,s=T,T=u),u=dr(b,T),o=dr(b,s),u&&o&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),T>s?(w.addRange(_),w.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!qr,Vr=qr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var I=Ys.flags;if(36&I&&ms(b,Ys.alternate,Ys),128&I){_=void 0;var E=Ys.ref;if(null!==E){var S=Ys.stateNode;Ys.tag,_=S,"function"===typeof E?E(_):E.current=_}}Ys=Ys.nextEffect}}catch(k){if(null===Ys)throw Error(a(330));qu(Ys,k),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Fi(),Rs=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((I=Ys).sibling=null,I.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===au?ou++:(ou=0,au=e):ou=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ti,n,void 0,64===(64&n.current.flags))}catch(k){}if(gu(e,Bi()),$s)throw $s=!1,e=Xs,Xs=null,e;return 0!==(8&Rs)||Gi(),null}function Du(){for(;null!==Ys;){var e=Ys.alternate;hu||null===lu||(0!==(8&Ys.flags)?Ze(Ys,lu)&&(hu=!0):13===Ys.tag&&Ns(e,Ys)&&Ze(Ys,lu)&&(hu=!0));var t=Ys.flags;0!==(256&t)&&gs(e,Ys),0===(512&t)||Zs||(Zs=!0,Hi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,ju)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Hi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Hi(97,(function(){return Lu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Rs))throw Error(a(331));var t=Rs;Rs|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));qu(o,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));qu(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Rs=t,Gi(),!0}function Uu(e,t,n){lo(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(Bt(e,1,t),gu(e,t))}function qu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=cs(t,e),1);if(lo(n,i),i=fu(),null!==(n=vu(n,1)))Bt(n,1,i),gu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ls&n)===n&&(4===js||3===js&&(62914560&Ls)===Ls&&500>Bi()-Ws?Eu(e,0):Ks|=n),gu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===uu&&(uu=qs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(Bt(e,t,n),gu(e,n))}function Ku(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function zu(e,t,n,r){return new Ku(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hu(e,t){var n=e.alternate;return null===n?((n=zu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Qu(n.children,i,o,t);case M:s=8,i|=16;break;case S:s=8,i|=1;break;case k:return(e=zu(12,n,t,8|i)).elementType=k,e.type=k,e.lanes=o,e;case x:return(e=zu(13,n,t,i)).type=x,e.elementType=x,e.lanes=o,e;case P:return(e=zu(19,n,t,i)).elementType=P,e.lanes=o,e;case F:return Yu(n,i,o,t);case j:return(e=zu(24,n,t,i)).elementType=j,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case N:s=9;break e;case A:s=11;break e;case R:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=zu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Qu(e,t,n,r){return(e=zu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=zu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=zu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=zu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n,r){var i=t.current,o=fu(),s=du(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(gi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(gi(c)){n=bi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=co(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),lo(i,t),pu(i,s,o),s}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=zu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,so(t),e[Zr]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=ec(a);s.call(e)}}Zu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=ec(a);u.call(e)}}wu((function(){Zu(t,a,e,i)}))}return ec(a)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Ma=!0;else{if(0===(n&r)){switch(Ma=!1,t.tag){case 3:Ha(t),Go();break;case 5:Lo(t);break;case 1:gi(t.type)&&_i(t);break;case 4:Oo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ja(e,t,n):(li(Fo,1&Fo.current),null!==(t=os(e,t,n))?t.sibling:null);li(Fo,1&Fo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Fo,Fo.current),r)break;return null;case 23:case 24:return t.lanes=0,Va(e,t,n)}return os(e,t,n)}Ma=0!==(16384&e.flags)}else Ma=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,fi.current),io(t,n),i=aa(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var o=!0;_i(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,so(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&go(t,r,s,e),i.updater=mo,t.stateNode=i,i._reactInternals=t,wo(t,r,e,n),t=Wa(null,t,r,!0,o,n)}else t.tag=0,Fa(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(i),e=$i(i,e),o){case 0:t=Ka(null,t,i,e,n);break e;case 1:t=za(null,t,i,e,n);break e;case 11:t=ja(null,t,i,e,n);break e;case 14:t=Ua(null,t,i,$i(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ka(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,za(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(Ha(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,uo(e,t),fo(t,r,null,n),(r=t.memoizedState.element)===i)Go(),t=os(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(qo=Gr(t.stateNode.containerInfo.firstChild),Uo=t,o=Vo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Qo.push(o);for(n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fa(e,t,r,n),Go();t=t.child}return t;case 5:return Lo(t),null===e&&zo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Kr(r,i)?s=null:null!==o&&Kr(r,o)&&(t.flags|=16),Ba(e,t),Fa(e,t,s,n),t.child;case 6:return null===e&&zo(t),null;case 13:return Ja(e,t,n);case 4:return Oo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ko(t,null,r,n):Fa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Fa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fa(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(li(Xi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=cr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!di.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=co(-1,n&-n)).tag=2,lo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ro(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Fa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,io(t,n),r=r(i=oo(i,o.unstable_observedBits)),t.flags|=1,Fa(e,t,r,n),t.child;case 14:return o=$i(i=t.type,t.pendingProps),Ua(e,t,i,o=$i(i.type,o),r,n);case 15:return qa(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,_i(t)):e=!1,io(t,n),bo(t,r,i),wo(t,r,i,n),Wa(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Va(e,t,n)}throw Error(a(156,t.tag))},rc.prototype.render=function(e){Zu(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zu(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(pu(e,4,fu()),nc(e,4))},tt=function(e){13===e.tag&&(pu(e,67108864,fu()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),nc(e,n)}},rt=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(a(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Re=_u,Oe=function(e,t,n,r,i){var o=Rs;Rs|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Rs=o)&&(Gs(),Gi())}},De=function(){0===(49&Rs)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gu(e,Bi())}))}Gi()}(),Lu())},Le=function(e,t){var n=Rs;Rs|=2;try{return e(t)}finally{0===(Rs=n)&&(Gs(),Gi())}};var sc={Events:[ni,ri,ii,xe,Pe,Lu,{current:!1}]},uc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Ti=lc.inject(cc),Ii=lc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Rs;if(0!==(48&n))return e(t);Rs|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Rs=n,Gi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(a(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(a(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(a(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return ac(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case s:case a:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case v:case u:return e;default:return t}}case i:return t}}}function T(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return T(e)||w(e)===l},t.isConcurrentMode=T,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===m)},t.typeOf=w},441:function(e,t,n){"use strict";e.exports=n(372)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],f=n[1],d=n.index;if(s+=e.slice(a,d),a=d+h.length,f)s+=f[1];else{var p=e[a],v=n[2],g=n[3],m=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var w=null!=v&&null!=p&&p!==v,T="+"===b||"*"===b,I="?"===b||"*"===b,E=n[2]||l,S=m||y;r.push({name:g||o++,prefix:v||"",delimiter:E,optional:I,repeat:T,partial:w,asterisk:!!_,pattern:S?c(S):_?".*":"[^"+u(E)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",s=t||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,f=s[l.name];if(null==f){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===d?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=u(c);else{var f=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+f+d+")*"),a+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),v=a.slice(-p.length)===p;return i||(a=(v?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+a,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},203:function(){"use strict"},117:function(e,t,n){"use strict";var r=n(725),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var b=y.prototype=new m;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!T.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+k(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),C(a,t,n,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+k(s=e[c],c);u+=C(s,t,n,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+k(s,c++),a);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var x={current:null};function P(){var e=x.current;if(null===e)throw Error(d(321));return e}var R={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!T.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,g=null,m=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+y;try{g(!0,e)?w.postMessage(null):(v=!1,g=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){g=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=f((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>S(a,n))void 0!==u&&0>S(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],C=[],N=1,A=null,x=3,P=!1,R=!1,O=!1;function D(e){for(var t=I(C);null!==t;){if(null===t.callback)E(C);else{if(!(t.startTime<=e))break;E(C),t.sortIndex=t.expirationTime,T(k,t)}t=I(C)}}function L(e){if(O=!1,D(e),!R)if(null!==I(k))R=!0,n(M);else{var t=I(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){R=!1,O&&(O=!1,i()),P=!0;var o=x;try{for(D(n),A=I(k);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,x=A.priorityLevel;var s=a(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===I(k)&&E(k),D(n)}else E(k);A=I(k)}if(null!==A)var u=!0;else{var c=I(C);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{A=null,x=o,P=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||P||(R=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return I(k)},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var n=x;x=t;try{return e()}finally{x=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=x;x=e;try{return t()}finally{x=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:N++,callback:o,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,T(C,e),null===I(k)&&e===I(C)&&(O?i():O=!0,r(L,a-s))):(e.sortIndex=u,T(k,e),R||P||(R=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=x;return function(){var n=x;x=t;try{return e.apply(this,arguments)}finally{x=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},388:function(e,t,n){"use strict";n.r(t),n.d(t,{__assign:function(){return o},__asyncDelegator:function(){return S},__asyncGenerator:function(){return E},__asyncValues:function(){return k},__await:function(){return I},__awaiter:function(){return p},__classPrivateFieldGet:function(){return P},__classPrivateFieldIn:function(){return O},__classPrivateFieldSet:function(){return R},__createBinding:function(){return g},__decorate:function(){return s},__esDecorate:function(){return c},__exportStar:function(){return m},__extends:function(){return i},__generator:function(){return v},__importDefault:function(){return x},__importStar:function(){return A},__makeTemplateObject:function(){return C},__metadata:function(){return d},__param:function(){return u},__propKey:function(){return h},__read:function(){return b},__rest:function(){return a},__runInitializers:function(){return l},__setFunctionName:function(){return f},__spread:function(){return _},__spreadArray:function(){return T},__spreadArrays:function(){return w},__values:function(){return y}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?r.static?e:e.prototype:null,h=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f=!1,d=n.length-1;d>=0;d--){var p={};for(var v in r)p[v]="access"===v?{}:r[v];for(var v in r.access)p.access[v]=r.access[v];p.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,n[d])("accessor"===u?{get:h.get,set:h.set}:h[c],p);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(h.get=s),(s=a(g.set))&&(h.set=s),(s=a(g.init))&&i.push(s)}else(s=a(g))&&("field"===u?i.push(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),f=!0}function l(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function h(e){return"symbol"===typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function d(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function v(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function m(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function y(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function T(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function E(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof I?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function S(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:I(e[r](t)),done:!1}:i?i(t):t}:i}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return N(t,e),t}function x(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function R(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function O(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){"use strict";var e=n(791),t=n(164);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function a(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var u=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&a(e),u=t&&a(t),c=o||u;if(e&&a(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var h=0,f=i.length;f>=0;f--){var d=i[f];"."===d?s(i,f):".."===d?(s(i,f),h++):h&&(s(i,f),h--)}if(!c)for(;h--;h)i.unshift("..");!c||""===i[0]||i[0]&&a(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},c=!0,l="Invariant failed";var h=function(e,t){if(!e){if(c)throw new Error(l);throw new Error(l+": "+(t||""))}};function f(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function p(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function v(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function m(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=o({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(rb){throw rb instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):rb}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=u(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var w="popstate",T="hashchange";function I(){try{return window.history.state||{}}catch(rb){return{}}}function E(e){void 0===e&&(e={}),b||h(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,s=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?_:u,l=i.keyLength,d=void 0===l?6:l,E=e.basename?v(f(e.basename)):"";function S(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return E&&(o=p(o,E)),m(o,r,n)}function k(){return Math.random().toString(36).substr(2,d)}var C=y();function N(e){o(q,e),q.length=t.length,C.notifyListeners(q.location,q.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||R(S(e.state))}function x(){R(S(I()))}var P=!1;function R(e){if(P)P=!1,N();else{C.confirmTransitionTo(e,"POP",c,(function(t){t?N({action:"POP",location:e}):function(e){var t=q.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,M(i))}(e)}))}}var O=S(I()),D=[O.key];function L(e){return E+g(e)}function M(e){t.go(e)}var F=0;function j(e){1===(F+=e)&&1===e?(window.addEventListener(w,A),r&&window.addEventListener(T,x)):0===F&&(window.removeEventListener(w,A),r&&window.removeEventListener(T,x))}var U=!1;var q={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",o=m(e,r,k(),q.location);C.confirmTransitionTo(o,i,c,(function(e){if(e){var r=L(o),a=o.key,u=o.state;if(n)if(t.pushState({key:a,state:u},null,r),s)window.location.href=r;else{var c=D.indexOf(q.location.key),l=D.slice(0,c+1);l.push(o.key),D=l,N({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=m(e,r,k(),q.location);C.confirmTransitionTo(o,i,c,(function(e){if(e){var r=L(o),a=o.key,u=o.state;if(n)if(t.replaceState({key:a,state:u},null,r),s)window.location.replace(r);else{var c=D.indexOf(q.location.key);-1!==c&&(D[c]=o.key),N({action:i,location:o})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return U||(j(1),U=!0),function(){return U&&(U=!1,j(-1)),t()}},listen:function(e){var t=C.appendListener(e);return j(1),function(){j(-1),t()}}};return q}var S="hashchange",k={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:f},slash:{encodePath:f,decodePath:f}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function N(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function A(e){window.location.replace(C(window.location.href)+"#"+e)}function x(e){void 0===e&&{},b||h(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?_:r,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?v(f(e.basename)):"",c=k[s],l=c.encodePath,d=c.decodePath;function w(){var e=d(N());return u&&p(e,u),m(e)}var T=y();function I(e){o(q,e),q.length=t.length,T.notifyListeners(q.location,q.action)}var E=!1,x=null;function P(){var e,t,n=N(),r=l(n);if(n!==r)A(r);else{var o=w(),a=q.location;if(!E&&(o,a.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(x===g(o))return;null,function(e){if(E)!1,I();else{var t="POP";T.confirmTransitionTo(e,t,i,(function(n){n?I({action:t,location:e}):function(e){var t=q.location,n=L.lastIndexOf(g(t));-1===n&&0;var r=L.lastIndexOf(g(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(o)}}var R=N(),O=l(R);R!==O&&A(O);var D=w(),L=[g(D)];function M(e){t.go(e)}var F=0;function j(e){1===(F+=e)&&1===e?window.addEventListener(S,P):0===F&&window.removeEventListener(S,P)}var U=!1;var q={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&C(window.location.href),n+"#"+l(u+g(e))},push:function(e,t){var n="PUSH",r=m(e,void 0,void 0,q.location);T.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);if(N()!==i){t,function(e){window.location.hash=e}(i);var o=L.lastIndexOf(g(q.location)),a=L.slice(0,o+1);a.push(t),a,I({action:n,location:r})}else I()}}))},replace:function(e,t){var n="REPLACE",r=m(e,void 0,void 0,q.location);T.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);N()!==i&&(t,A(i));var o=L.indexOf(g(q.location));-1!==o&&(L[o]=t),I({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=T.setPrompt(e);return U||(j(1),!0),function(){return U&&(!1,j(-1)),t()}},listen:function(e){var t=T.appendListener(e);return j(1),function(){j(-1),t()}}};return q}function P(e,t,n){return Math.min(Math.max(e,t),n)}var R=n(7),O=n.n(R),D=1073741823,L="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var M=e.createContext||function(t,n){var r,o,a="__create-react-context-"+function(){var e="__global_unique_id__";return L[e]=(L[e]||0)+1}()+"__",s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}i(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):D,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(e.Component);s.childContextTypes=((r={})[a]=O().object.isRequired,r);var u=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!==((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}i(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?D:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?D:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(e.Component);return u.contextTypes=((o={})[a]=O().object,o),{Provider:s,Consumer:u}},F=M,j=n(239),U=n.n(j);n(441);function q(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var V=function(e){var t=F();return t.displayName=e,t},B=V("Router-History"),K=function(e){var t=F();return t.displayName=e,t},z=K("Router"),W=function(t){function n(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}i(n,t),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return e.createElement(z.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},e.createElement(B.Provider,{children:this.props.children||null,value:this.props.history}))},n}(e.Component);e.Component;e.Component;var H={},G=1e4,Q=0;function Y(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=H[n]||(H[n]={});if(r[e])return r[e];var i=[],o={regexp:U()(e,i,t),keys:i};return Q<G&&(r[e]=o,Q++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],h=u.slice(1),f=e===l;return o&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:a.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var $=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.prototype.render=function(){var t=this;return e.createElement(z.Consumer,null,(function(n){n||h(!1);var r=t.props.location||n.location,i=o({},n,{location:r,match:t.props.computedMatch?t.props.computedMatch:t.props.path?Y(r.pathname,t.props):n.match}),a=t.props,s=a.children,u=a.component,c=a.render;return Array.isArray(s)&&0===s.length&&(s=null),e.createElement(z.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:u?e.createElement(u,i):c?c(i):null:"function"===typeof s?s(i):null)}))},n}(e.Component);function X(e){return"/"===e.charAt(0)?e:"/"+e}function J(e,t){if(!e)return t;var n=X(e);return 0!==t.pathname.indexOf(n)?t:o({},t,{pathname:t.pathname.substr(n.length)})}function Z(e){return"string"===typeof e?e:g(e)}function ee(e){return function(){h(!1)}}function te(){}e.Component;e.Component;var ne=e.useContext;function re(){return ne(B)}var ie=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=E(e.props),e}return i(n,t),n.prototype.render=function(){return e.createElement(W,{history:this.history,children:this.props.children})},n}(e.Component);e.Component;var oe=function(e,t){return"function"===typeof e?e(t):e},ae=function(e,t){return"string"===typeof e?m(e,null,null,t):e},se=function(e){return e},ue=e.forwardRef;"undefined"===typeof ue&&(ue=se);var ce=ue((function(t,n){var r=t.innerRef,i=t.navigate,a=t.onClick,s=q(t,["innerRef","navigate","onClick"]),u=s.target,c=o({},s,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=se!==ue&&n||r,e.createElement("a",c)}));var le=ue((function(t,n){var r=t.component,i=void 0===r?ce:r,a=t.replace,s=t.to,u=t.innerRef,c=q(t,["component","replace","to","innerRef"]);return e.createElement(z.Consumer,null,(function(t){t||h(!1);var r=t.history,l=ae(oe(s,t.location),t.location),f=l?r.createHref(l):"",d=o({},c,{href:f,navigate:function(){var e=oe(s,t.location);(a?r.replace:r.push)(e)}});return se!==ue?d.ref=n||u:d.innerRef=u,e.createElement(i,d)}))})),he=function(e){return e},fe=e.forwardRef;"undefined"===typeof fe&&(fe=he);fe((function(t,n){var r=t["aria-current"],i=void 0===r?"page":r,a=t.activeClassName,s=void 0===a?"active":a,u=t.activeStyle,c=t.className,l=t.exact,f=t.isActive,d=t.location,p=t.sensitive,v=t.strict,g=t.style,m=t.to,y=t.innerRef,b=q(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return e.createElement(z.Consumer,null,(function(t){t||h(!1);var r=d||t.location,a=ae(oe(m,r),r),_=a.pathname,w=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),T=w?Y(r.pathname,{path:w,exact:l,sensitive:p,strict:v}):null,I=!!(f?f(T,r):T),E=I?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,s):c,S=I?o({},g,{},u):g,k=o({"aria-current":I&&i||null,className:E,style:S,to:a},b);return he!==fe?k.ref=n||y:k.innerRef=y,e.createElement(le,k)}))}));function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"===typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ve=n(184),ge=(0,e.createContext)(null),me=(0,e.createContext)(null);function ye(t){var n=t.children,r=pe((0,e.useState)(null),2),i=r[0],o=r[1];return(0,ve.jsx)(me.Provider,{value:{user:i,setUser:o},children:n})}function be(){var t=pe((0,e.useState)(""),2),n=t[0],r=t[1],i=pe((0,e.useState)(""),2),o=i[0],a=i[1],s=pe((0,e.useState)(""),2),u=s[0],c=s[1],l=pe((0,e.useState)(""),2),h=l[0],f=l[1],d=(0,e.useContext)(ge).firebase,p=re();return(0,ve.jsx)("div",{children:(0,ve.jsxs)("div",{className:"signupParentDiv",children:[(0,ve.jsx)("h2",{className:"logo-heading",children:"Cookie"}),(0,ve.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.auth().createUserWithEmailAndPassword(o,h).then((function(e){e.user.updateProfile({displayName:n}).then((function(){d.firestore().collection("users").add({id:e.user.uid,username:n,phone:u}).then((function(){p.push("/login")}))}))}))},children:[(0,ve.jsx)("label",{htmlFor:"fname",children:"Username"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input",type:"text",value:n,onChange:function(e){return r(e.target.value)},id:"fname",name:"name",defaultValue:"John"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input",value:o,onChange:function(e){return a(e.target.value)},type:"email",id:"fname",name:"email",defaultValue:"John"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("label",{htmlFor:"lname",children:"Phone"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input",value:u,type:"number",onChange:function(e){return c(e.target.value)},id:"lname",name:"phone",defaultValue:"Doe"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input",type:"password",value:h,onChange:function(e){return f(e.target.value)},id:"lname",name:"password",defaultValue:"Doe"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("br",{}),(0,ve.jsx)("button",{children:"Signup"})]}),(0,ve.jsx)("a",{href:"/login",children:"Login"})]})})}var _e=function(){var t=pe((0,e.useState)(""),2),n=t[0],r=t[1],i=pe((0,e.useState)(""),2),o=i[0],a=i[1],s=(0,e.useContext)(ge).firebase,u=re();return(0,ve.jsx)("div",{children:(0,ve.jsxs)("div",{className:"loginParentDiv",children:[(0,ve.jsx)("h2",{className:"logo-heading",children:"Cookie"}),(0,ve.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.auth().signInWithEmailAndPassword(n,o).then((function(){u.push("/Welcome")})).catch((function(e){alert(e.message)}))},children:[(0,ve.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input",type:"email",id:"fname",name:"email",value:n,defaultValue:"John",onChange:function(e){return r(e.target.value)}}),(0,ve.jsx)("br",{}),(0,ve.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input",type:"password",id:"lname",value:o,onChange:function(e){return a(e.target.value)},name:"password",defaultValue:"Doe"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("br",{}),(0,ve.jsx)("button",{children:"Login"})]}),(0,ve.jsx)("a",{href:"/signup",children:"Signup"})]})})};function we(e){return(0,ve.jsx)("svg",{width:"25px",height:"25px",viewBox:"0 0 1024 1024","data-aut-id":"icon",color:e.color?e.color:"",className:!0,fillRule:"evenodd",children:(0,ve.jsx)("path",{className:"rui-77aaa",d:"M448 725.333c-152.917 0-277.333-124.416-277.333-277.333s124.416-277.333 277.333-277.333c152.917 0 277.333 124.416 277.333 277.333s-124.416 277.333-277.333 277.333v0zM884.437 824.107v0.021l-151.915-151.936c48.768-61.781 78.144-139.541 78.144-224.192 0-199.979-162.688-362.667-362.667-362.667s-362.667 162.688-362.667 362.667c0 199.979 162.688 362.667 362.667 362.667 84.629 0 162.411-29.376 224.171-78.144l206.144 206.144h60.352v-60.331l-54.229-54.229z"})})}function Te(){return(0,ve.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,ve.jsx)("path",{className:"rui-77aaa",d:"M85.392 277.333h60.331l366.336 366.336 366.336-366.336h60.331v60.331l-408.981 409.003h-35.307l-409.045-409.003z"})})}var Ie=function(){var t=(0,e.useContext)(me).user,n=(0,e.useContext)(ge).firebase,r=re(),i=pe((0,e.useState)(""),2),o=(i[0],i[1]);return(0,ve.jsx)("div",{className:"headerParentDiv",children:(0,ve.jsxs)("div",{className:"headerChildDiv",children:[(0,ve.jsx)("div",{className:"brandName",children:"MyoPro"}),(0,ve.jsxs)("div",{className:"placeSearch",children:[(0,ve.jsx)(we,{}),(0,ve.jsx)("input",{type:"text",placeholder:"Serach location"}),(0,ve.jsx)(Te,{})]}),(0,ve.jsxs)("div",{className:"productSearch",children:[(0,ve.jsx)("div",{className:"input",children:(0,ve.jsx)("input",{type:"text",placeholder:"Find crafts that you like...",onChange:function(e){return o(e.target.value)}})}),(0,ve.jsx)("div",{className:"searchAction",children:(0,ve.jsx)(we,{color:"#ffffff"})})]}),(0,ve.jsxs)("div",{className:"loginPage",children:[(0,ve.jsx)("span",{children:t?"Hey..welcome ".concat(t.displayName):(0,ve.jsx)("span",{onClick:function(){r.push("login")},children:"Login"})}),(0,ve.jsx)("hr",{})]}),t&&(0,ve.jsx)("span",{onClick:function(){n.auth().signOut(),r.push("/login")},children:"Logout"})]})})};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"===typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=function(){},De={},Le={},Me=null,Fe={mark:Oe,measure:Oe};try{"undefined"!==typeof window&&(De=window),"undefined"!==typeof document&&(Le=document),"undefined"!==typeof MutationObserver&&(Me=MutationObserver),"undefined"!==typeof performance&&(Fe=performance)}catch(rb){}var je,Ue,qe,Ve,Be,Ke=(De.navigator||{}).userAgent,ze=void 0===Ke?"":Ke,We=De,He=Le,Ge=Me,Qe=Fe,Ye=(We.document,!!He.documentElement&&!!He.head&&"function"===typeof He.addEventListener&&"function"===typeof He.createElement),$e=~ze.indexOf("MSIE")||~ze.indexOf("Trident/"),Xe="___FONT_AWESOME___",Je=16,Ze="fa",et="svg-inline--fa",tt="data-fa-i2svg",nt="data-fa-pseudo-element",rt="data-fa-pseudo-element-pending",it="data-prefix",ot="data-icon",at="fontawesome-i2svg",st="async",ut=["HTML","HEAD","STYLE","SCRIPT"],ct=function(){try{return!0}catch(rb){return!1}}(),lt="classic",ht="sharp",ft=[lt,ht];function dt(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[lt]}})}var pt=dt((Ne(je={},lt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Ne(je,ht,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),je)),vt=dt((Ne(Ue={},lt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ne(Ue,ht,{solid:"fass",regular:"fasr"}),Ue)),gt=dt((Ne(qe={},lt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ne(qe,ht,{fass:"fa-solid",fasr:"fa-regular"}),qe)),mt=dt((Ne(Ve={},lt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ne(Ve,ht,{"fa-solid":"fass","fa-regular":"fasr"}),Ve)),yt=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,bt="fa-layers-text",_t=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,wt=dt((Ne(Be={},lt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ne(Be,ht,{900:"fass",400:"fasr"}),Be)),Tt=[1,2,3,4,5,6,7,8,9,10],It=Tt.concat([11,12,13,14,15,16,17,18,19,20]),Et=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],St={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},kt=new Set;Object.keys(vt[lt]).map(kt.add.bind(kt)),Object.keys(vt[ht]).map(kt.add.bind(kt));var Ct=[].concat(ft,xe(kt),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",St.GROUP,St.SWAP_OPACITY,St.PRIMARY,St.SECONDARY]).concat(Tt.map((function(e){return"".concat(e,"x")}))).concat(It.map((function(e){return"w-".concat(e)}))),Nt=We.FontAwesomeConfig||{};if(He&&"function"===typeof He.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Ae(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=He.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(Nt[r]=i)}))}var At={styleDefault:"solid",familyDefault:"classic",cssPrefix:Ze,replacementClass:et,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Nt.familyPrefix&&(Nt.cssPrefix=Nt.familyPrefix);var xt=Se(Se({},At),Nt);xt.autoReplaceSvg||(xt.observeMutations=!1);var Pt={};Object.keys(At).forEach((function(e){Object.defineProperty(Pt,e,{enumerable:!0,set:function(t){xt[e]=t,Rt.forEach((function(e){return e(Pt)}))},get:function(){return xt[e]}})})),Object.defineProperty(Pt,"familyPrefix",{enumerable:!0,set:function(e){xt.cssPrefix=e,Rt.forEach((function(e){return e(Pt)}))},get:function(){return xt.cssPrefix}}),We.FontAwesomeConfig=Pt;var Rt=[];var Ot=Je,Dt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Lt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Mt(){for(var e=12,t="";e-- >0;)t+=Lt[62*Math.random()|0];return t}function Ft(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function jt(e){return e.classList?Ft(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function Ut(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qt(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function Vt(e){return e.size!==Dt.size||e.x!==Dt.x||e.y!==Dt.y||e.rotate!==Dt.rotate||e.flipX||e.flipY}var Bt=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function Kt(){var e=Ze,t=et,n=Pt.cssPrefix,r=Pt.replacementClass,i=Bt;if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var zt=!1;function Wt(){Pt.autoAddCss&&!zt&&(!function(e){if(e&&Ye){var t=He.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=He.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}He.head.insertBefore(t,r)}}(Kt()),zt=!0)}var Ht={mixout:function(){return{dom:{css:Kt,insertCss:Wt}}},hooks:function(){return{beforeDOMElementCreation:function(){Wt()},beforeI2svg:function(){Wt()}}}},Gt=We||{};Gt[Xe]||(Gt[Xe]={}),Gt[Xe].styles||(Gt[Xe].styles={}),Gt[Xe].hooks||(Gt[Xe].hooks={}),Gt[Xe].shims||(Gt[Xe].shims=[]);var Qt=Gt[Xe],Yt=[],$t=!1;function Xt(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,o=void 0===i?[]:i;return"string"===typeof e?Ut(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Ut(e[n]),'" ')}),"").trim()}(r),">").concat(o.map(Xt).join(""),"</").concat(t,">")}function Jt(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Ye&&(($t=(He.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(He.readyState))||He.addEventListener("DOMContentLoaded",(function e(){He.removeEventListener("DOMContentLoaded",e),$t=1,Yt.map((function(e){return e()}))})));var Zt=function(e,t,n,r){var i,o,a,s=Object.keys(e),u=s.length,c=void 0!==r?function(e,t){return function(n,r,i,o){return e.call(t,n,r,i,o)}}(t,r):t;for(void 0===n?(i=1,a=e[s[0]]):(i=0,a=n);i<u;i++)a=c(a,e[o=s[i]],o,e);return a};function en(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function tn(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function nn(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=tn(t);"function"!==typeof Qt.hooks.addPack||r?Qt.styles[e]=Se(Se({},Qt.styles[e]||{}),i):Qt.hooks.addPack(e,tn(t)),"fas"===e&&nn("fa",t)}var rn,on,an,sn=Qt.styles,un=Qt.shims,cn=(Ne(rn={},lt,Object.values(gt[lt])),Ne(rn,ht,Object.values(gt[ht])),rn),ln=null,hn={},fn={},dn={},pn={},vn={},gn=(Ne(on={},lt,Object.keys(pt[lt])),Ne(on,ht,Object.keys(pt[ht])),on);function mn(e,t){var n,r=t.split("-"),i=r[0],o=r.slice(1).join("-");return i!==e||""===o||(n=o,~Ct.indexOf(n))?null:o}var yn=function(){var e=function(e){return Zt(sn,(function(t,n,r){return t[r]=Zt(n,e,{}),t}),{})};hn=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),fn=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),vn=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in sn||Pt.autoFetchSvg,n=Zt(un,(function(e,n){var r=n[0],i=n[1],o=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:o}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:o}),e}),{names:{},unicodes:{}});dn=n.names,pn=n.unicodes,ln=En(Pt.styleDefault,{family:Pt.familyDefault})};function bn(e,t){return(hn[e]||{})[t]}function _n(e,t){return(vn[e]||{})[t]}function wn(e){return dn[e]||{prefix:null,iconName:null}}function Tn(){return ln}!function(e){Rt.push(e)}((function(e){ln=En(e.styleDefault,{family:Pt.familyDefault})})),yn();var In=function(){return{prefix:null,iconName:null,rest:[]}};function En(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?lt:t,r=pt[n][e],i=vt[n][e]||vt[n][r],o=e in Qt.styles?e:null;return i||o||null}var Sn=(Ne(an={},lt,Object.keys(gt[lt])),Ne(an,ht,Object.keys(gt[ht])),an);function kn(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(Ne(t={},lt,"".concat(Pt.cssPrefix,"-").concat(lt)),Ne(t,ht,"".concat(Pt.cssPrefix,"-").concat(ht)),t),o=null,a=lt;(e.includes(i[lt])||e.some((function(e){return Sn[lt].includes(e)})))&&(a=lt),(e.includes(i[ht])||e.some((function(e){return Sn[ht].includes(e)})))&&(a=ht);var s=e.reduce((function(e,t){var n=mn(Pt.cssPrefix,t);if(sn[t]?(t=cn[a].includes(t)?mt[a][t]:t,o=t,e.prefix=t):gn[a].indexOf(t)>-1?(o=t,e.prefix=En(t,{family:a})):n?e.iconName=n:t!==Pt.replacementClass&&t!==i[lt]&&t!==i[ht]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var s="fa"===o?wn(e.iconName):{},u=_n(e.prefix,e.iconName);s.prefix&&(o=null),e.iconName=s.iconName||u||e.iconName,e.prefix=s.prefix||e.prefix,"far"!==e.prefix||sn.far||!sn.fas||Pt.autoFetchSvg||(e.prefix="fas")}return e}),In());return(e.includes("fa-brands")||e.includes("fab"))&&(s.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(s.prefix="fad"),s.prefix||a!==ht||!sn.fass&&!Pt.autoFetchSvg||(s.prefix="fass",s.iconName=_n(s.prefix,s.iconName)||s.iconName),"fa"!==s.prefix&&"fa"!==o||(s.prefix=Tn()||"fas"),s}var Cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=Se(Se({},e.definitions[t]||{}),i[t]),nn(t,i[t]);var n=gt[lt][t];n&&nn(n,i[t]),yn()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,o=r.iconName,a=r.icon,s=a[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=a)})),e[i][o]=a})),e}}],n&&Ce(t.prototype,n),r&&Ce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Nn=[],An={},xn={},Pn=Object.keys(xn);function Rn(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(An[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function On(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(An[e]||[]).forEach((function(e){e.apply(null,n)}))}function Dn(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return xn[e]?xn[e].apply(null,t):void 0}function Ln(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||Tn();if(t)return t=_n(n,t)||t,Jt(Mn.definitions,n,t)||Jt(Qt.styles,n,t)}var Mn=new Cn,Fn={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ye?(On("beforeI2svg",e),Dn("pseudoElements2svg",e),Dn("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Pt.autoReplaceSvg&&(Pt.autoReplaceSvg=!0),Pt.observeMutations=!0,function(e){Ye&&($t?setTimeout(e,0):Yt.push(e))}((function(){qn({autoReplaceSvgRoot:t}),On("watch",e)}))}},jn={icon:function(e){if(null===e)return null;if("object"===ke(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:_n(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=En(e[0]);return{prefix:n,iconName:_n(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Pt.cssPrefix,"-"))>-1||e.match(yt))){var r=kn(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||Tn(),iconName:_n(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=Tn();return{prefix:i,iconName:_n(i,e)||e}}}},Un={noAuto:function(){Pt.autoReplaceSvg=!1,Pt.observeMutations=!1,On("noAuto")},config:Pt,dom:Fn,parse:jn,library:Mn,findIconDefinition:Ln,toHtml:Xt},qn=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?He:e;(Object.keys(Qt.styles).length>0||Pt.autoFetchSvg)&&Ye&&Pt.autoReplaceSvg&&Un.dom.i2svg({node:t})};function Vn(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return Xt(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Ye){var t=He.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Bn(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,u=e.title,c=e.maskId,l=e.titleId,h=e.extra,f=e.watchable,d=void 0!==f&&f,p=r.found?r:n,v=p.width,g=p.height,m="fak"===i,y=[Pt.replacementClass,o?"".concat(Pt.cssPrefix,"-").concat(o):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),b={children:[],attributes:Se(Se({},h.attributes),{},{"data-prefix":i,"data-icon":o,class:y,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(g)})},_=m&&!~h.classes.indexOf("fa-fw")?{width:"".concat(v/g*16*.0625,"em")}:{};d&&(b.attributes[tt]=""),u&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(l||Mt())},children:[u]}),delete b.attributes.title);var w=Se(Se({},b),{},{prefix:i,iconName:o,main:n,mask:r,maskId:c,transform:a,symbol:s,styles:Se(Se({},_),h.styles)}),T=r.found&&n.found?Dn("generateAbstractMask",w)||{children:[],attributes:{}}:Dn("generateAbstractIcon",w)||{children:[],attributes:{}},I=T.children,E=T.attributes;return w.children=I,w.attributes=E,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol,a=!0===o?"".concat(t,"-").concat(Pt.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Se(Se({},i),{},{id:a}),children:r}]}]}(w):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(Vt(a)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=qt(Se(Se({},o),{},{"transform-origin":"".concat(s.x+a.x/16,"em ").concat(s.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(w)}function Kn(e){var t=e.content,n=e.width,r=e.height,i=e.transform,o=e.title,a=e.extra,s=e.watchable,u=void 0!==s&&s,c=Se(Se(Se({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});u&&(c[tt]="");var l=Se({},a.styles);Vt(i)&&(l.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?Je:n,i=e.height,o=void 0===i?Je:i,a=e.startCentered,s=void 0!==a&&a,u="";return u+=s&&$e?"translate(".concat(t.x/Ot-r/2,"em, ").concat(t.y/Ot-o/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/Ot,"em), calc(-50% + ").concat(t.y/Ot,"em)) "):"translate(".concat(t.x/Ot,"em, ").concat(t.y/Ot,"em) "),u+="scale(".concat(t.size/Ot*(t.flipX?-1:1),", ").concat(t.size/Ot*(t.flipY?-1:1),") "),u+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);var h=qt(l);h.length>0&&(c.style=h);var f=[];return f.push({tag:"span",attributes:c,children:[t]}),o&&f.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),f}var zn=Qt.styles;function Wn(e){var t=e[0],n=e[1],r=Ae(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Pt.cssPrefix,"-").concat(St.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Pt.cssPrefix,"-").concat(St.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Pt.cssPrefix,"-").concat(St.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var Hn={found:!1,width:512,height:512};function Gn(e,t){var n=t;return"fa"===t&&null!==Pt.styleDefault&&(t=Tn()),new Promise((function(r,i){Dn("missingIconAbstract");if("fa"===n){var o=wn(e)||{};e=o.iconName||e,t=o.prefix||t}if(e&&t&&zn[t]&&zn[t][e])return r(Wn(zn[t][e]));!function(e,t){ct||Pt.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(Se(Se({},Hn),{},{icon:Pt.showMissingIcons&&e&&Dn("missingIconAbstract")||{}}))}))}var Qn=function(){},Yn=Pt.measurePerformance&&Qe&&Qe.mark&&Qe.measure?Qe:{mark:Qn,measure:Qn},$n='FA "6.3.0"',Xn=function(e){Yn.mark("".concat($n," ").concat(e," ends")),Yn.measure("".concat($n," ").concat(e),"".concat($n," ").concat(e," begins"),"".concat($n," ").concat(e," ends"))},Jn={begin:function(e){return Yn.mark("".concat($n," ").concat(e," begins")),function(){return Xn(e)}},end:Xn},Zn=function(){};function er(e){return"string"===typeof(e.getAttribute?e.getAttribute(tt):null)}function tr(e){return He.createElementNS("http://www.w3.org/2000/svg",e)}function nr(e){return He.createElement(e)}function rr(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?tr:nr:t;if("string"===typeof e)return He.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(rr(e,{ceFn:n}))})),r}var ir={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(rr(e),t)})),null===t.getAttribute(tt)&&Pt.keepOriginalSource){var n=He.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~jt(t).indexOf(Pt.replacementClass))return ir.replace(e);var r=new RegExp("".concat(Pt.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===Pt.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var o=n.map((function(e){return Xt(e)})).join("\n");t.setAttribute(tt,""),t.innerHTML=o}};function or(e){e()}function ar(e,t){var n="function"===typeof t?t:Zn;if(0===e.length)n();else{var r=or;Pt.mutateApproach===st&&(r=We.requestAnimationFrame||or),r((function(){var t=!0===Pt.autoReplaceSvg?ir.replace:ir[Pt.autoReplaceSvg]||ir.replace,r=Jn.begin("mutate");e.map(t),r(),n()}))}}var sr=!1;function ur(){sr=!0}function cr(){sr=!1}var lr=null;function hr(e){if(Ge&&Pt.observeMutations){var t=e.treeCallback,n=void 0===t?Zn:t,r=e.nodeCallback,i=void 0===r?Zn:r,o=e.pseudoElementsCallback,a=void 0===o?Zn:o,s=e.observeMutationsRoot,u=void 0===s?He:s;lr=new Ge((function(e){if(!sr){var t=Tn();Ft(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!er(e.addedNodes[0])&&(Pt.searchPseudoElements&&a(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&Pt.searchPseudoElements&&a(e.target.parentNode),"attributes"===e.type&&er(e.target)&&~Et.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(it):null,n=e.getAttribute?e.getAttribute(ot):null;return t&&n}(e.target)){var r=kn(jt(e.target)),o=r.prefix,s=r.iconName;e.target.setAttribute(it,o||t),s&&e.target.setAttribute(ot,s)}else(u=e.target)&&u.classList&&u.classList.contains&&u.classList.contains(Pt.replacementClass)&&i(e.target);var u}))}})),Ye&&lr.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function fr(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=kn(jt(e));return i.prefix||(i.prefix=Tn()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(fn[e]||{})[t]}(i.prefix,e.innerText)||bn(i.prefix,en(e.innerText))),!i.iconName&&Pt.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function dr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=fr(e),r=n.iconName,i=n.prefix,o=n.rest,a=function(e){var t=Ft(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Pt.autoA11y&&(n?t["aria-labelledby"]="".concat(Pt.replacementClass,"-title-").concat(r||Mt()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),s=Rn("parseNodeAttributes",{},e),u=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return Se({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Dt,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:u,attributes:a}},s)}var pr=Qt.styles;function vr(e){var t="nest"===Pt.autoReplaceSvg?dr(e,{styleParser:!1}):dr(e);return~t.extra.classes.indexOf(bt)?Dn("generateLayersText",e,t):Dn("generateSvgReplacementMutation",e,t)}var gr=new Set;function mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Ye)return Promise.resolve();var n=He.documentElement.classList,r=function(e){return n.add("".concat(at,"-").concat(e))},i=function(e){return n.remove("".concat(at,"-").concat(e))},o=Pt.autoFetchSvg?gr:ft.map((function(e){return"fa-".concat(e)})).concat(Object.keys(pr));o.includes("fa")||o.push("fa");var a=[".".concat(bt,":not([").concat(tt,"])")].concat(o.map((function(e){return".".concat(e,":not([").concat(tt,"])")}))).join(", ");if(0===a.length)return Promise.resolve();var s=[];try{s=Ft(e.querySelectorAll(a))}catch(rb){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var u=Jn.begin("onTree"),c=s.reduce((function(e,t){try{var n=vr(t);n&&e.push(n)}catch(rb){ct||"MissingIcon"===rb.name&&console.error(rb)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){ar(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),u(),e()}))})).catch((function(e){u(),n(e)}))}))}function yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;vr(e).then((function(e){e&&ar([e],t)}))}ft.map((function(e){gr.add("fa-".concat(e))})),Object.keys(pt[lt]).map(gr.add.bind(gr)),Object.keys(pt[ht]).map(gr.add.bind(gr)),gr=xe(gr);var br=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Dt:n,i=t.symbol,o=void 0!==i&&i,a=t.mask,s=void 0===a?null:a,u=t.maskId,c=void 0===u?null:u,l=t.title,h=void 0===l?null:l,f=t.titleId,d=void 0===f?null:f,p=t.classes,v=void 0===p?[]:p,g=t.attributes,m=void 0===g?{}:g,y=t.styles,b=void 0===y?{}:y;if(e){var _=e.prefix,w=e.iconName,T=e.icon;return Vn(Se({type:"icon"},e),(function(){return On("beforeDOMElementCreation",{iconDefinition:e,params:t}),Pt.autoA11y&&(h?m["aria-labelledby"]="".concat(Pt.replacementClass,"-title-").concat(d||Mt()):(m["aria-hidden"]="true",m.focusable="false")),Bn({icons:{main:Wn(T),mask:s?Wn(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:w,transform:Se(Se({},Dt),r),symbol:o,title:h,maskId:c,titleId:d,extra:{attributes:m,styles:b,classes:v}})}))}},_r={mixout:function(){return{icon:(e=br,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Ln(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Ln(i||{})),e(r,Se(Se({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=mr,e.nodeCallback=yr,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?He:t,r=e.callback;return mr(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,o=t.prefix,a=t.transform,s=t.symbol,u=t.mask,c=t.maskId,l=t.extra;return new Promise((function(t,h){Promise.all([Gn(n,o),u.iconName?Gn(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(u){var h=Ae(u,2),f=h[0],d=h[1];t([e,Bn({icons:{main:f,mask:d},prefix:o,iconName:n,transform:a,symbol:s,maskId:c,title:r,titleId:i,extra:l,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,o=e.transform,a=qt(e.styles);return a.length>0&&(r.style=a),Vt(o)&&(t=Dn("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},wr={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return Vn({type:"layer"},(function(){On("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(Pt.cssPrefix,"-layers")].concat(xe(r)).join(" ")},children:n}]}))}}}},Tr={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,o=void 0===i?[]:i,a=t.attributes,s=void 0===a?{}:a,u=t.styles,c=void 0===u?{}:u;return Vn({type:"counter",content:e},(function(){return On("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,i=Se(Se(Se({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=qt(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}({content:e.toString(),title:r,extra:{attributes:s,styles:c,classes:["".concat(Pt.cssPrefix,"-layers-counter")].concat(xe(o))}})}))}}}},Ir={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Dt:n,i=t.title,o=void 0===i?null:i,a=t.classes,s=void 0===a?[]:a,u=t.attributes,c=void 0===u?{}:u,l=t.styles,h=void 0===l?{}:l;return Vn({type:"text",content:e},(function(){return On("beforeDOMElementCreation",{content:e,params:t}),Kn({content:e,transform:Se(Se({},Dt),r),title:o,extra:{attributes:c,styles:h,classes:["".concat(Pt.cssPrefix,"-layers-text")].concat(xe(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,o=null,a=null;if($e){var s=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/s,a=u.height/s}return Pt.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,Kn({content:e.innerHTML,width:o,height:a,transform:r,title:n,extra:i,watchable:!0})])}}},Er=new RegExp('"',"ug"),Sr=[1105920,1112319];function kr(e,t){var n="".concat(rt).concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var o=Ft(e.children).filter((function(e){return e.getAttribute(nt)===t}))[0],a=We.getComputedStyle(e,t),s=a.getPropertyValue("font-family").match(_t),u=a.getPropertyValue("font-weight"),c=a.getPropertyValue("content");if(o&&!s)return e.removeChild(o),r();if(s&&"none"!==c&&""!==c){var l=a.getPropertyValue("content"),h=~["Sharp"].indexOf(s[2])?ht:lt,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?vt[h][s[2].toLowerCase()]:wt[h][u],d=function(e){var t=e.replace(Er,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=Sr[0]&&n<=Sr[1],i=2===t.length&&t[0]===t[1];return{value:en(i?t[0]:t),isSecondary:r||i}}(l),p=d.value,v=d.isSecondary,g=s[0].startsWith("FontAwesome"),m=bn(f,p),y=m;if(g){var b=function(e){var t=pn[e],n=bn("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);b.iconName&&b.prefix&&(m=b.iconName,f=b.prefix)}if(!m||v||o&&o.getAttribute(it)===f&&o.getAttribute(ot)===y)r();else{e.setAttribute(n,y),o&&e.removeChild(o);var _={iconName:null,title:null,titleId:null,prefix:null,transform:Dt,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},w=_.extra;w.attributes[nt]=t,Gn(m,f).then((function(i){var o=Bn(Se(Se({},_),{},{icons:{main:i,mask:In()},prefix:f,iconName:y,extra:w,watchable:!0})),a=He.createElement("svg");"::before"===t?e.insertBefore(a,e.firstChild):e.appendChild(a),a.outerHTML=o.map((function(e){return Xt(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function Cr(e){return Promise.all([kr(e,"::before"),kr(e,"::after")])}function Nr(e){return e.parentNode!==document.head&&!~ut.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(nt)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function Ar(e){if(Ye)return new Promise((function(t,n){var r=Ft(e.querySelectorAll("*")).filter(Nr).map(Cr),i=Jn.begin("searchPseudoElements");ur(),Promise.all(r).then((function(){i(),cr(),t()})).catch((function(){i(),cr(),n()}))}))}var xr=!1,Pr=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Rr={mixout:function(){return{parse:{transform:function(e){return Pr(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=Pr(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),u="rotate(".concat(n.rotate," 0 0)"),c={outer:o,inner:{transform:"".concat(a," ").concat(s," ").concat(u)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:Se({},c.outer),children:[{tag:"g",attributes:Se({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Se(Se({},t.icon.attributes),c.path)}]}]}}}},Or={x:0,y:0,width:"100%",height:"100%"};function Dr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Lr={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?kn(n.split(" ").map((function(e){return e.trim()}))):In();return r.prefix||(r.prefix=Tn()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,o=e.mask,a=e.maskId,s=e.transform,u=i.width,c=i.icon,l=o.width,h=o.icon,f=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:l,iconWidth:u}),d={tag:"rect",attributes:Se(Se({},Or),{},{fill:"white"})},p=c.children?{children:c.children.map(Dr)}:{},v={tag:"g",attributes:Se({},f.inner),children:[Dr(Se({tag:c.tag,attributes:Se(Se({},c.attributes),f.path)},p))]},g={tag:"g",attributes:Se({},f.outer),children:[v]},m="mask-".concat(a||Mt()),y="clip-".concat(a||Mt()),b={tag:"mask",attributes:Se(Se({},Or),{},{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,g]},_={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=h,"g"===t.tag?t.children:[t])},b]};return n.push(_,{tag:"rect",attributes:Se({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(m,")")},Or)}),{children:n,attributes:r}}}},Mr={provides:function(e){var t=!1;We.matchMedia&&(t=We.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:Se(Se({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=Se(Se({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:Se(Se({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:Se(Se({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Se(Se({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(o),e.push({tag:"path",attributes:Se(Se({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Se(Se({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:Se(Se({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Se(Se({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;Nn=e,An={},Object.keys(xn).forEach((function(e){-1===Pn.indexOf(e)&&delete xn[e]})),Nn.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===ke(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){An[e]||(An[e]=[]),An[e].push(r[e])}))}e.provides&&e.provides(xn)}))}([Ht,_r,wr,Tr,Ir,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=Ar,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?He:t;Pt.searchPseudoElements&&Ar(n)}}},{mixout:function(){return{dom:{unwatch:function(){ur(),xr=!0}}}},hooks:function(){return{bootstrap:function(){hr(Rn("mutationObserverCallbacks",{}))},noAuto:function(){lr&&lr.disconnect()},watch:function(e){var t=e.observeMutationsRoot;xr?cr():hr(Rn("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},Rr,Lr,Mr,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:Un});Un.noAuto,Un.config,Un.library,Un.dom;var Fr=Un.parse,jr=(Un.findIconDefinition,Un.toHtml,Un.icon);Un.layer,Un.text,Un.counter;function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vr(e){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(e)}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zr(e){return function(e){if(Array.isArray(e))return Wr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hr(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Gr=["style"];var Qr=!1;try{Qr=!0}catch(rb){}function Yr(e){return e&&"object"===Vr(e)&&e.prefix&&e.iconName&&e.icon?e:Fr.icon?Fr.icon(e):null===e?null:e&&"object"===Vr(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function $r(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Br({},e,t):{}}var Xr=e.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,o=e.className,a=e.title,s=e.titleId,u=e.maskId,c=Yr(n),l=$r("classes",[].concat(zr(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,o=e.bounce,a=e.shake,s=e.flash,u=e.spin,c=e.spinPulse,l=e.spinReverse,h=e.pulse,f=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,g=e.flip,m=e.size,y=e.rotation,b=e.pull,_=(Br(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":a,"fa-flash":s,"fa-spin":u,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":f,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(m),"undefined"!==typeof m&&null!==m),Br(t,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),Br(t,"fa-pull-".concat(b),"undefined"!==typeof b&&null!==b),Br(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(_).map((function(e){return _[e]?e:null})).filter((function(e){return e}))}(e)),zr(o.split(" ")))),h=$r("transform","string"===typeof e.transform?Fr.transform(e.transform):e.transform),f=$r("mask",Yr(r)),d=jr(c,qr(qr(qr(qr({},l),h),f),{},{symbol:i,title:a,titleId:s,maskId:u}));if(!d)return function(){var e;!Qr&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var p=d.abstract,v={ref:t};return Object.keys(e).forEach((function(t){Xr.defaultProps.hasOwnProperty(t)||(v[t]=e[t])})),Jr(p[0],v)}));Xr.displayName="FontAwesomeIcon",Xr.propTypes={beat:O().bool,border:O().bool,beatFade:O().bool,bounce:O().bool,className:O().string,fade:O().bool,flash:O().bool,mask:O().oneOfType([O().object,O().array,O().string]),maskId:O().string,fixedWidth:O().bool,inverse:O().bool,flip:O().oneOf([!0,!1,"horizontal","vertical","both"]),icon:O().oneOfType([O().object,O().array,O().string]),listItem:O().bool,pull:O().oneOf(["right","left"]),pulse:O().bool,rotation:O().oneOf([0,90,180,270]),shake:O().bool,size:O().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:O().bool,spinPulse:O().bool,spinReverse:O().bool,symbol:O().oneOfType([O().bool,O().string]),title:O().string,titleId:O().string,transform:O().oneOfType([O().string,O().object]),swapOpacity:O().bool},Xr.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Jr=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Hr(t.slice(0,r)),o=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[i]=o,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Hr(t)]=r}return e}),{attrs:{}}),a=r.style,s=void 0===a?{}:a,u=Kr(r,Gr);return o.attrs.style=qr(qr({},o.attrs.style),s),t.apply(void 0,[n.tag,qr(qr({},o.attrs),u)].concat(zr(i)))}.bind(null,e.createElement),Zr={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"]},ei=function(){var t=(0,e.useContext)(ge).firebase,n=(0,e.useContext)(me).user,r=re(),i=pe((0,e.useState)(""),2),o=i[0],a=i[1],s=pe((0,e.useState)(!1),2),u=s[0],c=s[1],l=pe((0,e.useState)(""),2),h=l[0],f=l[1],d=pe((0,e.useState)(""),2),p=d[0],v=d[1],g=pe((0,e.useState)(null),2),m=g[0],y=g[1],b=new Date;return(0,ve.jsxs)(e.Fragment,{children:[(0,ve.jsx)(Ie,{}),u?(0,ve.jsxs)("div",{className:"loading",children:[(0,ve.jsx)(Xr,{icon:Zr,spin:!0}),(0,ve.jsx)("p",{children:"just a second, we are uploading ..."})]}):n?(0,ve.jsx)("card",{children:(0,ve.jsxs)("div",{className:"centerDiv",children:[(0,ve.jsx)("label",{htmlFor:"fname",children:"Name"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input1",type:"text",id:"fname",name:"Name",value:o,onChange:function(e){return a(e.target.value)},defaultValue:"John"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("label",{htmlFor:"fname",children:"Category"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input1",type:"text",id:"fname",name:"category",defaultValue:"John",value:h,onChange:function(e){return f(e.target.value)}}),(0,ve.jsx)("br",{}),(0,ve.jsx)("label",{htmlFor:"fname",children:"Price"}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{className:"input1",type:"number",id:"fname",name:"Price",value:p,onChange:function(e){return v(e.target.value)}}),(0,ve.jsx)("br",{}),(0,ve.jsx)("br",{}),(0,ve.jsx)("img",{alt:"Posts",width:"200px",height:"200px",src:m?URL.createObjectURL(m):""}),(0,ve.jsx)("br",{}),(0,ve.jsx)("input",{on:!0,type:"file",onChange:function(e){y(e.target.files[0])}}),(0,ve.jsx)("br",{}),(0,ve.jsx)("button",{onClick:function(){c(!0),t.storage().ref("/image/".concat(m.name)).put(m).then((function(e){e.ref.getDownloadURL().then((function(e){console.log(e),t.firestore().collection("products").add({name:o,category:h,price:p,url:e,userId:n.uid,createdAt:b.toDateString()}),c(!1),r.push("/")}))})).catch((function(e){console.log(e)}))},className:"uploadBtn",children:"upload and Submit"})]})}):(0,ve.jsxs)("div",{className:"popup",children:[(0,ve.jsx)("h1",{children:"Please Login First for Publish your item"}),(0,ve.jsx)("button",{className:"home-btn",onClick:function(){return r.push("/")},children:"Back to Home"})]})]})},ti=function(){return(0,ve.jsxs)(e.Fragment,{children:[(0,ve.jsx)(Ie,{}),(0,ve.jsx)(ei,{})]})},ni=(0,e.createContext)(null);var ri=function(t){var n=t.children,r=pe((0,e.useState)(),2),i=r[0],o=r[1];return(0,ve.jsx)(ni.Provider,{value:{postDetails:i,setPostDetails:o},children:n})};var ii=function(){var t=pe((0,e.useState)(),2),n=t[0],r=t[1],i=(0,e.useContext)(ni).postDetails,o=(0,e.useContext)(ge).firebase;return(0,e.useEffect)((function(){var e=i.userId;o.firestore().collection("users").where("id","==",e).get().then((function(e){e.forEach((function(e){r(e.data())}))}))}),[]),(0,ve.jsxs)("div",{className:"viewParentDiv",children:[(0,ve.jsx)("div",{className:"imageShowDiv",children:(0,ve.jsx)("img",{src:i.url,style:{height:"300px",width:"300px"},alt:""})}),(0,ve.jsxs)("div",{className:"rightSection",children:[(0,ve.jsxs)("div",{className:"productDetails",children:[(0,ve.jsxs)("p",{children:["\u20b9 ",i.price]}),(0,ve.jsx)("span",{children:i.name}),(0,ve.jsx)("p",{children:i.category}),(0,ve.jsx)("span",{children:i.createdAt})]}),n&&(0,ve.jsxs)("div",{className:"contactDetails",children:[(0,ve.jsx)("p",{children:"Seller details"}),(0,ve.jsx)("p",{children:n.username}),(0,ve.jsxs)("button",{className:"call-btn",children:["  ",(0,ve.jsx)("a",{style:{color:"white"},href:"tel:+91"+n.phone,children:"call and deal"})]}),(0,ve.jsxs)("p",{children:["Phone Number: ",n.phone]})]})]})]})};var oi=function(e){return(0,ve.jsxs)("div",{children:[(0,ve.jsx)(Ie,{}),(0,ve.jsx)(ii,{})]})};var ai=n.p+"static/media/heroImg.0d455400e8a8d6a1d7a0.jpg",si=function(){var t=(0,e.useContext)(me).user,n=re();return(0,ve.jsxs)("div",{className:"hero",children:[(0,ve.jsxs)("div",{className:"left-section",children:[(0,ve.jsx)("div",{className:"neomorph-button1",onClick:function(){n.push("/create")},children:"Sell"}),(0,ve.jsx)("div",{className:"neomorph-button2",onClick:function(){t?n.push("/list"):n.push("/login")},children:"Your Items"})]}),(0,ve.jsx)("div",{className:"right-section",children:(0,ve.jsx)("img",{className:"hero-image",src:ai})})]})};function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function ci(e){var t=function(e,t){if("object"!==ui(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ui(t)?t:String(t)}function li(e,t,n){return(t=ci(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){li(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var di=n(203);function pi(){return(0,ve.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,ve.jsx)("path",{className:"rui-77aaa",d:"M830.798 448.659l-318.798 389.915-317.828-388.693c-20.461-27.171-31.263-59.345-31.263-93.033 0-85.566 69.605-155.152 155.152-155.152 72.126 0 132.752 49.552 150.051 116.364h87.777c17.299-66.812 77.905-116.364 150.051-116.364 85.547 0 155.152 69.585 155.152 155.152 0 33.687-10.802 65.862-30.293 91.811zM705.939 124.121c-80.853 0-152.204 41.425-193.939 104.204-41.736-62.778-113.086-104.204-193.939-104.204-128.33 0-232.727 104.378-232.727 232.727 0 50.657 16.194 98.948 47.806 140.897l328.766 402.133h100.189l329.716-403.355c30.662-40.727 46.856-89.018 46.856-139.675 0-128.349-104.398-232.727-232.727-232.727z"})})}var vi=function(e){var t=e.name,n=e.url,r=e.category,i=e.price,o=e.date,a=e.setPostDetails,s=e.product,u=re();return(0,ve.jsxs)("div",{className:"card",onClick:function(){a(s),u.push("/view")},children:[(0,ve.jsx)("div",{className:"image",children:(0,ve.jsx)("img",{src:n,alt:""})}),(0,ve.jsxs)("div",{className:"content",children:[(0,ve.jsxs)("p",{className:"rate",children:["\u20b9 ",i]}),(0,ve.jsxs)("p",{className:"name",children:[" ",t]}),(0,ve.jsx)("span",{className:"kilometer",children:r})]}),(0,ve.jsx)("div",{className:"date",children:(0,ve.jsx)("span",{children:o})})]})};var gi=function(){var t=(0,di.useContext)(ge).firebase,n=pe((0,e.useState)([]),2),r=n[0],i=n[1],o=pe((0,e.useState)(""),2),a=o[0],s=o[1],u=(0,di.useContext)(ni).setPostDetails;return(0,e.useEffect)((function(){t.firestore().collection("products").get().then((function(e){var t=e.docs.map((function(e){return fi(fi({},e.data()),{},{id:e.id})}));i(t)}))}),[]),(0,ve.jsxs)("div",{className:"postParentDiv",children:[(0,ve.jsxs)("div",{className:"moreView",children:[(0,ve.jsxs)("div",{className:"heading",children:[(0,ve.jsx)("span",{style:{margin:"20px 0"},children:"Quick Menu"}),(0,ve.jsx)("input",{type:"text",placeholder:"Search category",className:"searchField",onChange:function(e){return s(e.target.value)}})]}),(0,ve.jsx)("div",{className:"cards",children:r.filter((function(e){return e.category.toLowerCase().includes(a)})).map((function(e){return(0,ve.jsx)(vi,{setPostDetails:u,product:e,url:e.url,price:e.price,category:e.category,name:e.name,date:e.createdAt})}))})]}),(0,ve.jsxs)("div",{className:"recommendations",children:[(0,ve.jsx)("div",{className:"heading",children:(0,ve.jsx)("span",{children:"Fresh recommendations"})}),(0,ve.jsx)("div",{className:"cards",children:(0,ve.jsxs)("div",{className:"card",children:[(0,ve.jsx)("div",{className:"favorite",children:(0,ve.jsx)(pi,{})}),(0,ve.jsx)("div",{className:"image",children:(0,ve.jsx)("img",{src:"../../../Images/R15V3.jpg",alt:""})}),(0,ve.jsxs)("div",{className:"content",children:[(0,ve.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,ve.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,ve.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,ve.jsx)("div",{className:"date",children:(0,ve.jsx)("span",{children:"10/5/2021"})})]})})]})]})};var mi=function(){return(0,ve.jsxs)("div",{className:"footerParentDiv",children:[(0,ve.jsxs)("div",{className:"content",children:[(0,ve.jsxs)("div",{children:[(0,ve.jsx)("div",{className:"heading",children:(0,ve.jsx)("p",{children:"POPULAR Deals"})}),(0,ve.jsx)("div",{className:"list",children:(0,ve.jsxs)("ul",{children:[(0,ve.jsx)("li",{children:"Crafts"}),(0,ve.jsx)("li",{children:"Foods"}),(0,ve.jsx)("li",{children:"Paintings"}),(0,ve.jsx)("li",{children:"Art"})]})})]}),(0,ve.jsxs)("div",{children:[(0,ve.jsx)("div",{className:"heading",children:(0,ve.jsx)("p",{children:"ABOUT US"})}),(0,ve.jsx)("div",{className:"list",children:(0,ve.jsxs)("ul",{children:[(0,ve.jsx)("li",{children:"About MyoPro Group"}),(0,ve.jsx)("li",{children:"Careers"}),(0,ve.jsx)("li",{children:"Contact Us"}),(0,ve.jsx)("li",{children:"MyoPro People"})]})})]}),(0,ve.jsxs)("div",{children:[(0,ve.jsx)("div",{className:"heading",children:(0,ve.jsx)("p",{children:"MyoPro"})}),(0,ve.jsx)("div",{className:"list",children:(0,ve.jsxs)("ul",{children:[(0,ve.jsx)("li",{children:"Help"}),(0,ve.jsx)("li",{children:"Sitemap"}),(0,ve.jsx)("li",{children:"Legal & Privacy information"})]})})]})]}),(0,ve.jsxs)("div",{className:"footer",children:[(0,ve.jsx)("p",{children:"Other Countries Pakistan - india - Indonesia"}),(0,ve.jsx)("p",{children:"Free Classifieds in India. \xa9 2021-2023 MyoPro "})]})]})},yi=function(){var t=(0,e.useContext)(me).user,n=re();return(0,ve.jsxs)("div",{className:"welcome-page",children:[(0,ve.jsxs)("div",{className:"content-side",children:[(0,ve.jsx)("div",{className:"logo",children:"MyoPro"}),(0,ve.jsx)("div",{className:"logo-content",children:"Make your own Profession"}),(0,ve.jsx)("div",{className:"content-welcome",children:t?"Hey Welcome ... ".concat(t.displayName):"Welcome"})]}),(0,ve.jsxs)("div",{className:"btn-side",children:[(0,ve.jsx)("div",{children:(0,ve.jsx)("button",{className:"neomorph-button",onClick:function(){n.push("/")},children:"Lets Explore"})}),(0,ve.jsx)("div",{children:(0,ve.jsx)("button",{className:"neomorph-button",onClick:function(){n.push("/create")},children:"Sell your crafts "})})]})]})};var bi=function(e){return(0,ve.jsxs)("div",{className:"homeParentDiv",children:[(0,ve.jsx)(Ie,{}),(0,ve.jsx)(si,{}),(0,ve.jsx)(gi,{}),(0,ve.jsx)(mi,{})]})},_i=n(637);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}!function(e,n){if(n){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[e=e[e.length-1]]))!=o&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(Yn){this.f(Yn)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(Yn){n.reject(Yn)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(Zs){o(Zs)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).Ra(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""}function h(){}function f(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function d(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"function"==f(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e){return Object.prototype.hasOwnProperty.call(e,m)&&e[m]||(e[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function T(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var I=Date.now;function E(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function S(e){return e}function k(e,t,n){this.code=A+e,this.message=t||x[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new k(t.substring(A.length),e.message,e.serverResponse):null}E(k,Error),k.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},k.prototype.toJSON=function(){return this.w()};var N,A="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(e){for(var t in P)if(P[t].id===e)return{firebaseEndpoint:(e=P[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function O(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function D(e){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function L(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");D.call(this,n+e[r])}function M(e,t){throw new L("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function F(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function j(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function U(){this.b=this.a=null}N=R("__EID__")?"__EID__":void 0,E(D,Error),D.prototype.name="CustomError",E(L,D),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var q=new F((function(){return new B}),(function(e){e.reset()}));function V(){var e=bt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function B(){this.next=this.b=this.a=null}U.prototype.add=function(e,t){var n=q.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},z=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var W=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},H=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},G=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Q(e,t){return 0<=K(e,t)}function Y(e,t){var n;return(n=0<=(t=K(e,t)))&&Array.prototype.splice.call(e,t,1),n}function $(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function X(e){return Array.prototype.concat.apply([],arguments)}function J(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var Z,ee=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},te=/&/g,ne=/</g,re=/>/g,ie=/"/g,oe=/'/g,ae=/\x00/g,se=/[\x00&<>"']/;function ue(e,t){return-1!=e.indexOf(t)}function ce(e,t){return e<t?-1:e>t?1:0}e:{var le=s.navigator;if(le){var he=le.userAgent;if(he){Z=he;break e}}Z=""}function fe(e){return ue(Z,e)}function de(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function pe(e){for(var t in e)return!1;return!0}function ve(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ge.length;o++)n=ge[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ye(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function be(e,t){this.a=e===Ie&&t||"",this.b=Te}function _e(e){return e instanceof be&&e.constructor===be&&e.b===Te?e.a:(M("expected object of type Const, got '"+e+"'"),"type_error:Const")}be.prototype.ta=!0,be.prototype.sa=function(){return this.a},be.prototype.toString=function(){return"Const{"+this.a+"}"};var we,Te={},Ie={};function Ee(){if(void 0===we){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){s.console&&s.console.error(n.message)}we=e}else we=e}return we}function Se(e,t){this.a=t===xe?e:""}function ke(e){return e instanceof Se&&e.constructor===Se?e.a:(M("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=_e(e);if(!Ae.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Ne,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof be?_e(e):encodeURIComponent(String(e))})),function(e){var t=Ee();return e=t?t.createScriptURL(e):e,new Se(e,xe)}(e)}Se.prototype.ta=!0,Se.prototype.sa=function(){return this.a.toString()},Se.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ne=/%{(\w+)}/g,Ae=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xe={};function Pe(e,t){this.a=t===je?e:""}function Re(e){return e instanceof Pe&&e.constructor===Pe?e.a:(M("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}Pe.prototype.ta=!0,Pe.prototype.sa=function(){return this.a.toString()},Pe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Oe=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,De=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Le=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Me(e){if(e instanceof Pe)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Le.test(e))e=new Pe(e,je);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(De);e=t&&Oe.test(t[1])?new Pe(e,je):null}return e}function Fe(e){return e instanceof Pe?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Le.test(e)||(e="about:invalid#zClosurez"),new Pe(e,je))}var je={},Ue=new Pe("about:invalid#zClosurez",je);function qe(e,t,n){this.a=n===Ve?e:""}qe.prototype.ta=!0,qe.prototype.sa=function(){return this.a.toString()},qe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ve={};function Be(e,t,n,r){return e=e instanceof Pe?e:Fe(e),t=t||s,n=n instanceof be?_e(n):n||"",t.open(Re(e),n,r,void 0)}function Ke(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function ze(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(te,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ne,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(re,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ae,"&#0;"))),e}function We(e){return We[" "](e),e}We[" "]=h;var He,Ge=fe("Opera"),Qe=fe("Trident")||fe("MSIE"),Ye=fe("Edge"),$e=Ye||Qe,Xe=fe("Gecko")&&!(ue(Z.toLowerCase(),"webkit")&&!fe("Edge"))&&!(fe("Trident")||fe("MSIE"))&&!fe("Edge"),Je=ue(Z.toLowerCase(),"webkit")&&!fe("Edge");function Ze(){var e=s.document;return e?e.documentMode:void 0}e:{var et="",tt=function(){var e=Z;return Xe?/rv:([^\);]+)(\)|;)/.exec(e):Ye?/Edge\/([\d\.]+)/.exec(e):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Je?/WebKit\/(\S+)/.exec(e):Ge?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(tt&&(et=tt?tt[1]:""),Qe){var nt=Ze();if(null!=nt&&nt>parseFloat(et)){He=String(nt);break e}}He=et}var rt,it={};function ot(e){return function(e,t){var n=it;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=ee(String(He)).split("."),r=ee(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ce(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ce(0==a[2].length,0==s[2].length)||ce(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(s.document&&Qe){var at=Ze();rt=at||(parseInt(He,10)||void 0)}else rt=void 0;var st=rt;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(pa){}var ut=!Qe||9<=Number(st);function ct(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function lt(e,t){de(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:dt.hasOwnProperty(n)?e.setAttribute(dt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ht,ft,dt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pt(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ut&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',ze(a.name),'"'),a.type){o.push(' type="',ze(a.type),'"');var s={};me(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=vt(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):lt(o,a)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(p(o)){a="function"==typeof o.item;break e}}a=!1}z(a?J(o):o,r)}}}(i,o,r),o}function vt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function gt(e){s.setTimeout((function(){throw e}),0)}function mt(e,t){ft||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);ft=function(){e.then(_t)}}else ft=function(){var e=_t;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!fe("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ht||(ht=function(){var e=s.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!fe("Presto")&&(e=function(){var e=vt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=w((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!fe("Trident")&&!fe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),ht(e)):s.setImmediate(e)}}(),yt||(ft(),yt=!0),bt.add(e,t)}var yt=!1,bt=new U;function _t(){for(var e;e=V();){try{e.a.call(e.b)}catch(t){gt(t)}j(q,e)}yt=!1}function wt(e,t){if(this.a=Tt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){Mt(n,It,e)}),(function(e){if(!(e instanceof Kt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(rb){}Mt(n,Et,e)}))}catch(Ot){Mt(this,Et,Ot)}}var Tt=0,It=2,Et=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var kt=new F((function(){return new St}),(function(e){e.reset()}));function Ct(e,t,n){var r=kt.get();return r.g=e,r.b=t,r.f=n,r}function Nt(e){if(e instanceof wt)return e;var t=new wt(h);return Mt(t,It,e),t}function At(e){return new wt((function(t,n){n(e)}))}function xt(e,t,n){Ft(e,t,n,null)||mt(T(t,e))}function Pt(e){return new wt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)xt(e[o],T(i,o,!0),T(i,o,!1));else t(r)}))}function Rt(e,t){if(e.a==Tt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Tt&&1==r?Rt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ut(n),qt(n,i,Et,t)))}e.c=null}else Mt(e,Et,t)}function Dt(e,t){e.b||e.a!=It&&e.a!=Et||jt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Lt(e,t,n,r){var i=Ct(null,null,null);return i.a=new wt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(Yn){o(Yn)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Kt?o(t):e(i)}catch(Yn){o(Yn)}}:o})),i.a.c=e,Dt(e,i),i.a}function Mt(e,t,n){e.a==Tt&&(e===n&&(t=Et,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ft(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,jt(e),t!=Et||n instanceof Kt||function(e,t){e.g=!0,mt((function(){e.g&&Bt.call(null,t)}))}(e,n)))}function Ft(e,t,n,r){if(e instanceof wt)return Dt(e,Ct(t||h,n||null,r)),!0;if(O(e))return e.then(t,n,r),!0;if(v(e))try{var i=e.then;if(p(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function jt(e){e.h||(e.h=!0,mt(e.gc,e))}function Ut(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function qt(e,t,n,r){if(n==Et&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Vt(t,n,r);else try{t.c?t.g.call(t.f):Vt(t,n,r)}catch(rb){Bt.call(null,rb)}j(kt,t)}function Vt(e,t,n){t==It?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}wt.prototype.then=function(e,t,n){return Lt(this,p(e)?e:null,p(t)?t:null,n)},wt.prototype.$goog_Thenable=!0,(e=wt.prototype).oa=function(e,t){return(e=Ct(e,e,t)).c=!0,Dt(this,e),this},e.o=function(e,t){return Lt(this,null,e,t)},e.cancel=function(e){if(this.a==Tt){var t=new Kt(e);mt((function(){Rt(this,t)}),this)}},e.$c=function(e){this.a=Tt,Mt(this,It,e)},e.ad=function(e){this.a=Tt,Mt(this,Et,e)},e.gc=function(){for(var e;e=Ut(this);)qt(this,e,this.a,this.i);this.h=!1};var Bt=gt;function Kt(e){D.call(this,e)}function zt(){0!=Wt&&(Ht[g(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Kt,D),Kt.prototype.name="cancel";var Wt=0,Ht={};function Gt(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=Wt)){var t=g(e);if(0!=Wt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ht[t]}}zt.prototype.ya=!1,zt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qt=Object.freeze||function(e){return e},Yt=!Qe||9<=Number(st),$t=Qe&&!ot("9"),Xt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",h,t),s.removeEventListener("test",h,t)}catch(n){}return e}();function Jt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Zt(e,t){if(Jt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Xe){e:{try{We(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:en[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Jt.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Zt,Jt);var en=Qt({2:"touch",3:"pen",4:"mouse"});Zt.prototype.preventDefault=function(){Zt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,$t)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Zt.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function an(e){this.src=e,this.a={},this.b=0}function sn(e,t){var n=t.type;n in e.a&&Y(e.a[n],t)&&(on(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function un(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}an.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=un(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):((t=new rn(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(e,t,n,r,i){if(r&&r.once)dn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)hn(e,t[o],n,r,i);else n=Tn(n),e&&e[tn]?En(e,t,n,v(r)?!!r.capture:!!r,i):fn(e,t,n,!1,r,i)}function fn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=_n(e);if(s||(e[cn]=s=new an(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=bn,t=Yt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(gn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function dn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)dn(e,t[o],n,r,i);else n=Tn(n),e&&e[tn]?Sn(e,t,n,v(r)?!!r.capture:!!r,i):fn(e,t,n,!0,r,i)}function pn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)pn(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Tn(n),e&&e[tn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=un(o=e.a[t],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=_n(e))&&(t=e.a[t.toString()],e=-1,t&&(e=un(t,n,r,i)),(n=-1<e?t[e]:null)&&vn(n))}function vn(e){if("number"!==typeof e&&e&&!e.wa){var t=e.src;if(t&&t[tn])sn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(gn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_n(t))?(sn(n,e),0==n.b&&(n.src=null,t[cn]=null)):on(e)}}}function gn(e){return e in ln?ln[e]:ln[e]="on"+e}function mn(e,t,n,r){var i=!0;if((e=_n(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&vn(e),n.call(r,t)}function bn(e,t){if(e.wa)return!0;if(!Yt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Zt(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=mn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=mn(r[i],e,!1,t),n=n&&o}return n}return yn(e,new Zt(t,this))}function _n(e){return(e=e[cn])instanceof an?e:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(e){return p(e)?e:(e[wn]||(e[wn]=function(t){return e.handleEvent(t)}),e[wn])}function In(){zt.call(this),this.v=new an(this),this.bc=this,this.hb=null}function En(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function Sn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function kn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&sn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Cn(e,t,n){if(p(e))n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Nn(e){var t=null;return new wt((function(n,r){-1==(t=Cn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw s.clearTimeout(t),e}))}function An(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"===typeof e)return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function xn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(d(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Pn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Rn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];On(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)On(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)}E(In,zt),In.prototype[tn]=!0,In.prototype.addEventListener=function(e,t,n,r){hn(this,e,t,n,r)},In.prototype.removeEventListener=function(e,t,n,r){pn(this,e,t,n,r)},In.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"===typeof e)e=new Jt(e,n);else if(e instanceof Jt)e.target=e.target||n;else{var i=e;me(e=new Jt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=kn(a,r,!0,e)&&i}if(i=kn(a=e.b=n,r,!0,e)&&i,i=kn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=kn(a=e.b=t[o],r,!1,e)&&i;return i},In.prototype.Da=function(){if(In.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)on(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=Pn.prototype).X=function(){Rn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Rn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return On(this.b,e)?this.b[e]:t},e.set=function(e,t){On(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Ln?(this.i=void 0!==t?t:e.i,Mn(this,e.c),this.l=e.l,this.a=e.a,Fn(this,e.g),this.f=e.f,jn(this,ir(e.b)),this.h=e.h):e&&(n=String(e).match(Dn))?(this.i=!!t,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!t,this.b=new Jn(null,this.i))}function Mn(e,t,n){e.c=n?Kn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Fn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function jn(e,t,n){t instanceof Jn?(e.b=t,function(e,t){t&&!e.f&&(Zn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(tr(this,t),rr(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=zn(t,$n)),e.b=new Jn(t,e.i))}function Un(e,t,n){e.b.set(t,n)}function qn(e,t){return e.b.get(t)}function Vn(e){return e instanceof Ln?new Ln(e):new Ln(e,void 0)}function Bn(e,t,n,r){var i=new Ln(null,void 0);return e&&Mn(i,e),t&&(i.a=t),n&&Fn(i,n),r&&(i.f=r),i}function Kn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ln.prototype.toString=function(){var e=[],t=this.c;t&&e.push(zn(t,Hn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(zn(t,Hn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(zn(n,"/"==n.charAt(0)?Qn:Gn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",zn(n,Xn)),e.join("")},Ln.prototype.resolve=function(e){var t=new Ln(this),n=!!e.c;n?Mn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Fn(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ue(i,"./")||ue(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?jn(t,ir(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Hn=/[#\/\?@]/g,Gn=/[#\?:]/g,Qn=/[#\?]/g,$n=/[#\?@]/g,Xn=/#/g;function Jn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Zn(e){e.a||(e.a=new Pn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function er(e){var t=xn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Jn(null,void 0);e=An(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function tr(e,t){Zn(e),t=or(e,t),On(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,On((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Rn(e)))}function nr(e,t){return Zn(e),t=or(e,t),On(e.a.b,t)}function rr(e,t,n){tr(e,t),0<n.length&&(e.c=null,e.a.set(or(e,t),J(n)),e.b+=n.length)}function ir(e){var t=new Jn;return t.c=e.c,e.a&&(t.a=new Pn(e.a),t.b=e.b),t}function or(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ar(e){var t=[];return ur(new sr,e,t),t.join("")}function sr(){}function ur(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),ur(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),hr(r,n),n.push(":"),ur(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":hr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Jn.prototype).add=function(e,t){Zn(this),this.c=null,e=or(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Zn(this),this.a.forEach((function(n,r){z(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){Zn(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){Zn(this);var t=[];if("string"===typeof e)nr(this,e)&&(t=X(t,this.a.get(or(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=X(t,e[n])}return t},e.set=function(e,t){return Zn(this),this.c=null,nr(this,e=or(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},lr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(e,t){t.push('"',e.replace(lr,(function(e){var t=cr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),cr[e]=t),t})),'"')}function fr(){var e=Rr();return Qe&&!!st&&11==st||/Edge\/\d+/.test(e)}function dr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function pr(e,t){t=t||s.window;var n="about:blank";e&&(n=Re(Me(e)||Ue)),t.location.href=n}function vr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<vr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function gr(e){return!!((e=(e||Rr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function mr(e){e=e||s.window;try{e.close()}catch(t){}}function yr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),r&&(t.target=r,ue(n,"crios/")&&(t.target="_blank")),Ar(Rr())==Cr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Pe?n:Me("undefined"!=typeof n.href?n.href:String(n))||Ue,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((fe("iPhone")&&!fe("iPod")&&!fe("iPad")||fe("iPad")||fe("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ye(a=vt(document,"A"),"HTMLAnchorElement"),t=t instanceof Pe?t:Fe(t),a.href=Re(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Be("",r,n,a),e=Re(t),a&&($e&&ue(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ze(e)+'">',e=new qe(e=(r=Ee())?r.createHTML(e):e,null,Ve),r=a.document)&&(r.write(function(e){return e instanceof qe&&e.constructor===qe?e.a:(M("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}(e)),r.close())):(a=Be(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function wr(){var e=null;return new wt((function(t){"complete"==s.document.readyState?t():(e=function(){t()},dn(window,"load",e))})).o((function(t){throw pn(window,"load",e),t}))}function Tr(e){return e=e||Rr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var e=s.window;try{return!(!e||e==e.top)}catch(t){return!1}}function Er(){return"undefined"!==typeof s.WorkerGlobalScope&&"function"===typeof s.importScripts}function Sr(){return _i.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":_i.default.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function kr(){var e=Sr();return"ReactNative"===e||"Node"===e}var Cr="Firefox",Nr="Chrome";function Ar(e){var t=e.toLowerCase();return ue(t,"opera/")||ue(t,"opr/")||ue(t,"opios/")?"Opera":ue(t,"iemobile")?"IEMobile":ue(t,"msie")||ue(t,"trident/")?"IE":ue(t,"edge/")?"Edge":ue(t,"firefox/")?Cr:ue(t,"silk/")?"Silk":ue(t,"blackberry")?"Blackberry":ue(t,"webos")?"Webos":!ue(t,"safari/")||ue(t,"chrome/")||ue(t,"crios/")||ue(t,"android")?!ue(t,"chrome/")&&!ue(t,"crios/")||ue(t,"edge/")?ue(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Nr:"Safari"}var xr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Pr(e,t){t=t||[];var n,r=[],i={};for(n in xr)i[xr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Sr())?r=Ar(i=Rr()):"Worker"===r&&(r=Ar(i=Rr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Rr(){return s.navigator&&s.navigator.userAgent||""}function Or(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Dr(){try{var e=s.localStorage,t=Br();if(e)return e.setItem(t,"1"),e.removeItem(t),!fr()||!!s.indexedDB}catch(n){return Er()&&!!s.indexedDB}return!1}function Lr(){return(Mr()||"chrome-extension:"===Fr()||Tr())&&!kr()&&Dr()&&!Er()}function Mr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return s.location&&s.location.protocol||null}function jr(e){return!gr(e=e||Rr())&&Ar(e)!=Cr}function Ur(e){return"undefined"===typeof e?null:ar(e)}function qr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Vr(e){if(null!==e)return JSON.parse(e)}function Br(e){return e||Math.floor(1e9*Math.random()).toString()}function Kr(e){return"Safari"!=Ar(e=e||Rr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Wr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Rr(),t=Sr(),this.b=gr(e)||"ReactNative"===t}function Hr(){var e=s.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Gr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Qr(){return!(!Or("fireauth.oauthhelper",s)&&!Or("fireauth.iframe",s))}Wr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!==typeof e.onLine||!Mr()&&"chrome-extension:"!==Fr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Yr,$r={};function Xr(e){$r[e]||($r[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Yr=2==Jr.abcd}catch(pa){Yr=!1}function Zr(e,t,n){Yr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function ei(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Zr(e,n,t[n])}function ti(e){var t={};return ei(t,e),t}function ni(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Zr(t,n,ni(e[n]));return t}function ri(e){var t=e&&(e[ui]?"phone":null);if(!(t&&e&&e[si]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Zr(this,"uid",e[si]),Zr(this,"displayName",e[oi]||null);var n=null;e[ai]&&(n=new Date(e[ai]).toUTCString()),Zr(this,"enrollmentTime",n),Zr(this,"factorId",t)}function ii(e){try{var t=new ci(e)}catch(n){t=null}return t}ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var oi="displayName",ai="enrolledAt",si="mfaEnrollmentId",ui="phoneInfo";function ci(e){ri.call(this,e),Zr(this,"phoneNumber",e[ui])}function li(e){var t={},n=e[pi],r=e[gi],i=e[mi];if(e=ii(e[vi]),!i||i!=fi&&i!=di&&!n||i==di&&!r||i==hi&&!e)throw Error("Invalid checkActionCode response!");i==di?(t[bi]=n||null,t[Ti]=n||null,t[yi]=r):(t[bi]=r||null,t[Ti]=r||null,t[yi]=n||null),t[wi]=e||null,Zr(this,Ei,i),Zr(this,Ii,ni(t))}E(ci,ri),ci.prototype.w=function(){var e=ci.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var hi="REVERT_SECOND_FACTOR_ADDITION",fi="EMAIL_SIGNIN",di="VERIFY_AND_CHANGE_EMAIL",pi="email",vi="mfaInfo",gi="newEmail",mi="requestType",yi="email",bi="fromEmail",wi="multiFactorInfo",Ti="previousEmail",Ii="data",Ei="operation";function Si(e){var t=qn(e=Vn(e),ki)||null,n=qn(e,Ci)||null,r=qn(e,xi)||null;if(r=r&&Ri[r]||null,!t||!n||!r)throw new k("argument-error",ki+", "+Ci+"and "+xi+" are required in a valid action code URL.");ei(this,{apiKey:t,operation:r,code:n,continueUrl:qn(e,Ni)||null,languageCode:qn(e,Ai)||null,tenantId:qn(e,Pi)||null})}var ki="apiKey",Ci="oobCode",Ni="continueUrl",Ai="languageCode",xi="mode",Pi="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:fi,verifyAndChangeEmail:di,verifyEmail:"VERIFY_EMAIL"};function Oi(e){try{return new Si(e)}catch(t){return null}}function Di(e){var t=e[Ui];if("undefined"===typeof t)throw new k("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new k("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Li];if(n&&"object"===typeof n){t=n[Bi];var r=n[qi];if(n=n[Vi],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new k("argument-error",qi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new k("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new k("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new k("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new k("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(t=e[ji])&&"object"===typeof t){if("string"===typeof(t=t[Ki])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new k("argument-error",Ki+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new k("argument-error",ji+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Fi])&&"boolean"!==typeof t)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Mi])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new k("argument-error",Mi+" property must be a non empty string when specified.");this.i=e||null}var Li="android",Mi="dynamicLinkDomain",Fi="handleCodeInApp",ji="iOS",Ui="url",qi="installApp",Vi="minimumVersion",Bi="packageName",Ki="bundleId";function zi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Wi=null;function Hi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Wi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Wi){Wi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Wi[o]&&(Wi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Gi(e){var t=Yi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Qi(e){try{return new Gi(e)}catch(t){return null}}function Yi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=Hi(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(Yn){}return null}Gi.prototype.T=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.h};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Ji={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Xi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Xi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Xi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:$i},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Zi(e){for(var t in Ji)if(Ji[t].fa==e)return Ji[t];return null}function eo(e){var t={};t["facebook.com"]=oo,t["google.com"]=so,t["github.com"]=ao,t["twitter.com"]=uo;var n=e&&e[no];try{if(n)return t[n]?new t[n](e):new io(e);if("undefined"!==typeof e[to])return new ro(e)}catch(Ot){}return null}var to="idToken",no="providerId";function ro(e){var t=e[no];if(!t&&e[to]){var n=Qi(e[to]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Zr(this,"providerId",t),Zr(this,"isNewUser",n)}function io(e){ro.call(this,e),Zr(this,"profile",ni((e=Vr(e.rawUserInfo||"{}"))||{}))}function oo(e){if(io.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(e){if(io.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",this.profile&&this.profile.login||null)}function so(e){if(io.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function uo(e){if(io.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",e.screenName||null)}function co(e){var t=Vn(e),n=qn(t,"link"),r=qn(Vn(n),"link");return t=qn(t,"deep_link_id"),qn(Vn(t),"link")||t||r||n||e}function lo(e,t){if(!e&&!t)throw new k("internal-error","Internal assert: no raw session string available");if(e&&t)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ho:fo}E(io,ro),E(oo,io),E(ao,io),E(so,io),E(uo,io);var ho="enroll",fo="signin";function po(){}function vo(e,t){return e.then((function(e){if(e[is]){var n=Qi(e[is]);if(!n||t!=n.i)throw new k("user-mismatch");return e}throw new k("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==A+"user-not-found"?new k("user-mismatch"):e}))}function go(e,t){if(!t)throw new k("internal-error","failed to construct a credential");this.a=t,Zr(this,"providerId",e),Zr(this,"signInMethod",e)}function mo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function yo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new go(e.providerId,e.pendingToken)}catch(t){}return null}function bo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Zr(this,"idToken",t.idToken),t.accessToken&&Zr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Zr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Zr(this,"accessToken",t.oauthToken),Zr(this,"secret",t.oauthTokenSecret)}Zr(this,"providerId",e),Zr(this,"signInMethod",n)}function _o(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:er(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function wo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new bo(e.providerId,t,e.signInMethod)}catch(n){}}return null}function To(e,t){this.Qc=t||[],ei(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Zi(e)||{}).Ja||null,this.pb=null}function Io(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');To.call(this,e,[])}function Eo(e){To.call(this,e,Xi),this.a=[]}function So(){Eo.call(this,"facebook.com")}function ko(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new So).credential({accessToken:t})}function Co(){Eo.call(this,"github.com")}function No(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new Co).credential({accessToken:t})}function Ao(){Eo.call(this,"google.com"),this.Ca("profile")}function xo(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new Ao).credential({idToken:n,accessToken:t})}function Po(){To.call(this,"twitter.com",$i)}function Ro(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bo("twitter.com",n,"twitter.com")}function Oo(e,t,n){this.a=e,this.f=t,Zr(this,"providerId","password"),Zr(this,"signInMethod",n===Lo.EMAIL_LINK_SIGN_IN_METHOD?Lo.EMAIL_LINK_SIGN_IN_METHOD:Lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Do(e){return e&&e.email&&e.password?new Oo(e.email,e.password,e.signInMethod):null}function Lo(){ei(this,{providerId:"password",isOAuthProvider:!1})}function Mo(e,t){if(!(t=Fo(t)))throw new k("argument-error","Invalid email link!");return new Oo(e,t.code,Lo.EMAIL_LINK_SIGN_IN_METHOD)}function Fo(e){return(e=Oi(e=co(e)))&&e.operation===fi?e:null}function jo(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new k("internal-error");this.a=e,Zr(this,"providerId","phone"),this.fa="phone",Zr(this,"signInMethod","phone")}function Uo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new jo(t)}return null}function qo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function Vo(e){try{this.a=e||_i.default.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ei(this,{providerId:"phone",isOAuthProvider:!1})}function Bo(e,t){if(!e)throw new k("missing-verification-id");if(!t)throw new k("missing-verification-code");return new jo({fb:e,eb:t})}function Ko(e){if(e.temporaryProof&&e.phoneNumber)return new jo({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return xo(o,n);case"facebook.com":return ko(n);case"github.com":return No(n);case"twitter.com":return Ro(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new go(t,a):new bo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Eo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function zo(e){if(!e.isOAuthProvider)throw new k("invalid-oauth-provider")}function Wo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Ho(e){return(e=e||{}).type?new Wo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Go(){this.b=null,this.a=[]}lo.prototype.Ha=function(){return this.a?Nt(this.a):Nt(this.b)},lo.prototype.w=function(){return this.type==ho?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},po.prototype.ka=function(){},po.prototype.b=function(){},po.prototype.c=function(){},po.prototype.w=function(){},go.prototype.ka=function(e){return ks(e,mo(this))},go.prototype.b=function(e,t){var n=mo(this);return n.idToken=t,Cs(e,n)},go.prototype.c=function(e,t){return vo(Ns(e,mo(this)),t)},go.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},bo.prototype.ka=function(e){return ks(e,_o(this))},bo.prototype.b=function(e,t){var n=_o(this);return n.idToken=t,Cs(e,n)},bo.prototype.c=function(e,t){return vo(Ns(e,_o(this)),t)},bo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},To.prototype.Ka=function(e){return this.Jb=ve(e),this},E(Io,To),E(Eo,To),Eo.prototype.Ca=function(e){return Q(this.a,e)||this.a.push(e),this},Eo.prototype.Rb=function(){return J(this.a)},Eo.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new bo(this.providerId,n,this.providerId)},E(So,Eo),Zr(So,"PROVIDER_ID","facebook.com"),Zr(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Co,Eo),Zr(Co,"PROVIDER_ID","github.com"),Zr(Co,"GITHUB_SIGN_IN_METHOD","github.com"),E(Ao,Eo),Zr(Ao,"PROVIDER_ID","google.com"),Zr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Po,To),Zr(Po,"PROVIDER_ID","twitter.com"),Zr(Po,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(e){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?lu(e,Ms,{email:this.a,oobCode:this.f}):lu(e,ou,{email:this.a,password:this.f})},Oo.prototype.b=function(e,t){return this.signInMethod==Lo.EMAIL_LINK_SIGN_IN_METHOD?lu(e,Fs,{idToken:t,email:this.a,oobCode:this.f}):lu(e,$s,{idToken:t,email:this.a,password:this.f})},Oo.prototype.c=function(e,t){return vo(this.ka(e),t)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ei(Lo,{PROVIDER_ID:"password"}),ei(Lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ei(Lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),jo.prototype.ka=function(e){return e.gb(qo(this))},jo.prototype.b=function(e,t){var n=qo(this);return n.idToken=t,lu(e,su,n)},jo.prototype.c=function(e,t){var n=qo(this);return n.operation="REAUTH",vo(e=lu(e,uu,n),t)},jo.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Vo.prototype.gb=function(e,t){var n=this.a.a;return Nt(t.verify()).then((function(r){if("string"!==typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===t.type){var i,o=v(e)?e.session:null,a=v(e)?e.phoneNumber:e;return i=o&&o.type==ho?o.Ha().then((function(e){return function(e,t){return lu(e,Js,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==fo?o.Ha().then((function(t){return function(e,t){return lu(e,eu,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return lu(e,Qs,t)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}))}throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},ei(Vo,{PROVIDER_ID:"phone"}),ei(Vo,{PHONE_SIGN_IN_METHOD:"phone"}),Wo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Wo.prototype.T=function(){return this.h},Wo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Qo,Yo=null;function $o(e){var t="unauthorized-domain",n=void 0,r=Vn(e);e=r.a,"chrome-extension"==(r=r.c)?n=Ke("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Ke("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",k.call(this,t,n)}function Xo(e,t,n){k.call(this,e,n),(e=t||{}).Kb&&Zr(this,"email",e.Kb),e.ea&&Zr(this,"phoneNumber",e.ea),e.credential&&Zr(this,"credential",e.credential),e.$b&&Zr(this,"tenantId",e.$b)}function Jo(e){if(e.code){var t=e.code||"";0==t.indexOf(A)&&(t=t.substring(A.length));var n={credential:Ko(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new k(t,e.message||void 0);return new Xo(t,n,e.message)}return null}function Zo(){}function ea(e){return e.c||(e.c=e.b())}function ta(){}function na(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(rb){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function ra(){}function ia(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Tb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function oa(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function aa(e,t,n){this.reset(e,t,n,void 0,void 0)}E($o,k),E(Xo,k),Xo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&me(e,t),e},Xo.prototype.toJSON=function(){return this.w()},Zo.prototype.c=null,E(ta,Zo),ta.prototype.a=function(){var e=na(this);return e?new ActiveXObject(e):new XMLHttpRequest},ta.prototype.b=function(){var e={};return na(this)&&(e[0]=!0,e[1]=!0),e},Qo=new ta,E(ra,Zo),ra.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new ia;throw Error("Unsupported browser")},ra.prototype.b=function(){return{}},(e=ia.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,oa(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",oa(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,oa(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},aa.prototype.a=null;function sa(e){this.f=e,this.b=this.c=this.a=null}function ua(e,t){this.name=e,this.value=t}aa.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||I(),delete this.a},ua.prototype.toString=function(){return this.name};var ca=new ua("SEVERE",1e3),la=new ua("WARNING",900),ha=new ua("CONFIG",700),fa=new ua("FINE",500);function da(e){return e.c?e.c:e.a?da(e.a):(M("Root logger has no level set."),null)}sa.prototype.log=function(e,t,n){if(e.value>=da(this).value)for(p(t)&&(t=t()),e=new aa(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var pa,va={},ga=null;function ma(e){var t;if(ga||(ga=new sa(""),va[""]=ga,ga.c=ha),!(t=va[e])){t=new sa(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=ma(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,va[e]=t}return t}function ya(e,t){e&&e.log(fa,t,void 0)}function ba(e){this.f=e}function _a(e){In.call(this),this.u=e,this.h=void 0,this.readyState=wa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ma("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ba,Zo),ba.prototype.a=function(){return new _a(this.f)},ba.prototype.b=(pa={},function(){return pa}),E(_a,In);var wa=0;function Ta(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function Ia(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Ea(e)}function Ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Sa(e){In.call(this),this.headers=new Pn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ka,this.u=this.S=!1}(e=_a.prototype).open=function(e,t){if(this.readyState!=wa)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Ea(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ia(this)),this.readyState=wa},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Ea(this)),this.a&&(this.readyState=3,Ea(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,Ta(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Ia(this):Ea(this),3==this.readyState&&Ta(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,Ia(this))},e.sc=function(e){this.a&&(this.response=e,Ia(this))},e.Va=function(e){var t=this.i;t&&t.log(la,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&Ia(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(la,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(la,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),E(Sa,In);var ka="";Sa.prototype.b=ma("goog.net.XhrIo");var Ca=/^https?$/i,Na=["POST","PUT"];function Aa(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Qo.a(),e.C=e.D?ea(e.D):ea(Qo),e.a.onreadystatechange=w(e.Wb,e);try{ya(e.b,ja(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(a){return ya(e.b,ja(e,"Error opening Xhr: "+a.message)),void Pa(e,a)}t=r||"";var o=new Pn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||"string"===typeof e)z(e,t,void 0);else for(var n=xn(e),r=An(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=xa,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(o.Y()),r=s.FormData&&t instanceof s.FormData,!Q(Na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{La(e),0<e.g&&(e.u=function(e){return Qe&&ot(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),ya(e.b,ja(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=w(e.Ma,e)):e.s=Cn(e.Ma,e.g,e)),ya(e.b,ja(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){ya(e.b,ja(e,"Send error: "+a.message)),Pa(e,a)}}function xa(e){return"content-type"==e.toLowerCase()}function Pa(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Ra(e),Da(e)}function Ra(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Oa(e){if(e.c&&"undefined"!=typeof a)if(e.C[1]&&4==Ma(e)&&2==Fa(e))ya(e.b,ja(e,"Local request error detected and ignored"));else if(e.i&&4==Ma(e))Cn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ma(e)){ya(e.b,ja(e,"Request complete")),e.c=!1;try{var t,n=Fa(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Dn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ca.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Ma(e)?e.a.statusText:""}catch(l){ya(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+Fa(e)+"]",Ra(e)}}finally{Da(e)}}}function Da(e,t){if(e.a){La(e);var n=e.a,r=e.C[0]?h:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(rb){(e=e.b)&&e.log(ca,"Problem encountered resetting onreadystatechange: "+rb.message,void 0)}}}function La(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function Ma(e){return e.a?e.a.readyState:0}function Fa(e){try{return 2<Ma(e)?e.a.status:-1}catch(t){return-1}}function ja(e,t){return t+" ["+e.P+" "+e.l+" "+Fa(e)+"]"}function Ua(e){var t=$a;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function qa(e,t,n){e.a=!0,e.c=n,e.f=!t,za(e)}function Va(e){if(e.a){if(!e.v)throw new Wa(e);e.v=!1}}function Ba(e,t,n,r){e.g.push([t,n,r]),e.a&&za(e)}function Ka(e){return G(e.g,(function(e){return p(e[1])}))}function za(e){if(e.h&&e.a&&Ka(e)){var t=e.h,n=Qa[t];n&&(s.clearTimeout(n.a),delete Qa[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(O(t)||"function"===typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,Ka(e)||(n=!0)}}e.c=t,r&&(u=w(e.m,e,!0),r=w(e.m,e,!1),t instanceof Ua?(Ba(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new Ga(t),Qa[t.a]=t,e.h=t.a)}function Wa(){D.call(this)}function Ha(){D.call(this)}function Ga(e){this.a=s.setTimeout(w(this.c,this),0),this.b=e}(e=Sa.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ya(this.b,ja(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ya(this.b,ja(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Da(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Da(this,!0)),Sa.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Oa(this):this.Jc())},e.Jc=function(){Oa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ka:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(ca,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ya(this.b,"Can not get response: "+t.message),null}},Ua.prototype.cancel=function(e){if(this.a)this.c instanceof Ua&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Ha(this),Va(this),qa(this,!1,e))}},Ua.prototype.m=function(e,t){this.i=!1,qa(this,e,t)},Ua.prototype.then=function(e,t,n){var r,i,o=new wt((function(e,t){r=e,i=t}));return Ba(this,r,(function(e){e instanceof Ha?o.cancel():i(e)})),o.then(e,t,n)},Ua.prototype.$goog_Thenable=!0,E(Wa,D),Wa.prototype.message="Deferred has already fired",Wa.prototype.name="AlreadyCalledError",E(Ha,D),Ha.prototype.message="Deferred was canceled",Ha.prototype.name="CanceledError",Ga.prototype.c=function(){throw delete Qa[this.a],this.b};var Qa={};function Ya(e){var t={},n=t.document||document,r=ke(e).toString(),i=vt(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ua(o),u=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Xa(i,!0);var e=new es(Za,"Timeout reached for loading script "+r);Va(a),qa(a,!1,e)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Xa(i,t.xd||!1,u),Va(a),qa(a,!0,null))},i.onerror=function(){Xa(i,!0,u);var e=new es(Ja,"Error while loading script "+r);Va(a),qa(a,!1,e)},me(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),lt(i,o),function(e,t){ye(e,"HTMLScriptElement"),e.src=ke(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=l(t.document):(null===c&&(c=l(s.document)),t=c),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function $a(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Xa(e,!0,this.Ma)}}function Xa(e,t,n){null!=n&&s.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ja=0,Za=1;function es(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),D.call(this,n),this.code=e}function ts(e){this.f=e}function ns(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||os,this.g=ve(e.secureTokenHeaders||as),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||ss,this.a=ve(e.firebaseHeaders||us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Sr(),!(n=s.XMLHttpRequest||n&&_i.default.INTERNAL.node&&_i.default.INTERNAL.node.XMLHttpRequest)&&!Er())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new ba(self):kr()?this.f=new ts(n):this.f=new ra,this.b=null}E(es,D),E(ts,Zo),ts.prototype.a=function(){return new this.f},ts.prototype.b=function(){return{}};var rs,is="idToken",os=new Wr(3e4,6e4),as={"Content-Type":"application/x-www-form-urlencoded"},ss=new Wr(3e4,6e4),us={"Content-Type":"application/json"};function cs(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ls(e,t){t&&(e.l=hs("https://securetoken.googleapis.com/v1/token",t),e.h=hs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=hs("https://identitytoolkit.googleapis.com/v2/",t))}function hs(e,t){return e=Vn(e),t=Vn(t.url),e.f=e.a+e.f,Mn(e,t.c),e.a=t.a,Fn(e,t.g),e.toString()}function fs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function ds(e,t,n,r,i,o,a){(function(){var e=Rr();return!((e=Ar(e)!=Nr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Qe||!st||9<st)})()||Er()?e=w(e.u,e):(rs||(rs=new wt((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{s[vs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Ba(e,null,t,void 0)}(Ya(Ce(ps,{onload:vs})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=w(e.s,e)),e(t,n,r,i,o,a)}ns.prototype.T=function(){return this.b},ns.prototype.u=function(e,t,n,r,i,o){if(Er()&&("undefined"===typeof s.fetch||"undefined"===typeof s.Headers||"undefined"===typeof s.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Sa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ya(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(Yn){e=null}t&&t(e)})),Sn(a,"ready",(function(){u&&clearTimeout(u),Gt(this)})),Sn(a,"timeout",(function(){u&&clearTimeout(u),Gt(this),t&&t(null)})),Aa(a,e,n,r,i)};var ps=new be(Ie,"https://apis.google.com/js/client.js?onload=%{onload}"),vs="__fcb"+Math.floor(1e6*Math.random()).toString();function gs(e,t,n,r,i,o,a){var s=Vn(t+n);Un(s,"key",e.c),a&&Un(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(s,c,i[c]);return new wt((function(t,n){ds(e,s.toString(),(function(e){e?e.error?n(fu(e,o||{})):t(e):n(new k("network-request-failed"))}),r,u?void 0:ar(qr(i)),e.a,e.v.get())}))}function ms(e){if("string"!==typeof(e=e.email)||!_r.test(e))throw new k("invalid-email")}function ys(e){"email"in e&&ms(e)}function bs(e){if(!e[is]){if(e.mfaPendingCredential)throw new k("multi-factor-auth-required",null,ve(e));throw new k("internal-error")}}function _s(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new k("internal-error")}else{if(!e.sessionInfo)throw new k("missing-verification-id");if(!e.code)throw new k("missing-verification-code")}}ns.prototype.s=function(e,t,n,r,i){var o=this;rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},ns.prototype.Ab=function(){return lu(this,Xs,{})},ns.prototype.Cb=function(e,t){return lu(this,Ys,{idToken:e,email:t})},ns.prototype.Db=function(e,t){return lu(this,$s,{idToken:e,password:t})};var ws={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ts(e){if(!e.phoneVerificationInfo)throw new k("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new k("missing-verification-code")}function Is(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new k("internal-error")}function Es(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(nr(e=new Jn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function Ss(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Jo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Jo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Jo(e)):e.errorMessage&&(t=hu(e.errorMessage)),t)throw t;bs(e)}function ks(e,t){return t.returnIdpCredential=!0,lu(e,tu,t)}function Cs(e,t){return t.returnIdpCredential=!0,lu(e,ru,t)}function Ns(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,lu(e,nu,t)}function As(e){if(!e.oobCode)throw new k("invalid-action-code")}(e=ns.prototype).Eb=function(e,t){var n={idToken:e},r=[];return de(ws,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),lu(this,Ys,n)},e.wb=function(e,t){return me(e={requestType:"PASSWORD_RESET",email:e},t),lu(this,zs,e)},e.xb=function(e,t){return me(e={requestType:"EMAIL_SIGNIN",email:e},t),lu(this,Vs,e)},e.vb=function(e,t){return me(e={requestType:"VERIFY_EMAIL",idToken:e},t),lu(this,Bs,e)},e.Fb=function(e,t,n){return me(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),lu(this,Ks,e)},e.gb=function(e){return lu(this,au,e)},e.ob=function(e,t){return lu(this,Gs,{oobCode:e,newPassword:t})},e.Sa=function(e){return lu(this,Ps,{oobCode:e})},e.kb=function(e){return lu(this,xs,{oobCode:e})};var xs={endpoint:"setAccountInfo",A:As,Z:"email",B:!0},Ps={endpoint:"resetPassword",A:As,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new k("internal-error")},B:!0},Rs={endpoint:"signupNewUser",A:function(e){if(ms(e),!e.password)throw new k("weak-password")},G:bs,V:!0,B:!0},Os={endpoint:"createAuthUri",B:!0},Ds={endpoint:"deleteAccount",O:["idToken"]},Ls={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new k("internal-error")}},Ms={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ms,G:bs,V:!0,B:!0},Fs={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ms,G:bs,V:!0},js={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Ts,G:bs,B:!0,Na:!0},Us={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Ts,G:bs,B:!0,Na:!0},qs={endpoint:"getAccountInfo"},Vs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new k("internal-error");ms(e)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},Ks={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},zs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new k("internal-error");ms(e)},Z:"email",B:!0},Ws={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Hs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new k("internal-error")}},Gs={endpoint:"resetPassword",A:As,Z:"email",B:!0},Qs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ys={endpoint:"setAccountInfo",O:["idToken"],A:ys,V:!0},$s={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(ys(e),!e.password)throw new k("weak-password")},G:bs,V:!0},Xs={endpoint:"signupNewUser",G:bs,V:!0,B:!0},Js={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new k("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},eu={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},tu={endpoint:"verifyAssertion",A:Is,Za:Es,G:Ss,V:!0,B:!0},nu={endpoint:"verifyAssertion",A:Is,Za:Es,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new k("user-not-found");if(e.errorMessage)throw hu(e.errorMessage);bs(e)},V:!0,B:!0},ru={endpoint:"verifyAssertion",A:function(e){if(Is(e),!e.idToken)throw new k("internal-error")},Za:Es,G:Ss,V:!0},iu={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new k("invalid-custom-token")},G:bs,V:!0,B:!0},ou={endpoint:"verifyPassword",A:function(e){if(ms(e),!e.password)throw new k("wrong-password")},G:bs,V:!0,B:!0},au={endpoint:"verifyPhoneNumber",A:_s,G:bs,B:!0},su={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new k("internal-error");_s(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Jo(e);bs(e)}},uu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:_s,G:bs,B:!0},cu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[is]^!!e.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function lu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.O))return At(new k("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return Nt(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),gs(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new k("internal-error");return r[t.Z]}))}function hu(e){return fu({error:{errors:[{message:e}],code:400,message:e}})}function fu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",me(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],t);return!t&&e&&(t=Ur(e)),new k("internal-error",t)}function du(e){this.b=e,this.a=null,this.sb=function(e){return(mu||(mu=new wt((function(e,t){function n(){zr(),Or("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){zr(),t(Error("Network Error"))},timeout:vu.get()})}if(Or("gapi.iframes.Iframe"))e();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Or("gapi.load")?n():t(Error("Network Error"))},Nt(Ya(r=Ce(pu,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw mu=null,e})))).then((function(){return new wt((function(t,n){Or("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),gu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var pu=new be(Ie,"https://apis.google.com/js/api.js?onload=%{onload}"),vu=new Wr(3e4,6e4),gu=new Wr(5e3,15e3),mu=null;function yu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Bn((e=Vn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Bn("https",this.l,null,"/__/auth/iframe"),this.a=e,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function bu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function _u(e){try{return _i.default.app(e).auth().Ga()}catch(t){return[]}}function wu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Tu(e){var t=dr();return function(e){return lu(e,Ws,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Vn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:br.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new $o(dr())}))}function Iu(e){return e.m||(e.m=wr().then((function(){if(!e.u){var t=e.c,n=e.i,r=_u(e.b),i=new yu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=J(r||[]),e.u=i.toString()}e.v=new du(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Ho(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Nt(n)}return n.status="ERROR",Nt(n)}))}(e)}))),e.m}function Eu(e){return e.l||(e.C=e.c?Pr(e.c,_u(e.b)):null,e.l=new ns(e.g,R(e.i),e.C),e.f&&ls(e.l,e.f)),e.l}function Su(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new bu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=ve(u||null),e.f=c,e.zb(l).toString()}function ku(e){if(this.a=e||_i.default.INTERNAL.reactNative&&_i.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Cu(e){this.b=e,this.a={},this.f=w(this.c,this)}yu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},bu.prototype.zb=function(e){return this.h=e,this},bu.prototype.toString=function(){if(this.v){var e=Vn(this.v.url);e=Bn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Bn("https",this.u,null,"/__/auth/handler");if(Un(e,"apiKey",this.s),Un(e,"appName",this.c),Un(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=_i.default.app(this.c).auth().la()}catch(s){n=null}for(var r in t.pb=n,Un(e,"providerId",this.a.providerId),t=qr((n=this.a).Jb))t[r]=t[r].toString();r=n.Qc,t=ve(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),pe(t)||Un(e,"customParameters",Ur(t))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&Un(e,"scopes",n.join(","))),this.l?Un(e,"redirectUrl",this.l):tr(e.b,"redirectUrl"),this.g?Un(e,"eventId",this.g):tr(e.b,"eventId"),this.i?Un(e,"v",this.i):tr(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(e,a)&&Un(e,a,this.b[a]);return this.h?Un(e,"tid",this.h):tr(e.b,"tid"),this.f?Un(e,"eid",this.f):tr(e.b,"eid"),(a=_u(this.c)).length&&Un(e,"fw",a.join(",")),e.toString()},(e=wu.prototype).Pb=function(e,t,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return Iu(e).then((function(){return function(e,t){return e.sb.then((function(){return new wt((function(n){e.a.send(t.type,t,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&mr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new wt((function(t){return function n(){Nn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return Nn(n).then((function(){t(r)}))}))},e.Yb=function(){var e=Rr();return!jr(e)&&!Kr(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return At(new k("popup-blocked"));if(a&&!jr())return this.ma().o((function(t){mr(e),i(t)})),r(),Nt();this.a||(this.a=Tu(Eu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw mr(e),i(t),t}));return r(),t})).then((function(){(zo(n),a)||pr(Su(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=Tu(Eu(this)));var i=this;return this.a.then((function(){zo(t),pr(Su(i.s,i.g,i.b,e,t,dr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return Iu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new k("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){$(this.h,(function(t){return t==e}))},(e=ku.prototype).get=function(e){return Nt(this.a.getItem(e)).then((function(e){return e&&Vr(e)}))},e.set=function(e,t){return Nt(this.a.setItem(e,Ur(t)))},e.U=function(e){return Nt(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var Nu,Au=[];function xu(e,t,n){pe(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Pu(e){this.a=e}function Ru(e){this.c=e,this.b=!1,this.a=[]}function Ou(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return At(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new wt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Du(e,c),t})).o((function(t){throw Du(e,c),t}))}function Du(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(e.a,(function(e){return e==t}))}}function Lu(){if(!Uu())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Er()&&self?(this.v=function(){var e=Er()?self:null;if(z(Au,(function(n){n.b==e&&(t=n)})),!t){var t=new Cu(e);Au.push(t)}return t}(),xu(this.v,"keyChanged",(function(t,n){return zu(e).then((function(t){return 0<t.length&&z(e.a,(function(e){e(t)})),{keyProcessed:Q(t,n.key)}}))})),xu(this.v,"ping",(function(){return Nt(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?Nt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Nt(null)}().then((function(t){(e.h=t)&&(e.g=new Ru(new Pu(t)),Ou(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Q(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Mu(e){return new wt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new wt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Mu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Fu(e){return e.i||(e.i=Mu(e)),e.i}function ju(e,t){var n=0;return new wt((function r(i,o){Fu(e).then(t).then(i).o((function(t){if(!(3<++n))return Fu(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Uu(){try{return!!s.indexedDB}catch(pa){return!1}}function qu(e){return e.objectStore("firebaseLocalStorage")}function Vu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Bu(e){return new wt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Ku(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Ou(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Nt()}function zu(e){return Fu(e).then((function(e){var t=qu(Vu(e,!1));return t.getAll?Bu(t.getAll()):new wt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=vr(e.c,n),e.c=n}return r}))}function Wu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Hu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Nt().then((function(){if(Uu()){var e=Br(),r="__sak"+e;return Nu||(Nu=new Lu),(n=Nu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){z(t.a,(function(t){t(e)}))})),e}))}function Gu(){this.a={},this.type="inMemory"}function Qu(){if(!function(){var e="Node"==Sr();if(e=Yu()||e&&_i.default.INTERNAL.node&&_i.default.INTERNAL.node.localStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Yu()||_i.default.INTERNAL.node.localStorage,this.type="localStorage"}function Yu(){try{var e=s.localStorage,t=Br();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function $u(){this.type="nullStorage"}function Xu(){if(!function(){var e="Node"==Sr();if(e=Ju()||e&&_i.default.INTERNAL.node&&_i.default.INTERNAL.node.sessionStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Ju()||_i.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ju(){try{var e=s.sessionStorage,t=Br();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Zu(){var e={};e.Browser=nc,e.Node=rc,e.ReactNative=ic,e.Worker=oc,this.a=e[Sr()]}Cu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];z(r,(function(t){i.push(Nt().then((function(){return t(e.origin,e.data.data)})))})),Pt(i).then((function(r){var i=[];z(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),z(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Pu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Ru.prototype.close=function(){for(;0<this.a.length;)Du(this,this.a[0]);this.b=!0},(e=Lu.prototype).set=function(e,t){var n=this,r=!1;return ju(this,(function(t){return Bu((t=qu(Vu(t,!0))).get(e))})).then((function(i){return ju(n,(function(o){if(o=qu(Vu(o,!0)),i)return i.value=t,Bu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Bu(o.add(a))}))})).then((function(){return n.c[e]=t,Ku(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return ju(this,(function(t){return Bu(qu(Vu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return ju(this,(function(r){return n=!0,t.b++,Bu(qu(Vu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Ku(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=zu(e).then((function(t){0<t.length&&z(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Wu(e),t()}(this),this.a.push(e)},e.ia=function(e){$(this.a,(function(t){return t==e})),0==this.a.length&&Wu(this)},(e=Hu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){$(this.a,(function(t){return t==e}))},(e=Gu.prototype).get=function(e){return Nt(this.a[e])},e.set=function(e,t){return this.a[e]=t,Nt()},e.U=function(e){return delete this.a[e],Nt()},e.ca=function(){},e.ia=function(){},(e=Qu.prototype).get=function(e){var t=this;return Nt().then((function(){return Vr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Nt().then((function(){var r=Ur(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Nt().then((function(){t.a.removeItem(e)}))},e.ca=function(e){s.window&&hn(s.window,"storage",e)},e.ia=function(e){s.window&&pn(s.window,"storage",e)},(e=$u.prototype).get=function(){return Nt(null)},e.set=function(){return Nt()},e.U=function(){return Nt()},e.ca=function(){},e.ia=function(){},(e=Xu.prototype).get=function(e){var t=this;return Nt().then((function(){return Vr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Nt().then((function(){var r=Ur(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Nt().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var ec,tc,nc={F:Qu,cb:Xu},rc={F:Qu,cb:Xu},ic={F:ku,cb:$u},oc={F:Qu,cb:$u},ac={rd:"local",NONE:"none",td:"session"};function sc(){var e=!(Kr(Rr())||!Ir()),t=jr(),n=Dr();this.m=e,this.h=t,this.l=n,this.a={},ec||(ec=new Zu),e=ec;try{this.g=!fr()&&Qr()||!s.indexedDB?new e.a.F:new Hu(Er()?new Gu:new e.a.F)}catch(Ot){this.g=new Gu,this.h=!0}try{this.i=new e.a.cb}catch(Ot){this.i=new Gu}this.v=new Gu,this.f=w(this.Zb,this),this.b={}}function uc(){return tc||(tc=new sc),tc}function cc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function lc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function hc(e,t,n){return n=lc(t,n),"local"==t.F&&(e.b[n]=null),cc(e,t.F).U(n)}function fc(e){e.c&&(clearInterval(e.c),e.c=null)}function dc(e){this.a=e,this.b=uc()}(e=sc.prototype).get=function(e,t){return cc(this,e.F).get(lc(e,t))},e.set=function(e,t,n){var r=lc(e,n),i=this,o=cc(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=lc(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),pe(this.a)&&(cc(this,"local").ca(this.f),this.h||(fr()||!Qr())&&s.indexedDB||!this.l||function(e){fc(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Zt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=lc(e,t),this.a[e]&&($(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),pe(this.a)&&(cc(this,"local").ia(this.f),fc(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?cc(this,"local").ia(this.f):fc(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.nb(t))},Qe&&st&&10==st&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else z(e,w(this.nb,this))},e.nb=function(e){this.a[e]&&z(this.a[e],(function(e){e()}))};var pc,vc={name:"authEvent",F:"local"};function gc(){this.a=uc()}function mc(e,t){this.b=yc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===pc&&(pc=s.Int32Array?new Int32Array(Sc):Sc),this.reset()}E(mc,(function(){this.b=-1}));for(var yc=64,bc=yc-1,_c=[],wc=0;wc<bc;wc++)_c[wc]=0;var Tc=X(128,_c);function Ic(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|pc[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Ec(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Ic(e),i=0);else{if(!d(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Ic(e),i=0)}}e.c=i,e.g+=n}mc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):J(this.h)};var Sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function kc(){mc.call(this,8,Cc)}E(kc,mc);var Cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nc(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new gc,this.g=new dc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ac(e){return new k("invalid-cordova-configuration",e)}function xc(e){var t=new kc;Ec(t,e),e=[];var n=8*t.g;56>t.c?Ec(t,Tc,56-t.c):Ec(t,Tc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Ic(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return H(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Pc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(Ot){}}function Rc(e){return e.f||(e.f=e.ma().then((function(){return new wt((function(t){e.Ea((function n(r){return t(r),e.Ta(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Oc(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=co(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Vr(qn(o=Vn(i),"firebaseError")||null))?C(o):null)?new Wo(r.c,r.b,null,null,o,null,r.T()):new Wo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Pc(e,i)}))}var n=new Wo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Nn(500).then((function(){return Oc(e).then((function(){r||Pc(e,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Or("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Yo||(Yo=new Go),function(e){var t=Yo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Or("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Oc(e){var t=null;return function(e){return e.b.get(vc,e.a).then((function(e){return Ho(e)}))}(e.g).then((function(n){return t=n,hc((n=e.g).b,vc,n.a)})).then((function(){return t}))}function Dc(e){this.a=e,this.b=uc()}(e=Nc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Tr(void 0)?wr().then((function(){return new wt((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):At(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Or("universalLinks.subscribe",s))throw Ac("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Or("BuildInfo.packageName",s))throw Ac("cordova-plugin-buildinfo is not installed");if("function"!==typeof Or("cordova.plugins.browsertab.openUrl",s))throw Ac("cordova-plugin-browsertab is not installed");if("function"!==typeof Or("cordova.InAppBrowser.open",s))throw Ac("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},e.Pb=function(e,t){return t(new k("operation-not-supported-in-this-environment")),Nt()},e.Nb=function(){return At(new k("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return At(new k("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Nt().then((function(){return zo(t),Rc(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Wo(t,r,null,o,new k("no-auth-event"),null,i),u=Or("BuildInfo.packageName",s);if("string"!==typeof u)throw new k("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",s),l={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Rr().toLowerCase().match(/android/))return At(new k("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=xc(o),l.sessionId=o;var h=Su(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(vc,a.w(),t)})).then((function(){var t=Or("cordova.plugins.browsertab.isAvailable",s);if("function"!==typeof t)throw new k("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Or("cordova.plugins.browsertab.openUrl",s)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Or("cordova.InAppBrowser.open",s)))throw new k("invalid-cordova-configuration");t=Rr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new wt((function(e,t){u=function(){var t=Or("cordova.plugins.browsertab.close",s);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Nn(2e3).then((function(){t(new k("redirect-cancelled-by-user"))})))},l=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(e){return Oc(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(e){this.b.push(e),Rc(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Wo("unknown",null,null,null,new k("no-auth-event")),e(t))}))},e.Ta=function(e){$(this.b,(function(t){return t==e}))};var Lc={name:"pendingRedirect",F:"session"};function Mc(e){return hc(e.b,Lc,e.a)}function Fc(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Jc,this.C=new rl,this.g=new Dc($c(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=jc(this.D,this.v,this.m,N,this.J)}function jc(e,t,n,r,i){var o=_i.default.SDK_VERSION||null;return Tr()?new Nc(e,t,n,o,r,i):new wu(e,t,n,o,r,i)}function Uc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function qc(e){e.a.Yb()&&Uc(e).o((function(t){var n=new Wo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Hc(t)&&e.s(n)})),e.a.Ub()||Zc(e.b)}function Vc(e,t){Q(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Lc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Mc(e.g).then((function(){Uc(e).o((function(t){var n=new Wo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Hc(t)&&e.s(n)}))})):qc(e)})).o((function(){qc(e)}))}function Bc(e,t){$(e.h,(function(e){return e==t}))}Fc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=jc(this.D,this.v,this.m,null,this.J),this.i={}},Fc.prototype.s=function(e){if(!e)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Zc(this.b),t};var Kc=new Wr(2e3,1e4),zc=new Wr(3e4,6e4);function Wc(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Hc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Gc(e,t,n,r,i){var o;return function(e){return e.b.set(Lc,"pending",e.a)}(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(Hc(t))throw new k("operation-not-supported-in-this-environment");return o=t,Mc(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new wt((function(){})):Mc(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function Qc(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Kc.get())}Fc.prototype.ra=function(){return this.b.ra()};var Yc={};function $c(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Xc(e,t,n,r){var i=$c(t,n,r);return Yc[i]||(Yc[i]=new Fc(e,t,n,r)),Yc[i]}function Jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Zc(e){e.g||(e.g=!0,nl(e,!1,null,null))}function el(e){e.g&&!e.i&&nl(e,!1,null,null)}function tl(e,t){if(e.b=function(){return Nt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function nl(e,t,n,r){t?r?function(e,t){if(e.b=function(){return At(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):tl(e,n):tl(e,{user:null}),e.f=[],e.c=[]}function rl(){}function il(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function ol(e,t){this.a=t,Zr(this,"verificationId",e)}function al(e,t,n,r){return new Vo(e).gb(t,n).then((function(e){return new ol(e,r)}))}function sl(e){var t=Yi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ei(this,{token:e,expirationTime:Gr(1e3*t.exp),authTime:Gr(1e3*t.auth_time),issuedAtTime:Gr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ul(e,t,n){var r=t&&t[ll];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=ve(t),this.g=n,this.c=new lo(null,r),this.b=[];var i=this;z(t[cl]||[],(function(e){(e=ii(e))&&i.b.push(e)})),Zr(this,"auth",this.a),Zr(this,"session",this.c),Zr(this,"hints",this.b)}Jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Jc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(nl(this,!0,null,e.a),Nt()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){nl(e,s,t,null)})).o((function(t){nl(e,s,null,t)}))}(this,e,t):At(new k("invalid-auth-event")):(nl(this,!1,null,null),Nt())}else At(new k("invalid-auth-event"))},Jc.prototype.ra=function(){var e=this;return new wt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new k("timeout");e.a&&e.a.cancel(),e.a=Nn(zc.get()).then((function(){e.b||(e.g=!0,nl(e,!0,null,t))}))}(e))}))},rl.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Nt()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):At(new k("invalid-auth-event"))}else At(new k("invalid-auth-event"))},ol.prototype.confirm=function(e){return e=Bo(this.verificationId,e),this.a(e)};var cl="mfaInfo",ll="mfaPendingCredential";function hl(e,t,n,r){k.call(this,"multi-factor-auth-required",r,t),this.b=new ul(e,t,n),Zr(this,"resolver",this.b)}function fl(e,t,n){if(e&&v(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new hl(t,e.serverResponse,n,e.message)}catch(Ot){}return null}function dl(){}function pl(e){Zr(this,"factorId",e.fa),this.a=e}function vl(e){if(pl.call(this,e),this.a.fa!=Vo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function gl(e,t){for(var n in Jt.call(this,e),t)this[n]=t[n]}function ml(e,t){this.a=e,this.b=[],this.c=w(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&z(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[si]=e.uid),e.displayName&&(r[oi]=e.displayName),e.enrollmentTime&&(r[ai]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ui]=e.phoneNumber);try{t=new ci(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),yl(this,n)}function yl(e,t){e.b=t,Zr(e,"enrolledFactors",t)}function bl(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function _l(e,t){e.stop(),e.b=Nn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=s.document,t=null;return Hr()||!e?Nt():new wt((function(n){t=function(){Hr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){_l(e,!0)})).o((function(t){e.i(t)&&_l(e,!1)}))}function wl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function Tl(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function Il(e,t){e.b=Qi(t[is]||""),e.a=t.refreshToken,Tl(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function El(e,t){return function(e,t){return new wt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ds(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(fu(e)):e.access_token&&e.refresh_token?n(e):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",er(t).toString(),e.g,e.m.get()):r(new k("internal-error"))}))}(e.f,t).then((function(t){return e.b=Qi(t.access_token),e.a=t.refresh_token,Tl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Sl(e,t){this.a=e||null,this.b=t||null,ei(this,{lastSignInTime:Gr(t||null),creationTime:Gr(e||null)})}function kl(e,t,n,r,i,o){ei(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Cl(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=_i.default.SDK_VERSION?Pr(_i.default.SDK_VERSION):null;this.a=new ns(this.l,R(N),r),(this.u=e.emulatorConfig||null)&&ls(this.a,this.u),this.h=new wl(this.a),Ml(this,t[is]),Il(this.h,t),Zr(this,"refreshToken",this.h.a),Ul(this,n||{}),In.call(this),this.P=!1,this.s&&Lr()&&(this.b=Xc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new bl((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.ba=w(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){Nl(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){Pl(i,e.f)},this.ja=null,this.S=new ml(this,n),Zr(this,"multiFactor",this.S)}function Nl(e,t){e.u=t,ls(e.a,t),e.b&&(t=e.b,e.b=Xc(e.s,e.l,e.m,e.u),e.P&&(Bc(t,e),Vc(e.b,e)))}function Al(e,t){e.qa&&pn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&hn(t,"languageCodeChanged",e.Pa)}function xl(e,t){e.$&&pn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&hn(t,"emulatorConfigChanged",e.Ba)}function Pl(e,t){e.aa=t,fs(e.a,_i.default.SDK_VERSION?Pr(_i.default.SDK_VERSION,e.aa):null)}function Rl(e,t){e.ja&&pn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&hn(t,"frameworkChanged",e.Oa)}function Ol(e){try{return _i.default.app(e.m).auth()}catch(t){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Dl(e){e.J||e.D.b||(e.D.start(),pn(e,"tokenChanged",e.ba),hn(e,"tokenChanged",e.ba))}function Ll(e){pn(e,"tokenChanged",e.ba),e.D.stop()}function Ml(e,t){e.Aa=t,Zr(e,"_lat",t)}function Fl(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return Pt(t).then((function(){return e}))}function jl(e){e.b&&!e.P&&(e.P=!0,Vc(e.b,e))}function Ul(e,t){ei(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Sl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function ql(){}function Vl(e){return Nt().then((function(){if(e.J)throw new k("app-deleted")}))}function Bl(e){return H(e.providerData,(function(e){return e.providerId}))}function Kl(e,t){t&&(zl(e,t.providerId),e.providerData.push(t))}function zl(e,t){$(e.providerData,(function(e){return e.providerId==t}))}function Wl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Zr(e,t,n)}function Hl(e,t){e!=t&&(ei(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Zr(e,"metadata",function(e){return new Sl(e.a,e.b)}(t.metadata)):Zr(e,"metadata",new Sl),z(t.providerData,(function(t){Kl(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Zr(e,"refreshToken",e.h.a),yl(e.S,t.S.b))}function Gl(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return lu(e.a,qs,{idToken:t}).then(w(e.Kc,e))}(e,t).then((function(){return n||Wl(e,"isAnonymous",!1),t}))}))}function Ql(e,t){t[is]&&e.Aa!=t[is]&&(Il(e.h,t),e.dispatchEvent(new gl("tokenChanged")),Ml(e,t[is]),Wl(e,"refreshToken",e.h.a))}function Yl(e,t){return Gl(e).then((function(){if(Q(Bl(e),t))return Fl(e).then((function(){throw new k("provider-already-linked")}))}))}function $l(e,t,n){return ti({user:e,credential:Ko(t),additionalUserInfo:t=eo(t),operationType:n})}function Xl(e,t){return Ql(e,t),e.reload().then((function(){return e}))}function Jl(e,t,n,r,i){if(!Lr())return At(new k("operation-not-supported-in-this-environment"));if(e.i&&!i)return At(e.i);var o=Zi(n.providerId),a=Br(e.uid+":::"),s=null;(!jr()||Ir())&&e.s&&n.isOAuthProvider&&(s=Su(e.s,e.l,e.m,t,n,null,a,_i.default.SDK_VERSION||null,null,null,e.tenantId,e.u));var u=yr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(eh(e),!i)return e.I().then((function(){}))})).then((function(){return Wc(e.b,u,t,n,a,!!s,e.tenantId)})).then((function(){return new wt((function(n,r){e.na(t,null,new k("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=Qc(e.b,e,t,u,a)}))})).then((function(e){return u&&mr(u),e?ti(e):null})).o((function(e){throw u&&mr(u),e})),th(e,r,i)}function Zl(e,t,n,r,i){if(!Lr())return At(new k("operation-not-supported-in-this-environment"));if(e.i&&!i)return At(e.i);var o=null,a=Br(e.uid+":::");return r=r().then((function(){if(eh(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Fl(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(ih,e.w(),t.a)),t})).then((function(){return Gc(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return oh(e.ha);throw o})).then((function(){if(o)throw o})),th(e,r,i)}function eh(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function th(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),At(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new gl("userInvalidated")),e.i=t),t}))}(e,t,n);return e.N.push(r),r.oa((function(){Y(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=fl(t.w(),Ol(e),w(e.jc,e))),n||t}))}function nh(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[is]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Cl(t,n,e);return e.providerData&&z(e.providerData,(function(e){e&&Kl(i,ti(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function rh(e){this.a=e,this.b=uc()}ul.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=ve(t.f);return delete n[cl],delete n[ll],me(n,e),t.g(n)}))},E(hl,k),dl.prototype.tb=function(e,t,n){return t.type==ho?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),me(n,{phoneVerificationInfo:qo(e.a)}),lu(t,js,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return me(n={mfaPendingCredential:n},{phoneVerificationInfo:qo(e.a)}),lu(t,Us,n)}))}(this,e,t)},E(pl,dl),E(vl,pl),E(gl,Jt),(e=ml.prototype).yc=function(e){yl(this,function(e){var t=[];return z(e.mfaInfo||[],(function(e){(e=ii(e))&&t.push(e)})),t}(e.hd))},e.Sb=function(){return this.a.I().then((function(e){return new lo(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return Ql(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return lu(r,cu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=W(t.b,(function(e){return e.uid!=n}));return yl(t,r),Ql(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(e){return e.w()}))}}},bl.prototype.start=function(){this.a=this.c,_l(this,!0)},bl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},wl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},wl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?At(new k("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?El(this,{grant_type:"refresh_token",refresh_token:this.a}):Nt(null):Nt({accessToken:this.b.toString(),refreshToken:this.a})},Sl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Cl,In),Cl.prototype.xa=function(e){this.za=e,cs(this.a,e)},Cl.prototype.la=function(){return this.za},Cl.prototype.Ga=function(){return J(this.aa)},Cl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Zr(Cl.prototype,"providerId","firebase"),(e=Cl.prototype).reload=function(){var e=this;return th(this,Vl(this).then((function(){return Gl(e).then((function(){return Fl(e)})).then(ql)})))},e.oc=function(e){return this.I(e).then((function(e){return new sl(e)}))},e.I=function(e){var t=this;return th(this,Vl(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new k("internal-error");return e.accessToken!=t.Aa&&(Ml(t,e.accessToken),t.dispatchEvent(new gl("tokenChanged"))),Wl(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new k("internal-error");Ul(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?H(e,(function(e){return new kl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Kl(this,t[n]);Wl(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new gl("userReloaded",{hd:e}))},e.Lc=function(e){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return th(this,e.c(this.a,this.uid).then((function(e){return Ql(t,e),n=$l(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return th(this,Yl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=$l(t,e,"link"),Xl(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return th(this,Yl(this,"phone").then((function(){return al(Ol(n),e,t,w(n.rb,n))})))},e.Mc=function(e,t){var n=this;return th(this,Nt().then((function(){return al(Ol(n),e,t,w(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return th(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Ql(t,e),t.reload()})))},e.ed=function(e){var t=this;return th(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Ql(t,e),t.reload()})))},e.Db=function(e){var t=this;return th(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return Ql(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Vl(this);var t=this;return th(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Ql(t,e),Wl(t,"displayName",e.displayName||null),Wl(t,"photoURL",e.photoUrl||null),z(t.providerData,(function(e){"password"===e.providerId&&(Zr(e,"displayName",t.displayName),Zr(e,"photoURL",t.photoURL))})),Fl(t)})).then(ql))},e.cd=function(e){var t=this;return th(this,Gl(this).then((function(n){return Q(Bl(t),e)?function(e,t,n){return lu(e,Ls,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return z(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),z(Bl(t),(function(e){n[e]||zl(t,e)})),n[Vo.PROVIDER_ID]||Zr(t,"phoneNumber",null),Fl(t)})):Fl(t).then((function(){throw new k("no-such-provider")}))})))},e.delete=function(){var e=this;return th(this,this.I().then((function(t){return lu(e.a,Ds,{idToken:t})})).then((function(){e.dispatchEvent(new gl("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Al(e,null),xl(e,null),Rl(e,null),e.N=[],e.J=!0,Ll(e),Zr(e,"refreshToken",null),e.b&&Bc(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?w(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?w(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?w(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?w(this.Mb,this):null},e.Ec=function(e){var t=this;return Jl(this,"linkViaPopup",e,(function(){return Yl(t,e.providerId).then((function(){return Fl(t)}))}),!1)},e.Nc=function(e){return Jl(this,"reauthViaPopup",e,(function(){return Nt()}),!0)},e.Fc=function(e){var t=this;return Zl(this,"linkViaRedirect",e,(function(){return Yl(t,e.providerId)}),!1)},e.Oc=function(e){return Zl(this,"reauthViaRedirect",e,(function(){return Nt()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return th(this,this.I().then((function(n){return Cs(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=$l(i,e,"link"),Xl(i,e)})).then((function(){return o})))},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return th(this,Nt().then((function(){return vo(Ns(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=$l(i,e,"reauthenticate"),Ql(i,e),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(e){var t=this,n=null;return th(this,this.I().then((function(t){return n=t,"undefined"===typeof e||pe(e)?{}:zi(new Di(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return th(this,this.I().then((function(e){return r=e,"undefined"===typeof t||pe(t)?{}:zi(new Di(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return e=vo(Nt(e),n.uid).then((function(e){return t=$l(n,e,"reauthenticate"),Ql(n,e),n.i=null,n.reload()})).then((function(){return t})),th(this,e,!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&me(e,this.metadata.w()),z(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),me(e,this.S.w()),e};var ih={name:"redirectUser",F:"session"};function oh(e){return hc(e.b,ih,e.a)}function ah(e){this.a=e,this.b=uc(),this.c=null,this.f=function(e){var t=ch("local"),n=ch("session"),r=ch("none");return function(e,t,n){var r=lc(t,n),i=cc(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Vr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(uh,e.a).then((function(e){return e?ch(e):t}))}))}))})).then((function(t){return e.c=t,sh(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(ch("local"),this.a,w(this.g,this))}function sh(e,t){var n,r=[];for(n in ac)ac[n]!==t&&r.push(hc(e.b,ch(ac[n]),e.a));return r.push(hc(e.b,uh,e.a)),function(e){return new wt((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)xt(e[s],T(o,s),a);else t(i)}))}(r)}ah.prototype.g=function(){var e=this,t=ch("local");dh(this,(function(){return Nt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return sh(e,"local").then((function(){e.c=t}))}))}))};var uh={name:"persistence",F:"session"};function ch(e){return{name:"authUser",F:e}}function lh(e,t){return dh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function hh(e){return dh(e,(function(){return hc(e.b,e.c,e.a)}))}function fh(e,t,n){return dh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),nh(e||{})}))}))}function dh(e,t){return e.f=e.f.then(t,t),e.f}function ph(e){if(this.l=!1,Zr(this,"settings",new il),Zr(this,"app",e),!Ih(this).options||!Ih(this).options.apiKey)throw new k("invalid-api-key");e=_i.default.SDK_VERSION?Pr(_i.default.SDK_VERSION):null,this.a=new ns(Ih(this).options&&Ih(this).options.apiKey,R(N),e),this.P=[],this.s=[],this.N=[],this.Pa=_i.default.INTERNAL.createSubscribe(w(this.zc,this)),this.W=void 0,this.ib=_i.default.INTERNAL.createSubscribe(w(this.Ac,this)),wh(this,null),this.i=new ah(Ih(this).options.apiKey+":"+Ih(this).name),this.D=new rh(Ih(this).options.apiKey+":"+Ih(this).name),this.$=Ch(this,function(e){var t=Ih(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(ih,e.a).then((function(e){return e&&t&&(e.authDomain=t),nh(e||{})}))}(e.D,Ih(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),oh(e.D)}));return Ch(e,t)}(e).then((function(){return fh(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return lh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:hh(e.i)}))):null})).then((function(t){wh(e,t||null)}));return Ch(e,n)}(this)),this.h=Ch(this,function(e){return e.$.then((function(){return bh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(ch("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.qa=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(e){var t=Ih(e).options.authDomain,n=Ih(e).options.apiKey;t&&Lr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Xc(t,n,Ih(e).name,e.R),Vc(e.b,e),Eh(e)&&jl(Eh(e)),e.m){jl(e.m);var r=e.m;r.xa(e.la()),Al(r,e),Pl(r=e.m,e.J),Rl(r,e),Nl(r=e.m,e.R),xl(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,In.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=Vn(this.R.url);e=ti({protocol:e.c,host:e.a,port:e.g,options:ti({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function vh(e){Jt.call(this,"languageCodeChanged"),this.h=e}function gh(e){Jt.call(this,"emulatorConfigChanged"),this.c=e}function mh(e){Jt.call(this,"frameworkChanged"),this.f=e}function yh(e){return e.Oa||At(new k("auth-domain-config-required"))}function bh(e){if(!Lr())return At(new k("operation-not-supported-in-this-environment"));var t=yh(e).then((function(){return e.b.ra()})).then((function(e){return e?ti(e):null}));return Ch(e,t)}function _h(e,t){var n={};return n.apiKey=Ih(e).options.apiKey,n.authDomain=Ih(e).options.authDomain,n.appName=Ih(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return function(e,t,n,r){var i=new Cl(e,t);return n&&(i.ha=n),r&&Pl(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return Eh(e)&&t.uid==Eh(e).uid?(Hl(Eh(e),t),e.da(t)):(wh(e,t),jl(t),e.da(t))})).then((function(){kh(e)}))}function wh(e,t){Eh(e)&&(function(e,t){$(e.W,(function(e){return e==t}))}(Eh(e),e.Ba),pn(Eh(e),"tokenChanged",e.qa),pn(Eh(e),"userDeleted",e.za),pn(Eh(e),"userInvalidated",e.Aa),Ll(Eh(e))),t&&(t.W.push(e.Ba),hn(t,"tokenChanged",e.qa),hn(t,"userDeleted",e.za),hn(t,"userInvalidated",e.Aa),0<e.u&&Dl(t)),Zr(e,"currentUser",t),t&&(t.xa(e.la()),Al(t,e),Pl(t,e.J),Rl(t,e),Nl(t,e.R),xl(t,e))}function Th(e,t){var n=null,r=null;return Ch(e,t.then((function(t){return n=Ko(t),r=eo(t),_h(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=fl(t.w(),e,w(e.kc,e))),n||t})).then((function(){return ti({user:Eh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Ih(e){return e.app}function Eh(e){return e.currentUser}function Sh(e){return Eh(e)&&Eh(e)._lat||null}function kh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](Sh(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](Sh(e))}}function Ch(e,t){return e.P.push(t),t.oa((function(){Y(e.P,t)})),t}function Nh(){}function Ah(){this.a={},this.b=1e12}ah.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");e:{for(r in ac)if(ac[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Sr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Uu()&&"none"!==e)throw n;break;default:if(!Dr()&&"none"!==e)throw n}}(e),dh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,sh(n,e)})).then((function(){if(n.c=ch(e),t)return n.b.set(n.c,t,n.a)})):Nt()}))},E(ph,In),E(vh,Jt),E(gh,Jt),E(mh,Jt),(e=ph.prototype).yb=function(e){return Ch(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,cs(this.a,this.aa),this.dispatchEvent(new vh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=s.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&wr().then((function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,ls(this.a,this.R),this.dispatchEvent(new gh(this.R))}},e.Gc=function(e){this.J.push(e),fs(this.a,_i.default.SDK_VERSION?Pr(_i.default.SDK_VERSION,this.J):null),this.dispatchEvent(new mh(this.J))},e.Ga=function(){return J(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:Ih(this).options.apiKey,authDomain:Ih(this).options.authDomain,appName:Ih(this).name,currentUser:Eh(this)&&Eh(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?w(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return Th(i,ks(i.a,o))}))},e.Xc=function(e){if(!Lr())return At(new k("operation-not-supported-in-this-environment"));var t=this,n=Zi(e.providerId),r=Br(),i=null;(!jr()||Ir())&&Ih(this).options.authDomain&&e.isOAuthProvider&&(i=Su(Ih(this).options.authDomain,Ih(this).options.apiKey,Ih(this).name,"signInViaPopup",e,null,r,_i.default.SDK_VERSION||null,null,null,this.T(),this.R));var o=yr(i,n&&n.va,n&&n.ua);return Ch(this,n=yh(this).then((function(n){return Wc(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new wt((function(e,n){t.na("signInViaPopup",null,new k("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=Qc(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&mr(o),e?ti(e):null})).o((function(e){throw o&&mr(o),e})))},e.Yc=function(e){if(!Lr())return At(new k("operation-not-supported-in-this-environment"));var t=this,n=yh(this).then((function(){return function(e){return dh(e,(function(){return e.b.set(uh,e.c.F,e.a)}))}(t.i)})).then((function(){return Gc(t.b,"signInViaRedirect",e,void 0,t.T())}));return Ch(this,n)},e.ra=function(){var e=this;return bh(this).then((function(t){return e.b&&el(e.b.b),t})).o((function(t){throw e.b&&el(e.b.b),t}))},e.dd=function(e){if(!e)return At(new k("null-user"));if(this.S!=e.tenantId)return At(new k("tenant-id-mismatch"));var t=this,n={};n.apiKey=Ih(this).options.apiKey,n.authDomain=Ih(this).options.authDomain,n.appName=Ih(this).name;var r=function(e,t,n,r){var i=e.h,o={};return o[is]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Cl(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&Pl(t,r),Hl(t,e),t}(e,n,t.D,t.Ga());return Ch(this,this.h.then((function(){if(Ih(t).options.apiKey!=e.l)return r.reload()})).then((function(){return Eh(t)&&e.uid==Eh(t).uid?(Hl(Eh(t),e),t.da(e)):(wh(t,r),jl(r),t.da(r))})).then((function(){kh(t)})))},e.Bb=function(){var e=this;return Ch(this,this.h.then((function(){return e.b&&el(e.b.b),Eh(e)?(wh(e,null),hh(e.i).then((function(){kh(e)}))):Nt()})))},e.Zc=function(){var e=this;return fh(this.i,Ih(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Eh(e)&&t){n=Eh(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hl(Eh(e),t),Eh(e).I();(Eh(e)||t)&&(wh(e,t),t&&(jl(t),t.ha=e.D),e.b&&Vc(e.b,e),kh(e))}}))},e.da=function(e){return lh(this.i,e)},e.mc=function(){kh(this),this.da(Eh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return Th(t,Nt(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Eh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.N.push(t),Ch(e,e.h.then((function(){!e.l&&Q(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(Sh(e)))})))}(this,(function(){e.next(Eh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(Eh(r)):"function"===typeof e.next&&e.next(Eh(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof e?e(Eh(r)):"function"===typeof e.next&&e.next(Eh(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this,n=this.h.then((function(){return Eh(t)?Eh(t).I(e).then((function(e){return{accessToken:e}})):null}));return Ch(this,n)},e.Tc=function(e){var t=this;return this.h.then((function(){return Th(t,lu(t.a,iu,{token:e}))})).then((function(e){var n=e.user;return Wl(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return Th(n,lu(n.a,ou,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return Th(n,lu(n.a,Rs,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return Th(t,e.ka(t.a))}))},e.Sc=function(e){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=Eh(e);if(t&&t.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Th(e,e.a.Ab()).then((function(t){var n=t.user;return Wl(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return Eh(this)&&Eh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&Eh(this)&&Dl(Eh(this))},e.Pc=function(e){var t=this;z(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&Eh(this)&&Ll(Eh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),Ch(this,this.h.then((function(){t.l||Q(t.s,e)&&e(Sh(t))})))},e.removeAuthTokenListener=function(e){$(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(ch("local"),e.a,this.ja),this.b&&(Bc(this.b,this),el(this.b.b)),Promise.resolve()},e.hc=function(e){return Ch(this,function(e,t){return lu(e,Os,{identifier:t,continueUri:Mr()?dr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!Fo(e)},e.xb=function(e,t){var n=this;return Ch(this,Nt().then((function(){var e=new Di(t);if(!e.c)throw new k("argument-error",Fi+" must be true when sending sign in link to email");return zi(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return Ch(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return Ch(this,this.a.Sa(e).then((function(e){return new li(e)})))},e.kb=function(e){return Ch(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return Ch(this,Nt().then((function(){return"undefined"===typeof t||pe(t)?{}:zi(new Di(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return Ch(this,al(this,e,t,w(this.ab,this)))},e.Vc=function(e,t){var n=this;return Ch(this,Nt().then((function(){var r=t||dr(),i=Mo(e,r);if(!(r=Fo(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)})))},Nh.prototype.render=function(){},Nh.prototype.reset=function(){},Nh.prototype.getResponse=function(){},Nh.prototype.execute=function(){};var xh=null;function Ph(e,t){return(t=Rh(t))&&e.a[t]||null}function Rh(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Oh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ct(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Dh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Lh(){}function Mh(){}Ah.prototype.render=function(e,t){return this.a[this.b.toString()]=new Oh(e,t),this.b++},Ah.prototype.reset=function(e){var t=Ph(this,e);e=Rh(e),t&&e&&(t.delete(),delete this.a[e])},Ah.prototype.getResponse=function(e){return(e=Ph(this,e))?e.getResponse():null},Ah.prototype.execute=function(e){(e=Ph(this,e))&&e.execute()},Oh.prototype.getResponse=function(){return Dh(this),this.b},Oh.prototype.execute=function(){Dh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(Ot){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(Ot){}e.h&&e.execute()}),6e4)}),500))},Oh.prototype.delete=function(){Dh(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Zr(Lh,"FACTOR_ID","phone"),Mh.prototype.g=function(){return xh||(xh=new Ah),Nt(xh)},Mh.prototype.c=function(){};var Fh=null;function jh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Uh=new be(Ie,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),qh=new Wr(3e4,6e4);jh.prototype.g=function(e){var t=this;return new wt((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),qh.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete s[t.a]},Nt(Ya(Ce(Uh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},jh.prototype.c=function(){this.b--};var Vh=null;function Bh(e,t,n,r,i,o,a){if(Zr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(Fh||(Fh=new Mh),a=Fh):(Vh||(Vh=new jh),a=Vh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Wh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hh],!s.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ct(t)||!this.i&&ct(t).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ns(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Kh];this.a[Kh]=function(e){if(Gh(u,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=Or(c,s);"function"===typeof t&&t(e)}};var l=this.a[zh];this.a[zh]=function(){if(Gh(u,null),"function"===typeof l)l();else if("string"===typeof l){var e=Or(l,s);"function"===typeof e&&e()}}}var Kh="callback",zh="expired-callback",Wh="sitekey",Hh="size";function Gh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(Ot){}}function Qh(e,t){return e.h.push(t),t.oa((function(){Y(e.h,t)})),t}function Yh(e){if(e.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function $h(e,t,n){var r=!1;try{this.b=n||_i.default.app()}catch(a){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=_i.default.SDK_VERSION?Pr(_i.default.SDK_VERSION,o):null,Bh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,R(N),r)}function Xh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Jh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Jh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new k("argument-error",e+" failed: "+r)}(e=Bh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Qh(this,Nt().then((function(){if(Mr()&&!Er())return wr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,lu(e.s,Hs,{})})).then((function(t){e.a[Wh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Yh(this);var e=this;return Qh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=ct(t);t=pt("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Yh(this);var e=this;return Qh(this,this.render().then((function(t){return new wt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){$(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Yh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Yh(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ct(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},E($h,Bh);var Jh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Zh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function ef(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function tf(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:v}}function nf(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function rf(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function of(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function af(e,t){return v(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function sf(e){return v(e)&&"string"===typeof e.uid}function uf(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function cf(e,t){for(var n in t){var r=t[n].name;e[r]=ff(r,e[n],t[n].j)}}function lf(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:T((function(e){return this[e]}),n),set:T((function(e,t,n,r){Xh(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function hf(e,t,n,r){e[t]=ff(t,n,r)}function ff(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Xh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return e=e.split("."),e[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}cf(ph.prototype,{kb:{name:"applyActionCode",j:[Zh("code")]},Sa:{name:"checkActionCode",j:[Zh("code")]},ob:{name:"confirmPasswordReset",j:[Zh("code"),Zh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Zh("email"),Zh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Zh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Zh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[uf(tf(),nf(),"nextOrObserver"),nf("opt_error",!0),nf("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[uf(tf(),nf(),"nextOrObserver"),nf("opt_error",!0),nf("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Zh("email"),uf(tf("opt_actionCodeSettings",!0),rf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Zh("email"),tf("actionCodeSettings")]},yb:{name:"setPersistence",j:[Zh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[of()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[of()]},Tc:{name:"signInWithCustomToken",j:[Zh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Zh("email"),Zh("password")]},Vc:{name:"signInWithEmailLink",j:[Zh("email"),Zh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[uf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Cl)}},rf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Zh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Zh("url"),tf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Zh("code")]}}),lf(ph.prototype,{lc:{name:"languageCode",lb:uf(Zh(),rf(),"languageCode")},ti:{name:"tenantId",lb:uf(Zh(),rf(),"tenantId")}}),ph.Persistence=ac,ph.Persistence.LOCAL="local",ph.Persistence.SESSION="session",ph.Persistence.NONE="none",cf(Cl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[ef("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[ef("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[of()]},rb:{name:"linkWithCredential",j:[of()]},Dc:{name:"linkWithPhoneNumber",j:[Zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[of()]},ub:{name:"reauthenticateWithCredential",j:[of()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[uf(tf("opt_actionCodeSettings",!0),rf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Zh(null,!0)]},cd:{name:"unlink",j:[Zh("provider")]},Cb:{name:"updateEmail",j:[Zh("email")]},Db:{name:"updatePassword",j:[Zh("password")]},ed:{name:"updatePhoneNumber",j:[of("phone")]},Eb:{name:"updateProfile",j:[tf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Zh("email"),uf(tf("opt_actionCodeSettings",!0),rf(null,!0),"opt_actionCodeSettings",!0)]}}),cf(Ah.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),cf(Nh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),cf(wt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),lf(il.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:ef("appVerificationDisabledForTesting")}}),cf(ol.prototype,{confirm:{name:"confirm",j:[Zh("verificationCode")]}}),hf(po,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[wo,Do,Uo,yo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[uf(Zh(),tf(),"json")]),hf(Lo,"credential",(function(e,t){return new Oo(e,t)}),[Zh("email"),Zh("password")]),cf(Oo.prototype,{w:{name:"toJSON",j:[Zh(null,!0)]}}),cf(So.prototype,{Ca:{name:"addScope",j:[Zh("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(So,"credential",ko,[uf(Zh(),tf(),"token")]),hf(Lo,"credentialWithLink",Mo,[Zh("email"),Zh("emailLink")]),cf(Co.prototype,{Ca:{name:"addScope",j:[Zh("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Co,"credential",No,[uf(Zh(),tf(),"token")]),cf(Ao.prototype,{Ca:{name:"addScope",j:[Zh("scope")]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Ao,"credential",xo,[uf(Zh(),uf(tf(),rf()),"idToken"),uf(Zh(),rf(),"accessToken",!0)]),cf(Po.prototype,{Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),hf(Po,"credential",Ro,[uf(Zh(),tf(),"token"),Zh("secret",!0)]),cf(Eo.prototype,{Ca:{name:"addScope",j:[Zh("scope")]},credential:{name:"credential",j:[uf(Zh(),uf(tf(),rf()),"optionsOrIdToken"),uf(Zh(),rf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[tf("customOAuthParameters")]}}),cf(bo.prototype,{w:{name:"toJSON",j:[Zh(null,!0)]}}),cf(go.prototype,{w:{name:"toJSON",j:[Zh(null,!0)]}}),hf(Vo,"credential",Bo,[Zh("verificationId"),Zh("verificationCode")]),cf(Vo.prototype,{gb:{name:"verifyPhoneNumber",j:[uf(Zh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?af(e.session,ho)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?af(e.session,fo)&&sf(e.multiFactorHint):e.session&&e.multiFactorUid?af(e.session,fo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),cf(jo.prototype,{w:{name:"toJSON",j:[Zh(null,!0)]}}),cf(k.prototype,{toJSON:{name:"toJSON",j:[Zh(null,!0)]}}),cf(Xo.prototype,{toJSON:{name:"toJSON",j:[Zh(null,!0)]}}),cf($o.prototype,{toJSON:{name:"toJSON",j:[Zh(null,!0)]}}),cf(hl.prototype,{toJSON:{name:"toJSON",j:[Zh(null,!0)]}}),cf(ul.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),cf(ml.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Zh("displayName",!0)]},bd:{name:"unenroll",j:[uf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:sf},Zh(),"multiFactorInfoIdentifier")]}}),cf($h.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hf(Si,"parseLink",Oi,[Zh("link")]),hf(Lh,"assertion",(function(e){return new vl(e)}),[of("phone")]),function(){if("undefined"===typeof _i.default||!_i.default.INTERNAL||!_i.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:di,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ph,AuthCredential:po,Error:k};hf(e,"EmailAuthProvider",Lo,[]),hf(e,"FacebookAuthProvider",So,[]),hf(e,"GithubAuthProvider",Co,[]),hf(e,"GoogleAuthProvider",Ao,[]),hf(e,"TwitterAuthProvider",Po,[]),hf(e,"OAuthProvider",Eo,[Zh("providerId")]),hf(e,"SAMLAuthProvider",Io,[Zh("providerId")]),hf(e,"PhoneAuthProvider",Vo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ph)}}]),hf(e,"RecaptchaVerifier",$h,[uf(Zh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),tf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof _i.default.app.App)}}]),hf(e,"ActionCodeURL",Si,[]),hf(e,"PhoneMultiFactorGenerator",Lh,[]),_i.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ph(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),_i.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:w((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:w(e.nc,e),addAuthTokenListener:w(e.cc,e),removeAuthTokenListener:w(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),_i.default.registerVersion("@firebase/auth","0.16.8"),_i.default.INTERNAL.extendNamespace({User:Cl})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});n(895);var wi=n(388),Ti=n(971),Ii=n(386),Ei=function(e,t){return Ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ei(e,t)};function Si(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var ki,Ci="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ni=Ni||{},Ai=Ci||self;function xi(){}function Pi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ri(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Oi="closure_uid_"+(1e9*Math.random()>>>0),Di=0;function Li(e,t,n){return e.call.apply(e.bind,arguments)}function Mi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Fi(e,t,n){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Li:Mi).apply(null,arguments)}function ji(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ui(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function qi(){this.s=this.s,this.o=this.o}var Vi={};qi.prototype.s=!1,qi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Oi)&&e[Oi]||(e[Oi]=++Di)}(this);delete Vi[e]}},qi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Bi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ki=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function zi(e){return Array.prototype.concat.apply([],arguments)}function Wi(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Hi(e){return/^[\s\xa0]*$/.test(e)}var Gi,Qi=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Yi(e,t){return-1!=e.indexOf(t)}function $i(e,t){return e<t?-1:e>t?1:0}e:{var Xi=Ai.navigator;if(Xi){var Ji=Xi.userAgent;if(Ji){Gi=Ji;break e}}Gi=""}function Zi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function eo(e){var t={};for(var n in e)t[n]=e[n];return t}var to="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function no(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<to.length;o++)n=to[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ro(e){return ro[" "](e),e}ro[" "]=xi;var io,oo=Yi(Gi,"Opera"),ao=Yi(Gi,"Trident")||Yi(Gi,"MSIE"),so=Yi(Gi,"Edge"),uo=so||ao,co=Yi(Gi,"Gecko")&&!(Yi(Gi.toLowerCase(),"webkit")&&!Yi(Gi,"Edge"))&&!(Yi(Gi,"Trident")||Yi(Gi,"MSIE"))&&!Yi(Gi,"Edge"),lo=Yi(Gi.toLowerCase(),"webkit")&&!Yi(Gi,"Edge");function ho(){var e=Ai.document;return e?e.documentMode:void 0}e:{var fo="",po=function(){var e=Gi;return co?/rv:([^\);]+)(\)|;)/.exec(e):so?/Edge\/([\d\.]+)/.exec(e):ao?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):lo?/WebKit\/(\S+)/.exec(e):oo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(po&&(fo=po?po[1]:""),ao){var vo=ho();if(null!=vo&&vo>parseFloat(fo)){io=String(vo);break e}}io=fo}var go,mo={};function yo(){return function(e){var t=mo;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Qi(String(io)).split("."),n=Qi("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=$i(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||$i(0==o[2].length,0==a[2].length)||$i(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(Ai.document&&ao){var bo=ho();go=bo||(parseInt(io,10)||void 0)}else go=void 0;var _o=go,wo=function(){if(!Ai.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ai.addEventListener("test",xi,t),Ai.removeEventListener("test",xi,t)}catch(n){}return e}();function To(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Io(e,t){if(To.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(co){e:{try{ro(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Eo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Io.Z.h.call(this)}}To.prototype.h=function(){this.defaultPrevented=!0},Ui(Io,To);var Eo={2:"touch",3:"pen",4:"mouse"};Io.prototype.h=function(){Io.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var So="closure_listenable_"+(1e6*Math.random()|0),ko=0;function Co(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ko,this.ca=this.fa=!1}function No(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ao(e){this.src=e,this.g={},this.h=0}function xo(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Bi(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(No(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Po(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}Ao.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Po(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Co(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Ro="closure_lm_"+(1e6*Math.random()|0),Oo={};function Do(e,t,n,r,i){if(r&&r.once)return Mo(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Do(e,t[o],n,r,i);return null}return n=Ko(n),e&&e[So]?e.N(t,n,Ri(r)?!!r.capture:!!r,i):Lo(e,t,n,!1,r,i)}function Lo(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=Ri(i)?!!i.capture:!!i,s=Vo(e);if(s||(e[Ro]=s=new Ao(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=qo;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wo||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Uo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Mo(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Mo(e,t[o],n,r,i);return null}return n=Ko(n),e&&e[So]?e.O(t,n,Ri(r)?!!r.capture:!!r,i):Lo(e,t,n,!0,r,i)}function Fo(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Fo(e,t[o],n,r,i);else r=Ri(r)?!!r.capture:!!r,n=Ko(n),e&&e[So]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Po(o=e.g[t],n,r,i))&&(No(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Vo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Po(t,n,r,i)),(n=-1<e?t[e]:null)&&jo(n))}function jo(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[So])xo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Uo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Vo(t))?(xo(n,e),0==n.h&&(n.src=null,t[Ro]=null)):No(e)}}}function Uo(e){return e in Oo?Oo[e]:Oo[e]="on"+e}function qo(e,t){if(e.ca)e=!0;else{t=new Io(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&jo(e),e=n.call(r,t)}return e}function Vo(e){return(e=e[Ro])instanceof Ao?e:null}var Bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ko(e){return"function"===typeof e?e:(e[Bo]||(e[Bo]=function(t){return e.handleEvent(t)}),e[Bo])}function zo(){qi.call(this),this.i=new Ao(this),this.P=this,this.I=null}function Wo(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new To(t,e);else if(t instanceof To)t.target=t.target||e;else{var i=t;no(t=new To(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Ho(a,r,!0,t)&&i}if(i=Ho(a=t.g=e,r,!0,t)&&i,i=Ho(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Ho(a=t.g=n[o],r,!1,t)&&i}function Ho(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&xo(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Ui(zo,qi),zo.prototype[So]=!0,zo.prototype.removeEventListener=function(e,t,n,r){Fo(this,e,t,n,r)},zo.prototype.M=function(){if(zo.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)No(n[r]);delete t.g[e],t.h--}}this.I=null},zo.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},zo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Go=Ai.JSON.stringify;function Qo(){var e=na,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Yo,$o=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Xo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Xo=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Jo}),(function(e){return e.reset()})),Jo=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Zo(e){Ai.setTimeout((function(){throw e}),0)}function ea(e,t){Yo||function(){var e=Ai.Promise.resolve(void 0);Yo=function(){e.then(ra)}}(),ta||(Yo(),ta=!0),na.add(e,t)}var ta=!1,na=new $o;function ra(){for(var e;e=Qo();){try{e.h.call(e.g)}catch(n){Zo(n)}var t=Xo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ta=!1}function ia(e,t){zo.call(this),this.h=e||1,this.g=t||Ai,this.j=Fi(this.kb,this),this.l=Date.now()}function oa(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function aa(e,t,n){if("function"===typeof e)n&&(e=Fi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Fi(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ai.setTimeout(e,t||0)}function sa(e){e.g=aa((function(){e.g=null,e.i&&(e.i=!1,sa(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ui(ia,zo),(ki=ia.prototype).da=!1,ki.S=null,ki.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Wo(this,"tick"),this.da&&(oa(this),this.start()))}},ki.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ki.M=function(){ia.Z.M.call(this),oa(this),delete this.g};var ua=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ei(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:sa(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Ai.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(qi);function ca(e){qi.call(this),this.h=e,this.g={}}Ui(ca,qi);var la=[];function ha(e,t,n,r){Array.isArray(n)||(n&&(la[0]=n.toString()),n=la);for(var i=0;i<n.length;i++){var o=Do(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function fa(e){Zi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&jo(e)}),e),e.g={}}function da(){this.g=!0}function pa(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Go(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ca.prototype.M=function(){ca.Z.M.call(this),fa(this)},ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},da.prototype.Aa=function(){this.g=!1},da.prototype.info=function(){};var va={},ga=null;function ma(){return ga=ga||new zo}function ya(e){To.call(this,va.Ma,e)}function ba(e){var t=ma();Wo(t,new ya(t,e))}function _a(e,t){To.call(this,va.STAT_EVENT,e),this.stat=t}function wa(e){var t=ma();Wo(t,new _a(t,e))}function Ta(e,t){To.call(this,va.Na,e),this.size=t}function Ia(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ai.setTimeout((function(){e()}),t)}va.Ma="serverreachability",Ui(ya,To),va.STAT_EVENT="statevent",Ui(_a,To),va.Na="timingevent",Ui(Ta,To);var Ea={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ka(){}function Ca(e){return e.h||(e.h=e.i())}function Na(){}ka.prototype.h=null;var Aa,xa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Pa(){To.call(this,"d")}function Ra(){To.call(this,"c")}function Oa(){}function Da(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ca(this),this.P=Ma,e=uo?125:void 0,this.W=new ia(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new La}function La(){this.i=null,this.g="",this.h=!1}Ui(Pa,To),Ui(Ra,To),Ui(Oa,ka),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},Aa=new Oa;var Ma=45e3,Fa={},ja={};function Ua(e,t,n){e.K=1,e.v=us(ns(t)),e.s=n,e.U=!0,qa(e,null)}function qa(e,t){e.F=Date.now(),za(e),e.A=ns(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),ws(n.h,"t",r),e.C=0,n=e.l.H,e.h=new La,e.g=Iu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ua(Fi(e.Ia,e,e.g),e.O)),ha(e.V,e.g,"readystatechange",e.gb),t=e.H?eo(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ba(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Va(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ba(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ka(e,n))==ja){4==t&&(e.o=4,wa(14),i=!1),pa(e.j,e.m,null,"[Incomplete Response]");break}if(r==Fa){e.o=4,wa(15),pa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}pa(e.j,e.m,r,null),Ya(e,r)}Va(e)&&r!=ja&&r!=Fa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wa(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),vu(t),t.L=!0,wa(11))):(pa(e.j,e.m,n,"[Invalid Chunked Response]"),Qa(e),Ga(e))}function Ka(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ja:(n=Number(t.substring(n,r)),isNaN(n)?Fa:(r+=1)+n>t.length?ja:(t=t.substr(r,n),e.C=r+n,t))}function za(e){e.Y=Date.now()+e.P,Wa(e,e.P)}function Wa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ia(Fi(e.eb,e),t)}function Ha(e){e.B&&(Ai.clearTimeout(e.B),e.B=null)}function Ga(e){0==e.l.G||e.I||yu(e.l,e)}function Qa(e){Ha(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,oa(e.W),fa(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ya(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||As(n.i,e)))if(n.I=e.N,!e.J&&As(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;mu(n),au(n)}pu(n),wa(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ia(Fi(n.ab,n),6e3));if(1>=Ns(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else _u(n,11)}else if((e.J||n.g==e)&&mu(n),!Hi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Yi(l,"spdy")||Yi(l,"quic")||Yi(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(xs(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,ss(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Tu(r,r.H?r.la:null,r.W),d.J){Ps(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ha(p),za(p)),r.g=d}else du(r);0<n.l.length&&cu(n)}else"stop"!=o[0]&&"close"!=o[0]||_u(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?_u(n,7):ou(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ba(4)}catch(o){}}function $a(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Pi(e)||"string"===typeof e)Ki(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Pi(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Pi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Xa(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Xa)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ja(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Za(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Za(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Za(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ki=Da.prototype).setTimeout=function(e){this.P=e},ki.gb=function(e){e=e.target;var t=this.L;t&&3==eu(e)?t.l():this.Ia(e)},ki.Ia=function(e){try{if(e==this.g)e:{var t=eu(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||uo||this.g&&(this.h.h||this.g.ga()||tu(this.g)))){this.I||4!=t||7==n||ba(8==n||0>=r?3:2),Ha(this);var i=this.g.ba();this.N=i;t:if(Va(this)){var o=tu(this.g);e="";var a=o.length,s=4==eu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qa(this),Ga(this);var u="";break t}this.h.i=new Ai.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hi(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,wa(12),Qa(this),Ga(this);break e}pa(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ya(this,i)}this.U?(Ba(this,t,u),uo&&this.i&&3==t&&(ha(this.V,this.W,"tick",this.fb),this.W.start())):(pa(this.j,this.m,u,null),Ya(this,u)),4==t&&Qa(this),this.i&&!this.I&&(4==t?yu(this.l,this):(this.i=!1,za(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,wa(12)):(this.o=0,wa(13)),Qa(this),Ga(this)}}}catch(t){}},ki.fb=function(){if(this.g){var e=eu(this.g),t=this.g.ga();this.C<t.length&&(Ha(this),Ba(this,e,t),this.i&&4!=e&&za(this))}},ki.cancel=function(){this.I=!0,Qa(this)},ki.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ba(3),wa(17)),Qa(this),this.o=2,Ga(this)):Wa(this,this.Y-e)},(ki=Xa.prototype).R=function(){Ja(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ki.T=function(){return Ja(this),this.g.concat()},ki.get=function(e,t){return Za(this.h,e)?this.h[e]:t},ki.set=function(e,t){Za(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ki.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var es=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ts(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ts){this.g=void 0!==t?t:e.g,rs(this,e.j),this.s=e.s,is(this,e.i),os(this,e.m),this.l=e.l,t=e.h;var n=new ms;n.i=t.i,t.g&&(n.g=new Xa(t.g),n.h=t.h),as(this,n),this.o=e.o}else e&&(n=String(e).match(es))?(this.g=!!t,rs(this,n[1]||"",!0),this.s=cs(n[2]||""),is(this,n[3]||"",!0),os(this,n[4]),this.l=cs(n[5]||"",!0),as(this,n[6]||"",!0),this.o=cs(n[7]||"")):(this.g=!!t,this.h=new ms(null,this.g))}function ns(e){return new ts(e)}function rs(e,t,n){e.j=n?cs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function is(e,t,n){e.i=n?cs(t,!0):t}function os(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function as(e,t,n){t instanceof ms?(e.h=t,function(e,t){t&&!e.j&&(ys(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(bs(this,t),ws(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ls(t,vs)),e.h=new ms(t,e.g))}function ss(e,t,n){e.h.set(t,n)}function us(e){return ss(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function cs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ls(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,hs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ts.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ls(t,fs,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ls(t,fs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ls(n,"/"==n.charAt(0)?ps:ds,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ls(n,gs)),e.join("")};var fs=/[#\/\?@]/g,ds=/[#\?:]/g,ps=/[#\?]/g,vs=/[#\?@]/g,gs=/#/g;function ms(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ys(e){e.g||(e.g=new Xa,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function bs(e,t){ys(e),t=Ts(e,t),Za(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Za((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ja(e)))}function _s(e,t){return ys(e),t=Ts(e,t),Za(e.g.h,t)}function ws(e,t,n){bs(e,t),0<n.length&&(e.i=null,e.g.set(Ts(e,t),Wi(n)),e.h+=n.length)}function Ts(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ki=ms.prototype).add=function(e,t){ys(this),this.i=null,e=Ts(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ki.forEach=function(e,t){ys(this),this.g.forEach((function(n,r){Ki(n,(function(n){e.call(t,n,r,this)}),this)}),this)},ki.T=function(){ys(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},ki.R=function(e){ys(this);var t=[];if("string"===typeof e)_s(this,e)&&(t=zi(t,this.g.get(Ts(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=zi(t,e[n])}return t},ki.set=function(e,t){return ys(this),this.i=null,_s(this,e=Ts(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ki.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ki.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var Is=function(e,t){this.h=e,this.g=t};function Es(e){this.l=e||ks,Ai.PerformanceNavigationTiming?e=0<(e=Ai.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ai.g&&Ai.g.Ea&&Ai.g.Ea()&&Ai.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ss,ks=10;function Cs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ns(e){return e.h?1:e.g?e.g.size:0}function As(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xs(e,t){e.g?e.g.add(t):e.h=t}function Ps(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rs(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=Si(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Wi(e.i)}function Os(){}function Ds(){this.g=new Os}function Ls(e,t,n){var r=n||"";try{$a(e,(function(e,n){var i=e;Ri(e)&&(i=Go(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(rb){throw t.push(r+"type="+encodeURIComponent("_badmap")),rb}}function Ms(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Fs(e){this.l=e.$b||null,this.j=e.ib||!1}function js(e,t){zo.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Us,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Es.prototype.cancel=function(){var e,t;if(this.i=Rs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Si(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Os.prototype.stringify=function(e){return Ai.JSON.stringify(e,void 0)},Os.prototype.parse=function(e){return Ai.JSON.parse(e,void 0)},Ui(Fs,ka),Fs.prototype.g=function(){return new js(this.l,this.j)},Fs.prototype.i=(Ss={},function(){return Ss}),Ui(js,zo);var Us=0;function qs(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Vs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Bs(e)}function Bs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ki=js.prototype).open=function(e,t){if(this.readyState!=Us)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Bs(this)},ki.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ai).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ki.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vs(this)),this.readyState=Us},ki.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ai.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qs(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ki.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vs(this):Bs(this),3==this.readyState&&qs(this)}},ki.Ua=function(e){this.g&&(this.response=this.responseText=e,Vs(this))},ki.Ta=function(e){this.g&&(this.response=e,Vs(this))},ki.ha=function(){this.g&&Vs(this)},ki.setRequestHeader=function(e,t){this.v.append(e,t)},ki.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ki.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(js.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ks=Ai.JSON.parse;function zs(e){zo.call(this),this.headers=new Xa,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ws,this.K=this.L=!1}Ui(zs,zo);var Ws="",Hs=/^https?$/i,Gs=["POST","PUT"];function Qs(e){return"content-type"==e.toLowerCase()}function Ys(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$s(e),Js(e)}function $s(e){e.D||(e.D=!0,Wo(e,"complete"),Wo(e,"error"))}function Xs(e){if(e.h&&"undefined"!=typeof Ni&&(!e.C[1]||4!=eu(e)||2!=e.ba()))if(e.v&&4==eu(e))aa(e.Fa,0,e);else if(Wo(e,"readystatechange"),4==eu(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(es)[1]||null;if(!o&&Ai.self&&Ai.self.location){var a=Ai.self.location.protocol;o=a.substr(0,a.length-1)}i=!Hs.test(o?o.toLowerCase():"")}t=i}if(t)Wo(e,"complete"),Wo(e,"success");else{e.m=6;try{var s=2<eu(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",$s(e)}}finally{Js(e)}}}function Js(e,t){if(e.g){Zs(e);var n=e.g,r=e.C[0]?xi:null;e.g=null,e.C=null,t||Wo(e,"ready");try{n.onreadystatechange=r}catch(rb){}}}function Zs(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ai.clearTimeout(e.A),e.A=null)}function eu(e){return e.g?e.g.readyState:0}function tu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ws:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function nu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Zi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ss(e,t,n))}function ru(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function iu(e){this.za=0,this.l=[],this.h=new da,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ru("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ru("baseRetryDelayMs",5e3,e),this.$a=ru("retryDelaySeedMs",1e4,e),this.Ya=ru("forwardChannelMaxRetries",2,e),this.ra=ru("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Es(e&&e.concurrentRequestLimit),this.Ca=new Ds,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ou(e){if(su(e),3==e.G){var t=e.V++,n=ns(e.F);ss(n,"SID",e.J),ss(n,"RID",t),ss(n,"TYPE","terminate"),hu(e,n),(t=new Da(e,e.h,t,void 0)).K=2,t.v=us(ns(n)),n=!1,Ai.navigator&&Ai.navigator.sendBeacon&&(n=Ai.navigator.sendBeacon(t.v.toString(),"")),!n&&Ai.Image&&((new Image).src=t.v,n=!0),n||(t.g=Iu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),za(t)}wu(e)}function au(e){e.g&&(vu(e),e.g.cancel(),e.g=null)}function su(e){au(e),e.u&&(Ai.clearTimeout(e.u),e.u=null),mu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ai.clearTimeout(e.m),e.m=null)}function uu(e,t){e.l.push(new Is(e.Za++,t)),3==e.G&&cu(e)}function cu(e){Cs(e.i)||e.m||(e.m=!0,ea(e.Ha,e),e.C=0)}function lu(e,t){var n;n=t?t.m:e.V++;var r=ns(e.F);ss(r,"SID",e.J),ss(r,"RID",n),ss(r,"AID",e.U),hu(e,r),e.o&&e.s&&nu(r,e.o,e.s),n=new Da(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=fu(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),xs(e.i,n),Ua(n,r,t)}function hu(e,t){e.j&&$a({},(function(e,n){ss(t,n,e)}))}function fu(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Fi(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{Ls(l,a,"req"+c+"_")}catch(ic){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function du(e){e.g||e.u||(e.Y=1,ea(e.Ga,e),e.A=0)}function pu(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ia(Fi(e.Ga,e),bu(e,e.A)),e.A++,!0)}function vu(e){null!=e.B&&(Ai.clearTimeout(e.B),e.B=null)}function gu(e){e.g=new Da(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ns(e.oa);ss(t,"RID","rpc"),ss(t,"SID",e.J),ss(t,"CI",e.N?"0":"1"),ss(t,"AID",e.U),hu(e,t),ss(t,"TYPE","xmlhttp"),e.o&&e.s&&nu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=us(ns(t)),n.s=null,n.U=!0,qa(n,e)}function mu(e){null!=e.v&&(Ai.clearTimeout(e.v),e.v=null)}function yu(e,t){var n=null;if(e.g==t){mu(e),vu(e),e.g=null;var r=2}else{if(!As(e.i,t))return;n=t.D,Ps(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Wo(r=ma(),new Ta(r,n,t,i)),cu(e)}else du(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ns(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ia(Fi(e.Ha,e,t),bu(e,e.C)),e.C++,!0))}(e,t)||2==r&&pu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_u(e,5);break;case 4:_u(e,10);break;case 3:_u(e,6);break;default:_u(e,2)}}function bu(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function _u(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Fi(e.jb,e);n||(n=new ts("//www.google.com/images/cleardot.gif"),Ai.location&&"http"==Ai.location.protocol||rs(n,"https"),us(n)),function(e,t){var n=new da;if(Ai.Image){var r=new Image;r.onload=ji(Ms,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ji(Ms,n,r,"TestLoadImage: error",!1,t),r.onabort=ji(Ms,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ji(Ms,n,r,"TestLoadImage: timeout",!1,t),Ai.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else wa(2);e.G=0,e.j&&e.j.va(t),wu(e),su(e)}function wu(e){e.G=0,e.I=-1,e.j&&(0==Rs(e.i).length&&0==e.l.length||(e.i.i.length=0,Wi(e.l),e.l.length=0),e.j.ua())}function Tu(e,t,n){var r=function(e){return e instanceof ts?ns(e):new ts(e,void 0)}(n);if(""!=r.i)t&&is(r,t+"."+r.i),os(r,r.m);else{var i=Ai.location;r=function(e,t,n,r){var i=new ts(null,void 0);return e&&rs(i,e),t&&is(i,t),n&&os(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Zi(e.aa,(function(e,t){ss(r,t,e)})),t=e.D,n=e.sa,t&&n&&ss(r,t,n),ss(r,"VER",e.ma),hu(e,r),r}function Iu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new zs(new Fs({ib:!0})):new zs(e.qa)).L=e.H,t}function Eu(){}function Su(){if(ao&&!(10<=Number(_o)))throw Error("Environmental error: no available transport.")}function ku(e,t){zo.call(this),this.g=new iu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Hi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Hi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Au(this)}function Cu(e){Pa.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nu(){Ra.call(this),this.status=1}function Au(e){this.g=e}(ki=zs.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Aa.g(),this.C=this.u?Ca(this.u):Ca(Aa),this.g.onreadystatechange=Fi(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Ys(this,o)}e=n||"";var i=new Xa(this.headers);r&&$a(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Qs,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ai.FormData&&e instanceof Ai.FormData,!(0<=Bi(Gs,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zs(this),0<this.B&&((this.K=function(e){return ao&&yo()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.pa,this)):this.A=aa(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ys(this,o)}},ki.pa=function(){"undefined"!=typeof Ni&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wo(this,"timeout"),this.abort(8))},ki.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Wo(this,"complete"),Wo(this,"abort"),Js(this))},ki.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Js(this,!0)),zs.Z.M.call(this)},ki.Fa=function(){this.s||(this.F||this.v||this.l?Xs(this):this.cb())},ki.cb=function(){Xs(this)},ki.ba=function(){try{return 2<eu(this)?this.g.status:-1}catch(Ss){return-1}},ki.ga=function(){try{return this.g?this.g.responseText:""}catch(Ss){return""}},ki.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ks(t)}},ki.Da=function(){return this.m},ki.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(ki=iu.prototype).ma=8,ki.G=1,ki.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},ki.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Da(this,this.h,e,void 0),n=this.s;if(this.P&&(n?no(n=eo(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=fu(this,t,r),ss(i=ns(this.F),"RID",e),ss(i,"CVER",22),this.D&&ss(i,"X-HTTP-Session-Id",this.D),hu(this,i),this.o&&n&&nu(i,this.o,n),xs(this.i,t),this.Ra&&ss(i,"TYPE","init"),this.ja?(ss(i,"$req",r),ss(i,"SID","null"),t.$=!0,Ua(t,i,null)):Ua(t,i,r),this.G=2}}else 3==this.G&&(e?lu(this,e):0==this.l.length||Cs(this.i)||lu(this))},ki.Ga=function(){if(this.u=null,gu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ia(Fi(this.bb,this),e)}},ki.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wa(10),au(this),gu(this))},ki.ab=function(){null!=this.v&&(this.v=null,au(this),pu(this),wa(19))},ki.jb=function(e){e?(this.h.info("Successfully pinged google.com"),wa(2)):(this.h.info("Failed to ping google.com"),wa(1))},(ki=Eu.prototype).xa=function(){},ki.wa=function(){},ki.va=function(){},ki.ua=function(){},ki.Oa=function(){},Su.prototype.g=function(e,t){return new ku(e,t)},Ui(ku,zo),ku.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ea(Fi(e.hb,e,t))),wa(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Tu(e,null,e.W),cu(e)},ku.prototype.close=function(){ou(this.g)},ku.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,uu(this.g,t)}else this.v?((t={}).__data__=Go(e),uu(this.g,t)):uu(this.g,e)},ku.prototype.M=function(){this.g.j=null,delete this.j,ou(this.g),delete this.g,ku.Z.M.call(this)},Ui(Cu,Pa),Ui(Nu,Ra),Ui(Au,Eu),Au.prototype.xa=function(){Wo(this.g,"a")},Au.prototype.wa=function(e){Wo(this.g,new Cu(e))},Au.prototype.va=function(e){Wo(this.g,new Nu(e))},Au.prototype.ua=function(){Wo(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,ku.prototype.send=ku.prototype.u,ku.prototype.open=ku.prototype.m,ku.prototype.close=ku.prototype.close,Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Sa.COMPLETE="complete",Na.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",zo.prototype.listen=zo.prototype.N,zs.prototype.listenOnce=zs.prototype.O,zs.prototype.getLastError=zs.prototype.La,zs.prototype.getLastErrorCode=zs.prototype.Da,zs.prototype.getStatus=zs.prototype.ba,zs.prototype.getResponseJson=zs.prototype.Qa,zs.prototype.getResponseText=zs.prototype.ga,zs.prototype.send=zs.prototype.ea;var xu=function(){return new Su},Pu=function(){return ma()},Ru=Ea,Ou=Sa,Du=va,Lu={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Mu=Fs,Fu=Na,ju=zs,Uu=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();Uu.o=-1;var qu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vu=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,wi.__extends)(t,e),t}(Error),Bu=new Ii.Logger("@firebase/firestore");function Ku(){return Bu.logLevel}function zu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Bu.logLevel<=Ii.LogLevel.DEBUG){var r=t.map(Gu);Bu.debug.apply(Bu,(0,wi.__spreadArray)(["Firestore (8.10.1): "+e],r))}}function Wu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Bu.logLevel<=Ii.LogLevel.ERROR){var r=t.map(Gu);Bu.error.apply(Bu,(0,wi.__spreadArray)(["Firestore (8.10.1): "+e],r))}}function Hu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Bu.logLevel<=Ii.LogLevel.WARN){var r=t.map(Gu);Bu.warn.apply(Bu,(0,wi.__spreadArray)(["Firestore (8.10.1): "+e],r))}}function Gu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Qu(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Wu(t),new Error(t)}function Yu(e,t){e||Qu()}function $u(e,t){return e}function Xu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ju=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Xu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function Zu(e,t){return e<t?-1:e>t?1:0}function ec(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function tc(e){return e+"\0"}var nc=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vu(qu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vu(qu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Vu(qu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vu(qu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Zu(this.nanoseconds,e.nanoseconds):Zu(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),rc=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new nc(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function ic(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ac(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var sc=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&Qu(),void 0===n?n=e.length-t:n>e.length-t&&Qu(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Vu(qu.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(sc),cc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return cc.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vu(qu.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Vu(qu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vu(qu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Vu(qu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(sc),hc=function(){function e(e){this.fields=e,e.sort(lc.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return ec(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),fc=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return Zu(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();fc.EMPTY_BYTE_STRING=new fc("");var dc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pc(e){if(Yu(!!e),"string"==typeof e){var t=0,n=dc.exec(e);if(Yu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vc(e.seconds),nanos:vc(e.nanos)}}function vc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gc(e){return"string"==typeof e?fc.fromBase64String(e):fc.fromUint8Array(e)}function mc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yc(e){var t=e.mapValue.fields.__previous_value__;return mc(t)?yc(t):t}function bc(e){var t=pc(e.mapValue.fields.__local_write_time__.timestampValue);return new nc(t.seconds,t.nanos)}function _c(e){return null==e}function wc(e){return 0===e&&1/e==-1/0}function Tc(e){return"number"==typeof e&&Number.isInteger(e)&&!wc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ic=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(uc.fromString(t))},e.fromName=function(t){return new e(uc.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===uc.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return uc.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new uc(t.slice()))},e}();function Ec(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mc(e)?4:10:Qu()}function Sc(e,t){var n=Ec(e);if(n!==Ec(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bc(e).isEqual(bc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=pc(e.timestampValue),r=pc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gc(e.bytesValue).isEqual(gc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vc(e.geoPointValue.latitude)===vc(t.geoPointValue.latitude)&&vc(e.geoPointValue.longitude)===vc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vc(e.integerValue)===vc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=vc(e.doubleValue),r=vc(t.doubleValue);return n===r?wc(n)===wc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ec(e.arrayValue.values||[],t.arrayValue.values||[],Sc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ic(n)!==ic(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sc(n[i],r[i])))return!1;return!0}(e,t);default:return Qu()}}function kc(e,t){return void 0!==(e.values||[]).find((function(e){return Sc(e,t)}))}function Cc(e,t){var n=Ec(e),r=Ec(t);if(n!==r)return Zu(n,r);switch(n){case 0:return 0;case 1:return Zu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=vc(e.integerValue||e.doubleValue),r=vc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Nc(e.timestampValue,t.timestampValue);case 4:return Nc(bc(e),bc(t));case 5:return Zu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=gc(e),r=gc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Zu(n[i],r[i]);if(0!==o)return o}return Zu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Zu(vc(e.latitude),vc(t.latitude));return 0!==n?n:Zu(vc(e.longitude),vc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Cc(n[i],r[i]);if(o)return o}return Zu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Zu(r[a],o[a]);if(0!==s)return s;var u=Cc(n[r[a]],i[o[a]]);if(0!==u)return u}return Zu(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Qu()}}function Nc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zu(e,t);var n=pc(e),r=pc(t),i=Zu(n.seconds,r.seconds);return 0!==i?i:Zu(n.nanos,r.nanos)}function Ac(e){return xc(e)}function xc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=pc(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ic.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=xc(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+xc(e.fields[o])}return t+"}"}(e.mapValue):Qu();var t,n}function Pc(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Rc(e){return!!e&&"integerValue"in e}function Oc(e){return!!e&&"arrayValue"in e}function Dc(e){return!!e&&"nullValue"in e}function Lc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mc(e){return!!e&&"mapValue"in e}function Fc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return oc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Fc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Fc(e.arrayValue.values[r]);return n}return Object.assign({},e)}var jc=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Mc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(t)},e.prototype.setAll=function(e){var t=this,n=lc.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=Fc(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());Mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return Sc(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Mc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){oc(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(Fc(this.value))},e}();function Uc(e){var t=[];return oc(e.fields,(function(e,n){var r=new lc([e]);if(Mc(n)){var i=Uc(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new hc(t)}var qc=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,rc.min(),jc.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,jc.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,jc.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=jc.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=jc.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Vc=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Bc(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Vc(e,t,n,r,i,o,a)}function Kc(e){var t=$u(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Ac(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),_c(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=nl(t.startAt)),t.endAt&&(n+="|ub:",n+=nl(t.endAt)),t.h=n}return t.h}function zc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!il(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Sc(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!al(e.startAt,t.startAt)&&al(e.endAt,t.endAt)}function Wc(e){return Ic.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Hc=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return(0,wi.__extends)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new Gc(e,n,r):"array-contains"===n?new Xc(e,r):"in"===n?new Jc(e,r):"not-in"===n?new Zc(e,r):"array-contains-any"===n?new el(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new Qc(e,n):new Yc(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(Cc(t,this.value)):null!==t&&Ec(this.value)===Ec(t)&&this.m(Cc(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qu()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Gc=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=Ic.fromName(r.referenceValue),i}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){var t=Ic.comparator(e.key,this.key);return this.m(t)},t}(Hc),Qc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=$c("in",n),r}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Hc),Yc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=$c("not-in",n),r}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Hc);function $c(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ic.fromName(e.referenceValue)}))}var Xc=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return Oc(t)&&kc(t.arrayValue,this.value)},t}(Hc),Jc=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&kc(this.value.arrayValue,t)},t}(Hc),Zc=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!kc(this.value.arrayValue,t)},t}(Hc),el=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return(0,wi.__extends)(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!Oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return kc(t.value.arrayValue,e)}))},t}(Hc),tl=function(e,t){this.position=e,this.before=t};function nl(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return Ac(e)})).join(",")}var rl=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function il(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ol(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Ic.comparator(Ic.fromName(a.referenceValue),n.key):Cc(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function al(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Sc(e.position[n],t.position[n]))return!1;return!0}var sl=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function ul(e,t,n,r,i,o,a,s){return new sl(e,t,n,r,i,o,a,s)}function cl(e){return new sl(e)}function ll(e){return!_c(e.limit)&&"F"===e.limitType}function hl(e){return!_c(e.limit)&&"L"===e.limitType}function fl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function dl(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function pl(e){return null!==e.collectionGroup}function vl(e){var t=$u(e);if(null===t.p){t.p=[];var n=dl(t),r=fl(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new rl(n)),t.p.push(new rl(lc.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new rl(lc.keyField(),u))}}}return t.p}function gl(e){var t=$u(e);if(!t.T)if("F"===t.limitType)t.T=Bc(t.path,t.collectionGroup,vl(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=vl(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new rl(o.field,a))}var s=t.endAt?new tl(t.endAt.position,!t.endAt.before):null,u=t.startAt?new tl(t.startAt.position,!t.startAt.before):null;t.T=Bc(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function ml(e,t,n){return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yl(e,t){return zc(gl(e),gl(t))&&e.limitType===t.limitType}function bl(e){return Kc(gl(e))+"|lt:"+e.limitType}function _l(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+Ac(t.value);var t})).join(", ")+"]"),_c(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+nl(e.startAt)),e.endAt&&(t+=", endAt: "+nl(e.endAt)),"Target("+t+")"}(gl(e))+"; limitType="+e.limitType+")"}function wl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ic.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!ol(e.startAt,vl(e),t))&&(!e.endAt||!ol(e.endAt,vl(e),t))}(e,t)}function Tl(e){return function(t,n){for(var r=!1,i=0,o=vl(e);i<o.length;i++){var a=o[i],s=Il(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Il(e,t,n){var r=e.field.isKeyField()?Ic.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cc(r,i):Qu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qu()}}function El(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(t)?"-0":t}}function Sl(e){return{integerValue:""+e}}function kl(e,t){return Tc(t)?Sl(t):El(e,t)}var Cl=function(){this._=void 0};function Nl(e,t,n){return e instanceof Pl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Rl?Ol(e,t):e instanceof Dl?Ll(e,t):function(e,t){var n=xl(e,t),r=Fl(n)+Fl(e.A);return Rc(n)&&Rc(e.A)?Sl(r):El(e.R,r)}(e,t)}function Al(e,t,n){return e instanceof Rl?Ol(e,t):e instanceof Dl?Ll(e,t):n}function xl(e,t){return e instanceof Ml?Rc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t}(Cl),Rl=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,wi.__extends)(t,e),t}(Cl);function Ol(e,t){for(var n=jl(t),r=function(e){n.some((function(t){return Sc(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Dl=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,wi.__extends)(t,e),t}(Cl);function Ll(e,t){for(var n=jl(t),r=function(e){n=n.filter((function(t){return!Sc(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ml=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return(0,wi.__extends)(t,e),t}(Cl);function Fl(e){return vc(e.integerValue||e.doubleValue)}function jl(e){return Oc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ul=function(e,t){this.field=e,this.transform=t},ql=function(e,t){this.version=e,this.transformResults=t},Vl=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function Bl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Kl=function(){};function zl(e,t,n){e instanceof Yl?function(e,t,n){var r=e.value.clone(),i=Jl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $l?function(e,t,n){if(Bl(e.precondition,t)){var r=Jl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wl(e,t,n){e instanceof Yl?function(e,t,n){if(Bl(e.precondition,t)){var r=e.value.clone(),i=Zl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ql(t),r).setHasLocalMutations()}}(e,t,n):e instanceof $l?function(e,t,n){if(Bl(e.precondition,t)){var r=Zl(e.fieldTransforms,n,t),i=t.data;i.setAll(Xl(e)),i.setAll(r),t.convertToFoundDocument(Ql(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Bl(e.precondition,t)&&t.convertToNoDocument(rc.min())}(e,t)}function Hl(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=xl(o.transform,a||null);null!=s&&(null==n&&(n=jc.empty()),n.set(o.field,s))}return n||null}function Gl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ec(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Rl&&t instanceof Rl||e instanceof Dl&&t instanceof Dl?ec(e.elements,t.elements,Sc):e instanceof Ml&&t instanceof Ml?Sc(e.A,t.A):e instanceof Pl&&t instanceof Pl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ql(e){return e.isFoundDocument()?e.version:rc.min()}var Yl=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,wi.__extends)(t,e),t}(Kl),$l=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,wi.__extends)(t,e),t}(Kl);function Xl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Jl(e,t,n){var r=new Map;Yu(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Al(a,s,n[i]))}return r}function Zl(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Nl(s,u,t))}return r}var eh,th,nh=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,wi.__extends)(t,e),t}(Kl),rh=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,wi.__extends)(t,e),t}(Kl),ih=function(e){this.count=e};function oh(e){switch(e){case qu.OK:return Qu();case qu.CANCELLED:case qu.UNKNOWN:case qu.DEADLINE_EXCEEDED:case qu.RESOURCE_EXHAUSTED:case qu.INTERNAL:case qu.UNAVAILABLE:case qu.UNAUTHENTICATED:return!1;case qu.INVALID_ARGUMENT:case qu.NOT_FOUND:case qu.ALREADY_EXISTS:case qu.PERMISSION_DENIED:case qu.FAILED_PRECONDITION:case qu.ABORTED:case qu.OUT_OF_RANGE:case qu.UNIMPLEMENTED:case qu.DATA_LOSS:return!0;default:return Qu()}}function ah(e){if(void 0===e)return Wu("GRPC error has no .code"),qu.UNKNOWN;switch(e){case eh.OK:return qu.OK;case eh.CANCELLED:return qu.CANCELLED;case eh.UNKNOWN:return qu.UNKNOWN;case eh.DEADLINE_EXCEEDED:return qu.DEADLINE_EXCEEDED;case eh.RESOURCE_EXHAUSTED:return qu.RESOURCE_EXHAUSTED;case eh.INTERNAL:return qu.INTERNAL;case eh.UNAVAILABLE:return qu.UNAVAILABLE;case eh.UNAUTHENTICATED:return qu.UNAUTHENTICATED;case eh.INVALID_ARGUMENT:return qu.INVALID_ARGUMENT;case eh.NOT_FOUND:return qu.NOT_FOUND;case eh.ALREADY_EXISTS:return qu.ALREADY_EXISTS;case eh.PERMISSION_DENIED:return qu.PERMISSION_DENIED;case eh.FAILED_PRECONDITION:return qu.FAILED_PRECONDITION;case eh.ABORTED:return qu.ABORTED;case eh.OUT_OF_RANGE:return qu.OUT_OF_RANGE;case eh.UNIMPLEMENTED:return qu.UNIMPLEMENTED;case eh.DATA_LOSS:return qu.DATA_LOSS;default:return Qu()}}(th=eh||(eh={}))[th.OK=0]="OK",th[th.CANCELLED=1]="CANCELLED",th[th.UNKNOWN=2]="UNKNOWN",th[th.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",th[th.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",th[th.NOT_FOUND=5]="NOT_FOUND",th[th.ALREADY_EXISTS=6]="ALREADY_EXISTS",th[th.PERMISSION_DENIED=7]="PERMISSION_DENIED",th[th.UNAUTHENTICATED=16]="UNAUTHENTICATED",th[th.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",th[th.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",th[th.ABORTED=10]="ABORTED",th[th.OUT_OF_RANGE=11]="OUT_OF_RANGE",th[th.UNIMPLEMENTED=12]="UNIMPLEMENTED",th[th.INTERNAL=13]="INTERNAL",th[th.UNAVAILABLE=14]="UNAVAILABLE",th[th.DATA_LOSS=15]="DATA_LOSS";var sh=function(){function e(e,t){this.comparator=e,this.root=t||ch.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ch.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ch.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new uh(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new uh(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new uh(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new uh(this.root,e,this.comparator,!0)},e}(),uh=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),ch=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Qu();if(this.right.isRed())throw Qu();var e=this.left.check();if(e!==this.right.check())throw Qu();return e+(this.isRed()?0:1)},e}();ch.EMPTY=null,ch.RED=!0,ch.BLACK=!1,ch.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Qu()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Qu()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Qu()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Qu()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Qu()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ch(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var lh=function(){function e(e){this.comparator=e,this.data=new sh(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new hh(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new hh(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),hh=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),fh=new sh(Ic.comparator);function dh(){return fh}var ph=new sh(Ic.comparator);function vh(){return ph}var gh=new sh(Ic.comparator);function mh(){return gh}var yh=new lh(Ic.comparator);function bh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=yh,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var _h=new lh(Zu);function wh(){return _h}var Th=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Ih.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(rc.min(),r,wh(),dh(),bh())},e}(),Ih=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(fc.EMPTY_BYTE_STRING,n,bh(),bh(),bh())},e}(),Eh=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Sh=function(e,t){this.targetId=e,this.V=t},kh=function(e,t,n,r){void 0===n&&(n=fc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Ch=function(){function e(){this.S=0,this.D=xh(),this.C=fc.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=bh(),t=bh(),n=bh();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qu()}})),new Ih(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=xh()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),Nh=function(){function e(e){this.W=e,this.G=new Map,this.H=dh(),this.J=Ah(),this.Y=new lh(Zu)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:Qu()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(Wc(i))if(0===n){var o=new Ic(i.path);this.tt(t,o,qc.newNoDocument(o,rc.min()))}else Yu(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&Wc(o.target)){var a=new Ic(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,qc.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=bh();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Th(e,n,this.Y,this.H,r);return this.H=dh(),this.J=Ah(),this.Y=new lh(Zu),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Ch,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new lh(Zu),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||zu("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new Ch),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Ah(){return new sh(Ic.comparator)}function xh(){return new sh(Ic.comparator)}var Ph={asc:"ASCENDING",desc:"DESCENDING"},Rh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oh=function(e,t){this.databaseId=e,this.I=t};function Dh(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Lh(e,t){return e.I?t.toBase64():t.toUint8Array()}function Mh(e,t){return Dh(e,t.toTimestamp())}function Fh(e){return Yu(!!e),rc.fromTimestamp(function(e){var t=pc(e);return new nc(t.seconds,t.nanos)}(e))}function jh(e,t){return function(e){return new uc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Uh(e){var t=uc.fromString(e);return Yu(lf(t)),t}function qh(e,t){return jh(e.databaseId,t.path)}function Vh(e,t){var n=Uh(t);if(n.get(1)!==e.databaseId.projectId)throw new Vu(qu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vu(qu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ic(Wh(n))}function Bh(e,t){return jh(e.databaseId,t)}function Kh(e){var t=Uh(e);return 4===t.length?uc.emptyPath():Wh(t)}function zh(e){return new uc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wh(e){return Yu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hh(e,t,n){return{name:qh(e,t),fields:n.value.mapValue.fields}}function Gh(e,t,n){var r=Vh(e,t.name),i=Fh(t.updateTime),o=new jc({mapValue:{fields:t.fields}}),a=qc.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Qh(e,t){var n;if(t instanceof Yl)n={update:Hh(e,t.key,t.value)};else if(t instanceof nh)n={delete:qh(e,t.key)};else if(t instanceof $l)n={update:Hh(e,t.key,t.data),updateMask:cf(t.fieldMask)};else{if(!(t instanceof rh))return Qu();n={verify:qh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Pl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Rl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ml)return{fieldPath:t.field.canonicalString(),increment:n.A};throw Qu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Mh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qu()}(e,t.precondition)),n}function Yh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Vl.updateTime(Fh(e.updateTime)):void 0!==e.exists?Vl.exists(e.exists):Vl.none()}(t.currentDocument):Vl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Yu("REQUEST_TIME"===t.setToServerValue),n=new Pl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Rl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Dl(i)}else"increment"in t?n=new Ml(e,t.increment):Qu();var o=lc.fromServerFormat(t.fieldPath);return new Ul(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=Vh(e,t.update.name),o=new jc({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new hc(t.map((function(e){return lc.fromServerFormat(e)})))}(t.updateMask);return new $l(i,o,a,n,r)}return new Yl(i,o,n,r)}if(t.delete){var s=Vh(e,t.delete);return new nh(s,n)}if(t.verify){var u=Vh(e,t.verify);return new rh(u,n)}return Qu()}function $h(e,t){return{documents:[Bh(e,t.path)]}}function Xh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Bh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Bh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Lc(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NAN"}};if(Dc(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Lc(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NOT_NAN"}};if(Dc(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:of(e.field),op:rf(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:of(e.field),direction:nf(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||_c(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=ef(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ef(t.endAt)),n}function Jh(e){var t=Kh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Yu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Zh(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new rl(af(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return _c(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=tf(n.startAt));var l=null;return n.endAt&&(l=tf(n.endAt)),ul(t,i,s,a,u,"F",c,l)}function Zh(e){return e?void 0!==e.unaryFilter?[uf(e)]:void 0!==e.fieldFilter?[sf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Zh(e)})).reduce((function(e,t){return e.concat(t)})):Qu():[]}function ef(e){return{before:e.before,values:e.position}}function tf(e){var t=!!e.before,n=e.values||[];return new tl(n,t)}function nf(e){return Ph[e]}function rf(e){return Rh[e]}function of(e){return{fieldPath:e.canonicalString()}}function af(e){return lc.fromServerFormat(e.fieldPath)}function sf(e){return Hc.create(af(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qu()}}(e.fieldFilter.op),e.fieldFilter.value)}function uf(e){switch(e.unaryFilter.op){case"IS_NAN":var t=af(e.unaryFilter.field);return Hc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=af(e.unaryFilter.field);return Hc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=af(e.unaryFilter.field);return Hc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=af(e.unaryFilter.field);return Hc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qu()}}function cf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function lf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function hf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=df(t)),t=ff(e.get(n),t);return df(t)}function ff(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function df(e){return e+"\x01\x01"}function pf(e){var t=e.length;if(Yu(t>=2),2===t)return Yu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),uc.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&Qu(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:Qu()}o=a+2}return new uc(r)}var vf=function(e,t){this.seconds=e,this.nanoseconds=t},gf=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};gf.store="owner",gf.key="owner";var mf=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};mf.store="mutationQueues",mf.keyPath="userId";var yf=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};yf.store="mutations",yf.keyPath="batchId",yf.userMutationsIndex="userMutationsIndex",yf.userMutationsKeyPath=["userId","batchId"];var bf=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,hf(t)]},e.key=function(e,t,n){return[e,hf(t),n]},e}();bf.store="documentMutations",bf.PLACEHOLDER=new bf;var _f=function(e,t){this.path=e,this.readTime=t},wf=function(e,t){this.path=e,this.version=t},Tf=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Tf.store="remoteDocuments",Tf.readTimeIndex="readTimeIndex",Tf.readTimeIndexPath="readTime",Tf.collectionReadTimeIndex="collectionReadTimeIndex",Tf.collectionReadTimeIndexPath=["parentPath","readTime"];var If=function(e){this.byteSize=e};If.store="remoteDocumentGlobal",If.key="remoteDocumentGlobalKey";var Ef=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ef.store="targets",Ef.keyPath="targetId",Ef.queryTargetsIndexName="queryTargetsIndex",Ef.queryTargetsKeyPath=["canonicalId","targetId"];var Sf=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Sf.store="targetDocuments",Sf.keyPath=["targetId","path"],Sf.documentTargetsIndex="documentTargetsIndex",Sf.documentTargetsKeyPath=["path","targetId"];var kf=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};kf.key="targetGlobalKey",kf.store="targetGlobal";var Cf=function(e,t){this.collectionId=e,this.parent=t};Cf.store="collectionParents",Cf.keyPath=["collectionId","parent"];var Nf=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Nf.store="clientMetadata",Nf.keyPath="clientId";var Af=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Af.store="bundles",Af.keyPath="bundleId";var xf=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};xf.store="namedQueries",xf.keyPath="name";var Pf=(0,wi.__spreadArray)((0,wi.__spreadArray)([],(0,wi.__spreadArray)((0,wi.__spreadArray)([],(0,wi.__spreadArray)((0,wi.__spreadArray)([],(0,wi.__spreadArray)((0,wi.__spreadArray)([],[mf.store,yf.store,bf.store,Tf.store,Ef.store,gf.store,kf.store,Sf.store]),[Nf.store])),[If.store])),[Cf.store])),[Af.store,xf.store]),Rf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Of=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),Df=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Lf=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Qu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Mf=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new Df,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new Uf(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=zf(t.target.error);n.ft.reject(new Uf(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Uf(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(zu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new Vf(t)},e}(),Ff=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,Ti.getUA)())&&Wu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return zu("SimpleDb","Removing database:",e),Bf(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,Ti.getUA)(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(zu("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new Uf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new Vu(qu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Uf(e,n))},i.onupgradeneeded=function(e){zu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){zu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,wi.__generator)(this,(function(c){switch(c.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,c,l;return(0,wi.__generator)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),t=Mf.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),Lf.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,zu("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),jf=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return Bf(this.Pt.delete())},e}(),Uf=function(e){function t(t,n){var r=this;return(r=e.call(this,qu.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,wi.__extends)(t,e),t}(Vu);function qf(e){return"IndexedDbTransactionError"===e.name}var Vf=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(zu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(zu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bf(n)},e.prototype.add=function(e){return zu("SimpleDb","ADD",this.store.name,e,e),Bf(this.store.add(e))},e.prototype.get=function(e){var t=this;return Bf(this.store.get(e)).next((function(n){return void 0===n&&(n=null),zu("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return zu("SimpleDb","DELETE",this.store.name,e),Bf(this.store.delete(e))},e.prototype.count=function(){return zu("SimpleDb","COUNT",this.store.name),Bf(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.kt=function(e,t){zu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new Lf((function(n,r){t.onerror=function(e){var t=zf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new Lf((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new jf(i),a=t(i.primaryKey,i.value,o);if(a instanceof Lf){var s=a.catch((function(e){return o.done(),Lf.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Lf.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Bf(e){return new Lf((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=zf(e.target.error);n(t)}}))}var Kf=!1;function zf(e){var t=Ff._t((0,Ti.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Vu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Kf||(Kf=!0,setTimeout((function(){throw r}),0)),r}}return e}var Wf=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return(0,wi.__extends)(t,e),t}(Of);function Hf(e,t){var n=$u(e);return Ff.It(n.Mt,t)}var Gf=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&zl(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&Wl(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&Wl(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(rc.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),bh())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(function(e,t){return Gl(e,t)}))&&ec(this.baseMutations,e.baseMutations,(function(e,t){return Gl(e,t)}))},e}(),Qf=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){Yu(t.mutations.length===r.length);for(var i=mh(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Yf=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=rc.min()),void 0===o&&(o=rc.min()),void 0===a&&(a=fc.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),$f=function(e){this.Lt=e};function Xf(e,t){if(t.document)return Gh(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Ic.fromSegments(t.noDocument.path),r=nd(t.noDocument.readTime),i=qc.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=Ic.fromSegments(t.unknownDocument.path);return r=nd(t.unknownDocument.version),qc.newUnknownDocument(o,r)}return Qu()}function Jf(e,t,n){var r=Zf(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:qh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Dh(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new Tf(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=td(t.version);return a=t.hasCommittedMutations,new Tf(null,new _f(s,u),null,a,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=td(t.version);return new Tf(new wf(c,l),null,null,!0,r,i)}return Qu()}function Zf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ed(e){var t=new nc(e[0],e[1]);return rc.fromTimestamp(t)}function td(e){var t=e.toTimestamp();return new vf(t.seconds,t.nanoseconds)}function nd(e){var t=new nc(e.seconds,e.nanoseconds);return rc.fromTimestamp(t)}function rd(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Yh(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Yh(e.Lt,t)})),s=nc.fromMillis(t.localWriteTimeMs);return new Gf(t.batchId,s,n,a)}function id(e){var t,n,r=nd(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?nd(e.lastLimboFreeSnapshotVersion):rc.min();return void 0!==e.query.documents?(Yu(1===(n=e.query).documents.length),t=gl(cl(Kh(n.documents[0])))):t=function(e){return gl(Jh(e))}(e.query),new Yf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,fc.fromBase64String(e.resumeToken))}function od(e,t){var n,r=td(t.snapshotVersion),i=td(t.lastLimboFreeSnapshotVersion);n=Wc(t.target)?$h(e.Lt,t.target):Xh(e.Lt,t.target);var o=t.resumeToken.toBase64();return new Ef(t.targetId,Kc(t.target),r,o,t.sequenceNumber,i,n)}function ad(e){var t=Jh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ml(t,t.limit,"L"):t}var sd=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return ud(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:nd(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return ud(e).put({bundleId:(n=t).id,createTime:td(Fh(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return cd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ad(t.bundledQuery),readTime:nd(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return cd(e).put(function(e){return{name:e.name,readTime:td(Fh(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function ud(e){return Hf(e,Af.store)}function cd(e){return Hf(e,xf.store)}var ld=function(){function e(){this.Bt=new hd}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),Lf.resolve()},e.prototype.getCollectionParents=function(e,t){return Lf.resolve(this.Bt.getEntries(t))},e}(),hd=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lh(uc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new lh(uc.comparator)).toArray()},e}(),fd=function(){function e(){this.qt=new hd}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:hf(i)};return dd(e).put(o)}return Lf.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[tc(t),""],!1,!0);return dd(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(pf(o.parent))}return n}))},e}();function dd(e){return Hf(e,Cf.store)}var pd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vd=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function gd(e,t,n){var r=e.store(yf.store),i=e.store(bf.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Yu(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=bf.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Lf.waitFor(o).next((function(){return c}))}function md(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qu();t=e.noDocument}return JSON.stringify(t).length}vd.DEFAULT_COLLECTION_PERCENTILE=10,vd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vd.DEFAULT=new vd(41943040,vd.DEFAULT_COLLECTION_PERCENTILE,vd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vd.DISABLED=new vd(-1,0,0);var yd=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return Yu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _d(e).$t({index:yf.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=wd(e),a=_d(e);return a.add({}).next((function(s){Yu("number"==typeof s);for(var u=new Gf(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Qh(e.Lt,t)})),i=n.mutations.map((function(t){return Qh(e.Lt,t)}));return new yf(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new lh((function(e,t){return Zu(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=bf.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,bf.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Lf.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return _d(e).get(t).next((function(e){return e?(Yu(e.userId===n.userId),rd(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?Lf.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _d(e).$t({index:yf.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Yu(t.batchId>=r),o=rd(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _d(e).$t({index:yf.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _d(e).Nt(yf.userMutationsIndex,n).next((function(e){return e.map((function(e){return rd(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=bf.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return wd(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=pf(u);if(s===n.userId&&t.path.isEqual(l))return _d(e).get(c).next((function(e){if(!e)throw Qu();Yu(e.userId===n.userId),o.push(rd(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new lh(Zu),i=[];return t.forEach((function(t){var o=bf.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=wd(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=pf(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Lf.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=bf.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new lh(Zu);return wd(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=pf(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(_d(e).get(t).next((function(e){if(null===e)throw Qu();Yu(e.userId===n.userId),r.push(rd(n.R,e))})))})),Lf.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return gd(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),Lf.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Lf.resolve();var r=IDBKeyRange.lowerBound(bf.prefixForUser(t.userId)),i=[];return wd(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=pf(e[1]);i.push(o)}else r.done()})).next((function(){Yu(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return bd(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return Td(e).get(this.userId).next((function(e){return e||new mf(t.userId,-1,"")}))},e}();function bd(e,t,n){var r=bf.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return wd(e).$t({range:o,Ft:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function _d(e){return Hf(e,yf.store)}function wd(e){return Hf(e,bf.store)}function Td(e){return Hf(e,mf.store)}var Id=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),Ed=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new Id(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return rc.fromTimestamp(new nc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Sd(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return Yu(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Sd(e).$t((function(a,s){var u=id(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return Lf.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return Sd(e).$t((function(e,n){var r=id(n);t(r)}))},e.prototype.Xt=function(e){return kd(e).get(kf.key).next((function(e){return Yu(null!==e),e}))},e.prototype.Zt=function(e,t){return kd(e).put(kf.key,t)},e.prototype.te=function(e,t){return Sd(e).put(od(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=Kc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Sd(e).$t({range:r,index:Ef.queryTargetsIndexName},(function(e,n,r){var o=id(n);zc(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Cd(e);return t.forEach((function(t){var a=hf(t.path);i.push(o.put(new Sf(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),Lf.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Cd(e);return Lf.forEach(t,(function(t){var o=hf(t.path);return Lf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Cd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Cd(e),i=bh();return r.$t({range:n,Ft:!0},(function(e,t,n){var r=pf(e[1]),o=new Ic(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=hf(t.path),r=IDBKeyRange.bound([n],[tc(n)],!1,!0),i=0;return Cd(e).$t({index:Sf.documentTargetsIndex,Ft:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return Sd(e).get(t).next((function(e){return e?id(e):null}))},e}();function Sd(e){return Hf(e,Ef.store)}function kd(e){return Hf(e,kf.store)}function Cd(e){return Hf(e,Sf.store)}function Nd(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){if(e.code!==qu.FAILED_PRECONDITION||e.message!==Rf)throw e;return zu("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Ad(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Zu(n,i);return 0===a?Zu(r,o):a}var xd=function(){function e(e){this.ne=e,this.buffer=new lh(Ad),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ad(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Pd=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;zu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return qf(t=n.sent())?(zu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Nd(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),Rd=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Lf.resolve(Uu.o);var r=new xd(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(zu("LruGarbageCollector","Garbage collection skipped; disabled"),Lf.resolve(pd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(zu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),pd):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(zu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ku()<=Ii.LogLevel.DEBUG&&zu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Lf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),Od=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new Rd(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return Dd(e,n)},e.prototype.removeReference=function(e,t,n){return Dd(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return Dd(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return Td(e).Ot((function(r){return bd(e,r,t).next((function(e){return e&&(n=!0),Lf.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),Cd(e).delete([0,hf(a.path)])}))}));i.push(u)}})).next((function(){return Lf.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Dd(e,t)},e.prototype.we=function(e,t){var n,r=Cd(e),i=Uu.o;return r.$t({index:Sf.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==Uu.o&&t(new Ic(pf(n)),i),i=s,n=a):i=Uu.o})).next((function(){i!==Uu.o&&t(new Ic(pf(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Dd(e,t){return Cd(e).put(function(e,t){return new Sf(0,hf(e.path),t)}(t,e.currentSequenceNumber))}var Ld=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){oc(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return ac(this.inner)},e}(),Md=function(){function e(){this.changes=new Ld((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:rc.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:qc.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Lf.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),Fd=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return qd(e).put(Vd(t),n)},e.prototype.removeEntry=function(e,t){var n=qd(e),r=Vd(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return qd(e).get(Vd(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return qd(e).get(Vd(t)).next((function(e){return{document:n.ye(t,e),size:md(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=dh();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=dh(),i=new sh(Ic.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,md(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return Lf.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return qd(e).$t({range:r},(function(e,t,r){for(var a=Ic.fromSegments(e);o&&Ic.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=dh(),o=t.path.length+1,a={};if(n.isEqual(rc.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=Zf(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Tf.collectionReadTimeIndex}return qd(e).$t(a,(function(e,n,a){if(e.length===o){var s=Xf(r.R,n);t.path.isPrefixOf(s.key.path)?wl(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new jd(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Ud(e).get(If.key).next((function(e){return Yu(!!e),e}))},e.prototype.me=function(e,t){return Ud(e).put(If.key,t)},e.prototype.ye=function(e,t){if(t){var n=Xf(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(rc.min()))return n}return qc.newInvalidDocument(e)},e}(),jd=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new Ld((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return(0,wi.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new lh((function(e,t){return Zu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=Jf(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=md(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=Jf(t.Ie.R,qc.newNoDocument(o,rc.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),Lf.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(Md);function Ud(e){return Hf(e,If.store)}function qd(e){return Hf(e,Tf.store)}function Vd(e){return e.path.toArray()}var Bd=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;Yu(n<r&&n>=0&&r<=11);var o=new Mf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(gf.store)}(e),function(e){e.createObjectStore(mf.store,{keyPath:mf.keyPath}),e.createObjectStore(yf.store,{keyPath:yf.keyPath,autoIncrement:!0}).createIndex(yf.userMutationsIndex,yf.userMutationsKeyPath,{unique:!0}),e.createObjectStore(bf.store)}(e),Kd(e),function(e){e.createObjectStore(Tf.store)}(e));var a=Lf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Sf.store),e.deleteObjectStore(Ef.store),e.deleteObjectStore(kf.store)}(e),Kd(e)),a=a.next((function(){return function(e){var t=e.store(kf.store),n=new kf(0,0,rc.min().toTimestamp(),0);return t.put(kf.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(yf.store).Nt().next((function(n){e.deleteObjectStore(yf.store),e.createObjectStore(yf.store,{keyPath:yf.keyPath,autoIncrement:!0}).createIndex(yf.userMutationsIndex,yf.userMutationsKeyPath,{unique:!0});var r=t.store(yf.store),i=n.map((function(e){return r.put(e)}));return Lf.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Nf.store,{keyPath:Nf.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(If.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Tf.store);t.createIndex(Tf.readTimeIndex,Tf.readTimeIndexPath,{unique:!1}),t.createIndex(Tf.collectionReadTimeIndex,Tf.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(Af.store,{keyPath:Af.keyPath})}(e),function(e){e.createObjectStore(xf.store,{keyPath:xf.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(Tf.store).$t((function(e,n){t+=md(n)})).next((function(){var n=new If(t);return e.store(If.store).put(If.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(mf.store),r=e.store(yf.store);return n.Nt().next((function(n){return Lf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(yf.userMutationsIndex,i).next((function(r){return Lf.forEach(r,(function(r){Yu(r.userId===n.userId);var i=rd(t.R,r);return gd(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(Sf.store),n=e.store(Tf.store);return e.store(kf.store).get(kf.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new uc(n),a=function(e){return[0,hf(e)]}(o);r.push(t.get(a).next((function(n){return n?Lf.resolve():function(n){return t.put(new Sf(0,hf(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return Lf.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(Cf.store,{keyPath:Cf.keyPath});var n=t.store(Cf.store),r=new hd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:hf(i)})}};return t.store(Tf.store).$t({Ft:!0},(function(e,t){var n=new uc(e);return i(n.popLast())})).next((function(){return t.store(bf.store).$t({Ft:!0},(function(e,t){e[0];var n=e[1];e[2];var r=pf(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(Ef.store);return n.$t((function(e,r){var i=id(r),o=od(t.R,i);return n.put(o)}))},e}();function Kd(e){e.createObjectStore(Sf.store,{keyPath:Sf.keyPath}).createIndex(Sf.documentTargetsIndex,Sf.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Ef.store,{keyPath:Ef.keyPath}).createIndex(Ef.queryTargetsIndexName,Ef.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(kf.store)}var zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wd=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new Vu(qu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Od(this,i),this.Le=n+"main",this.R=new $f(u),this.Be=new Ff(this.Le,11,new Bd(this.R)),this.qe=new Ed(this.referenceDelegate,this.R),this.Ut=new fd,this.Ue=function(e,t){return new Fd(e,t)}(this.R,this.Ut),this.Ke=new sd,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Wu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Vu(qu.FAILED_PRECONDITION,zd);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new Uu(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return(0,wi.__awaiter)(t,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return(0,wi.__awaiter)(t,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Gd(t).put(new Nf(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(qf(t))return zu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return zu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return Hd(e).get(gf.key).next((function(e){return Lf.resolve(t.tn(e))}))},e.prototype.en=function(e){return Gd(e).delete(this.clientId)},e.prototype.nn=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Hf(e,Nf.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Lf.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?Lf.resolve(!0):Hd(e).get(gf.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new Vu(qu.FAILED_PRECONDITION,zd);return!1}}return!(!t.networkEnabled||!t.inForeground)||Gd(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&zu("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[gf.store,Nf.store],(function(t){var n=new Wf(t,Uu.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Gd(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return yd.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;zu("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,Pf,(function(o){return i=new Wf(o,r.Ne?r.Ne.next():Uu.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw Wu("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Vu(qu.FAILED_PRECONDITION,Rf);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return Hd(e).get(gf.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Vu(qu.FAILED_PRECONDITION,zd)}))},e.prototype.Ze=function(e){var t=new gf(this.clientId,this.allowTabSynchronization,Date.now());return Hd(e).put(gf.key,t)},e.yt=function(){return Ff.yt()},e.prototype.Xe=function(e){var t=this,n=Hd(e);return n.get(gf.key).next((function(e){return t.tn(e)?(zu("IndexedDbPersistence","Releasing primary lease."),n.delete(gf.key)):Lf.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Wu("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,Ti.isSafari)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return zu("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return Wu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Wu("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function Hd(e){return Hf(e,gf.store)}function Gd(e){return Hf(e,Nf.store)}function Qd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Yd=function(e,t){this.progress=e,this.wn=t},$d=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return Ic.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):pl(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new Ic(t)).next((function(e){var t=vh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=vh();return this.Ut.getCollectionParents(e,i).next((function(a){return Lf.forEach(a,(function(a){var s=function(e,t){return new sl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=qc.newInvalidDocument(c),r=r.insert(c,l)),Wl(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){wl(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=bh(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof $l&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),Xd=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=bh(),i=bh(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Jd=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(rc.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(o){var a=i.Cn(t,o);return(ll(t)||hl(t))&&i.Nn(t.limitType,a,r,n)?i.Dn(e,t):(Ku()<=Ii.LogLevel.DEBUG&&zu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_l(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new lh(Tl(e));return t.forEach((function(t,r){wl(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return Ku()<=Ii.LogLevel.DEBUG&&zu("QueryEngine","Using full collection scan to execute query:",_l(t)),this.Sn.getDocumentsMatchingQuery(e,t,rc.min())},e}(),Zd=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new sh(Zu),this.Fn=new Ld((function(e){return Kc(e)}),zc),this.$n=rc.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new $d(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},e}();function ep(e,t,n,r){return new Zd(e,t,n,r)}function tp(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return n=$u(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new $d(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=bh(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function np(e,t){var n=$u(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=Lf.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);Yu(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function rp(e){var t=$u(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function ip(e,t){var n=$u(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return Yu(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.qe.updateTargetData(e,c))}}}));var s=dh();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(op(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(rc.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return Lf.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.kn=i,e}))}function op(e,t,n,r,i){var o=bh();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=dh();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(rc.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):zu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function ap(e,t){var n=$u(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function sp(e,t){var n=$u(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,Lf.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new Yf(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function up(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:r=$u(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!qf(a=s.sent()))throw a;return zu("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}}))}))}function cp(e,t,n){var r=$u(e),i=rc.min(),o=bh();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=$u(e),i=r.Fn.get(n);return void 0!==i?Lf.resolve(r.kn.get(i)):r.qe.getTargetData(t,n)}(r,e,gl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:rc.min(),n?o:bh())})).next((function(e){return{documents:e,Bn:o}}))}))}function lp(e,t){var n=$u(e),r=$u(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function hp(e){var t=$u(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=$u(e),i=dh(),o=Zf(n),a=qd(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:Tf.readTimeIndex,range:s},(function(e,t){var n=Xf(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:ed(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function fp(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){return[2,(t=$u(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=qd(e),n=rc.min();return t.$t({index:Tf.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=ed(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function dp(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return(0,wi.__generator)(this,(function(p){switch(p.label){case 0:for(i=$u(e),o=bh(),a=dh(),s=mh(),u=0,c=n;u<c.length;u++)l=c[u],h=t.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,t.Un(l)),s=s.insert(h,t.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,sp(i,function(e){return gl(cl(uc.fromString("__bundle__/docs/"+e)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return op(e,f,a,rc.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next((function(){return i.qe.addMatchingKeys(e,o,d.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function pp(e,t,n){return void 0===n&&(n=bh()),(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return[4,sp(e,gl(ad(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=$u(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=Fh(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(fc.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)}))}))]}}))}))}var vp=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return Lf.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:Fh(n.createTime)}),Lf.resolve()},e.prototype.getNamedQuery=function(e,t){return Lf.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:ad(e.bundledQuery),readTime:Fh(e.readTime)}}(t)),Lf.resolve()},e}(),gp=function(){function e(){this.Wn=new lh(mp.Gn),this.zn=new lh(mp.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new mp(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new mp(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new Ic(new uc([])),r=new mp(n,e),i=new mp(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new Ic(new uc([])),n=new mp(t,e),r=new mp(t,e+1),i=bh();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new mp(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),mp=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return Ic.comparator(e.key,t.key)||Zu(e.ns,t.ns)},e.Hn=function(e,t){return Zu(e.ns,t.ns)||Ic.comparator(e.key,t.key)},e}(),yp=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new lh(mp.Gn)}return e.prototype.checkEmpty=function(e){return Lf.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Gf(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new mp(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return Lf.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Lf.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return Lf.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Lf.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return Lf.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new mp(t,0),i=new mp(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),Lf.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new lh(Zu);return t.forEach((function(e){var t=new mp(e,0),i=new mp(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),Lf.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;Ic.isDocumentKey(i)||(i=i.child(""));var o=new mp(new Ic(i),0),a=new lh(Zu);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),Lf.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Yu(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return Lf.forEach(t.mutations,(function(i){var o=new mp(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new mp(t,0),r=this.rs.firstAfterOrEqual(n);return Lf.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,Lf.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),bp=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new sh(Ic.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Lf.resolve(n?n.document.clone():qc.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=dh();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():qc.newInvalidDocument(e))})),Lf.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=dh(),i=new Ic(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||wl(t,c)&&(r=r.insert(c.key,c.clone()))}return Lf.resolve(r)},e.prototype.fs=function(e,t){return Lf.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new _p(this)},e.prototype.getSize=function(e){return Lf.resolve(this.size)},e}(),_p=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return(0,wi.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),Lf.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(Md),wp=function(){function e(e){this.persistence=e,this.ds=new Ld((function(e){return Kc(e)}),zc),this.lastRemoteSnapshotVersion=rc.min(),this.highestTargetId=0,this.ws=0,this._s=new gp,this.targetCount=0,this.ys=Id.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),Lf.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Lf.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Lf.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),Lf.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),Lf.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Id(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,Lf.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),Lf.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,Lf.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Lf.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Lf.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return Lf.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),Lf.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Lf.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),Lf.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return Lf.resolve(n)},e.prototype.containsKey=function(e,t){return Lf.resolve(this._s.containsKey(t))},e}(),Tp=function(){function e(e,t){var n=this;this.gs={},this.Ne=new Uu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new wp(this),this.Ut=new ld,this.Ue=function(e,t){return new bp(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new $f(t),this.Ke=new vp(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new yp(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;zu("MemoryPersistence","Starting transaction:",e);var i=new Ip(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return Lf.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Ip=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return(0,wi.__extends)(t,e),t}(Of),Ep=function(){function e(e){this.persistence=e,this.As=new gp,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Qu()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),Lf.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),Lf.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),Lf.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lf.forEach(this.vs,(function(r){var i=Ic.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return Lf.or([function(){return Lf.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),Sp=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function kp(e,t){return"firestore_clients_"+e+"_"+t}function Cp(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Np(e,t){return"firestore_targets_"+e+"_"+t}Sp.UNAUTHENTICATED=new Sp(null),Sp.GOOGLE_CREDENTIALS=new Sp("google-credentials-uid"),Sp.FIRST_PARTY=new Sp("first-party-uid"),Sp.MOCK_USER=new Sp("mock-user");var Ap=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Vu(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(Wu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),xp=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vu(i.error.code,i.error.message)),o?new e(t,i.state,r):(Wu("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Pp=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=wh(),a=0;i&&a<r.activeTargetIds.length;++a)i=Tc(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(Wu("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Rp=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Wu("SharedClientState","Failed to parse online state: "+t),null)},e}(),Op=function(){function e(){this.activeTargetIds=wh()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Dp=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new sh(Zu),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=kp(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Op),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return(0,wi.__generator)(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(kp(this.persistenceKey,r)))&&(o=Pp.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Np(this.persistenceKey,e));if(n){var r=xp.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Np(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return zu("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){zu("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){zu("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(zu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Wu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){var e,t,r,i,o,a;return(0,wi.__generator)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=Uu.o;if(null!=e)try{var n=JSON.parse(e);Yu("number"==typeof n),t=n}catch(e){Wu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Uu.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Ap(this.currentUser,e,t,n),i=Cp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=Cp(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=Np(this.persistenceKey,e),i=new xp(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return Pp.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ap.Vs(new Sp(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return xp.Vs(r,t)},e.prototype.js=function(e){return Rp.Vs(e)},e.prototype.ii=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(zu("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=wh();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),Lp=function(){function e(){this.li=new Op,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new Op,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),Mp=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),Fp=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){zu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){zu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),jp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Up=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),qp=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return(0,wi.__extends)(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var a=new ju;a.listenOnce(Ou.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Ru.NO_ERROR:var t=a.getResponseJson();zu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ru.TIMEOUT:zu("Connection",'RPC "'+e+'" timed out'),o(new Vu(qu.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:var n=a.getStatus();if(zu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(qu).indexOf(t)>=0?t:qu.UNKNOWN}(r.status);o(new Vu(s,r.message))}else o(new Vu(qu.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Vu(qu.UNAVAILABLE,"Connection failed."));break;default:Qu()}}finally{zu("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=xu(),i=Pu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Mu({})),this.ki(o.initMessageHeaders,t),(0,Ti.isMobileCordova)()||(0,Ti.isReactNative)()||(0,Ti.isElectron)()||(0,Ti.isIE)()||(0,Ti.isUWP)()||(0,Ti.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");zu("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new Up({Ei:function(e){c?zu("Connection","Not sending because WebChannel is closed:",e):(u||(zu("Connection","Opening WebChannel transport."),s.open(),u=!0),zu("Connection","WebChannel sending:",e),s.send(e))},Ti:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Fu.EventType.OPEN,(function(){c||zu("Connection","WebChannel transport opened.")})),h(s,Fu.EventType.CLOSE,(function(){c||(c=!0,zu("Connection","WebChannel transport closed"),l.Vi())})),h(s,Fu.EventType.ERROR,(function(e){c||(c=!0,Hu("Connection","WebChannel transport errored:",e),l.Vi(new Vu(qu.UNAVAILABLE,"The operation could not be completed")))})),h(s,Fu.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Yu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){zu("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=eh[e];if(void 0!==t)return ah(t)}(o),u=i.message;void 0===a&&(a=qu.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.Vi(new Vu(a,u)),s.close()}else zu("Connection","WebChannel received:",n),l.Si(n)}})),h(i,Du.STAT_EVENT,(function(e){e.stat===Lu.PROXY?zu("Connection","Detected buffering proxy"):e.stat===Lu.NOPROXY&&zu("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);zu("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then((function(e){return zu("RestConnection","Received: ",e),e}),(function(t){throw Hu("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=jp[e];return this.Di+"/v1/"+t+":"+n},e}());function Vp(){return"undefined"!=typeof window?window:null}function Bp(){return"undefined"!=typeof document?document:null}function Kp(e){return new Oh(e,!0)}var zp=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&zu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),Wp=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new zp(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===qu.RESOURCE_EXHAUSTED?(Wu(t.toString()),Wu("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===qu.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new Vu(qu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return(0,wi.__awaiter)(e,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return zu("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(zu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Hp=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,wi.__extends)(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(Yu(void 0===t||"string"==typeof t),fc.fromBase64String(t||"")):(Yu(void 0===t||t instanceof Uint8Array),fc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?qu.UNKNOWN:ah(e.code);return new Vu(t,e.message||"")}(s);n=new kh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=Vh(e,r.document.name),o=Fh(r.document.updateTime);var s=new jc({mapValue:{fields:r.document.fields}}),u=(a=qc.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Eh(u,c,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=Vh(e,r.document),o=r.readTime?Fh(r.readTime):rc.min(),s=qc.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Eh([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=Vh(e,r.document),o=r.removedTargetIds||[],n=new Eh([],o,i,null);else{if(!("filter"in t))return Qu();t.filter;var l=t.filter;l.targetId,r=l.count||0,i=new ih(r),o=l.targetId,n=new Sh(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return rc.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?rc.min():t.readTime?Fh(t.readTime):rc.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=zh(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=Wc(r)?{documents:$h(e,r)}:{query:Xh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Lh(e,t.resumeToken):t.snapshotVersion.compareTo(rc.min())>0&&(n.readTime=Dh(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=zh(this.R),t.removeTarget=e,this.cr(t)},t}(Wp),Gp=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,wi.__extends)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(Yu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(Yu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Fh(e.updateTime):Fh(t);return n.isEqual(rc.min())&&(n=Fh(t)),new ql(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Fh(e.commitTime);return this.listener.Tr(n,t)}return Yu(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=zh(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Qh(t.R,e)}))};this.cr(n)},t}(Wp),Qp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,wi.__extends)(t,e),t.prototype.br=function(){if(this.Rr)throw new Vu(qu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qu.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Vu(qu.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qu.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Vu(qu.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),Yp=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Wu(t),this.Vr=!1):zu("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),$p=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return(0,wi.__awaiter)(o,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return ov(this)?(zu("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return(t=$u(e)).Or.add(4),[4,Jp(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,Xp(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new Yp(n,r)};function Xp(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:if(!ov(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Jp(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Zp(e,t){var n=$u(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),iv(n)?rv(n):_v(n).er()&&tv(n,t))}function ev(e,t){var n=$u(e),r=_v(n);n.$r.delete(t),r.er()&&nv(n,t),0===n.$r.size&&(r.er()?r.ir():ov(n)&&n.Br.set("Unknown"))}function tv(e,t){e.qr.U(t.targetId),_v(e).mr(t)}function nv(e,t){e.qr.U(t),_v(e).yr(t)}function rv(e){e.qr=new Nh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),_v(e).start(),e.Br.Sr()}function iv(e){return ov(e)&&!_v(e).tr()&&e.$r.size>0}function ov(e){return 0===$u(e).Or.size}function av(e){e.qr=void 0}function sv(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){return e.$r.forEach((function(t,n){tv(e,t)})),[2]}))}))}function uv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(n){return av(e),iv(e)?(e.Br.Nr(t),rv(e)):e.Br.set("Unknown"),[2]}))}))}function cv(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof kh&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),zu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,lv(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Eh?e.qr.X(t):t instanceof Sh?e.qr.rt(t):e.qr.et(t),n.isEqual(rc.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,rp(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(fc.EMPTY_BYTE_STRING,n.snapshotVersion)),nv(e,t);var r=new Yf(n.target,t,1,n.sequenceNumber);tv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return zu("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,lv(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function lv(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r=this;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:if(!qf(t))throw t;return e.Or.add(1),[4,Jp(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return rp(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return(0,wi.__awaiter)(r,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return zu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,Xp(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function hv(e,t){return t().catch((function(n){return lv(e,n,t)}))}function fv(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:t=$u(e),n=wv(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return ov(e)&&e.Fr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,ap(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.Fr.push(t);var n=wv(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,lv(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return dv(t)&&pv(t),[2]}}))}))}function dv(e){return ov(e)&&!wv(e).tr()&&e.Fr.length>0}function pv(e){wv(e).start()}function vv(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){return wv(e).Ar(),[2]}))}))}function gv(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,wi.__generator)(this,(function(o){for(t=wv(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function mv(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=Qf.from(r,t,n),[4,hv(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,fv(e)];case 2:return o.sent(),[2]}}))}))}function yv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t&&wv(e).pr?[4,function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return oh(r=t.code)&&r!==qu.ABORTED?(n=e.Fr.shift(),wv(e).sr(),[4,hv(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,fv(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return dv(e)&&pv(e),[2]}}))}))}function bv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return n=$u(e),t?(n.Or.delete(2),[4,Xp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Jp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function _v(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=$u(e);return r.br(),new Hp(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:sv.bind(null,e),Ri:uv.bind(null,e),_r:cv.bind(null,e)}),e.Mr.push((function(n){return(0,wi.__awaiter)(t,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),iv(e)?rv(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),av(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function wv(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=$u(e);return r.br(),new Gp(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:vv.bind(null,e),Ri:yv.bind(null,e),Ir:gv.bind(null,e),Tr:mv.bind(null,e)}),e.Mr.push((function(n){return(0,wi.__awaiter)(t,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,fv(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.Fr.length>0&&(zu("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr}var Tv=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Df,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vu(qu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Iv(e,t){if(Wu("AsyncQueue",t+": "+e),qf(e))return new Vu(qu.UNAVAILABLE,t+": "+e);throw e}var Ev=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||Ic.comparator(t.key,n.key)}:function(e,t){return Ic.comparator(e.key,t.key)},this.keyedMap=vh(),this.sortedSet=new sh(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Sv=function(){function e(){this.Qr=new sh(Ic.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):Qu():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),kv=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ev.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Cv=function(){this.Wr=void 0,this.listeners=[]},Nv=function(){this.queries=new Ld((function(e){return bl(e)}),yl),this.onlineState="Unknown",this.Gr=new Set};function Av(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,wi.__generator)(this,(function(c){switch(c.label){case 0:if(n=$u(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Cv),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Iv(s,"Initialization of query '"+_l(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&Ov(n),[2]}}))}))}function xv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,wi.__generator)(this,(function(s){return n=$u(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Pv(e,t){for(var n=$u(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Ov(n)}function Rv(e,t,n){var r=$u(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function Ov(e){e.Gr.forEach((function(e){e.next()}))}var Dv=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new kv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),Lv=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),Mv=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return Vh(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?Gh(this.R,e.document,!1):qc.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return Fh(e)},e}(),Fv=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=jv(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new Mv(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||bh()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return[4,dp(this.localStore,new Mv(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,pp(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Yd(Object.assign({},this.progress),e))]}}))}))},e}();function jv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Uv=function(e){this.key=e},qv=function(e){this.key=e},Vv=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=bh(),this.mutatedKeys=bh(),this.lo=Tl(e),this.fo=new Ev(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new Sv,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=ll(this.query)&&i.size===this.query.limit?i.last():null,c=hl(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=wl(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),ll(this.query)||hl(this.query))for(;a.size>this.query.limit;){var l=ll(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qu()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new kv(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Sv,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=bh(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new qv(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new Uv(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=bh();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return kv.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),Bv=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Kv=function(e){this.key=e,this.bo=!1},zv=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ld((function(e){return bl(e)}),yl),this.Vo=new Map,this.So=new Set,this.Do=new sh(Ic.comparator),this.Co=new Map,this.No=new gp,this.xo={},this.ko=new Map,this.Fo=Id.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function Wv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return n=_g(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,sp(n.localStore,gl(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Hv(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Zp(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Hv(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,wi.__generator)(this,(function(l){switch(l.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,cp(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(og(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,cp(e.localStore,t,!0)];case 1:return i=l.sent(),o=new Vv(t,i.Bn),a=o._o(i.documents),s=Ih.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),og(e,n,u.To),c=new Bv(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function Gv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return n=$u(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!yl(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,up(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),ev(n.remoteStore,r.targetId),rg(n,r.targetId)})).catch(Nd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return rg(n,r.targetId),[4,up(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Qv(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:r=wg(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(e,t){var n,r=$u(e),i=nc.now(),o=t.reduce((function(e,t){return e.add(t.key)}),bh());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=Hl(c,n.get(c.key));null!=l&&a.push(new $l(c.key,l,Uc(l.value.mapValue),Vl.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(r.localStore,t)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new sh(Zu)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,ug(r,i.changes)];case 3:return s.sent(),[4,fv(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Iv(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Yv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:n=$u(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ip(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(Yu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?Yu(r.bo):e.removedDocuments.size>0&&(Yu(r.bo),r.bo=!1))})),[4,ug(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Nd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function $v(e,t,n){var r=$u(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=$u(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&Ov(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Xv(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,wi.__generator)(this,(function(c){switch(c.label){case 0:return(r=$u(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new sh(Ic.comparator)).insert(o,qc.newNoDocument(o,rc.min())),s=bh().add(o),u=new Th(rc.min(),new Map,new lh(Zu),a,s),[4,Yv(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),sg(r),[3,4];case 2:return[4,up(r.localStore,t,!1).then((function(){return rg(r,t,n)})).catch(Nd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Jv(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:n=$u(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,np(n.localStore,t)];case 2:return i=o.sent(),ng(n,r,null),tg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ug(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Nd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Zv(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:r=$u(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=$u(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return Yu(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),ng(r,t,n),tg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,ug(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Nd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function eg(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:ov((n=$u(e)).remoteStore)||zu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){var t=$u(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=Iv(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}}))}))}function tg(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function ng(e,t,n){var r=$u(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function rg(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||ig(e,t)}))}function ig(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(ev(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),sg(e))}function og(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Uv?(e.No.addReference(o.key,t),ag(e,o)):o instanceof qv?(zu("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||ig(e,o.key)):Qu()}}function ag(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(zu("SyncEngine","New document in limbo: "+n),e.So.add(r),sg(e))}function sg(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new Ic(uc.fromString(t)),r=e.Fo.next();e.Co.set(r,new Kv(n)),e.Do=e.Do.insert(n,r),Zp(e.remoteStore,new Yf(gl(cl(n.path)),r,2,Uu.o))}}function ug(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return r=$u(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=Xd.Pn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return(0,wi.__generator)(this,(function(h){switch(h.label){case 0:n=$u(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Lf.forEach(t,(function(t){return Lf.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return Lf.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!qf(r=h.sent()))throw r;return zu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.kn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function cg(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return(n=$u(e)).currentUser.isEqual(t)?[3,3]:(zu("SyncEngine","User change. New user:",t.toKey()),[4,tp(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.ko.forEach((function(e){e.forEach((function(e){e.reject(new Vu(qu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,ug(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function lg(e,t){var n=$u(e),r=n.Co.get(t);if(r&&r.bo)return bh().add(r.key);var i=bh(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function hg(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return[4,cp((n=$u(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&og(n,t.targetId,i.To),i)]}}))}))}function fg(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){return[2,hp((t=$u(e)).localStore).then((function(e){return ug(t,e)}))]}))}))}function dg(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=$u(e),r=$u(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):Lf.resolve(null)}))}))}((i=$u(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,fv(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ng(i,t,r||null),tg(i,t),function(e,t){$u($u(e)._n).Gt(t)}(i.localStore,t)):Qu(),a.label=4;case 4:return[4,ug(i,o)];case 5:return a.sent(),[3,7];case 6:zu("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function pg(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return(0,wi.__generator)(this,(function(l){switch(l.label){case 0:return _g(n=$u(e)),wg(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,vg(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,bv(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],Zp(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):c=c.then((function(){return rg(n,t),up(n.localStore,t,!0)})),ev(n.remoteStore,t)})),[4,c]);case 4:return l.sent(),[4,vg(n,u)];case 5:return l.sent(),function(e){var t=$u(e);t.Co.forEach((function(e,n){ev(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new sh(Ic.comparator)}(n),n.$o=!1,[4,bv(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function vg(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,v;return(0,wi.__generator)(this,(function(g){switch(g.label){case 0:n=$u(e),r=[],i=[],o=0,a=t,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,sp(n.localStore,gl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],d=n.Po.get(f),[4,hg(n,d)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,lp(n.localStore,s)];case 8:return v=g.sent(),[4,sp(n.localStore,v)];case 9:return u=g.sent(),[4,Hv(n,gg(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function gg(e){return ul(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mg(e){var t=$u(e);return $u($u(t.localStore).persistence).fn()}function yg(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return(i=$u(e)).$o?(zu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,hp(i.localStore)];case 3:return o=s.sent(),a=Th.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,ug(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,up(i.localStore,t,!0)];case 6:return s.sent(),rg(i,t,r),[3,8];case 7:Qu(),s.label=8;case 8:return[2]}}))}))}function bg(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return(0,wi.__generator)(this,(function(d){switch(d.label){case 0:if(!(r=_g(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(zu("SyncEngine","Adding an already active target "+a),[3,5]):[4,lp(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,sp(r.localStore,s)];case 3:return u=d.sent(),[4,Hv(r,gg(s),u.targetId,!1)];case 4:d.sent(),Zp(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(e){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,up(r.localStore,e,!1).then((function(){ev(r.remoteStore,e),rg(r,e)})).catch(Nd)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function _g(e){var t=$u(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xv.bind(null,t),t.vo._r=Pv.bind(null,t.eventManager),t.vo.Mo=Rv.bind(null,t.eventManager),t}function wg(e){var t=$u(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zv.bind(null,t),t}function Tg(e,t,n){var r=$u(e);(function(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,wi.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=c.sent(),[4,function(e,t){var n=$u(e),r=Fh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ke.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,r)];case 2:return c.sent()?[4,t.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(jv(r)),i=new Fv(r,e.localStore,t.R),[4,t.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,ug(e,s.wn,void 0)];case 12:return c.sent(),[4,function(e,t){var n=$u(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return Hu("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Ig=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return this.R=Kp(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return ep(this.persistence,new Jd,e.initialUser,this.R)},e.prototype.qo=function(e){return new Tp(Ep.bs,this.R)},e.prototype.Bo=function(e){return new Lp},e.prototype.terminate=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),Eg=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,wi.__extends)(t,e),t.prototype.initialize=function(t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,fp(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,wg(this.Qo.syncEngine)];case 4:return r.sent(),[4,fv(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},t.prototype.Ko=function(e){return ep(this.persistence,new Jd,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Pd(t,e.asyncQueue)},t.prototype.qo=function(e){var t=Qd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vd.withCacheSize(this.cacheSizeBytes):vd.DEFAULT;return new Wd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Vp(),Bp(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new Lp},t}(Ig),Sg=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,wi.__extends)(t,e),t.prototype.initialize=function(t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Dp?(this.sharedClientState.syncEngine={ui:dg.bind(null,n),ai:yg.bind(null,n),hi:bg.bind(null,n),fn:mg.bind(null,n),ci:fg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return(0,wi.__awaiter)(r,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return[4,pg(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=Vp();if(!Dp.yt(t))throw new Vu(qu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dp(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(Eg),kg=function(){function e(){}return e.prototype.initialize=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n=this;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return $v(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cg.bind(null,this.syncEngine),[4,bv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new Nv},e.prototype.createDatastore=function(e){var t,n=Kp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new qp(t));return function(e,t,n){return new Qp(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return $v(a.syncEngine,e,0)},o=Fp.yt()?new Fp:new Mp,new $p(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new zv(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t=$u(e),zu("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Jp(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();function Cg(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r;return(0,wi.__generator)(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ng=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Ag=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new Df,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Lv(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),xg=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vu(qu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return n=$u(e),r=zh(n.R)+"/documents",i={documents:t.map((function(e){return qh(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){Yu(!!t.found),t.found.name,t.found.updateTime;var n=Vh(e,t.found.name),r=Fh(t.found.updateTime),i=new jc({mapValue:{fields:t.found.fields}});return qc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Yu(!!t.missing),Yu(!!t.readTime);var n=Vh(e,t.missing),r=Fh(t.readTime);return qc.newNoDocument(n,r)}(e,t):Qu()}(n.R,e);a.set(t.key.toString(),t)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());Yu(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=Ic.fromPath(n);t.mutations.push(new rh(r,t.precondition(r)))})),[4,function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return n=$u(e),r=zh(n.R)+"/documents",i={writes:t.map((function(e){return Qh(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qu();t=rc.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Vu(qu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vl.updateTime(t):Vl.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rc.min()))throw new Vu(qu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vl.updateTime(t)}return Vl.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),Pg=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new zp(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return(0,wi.__awaiter)(e,void 0,void 0,(function(){var e,t,n=this;return(0,wi.__generator)(this,(function(r){return e=new xg(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!_c(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!oh(t)}return!1},e}(),Rg=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Sp.UNAUTHENTICATED,this.clientId=Ju.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return(0,wi.__awaiter)(r,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return zu("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vu(qu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Df;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,wi.__awaiter)(e,void 0,void 0,(function(){var e,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=Iv(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function Og(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i=this;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),zu("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return(0,wi.__awaiter)(i,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,tp(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function Dg(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Lg(e)];case 1:return n=i.sent(),zu("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return(n=$u(e)).asyncQueue.verifyOperationInProgress(),zu("RemoteStore","RemoteStore received new credentials"),r=ov(n),n.Or.add(3),[4,Jp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,Xp(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function Lg(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(zu("FirestoreClient","Using default OfflineComponentProvider"),[4,Og(e,new Ig)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function Mg(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(zu("FirestoreClient","Using default OnlineComponentProvider"),[4,Dg(e,new kg)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function Fg(e){return Lg(e).then((function(e){return e.persistence}))}function jg(e){return Lg(e).then((function(e){return e.localStore}))}function Ug(e){return Mg(e).then((function(e){return e.remoteStore}))}function qg(e){return Mg(e).then((function(e){return e.syncEngine}))}function Vg(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,Mg(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=Wv.bind(null,t.syncEngine),n.onUnlisten=Gv.bind(null,t.syncEngine),n)]}}))}))}function Bg(e,t,n){var r=this;void 0===n&&(n={});var i=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(r,void 0,void 0,(function(){var r;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Ng({next:function(o){t.enqueueAndForget((function(){return xv(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Vu(qu.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Vu(qu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new Dv(cl(n.path),o,{includeMetadataChanges:!0,so:!0});return Av(e,a)},[4,Vg(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function Kg(e,t,n){var r=this;void 0===n&&(n={});var i=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(r,void 0,void 0,(function(){var r;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Ng({next:function(n){t.enqueueAndForget((function(){return xv(e,a)})),n.fromCache&&"server"===r.source?i.reject(new Vu(qu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new Dv(n,o,{includeMetadataChanges:!0,so:!0});return Av(e,a)},[4,Vg(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var zg=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Wg=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Hg=new Map,Gg=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Qg=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(Sp.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Yg=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),$g=function(){function e(e){var t=this;this.currentUser=Sp.UNAUTHENTICATED,this.oc=new Df,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){zu("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(zu("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(zu("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Yu("string"==typeof n.accessToken),new Gg(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Yu(null===e||"string"==typeof e),new Sp(e)},e}(),Xg=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=Sp.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),Jg=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new Xg(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(Sp.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Zg(e,t,n){if(!n)throw new Vu(qu.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function em(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Vu(qu.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function tm(e,t,n,r){if(!0===t&&!0===r)throw new Vu(qu.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function nm(e){if(!Ic.isDocumentKey(e))throw new Vu(qu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function rm(e){if(Ic.isDocumentKey(e))throw new Vu(qu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function im(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Qu()}function om(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vu(qu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=im(e);throw new Vu(qu.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function am(e,t){if(t<=0)throw new Vu(qu.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var sm=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Vu(qu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Vu(qu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,tm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),um=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sm({}),this._settingsFrozen=!1,e instanceof Wg?(this._databaseId=e,this._credentials=new Qg):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vu(qu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wg(e.options.projectId)}(e),this._credentials=new $g(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Vu(qu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Vu(qu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sm(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Qg;switch(e.type){case"gapi":var t=e.client;return Yu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Jg(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Vu(qu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=Hg.get(this))&&(zu("ComponentProvider","Removing Datastore"),Hg.delete(this),e.terminate()),Promise.resolve();var e},e}(),cm=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new hm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),lm=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),hm=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,cl(r))||this)._path=r,i.type="collection",i}return(0,wi.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new cm(this.firestore,null,new Ic(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(lm);function fm(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,Ti.getModularInstance)(e),Zg("collection","path",t),e instanceof um)return rm(n=uc.fromString.apply(uc,(0,wi.__spreadArray)([t],r))),new hm(e,null,n);if(!(e instanceof cm||e instanceof hm))throw new Vu(qu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rm(n=uc.fromString.apply(uc,(0,wi.__spreadArray)([e.path],r)).child(uc.fromString(t))),new hm(e.firestore,null,n)}function dm(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,Ti.getModularInstance)(e),1===arguments.length&&(t=Ju.u()),Zg("doc","path",t),e instanceof um)return nm(n=uc.fromString.apply(uc,(0,wi.__spreadArray)([t],r))),new cm(e,null,new Ic(n));if(!(e instanceof cm||e instanceof hm))throw new Vu(qu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nm(n=e._path.child(uc.fromString.apply(uc,(0,wi.__spreadArray)([t],r)))),new cm(e.firestore,e instanceof hm?e.converter:null,new Ic(n))}function pm(e,t){return e=(0,Ti.getModularInstance)(e),t=(0,Ti.getModularInstance)(t),(e instanceof cm||e instanceof hm)&&(t instanceof cm||t instanceof hm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function vm(e,t){return e=(0,Ti.getModularInstance)(e),t=(0,Ti.getModularInstance)(t),e instanceof lm&&t instanceof lm&&e.firestore===t.firestore&&yl(e._query,t._query)&&e.converter===t.converter}var gm=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new zp(this,"async_queue_retry"),this.Ic=function(){var t=Bp();t&&zu("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=Bp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=Bp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Df;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!qf(e=n.sent()))throw e;return zu("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,Wu("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=Tv.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&Qu()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function mm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var ym=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Df,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),bm=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new gm,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return(0,wi.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||wm(this),this._firestoreClient.terminate()},t}(um);function _m(e){return e._firestoreClient||wm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wm(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new zg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Rg(e._credentials,e._queue,r)}function Tm(e,t,n){var r=this,i=new Df;return e.asyncQueue.enqueue((function(){return(0,wi.__awaiter)(r,void 0,void 0,(function(){var r;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Og(e,n)];case 1:return o.sent(),[4,Dg(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===qu.FAILED_PRECONDITION||e.code===qu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Im(e){if(e._initialized||e._terminated)throw new Vu(qu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Em=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new Vu(qu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lc(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Sm=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(fc.fromBase64String(t))}catch(t){throw new Vu(qu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(fc.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),km=function(e){this._methodName=e},Cm=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vu(qu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vu(qu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return Zu(this._lat,e._lat)||Zu(this._long,e._long)},e}(),Nm=/^__.*__$/,Am=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yl(e,this.data,t,this.fieldTransforms)},e}(),xm=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function Pm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qu()}}var Rm=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return Jm(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(Pm(this.Nc)&&Nm.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),Om=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||Kp(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new Rm({Nc:e,methodName:t,qc:n,path:lc.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Dm(e){var t=e._freezeSettings(),n=Kp(e._databaseId);return new Om(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lm(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);Qm("Data must be an object, but it was:",a,r);var s,u,c=Hm(r,a);if(o.merge)s=new hc(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ym(t,f[h],n);if(!a.contains(d))throw new Vu(qu.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Zm(l,d)||l.push(d)}s=new hc(l),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new Am(new jc(c),s,u)}var Mm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(km);function Fm(e,t,n){return new Rm({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype._toFieldTransform=function(e){return new Ul(e.path,new Pl)},t.prototype.isEqual=function(e){return e instanceof t},t}(km),Um=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,wi.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=Fm(this,e,!0),n=this.Kc.map((function(e){return Wm(e,t)})),r=new Rl(n);return new Ul(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(km),qm=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,wi.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=Fm(this,e,!0),n=this.Kc.map((function(e){return Wm(e,t)})),r=new Dl(n);return new Ul(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(km),Vm=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return(0,wi.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=new Ml(e.R,kl(e.R,this.Qc));return new Ul(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(km);function Bm(e,t,n,r){var i=e.Uc(1,t,n);Qm("Data must be an object, but it was:",i,r);var o=[],a=jc.empty();oc(r,(function(e,r){var s=Xm(t,e,n);r=(0,Ti.getModularInstance)(r);var u=i.Oc(s);if(r instanceof Mm)o.push(s);else{var c=Wm(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new hc(o);return new xm(a,s,i.fieldTransforms)}function Km(e,t,n,r,i,o){var a=e.Uc(1,t,n),s=[Ym(t,r,n)],u=[i];if(o.length%2!=0)throw new Vu(qu.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Ym(t,o[c])),u.push(o[c+1]);for(var l=[],h=jc.empty(),f=s.length-1;f>=0;--f)if(!Zm(l,s[f])){var d=s[f],p=u[f];p=(0,Ti.getModularInstance)(p);var v=a.Oc(d);if(p instanceof Mm)l.push(d);else{var g=Wm(p,v);null!=g&&(l.push(d),h.set(d,g))}}var m=new hc(l);return new xm(h,m,a.fieldTransforms)}function zm(e,t,n,r){return void 0===r&&(r=!1),Wm(n,e.Uc(r?4:3,t))}function Wm(e,t){if(Gm(e=(0,Ti.getModularInstance)(e)))return Qm("Unsupported field value:",t,e),Hm(e,t);if(e instanceof km)return function(e,t){if(!Pm(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=Wm(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Ti.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kl(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=nc.fromDate(e);return{timestampValue:Dh(t.R,n)}}if(e instanceof nc)return n=new nc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:Dh(t.R,n)};if(e instanceof Cm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sm)return{bytesValue:Lh(t.R,e._byteString)};if(e instanceof cm){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:jh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+im(e))}(e,t)}function Hm(e,t){var n={};return ac(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oc(e,(function(e,r){var i=Wm(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Gm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nc||e instanceof Cm||e instanceof Sm||e instanceof cm||e instanceof km)}function Qm(e,t,n){if(!Gm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=im(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function Ym(e,t,n){if((t=(0,Ti.getModularInstance)(t))instanceof Em)return t._internalPath;if("string"==typeof t)return Xm(e,t);throw Jm("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var $m=new RegExp("[~\\*/\\[\\]]");function Xm(e,t,n){if(t.search($m)>=0)throw Jm("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Em.bind.apply(Em,(0,wi.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(rb){throw Jm("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Jm(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Vu(qu.INVALID_ARGUMENT,(s+=". ")+e+u)}function Zm(e,t){return e.some((function(e){return e.isEqual(t)}))}var ey=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new cm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(ny("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),ty=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(ey);function ny(e,t){return"string"==typeof t?Xm(e,t):t instanceof Em?t._internalPath:t._delegate._internalPath}var ry=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),iy=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return(0,wi.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new oy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(ny("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(ey),oy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(iy),ay=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ry(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new oy(n._firestore,n._userDataWriter,r.key,r,new ry(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vu(qu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new oy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ry(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new oy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ry(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sy(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function sy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qu()}}function uy(e,t){return e instanceof iy&&t instanceof iy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ay&&t instanceof ay&&e._firestore===t._firestore&&vm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function cy(e){if(hl(e)&&0===e.explicitOrderBy.length)throw new Vu(qu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ly=function(){};function hy(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){e=i[r]._apply(e)}return e}var fy=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return(0,wi.__extends)(t,e),t.prototype._apply=function(e){var t=Dm(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vu(qu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){by(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(yy(r,e,h))}s={arrayValue:{values:u}}}else s=yy(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||by(a,o),s=zm(n,"where",a,"in"===o||"not-in"===o);var f=Hc.create(i,o,s);return function(e,t){if(t.g()){var n=dl(e);if(null!==n&&!n.isEqual(t.field))throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=fl(e);null!==r&&_y(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Vu(qu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Vu(qu.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new lm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(ly),dy=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return(0,wi.__extends)(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rl(t,n);return function(e,t){if(null===fl(e)){var n=dl(e);null!==n&&_y(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new lm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new sl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(ly),py=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return(0,wi.__extends)(t,e),t.prototype._apply=function(e){return new lm(e.firestore,e.converter,ml(e._query,this.Hc,this.Jc))},t}(ly),vy=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,wi.__extends)(t,e),t.prototype._apply=function(e){var t=my(e,this.type,this.Yc,this.Xc);return new lm(e.firestore,e.converter,function(e,t){return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(ly),gy=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,wi.__extends)(t,e),t.prototype._apply=function(e){var t=my(e,this.type,this.Yc,this.Xc);return new lm(e.firestore,e.converter,function(e,t){return new sl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(ly);function my(e,t,n,r){if(n[0]=(0,Ti.getModularInstance)(n[0]),n[0]instanceof ey)return function(e,t,n,r,i){if(!r)throw new Vu(qu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=vl(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Pc(t,r.key));else{var c=r.data.field(u.field);if(mc(c))throw new Vu(qu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new tl(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Dm(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new Vu(qu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!pl(e)&&-1!==c.indexOf("/"))throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(uc.fromString(c));if(!Ic.isDocumentKey(l))throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ic(l);s.push(Pc(t,h))}else{var f=zm(n,r,c);s.push(f)}}return new tl(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function yy(e,t,n){if("string"==typeof(n=(0,Ti.getModularInstance)(n))){if(""===n)throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!pl(t)&&-1!==n.indexOf("/"))throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(uc.fromString(n));if(!Ic.isDocumentKey(r))throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Pc(e,new Ic(r))}if(n instanceof cm)return Pc(e,n._key);throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+im(n)+".")}function by(e,t){if(!Array.isArray(e)||0===e.length)throw new Vu(qu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Vu(qu.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function _y(e,t,n){if(!n.isEqual(t))throw new Vu(qu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var wy=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),Ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qu()}},e.prototype.convertObject=function(e,t){var n=this,r={};return oc(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Cm(vc(e.latitude),vc(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=yc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bc(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=pc(e);return new nc(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=uc.fromString(e);Yu(lf(n));var r=new Wg(n.get(1),n.get(3)),i=new Ic(n.popFirst(5));return r.isEqual(t)||Wu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function Ty(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Iy=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,wi.__extends)(t,e),t.prototype.convertBytes=function(e){return new Sm(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new cm(this.firestore,null,t)},t}(wy),Ey=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dm(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=Sy(e,this._firestore),i=Ty(r.converter,t,n),o=Lm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Vl.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Sy(e,this._firestore);return o="string"==typeof(t=(0,Ti.getModularInstance)(t))||t instanceof Em?Km(this._dataReader,"WriteBatch.update",a._key,t,n,r):Bm(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,Vl.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=Sy(e,this._firestore);return this._mutations=this._mutations.concat(new nh(t._key,Vl.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vu(qu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function Sy(e,t){if((e=(0,Ti.getModularInstance)(e)).firestore!==t)throw new Vu(qu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ky=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,wi.__extends)(t,e),t.prototype.convertBytes=function(e){return new Sm(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new cm(this.firestore,null,t)},t}(wy);function Cy(e,t,n){e=om(e,cm);var r=om(e.firestore,bm),i=Ty(e.converter,t,n);return xy(r,[Lm(Dm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vl.none())])}function Ny(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=om(e,cm);var o=om(e.firestore,bm),a=Dm(o);return xy(o,[("string"==typeof(t=(0,Ti.getModularInstance)(t))||t instanceof Em?Km(a,"updateDoc",e._key,t,n,r):Bm(a,"updateDoc",e._key,t)).toMutation(e._key,Vl.exists(!0))])}function Ay(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=(0,Ti.getModularInstance)(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||mm(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(mm(i[s])){var f=i[s];i[s]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof cm)c=om(e.firestore,bm),l=cl(e._key.path),u={next:function(t){i[s]&&i[s](Py(c,e,t))},error:i[s+1],complete:i[s+2]};else{var d=om(e,lm);c=om(d.firestore,bm),l=d._query;var p=new ky(c);u={next:function(e){i[s]&&i[s](new ay(c,p,d,e))},error:i[s+1],complete:i[s+2]},cy(e._query)}return function(e,t,n,r){var i=this,o=new Ng(r),a=new Dv(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(i,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t=Av,[4,Vg(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(i,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t=xv,[4,Vg(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(_m(c),l,h,u)}function xy(e,t){return function(e,t){var n=this,r=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return n=Qv,[4,qg(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(_m(e),t)}function Py(e,t,n){var r=n.docs.get(t._key),i=new ky(e);return new iy(e,i,t._key,r,new ry(n.hasPendingWrites,n.fromCache),t.converter)}var Ry=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return(0,wi.__extends)(t,e),t.prototype.get=function(t){var n=this,r=Sy(t,this._firestore),i=new ky(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new iy(n._firestore,i,r._key,e._document,new ry(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dm(e)}return e.prototype.get=function(e){var t=this,n=Sy(e,this._firestore),r=new Iy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Qu();var i=e[0];if(i.isFoundDocument())return new ey(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ey(t._firestore,r,n._key,null,n.converter);throw Qu()}))},e.prototype.set=function(e,t,n){var r=Sy(e,this._firestore),i=Ty(r.converter,t,n),o=Lm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Sy(e,this._firestore);return o="string"==typeof(t=(0,Ti.getModularInstance)(t))||t instanceof Em?Km(this._dataReader,"Transaction.update",a._key,t,n,r):Bm(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=Sy(e,this._firestore);return this._transaction.delete(t._key),this},e}());function Oy(){if("undefined"==typeof Uint8Array)throw new Vu(qu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Dy(){if("undefined"==typeof atob)throw new Vu(qu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ly=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return Dy(),new e(Sm.fromBase64String(t))},e.fromUint8Array=function(t){return Oy(),new e(Sm.fromUint8Array(t))},e.prototype.toBase64=function(){return Dy(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Oy(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),My=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Im(e=om(e,bm));var n=_m(e),r=e._freezeSettings(),i=new kg;return Tm(n,i,new Eg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Im(e=om(e,bm));var t=_m(e),n=e._freezeSettings(),r=new kg;return Tm(t,r,new Sg(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new Vu(qu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Df;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return Ff.yt()?(t=e+"main",[4,Ff.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Qd(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),Fy=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof Wg||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Hu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){var i;void 0===r&&(r={});var o=(e=om(e,um))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Hu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=Sp.MOCK_USER;else{a=(0,Ti.createMockUserToken)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Vu(qu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Sp(u)}e._credentials=new Yg(new Gg(a,s))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,Fg(e)];case 1:return t=r.sent(),[4,Ug(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=$u(e);return t.Or.delete(0),Xp(t)}(n))]}}))}))}))}(_m(om(this._delegate,bm)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,Fg(e)];case 1:return t=r.sent(),[4,Ug(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return(t=$u(e)).Or.add(0),[4,Jp(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(_m(om(this._delegate,bm)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&tm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(t,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return t=eg,[4,qg(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(_m(om(this._delegate,bm)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new Ng(t);return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t=function(e,t){$u(e).Gr.add(t),t.next()},[4,Vg(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t=function(e,t){$u(e).Gr.delete(t)},[4,Vg(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(_m(e=om(e,bm)),mm(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new Vu(qu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Xy(this,fm(this._delegate,e))}catch(e){throw Ky(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new By(this,dm(this._delegate,e))}catch(e){throw Ky(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new Qy(this,function(e,t){if(e=om(e,um),Zg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Vu(qu.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new lm(e,null,function(e){return new sl(uc.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Ky(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,function(e){return Mg(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new Pg(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(_m(e),(function(n){return t(new Ry(e,n))}))}(this._delegate,(function(n){return e(new Uy(t,n))}))},e.prototype.batch=function(){var e=this;return _m(this._delegate),new qy(new Ey(this._delegate,(function(t){return xy(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new Vu(qu.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new Vu(qu.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),jy=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,wi.__extends)(t,e),t.prototype.convertBytes=function(e){return new Ly(new Sm(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return By.eu(t,this.firestore,null)},t}(wy);var Uy=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jy(e)}return e.prototype.get=function(e){var t=this,n=Jy(e);return this._delegate.get(n).then((function(e){return new Hy(t._firestore,new iy(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Jy(e);return n?(em("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Jy(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,(0,wi.__spreadArray)([a,t,n],i)),this},e.prototype.delete=function(e){var t=Jy(e);return this._delegate.delete(t),this},e}(),qy=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Jy(e);return n?(em("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Jy(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,(0,wi.__spreadArray)([a,t,n],i)),this},e.prototype.delete=function(e){var t=Jy(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Vy=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new oy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gy(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new jy(t),n),i.set(n,o)),o},e}();Vy.su=new WeakMap;var By=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jy(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new Vu(qu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new cm(n._delegate,r,new Ic(t)))},e.eu=function(t,n,r){return new e(n,new cm(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Xy(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Xy(this.firestore,fm(this._delegate,e))}catch(e){throw Ky(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,Ti.getModularInstance)(e))instanceof cm&&pm(this._delegate,e)},e.prototype.set=function(e,t){t=em("DocumentReference.set",t);try{return t?Cy(this._delegate,e,t):Cy(this._delegate,e)}catch(e){throw Ky(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ny(this._delegate,e):Ny.apply(void 0,(0,wi.__spreadArray)([this._delegate,e,t],n))}catch(e){throw Ky(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return xy(om((e=this._delegate).firestore,bm),[new nh(e._key,Vl.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=zy(t),i=Wy(t,(function(t){return new Hy(e.firestore,new iy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ay(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=om(e,cm);var t=om(e.firestore,bm),n=_m(t),r=new ky(t);return function(e,t){var n=this,r=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=$u(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Vu(qu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Iv(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,jg(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new iy(t,r,e._key,n,new ry(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=om(e,cm);var t=om(e.firestore,bm);return Bg(_m(t),e._key,{source:"server"}).then((function(n){return Py(t,e,n)}))}(this._delegate):function(e){e=om(e,cm);var t=om(e.firestore,bm);return Bg(_m(t),e._key).then((function(n){return Py(t,e,n)}))}(this._delegate)).then((function(e){return new Hy(t.firestore,new iy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Vy.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function Ky(e,t,n){return e.message=e.message.replace(t,n),e}function zy(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!mm(r))return r}return{}}function Wy(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=mm(e[0])?e[0]:mm(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Hy=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new By(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return uy(this._delegate,e._delegate)},e}(),Gy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,wi.__extends)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(Hy),Qy=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jy(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,hy(this._delegate,function(e,t,n){var r=t,i=ny("where",e);return new fy(i,r,n)}(t,n,r)))}catch(t){throw Ky(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,hy(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=ny("orderBy",e);return new dy(r,n)}(t,n)))}catch(t){throw Ky(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,hy(this._delegate,function(e){return am("limit",e),new py("limit",e,"F")}(t)))}catch(t){throw Ky(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,hy(this._delegate,function(e){return am("limitToLast",e),new py("limitToLast",e,"L")}(t)))}catch(t){throw Ky(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,hy(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new vy("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw Ky(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,hy(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new vy("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw Ky(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,hy(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new gy("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw Ky(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,hy(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new gy("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw Ky(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return vm(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=om(e,lm);var t=om(e.firestore,bm),n=_m(t),r=new ky(t);return function(e,t){var n=this,r=new Df;return e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,cp(e,t,!0)];case 1:return s=u.sent(),r=new Vv(t,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Iv(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,jg(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new ay(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=om(e,lm);var t=om(e.firestore,bm),n=_m(t),r=new ky(t);return Kg(n,e._query,{source:"server"}).then((function(n){return new ay(t,r,e,n)}))}(this._delegate):function(e){e=om(e,lm);var t=om(e.firestore,bm),n=_m(t),r=new ky(t);return cy(e._query),Kg(n,e._query).then((function(n){return new ay(t,r,e,n)}))}(this._delegate)).then((function(e){return new $y(t.firestore,new ay(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=zy(t),i=Wy(t,(function(t){return new $y(e.firestore,new ay(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ay(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Vy.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),Yy=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Gy(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),$y=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new Qy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new Gy(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Yy(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Gy(n._firestore,r))}))},e.prototype.isEqual=function(e){return uy(this._delegate,e._delegate)},e}(),Xy=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return(0,wi.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new By(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new By(this.firestore,void 0===e?dm(this._delegate):dm(this._delegate,e))}catch(e){throw Ky(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=om(e.firestore,bm),r=dm(e),i=Ty(e.converter,t);return xy(n,[Lm(Dm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new By(t.firestore,e)}))},t.prototype.isEqual=function(e){return pm(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Vy.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(Qy);function Jy(e){return om(e,cm)}var Zy=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Em.bind.apply(Em,(0,wi.__spreadArray)([void 0],e)))}return e.documentId=function(){return new e(lc.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,Ti.getModularInstance)(e))instanceof Em&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),eb=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new jm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Mm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Um("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new qm("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new Vm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();function tb(e){return function(e,t){var n=_m(e=om(e,bm)),r=new ym;return function(e,t,n,r){var i=this,o=function(e,t){return function(e,t){return new Ag(e,t)}(function(e,t){if(e instanceof Uint8Array)return Cg(e,t);if(e instanceof ArrayBuffer)return Cg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Kp(t));e.asyncQueue.enqueueAndForget((function(){return(0,wi.__awaiter)(i,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return t=Tg,[4,qg(e)];case 1:return t.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,e._databaseId,t,r),r}(this._delegate,e)}function nb(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return(0,wi.__awaiter)(n,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=$u(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,jg(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(_m(t=om(t,bm)),n).then((function(e){return e?new lm(t,null,e.query):null}))).then((function(e){return e?new Qy(r,e):null}))}var rb,ib,ob=n(826),ab={Firestore:Fy,GeoPoint:Cm,Timestamp:nc,Blob:Ly,Transaction:Uy,WriteBatch:qy,DocumentReference:By,DocumentSnapshot:Hy,Query:Qy,QueryDocumentSnapshot:Gy,QuerySnapshot:$y,CollectionReference:Xy,FieldPath:Zy,FieldValue:eb,setLogLevel:function(e){var t;t=e,Bu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ob.Component("firestore",(function(e){return function(e,t){return new Fy(e,new bm(e,t),new My)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},ab)))})(rb=_i.default),rb.registerVersion("@firebase/firestore","2.4.1"),(ib=Fy).prototype.loadBundle=tb,ib.prototype.namedQuery=nb;var sb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ub=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,wi.__extends)(t,e),t}(Error);var cb=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function lb(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var hb=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return lb(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?lb(e,(function(e){return t.decode(e)})):e},e}();var fb=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new hb,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new cb(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(rb){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,d;return(0,wi.__generator)(this,(function(p){switch(p.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=p.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new ub("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([db(c,this.postJSON(r,i,o)),l,db(c,this.cancelAllRequests)])];case 2:if(!(h=p.sent()))throw new ub("cancelled","Firebase Functions instance was deleted.");if(f=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!sb[s])return new ub("internal","internal");r=sb[s],i=s}var u=a.message;"string"===typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(rb){}return"ok"===r?null:new ub(r,i,o)}(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new ub("internal","Response is not valid JSON object.");if("undefined"===typeof(d=h.json.data)&&(d=h.json.result),"undefined"===typeof d)throw new ub("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},e}();function db(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}var pb="functions";!function(e,t){var n={Functions:fb};e.INTERNAL.registerComponent(new ob.Component(pb,(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new fb(i,o,s,a,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(_i.default,fetch.bind(self)),_i.default.registerVersion("@firebase/functions","0.6.16");var vb,gb=n(348),mb="@firebase/installations",yb="0.4.32",bb=1e4,_b="w:"+yb,wb="FIS_v2",Tb="https://firebaseinstallations.googleapis.com/v1",Ib=36e5,Eb=((vb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vb["not-registered"]="Firebase Installation is not registered.",vb["installation-not-found"]="Firebase Installation not found.",vb["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',vb["app-offline"]="Could not process request. Application offline.",vb["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",vb),Sb=new Ti.ErrorFactory("installations","Installations",Eb);function kb(e){return e instanceof Ti.FirebaseError&&e.code.includes("request-failed")}function Cb(e){var t=e.projectId;return Tb+"/projects/"+t+"/installations"}function Nb(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Ab(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Sb.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function xb(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pb(e,t){var n=t.refreshToken,r=xb(e);return r.append("Authorization",function(e){return wb+" "+e}(n)),r}function Rb(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function Ob(e,t){var n=t.fid;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return t=Cb(e),r=xb(e),i={fid:n,authVersion:wb,appId:e.appId,sdkVersion:_b},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,Rb((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Nb(s.authToken)}];case 3:return[4,Ab("Create Installation",a)];case 4:throw u.sent()}}))}))}function Db(e){return new Promise((function(t){setTimeout(t,e)}))}var Lb=/^[cdef][\w-]{21}$/,Mb="";function Fb(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,(0,wi.__spreadArray)([],(0,wi.__read)(n)))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Lb.test(t)?t:Mb}catch(Lm){return Mb}}function jb(e){return e.appName+"!"+e.appId}var Ub=new Map;function qb(e,t){var n=jb(e);Vb(n,t),function(e,t){var n=Kb();n&&n.postMessage({key:e,fid:t});zb()}(n,t)}function Vb(e,t){var n,r,i=Ub.get(e);if(i)try{for(var o=(0,wi.__values)(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Bb=null;function Kb(){return!Bb&&"BroadcastChannel"in self&&((Bb=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Vb(e.data.key,e.data.fid)}),Bb}function zb(){0===Ub.size&&Bb&&(Bb.close(),Bb=null)}var Wb,Hb,Gb="firebase-installations-database",Qb=1,Yb="firebase-installations-store",$b=null;function Xb(){return $b||($b=(0,gb.openDb)(Gb,Qb,(function(e){if(0===e.oldVersion)e.createObjectStore(Yb)}))),$b}function Jb(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return n=jb(e),[4,Xb()];case 1:return r=s.sent(),i=r.transaction(Yb,"readwrite"),[4,(o=i.objectStore(Yb)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||qb(e,t.fid),[2,t]}}))}))}function Zb(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return t=jb(e),[4,Xb()];case 1:return n=i.sent(),[4,(r=n.transaction(Yb,"readwrite")).objectStore(Yb).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function e_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return n=jb(e),[4,Xb()];case 1:return r=u.sent(),i=r.transaction(Yb,"readwrite"),[4,(o=i.objectStore(Yb)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||qb(e,s.fid),[2,s]}}))}))}function t_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,e_(e,(function(n){var r=function(e){var t=e||{fid:Fb(),registrationStatus:0};return i_(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Sb.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Ob(e,t)];case 1:return n=i.sent(),[2,Jb(e,n)];case 2:return kb(r=i.sent())&&409===r.customData.serverCode?[4,Zb(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Jb(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:n_(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==Mb?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function n_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return[4,r_(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,Db(100)];case 3:return o.sent(),[4,r_(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,t_(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function r_(e){return e_(e,(function(e){if(!e)throw Sb.create("installation-not-found");return i_(e)}))}function i_(e){return 1===(t=e).registrationStatus&&t.registrationTime+bb<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function o_(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return(0,wi.__generator)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return Cb(e)+"/"+n+"/authTokens:generate"}(n,t),i=Pb(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:_b}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,Rb((function(){return fetch(e,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,Nb(c)];case 3:return[4,Ab("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function a_(e,t){return void 0===t&&(t=!1),(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return[4,e_(e.appConfig,(function(r){if(!u_(r))throw Sb.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ib}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,s_(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Db(100)];case 3:return i.sent(),[4,s_(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,a_(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw Sb.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return(0,wi.__assign)((0,wi.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,o_(e,t)];case 1:return n=o.sent(),i=(0,wi.__assign)((0,wi.__assign)({},t),{authToken:n}),[4,Jb(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!kb(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Zb(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,wi.__assign)((0,wi.__assign)({},t),{authToken:{requestStatus:0}}),[4,Jb(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function s_(e){return e_(e,(function(e){if(!u_(e))throw Sb.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+bb<Date.now()?(0,wi.__assign)((0,wi.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function u_(e){return void 0!==e&&2===e.registrationStatus}function c_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return[4,t_(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function l_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return Cb(e)+"/"+n}(e,t),r=Pb(e,t),i={method:"DELETE",headers:r},[4,Rb((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,Ab("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function h_(e,t){var n=e.appConfig;return function(e,t){Kb();var n=jb(e),r=Ub.get(n);r||(r=new Set,Ub.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=jb(e),r=Ub.get(n);r&&(r.delete(t),0===r.size&&Ub.delete(n),zb())}(n,t)}}function f_(e){return Sb.create("missing-app-config-values",{valueName:e})}(Wb=_i.default).INTERNAL.registerComponent(new ob.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw f_("App Configuration");if(!e.name)throw f_("App Name");try{for(var r=(0,wi.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw f_(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r={appConfig:n,platformLoggerProvider:e.getProvider("platform-logger")},i={app:t,getId:function(){return function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,t_(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):a_(e).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return[4,c_(e.appConfig)];case 1:return n.sent(),[4,a_(e,t)];case 2:return[2,n.sent().token]}}))}))}(r,e)},delete:function(){return function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,e_(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Sb.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Sb.create("app-offline");case 3:return[4,l_(t,n)];case 4:return r.sent(),[4,Zb(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(e){return h_(r,e)}};return i}),"PUBLIC")),Wb.registerVersion(mb,yb);var d_,p_=((Hb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Hb["only-available-in-window"]="This method is available in a Window context.",Hb["only-available-in-sw"]="This method is available in a service worker context.",Hb["permission-default"]="The notification permission was not granted and dismissed instead.",Hb["permission-blocked"]="The notification permission was not granted and blocked instead.",Hb["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Hb["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Hb["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Hb["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Hb["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Hb["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Hb["token-update-no-token"]="FCM returned no token when updating the user to push.",Hb["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Hb["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Hb["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Hb["invalid-vapid-key"]="The public VAPID key must be a string.",Hb["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Hb),v_=new Ti.ErrorFactory("messaging","Messaging",p_),g_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",m_="https://fcmregistrations.googleapis.com/v1",y_="FCM_MSG",b_="google.c.a.c_id";function __(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,wi.__spreadArray)([],(0,wi.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function w_(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(d_||(d_={}));var T_="fcm_token_details_db",I_=5,E_="fcm_token_object_Store";function S_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i=this;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=o.sent(),n=t.map((function(e){return e.name})),!n.includes(T_))return[2,null];o.label=2;case 2:return r=null,[4,(0,gb.openDb)(T_,I_,(function(t){return(0,wi.__awaiter)(i,void 0,void 0,(function(){var n,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(E_)?[4,(n=t.transaction.objectStore(E_)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:__(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(r={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:__(o.auth),p256dh:__(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:__(o.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,(0,gb.deleteDb)(T_)];case 4:return o.sent(),[4,(0,gb.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,(0,gb.deleteDb)("undefined")];case 6:return o.sent(),[2,k_(r)?r:null]}}))}))}function k_(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var C_="firebase-messaging-database",N_=1,A_="firebase-messaging-store",x_=null;function P_(){return x_||(x_=(0,gb.openDb)(C_,N_,(function(e){if(0===e.oldVersion)e.createObjectStore(A_)}))),x_}function R_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return t=L_(e),[4,P_()];case 1:return[4,i.sent().transaction(A_).objectStore(A_).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,S_(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,O_(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function O_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return n=L_(e),[4,P_()];case 1:return r=o.sent(),[4,(i=r.transaction(A_,"readwrite")).objectStore(A_).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function D_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return t=L_(e),[4,P_()];case 1:return n=i.sent(),[4,(r=n.transaction(A_,"readwrite")).objectStore(A_).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function L_(e){return e.appConfig.appId}function M_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return[4,q_(e)];case 1:n=u.sent(),r=V_(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(U_(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),v_.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,v_.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw v_.create("token-subscribe-no-token");return[2,o.token]}}))}))}function F_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return[4,q_(e)];case 1:n=u.sent(),r=V_(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(U_(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),v_.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,v_.create("token-update-failed",{errorInfo:s});if(!o.token)throw v_.create("token-update-no-token");return[2,o.token]}}))}))}function j_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return[4,q_(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(U_(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,v_.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),v_.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function U_(e){var t=e.projectId;return m_+"/projects/"+t+"/registrations"}function q_(e){var t=e.appConfig,n=e.installations;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function V_(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==g_&&(o.web.applicationPubKey=i),o}var B_=6048e5;function K_(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw v_.create("permission-blocked");return[4,G_(t,n)];case 1:return r=s.sent(),[4,R_(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:__(r.getKey("auth")),p256dh:__(r.getKey("p256dh"))},i?[3,3]:[2,H_(e,o)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,j_(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,H_(e,o)];case 8:return Date.now()>=i.createTime+B_?[2,W_({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function z_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,R_(e)];case 1:return(n=i.sent())?[4,j_(e,n.token)]:[3,4];case 2:return i.sent(),[4,D_(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function W_(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,F_(t,e)];case 1:return r=a.sent(),i=(0,wi.__assign)((0,wi.__assign)({},e),{token:r,createTime:Date.now()}),[4,O_(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,z_(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function H_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,M_(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,O_(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function G_(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:w_(t)})]}}))}))}function Q_(e){return"object"===typeof e&&!!e&&b_ in e}function Y_(e){return new Promise((function(t){setTimeout(t,e)}))}var $_=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw v_.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,R_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:g_,r.label=2;case 2:return[2,K_(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return z_(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw v_.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw v_.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw v_.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw v_.create("only-available-in-window")},e.prototype.onMessage=function(){throw v_.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw v_.create("only-available-in-window")},e.prototype.onPush=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e),t?[4,ew()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Z_(n,t)]:(r=!1,t.notification?[4,tw(X_(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Y_(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,z_(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,R_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,z_(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,K_(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:g_)]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[y_])?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Q_(e.data)?self.location.origin:null}(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,J_(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,Y_(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=d_.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function X_(e){var t,n=(0,wi.__assign)({},e.notification);return n.data=((t={})[y_]=e,t),n}function J_(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return[4,ew()];case 1:t=u.sent();try{for(n=(0,wi.__values)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function Z_(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=d_.PUSH_RECEIVED;try{for(var i=(0,wi.__values)(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function ew(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function tw(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var nw=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===d_.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),Q_(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw v_.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,K_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=g_),[2]}))}))},e.prototype.updateSwReg=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw v_.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),v_.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,z_(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?v_.create("permission-blocked"):v_.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw v_.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw v_.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw v_.create("invalid-sw-registration");if(this.swRegistration)throw v_.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw v_.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw v_.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case d_.NOTIFICATION_CLICKED:return"notification_open";case d_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t[b_],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function rw(e){return v_.create("missing-app-config-values",{valueName:e})}var iw={isSupported:ow};function ow(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}_i.default.INTERNAL.registerComponent(new ob.Component("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n=function(e){var t,n;if(!e||!e.options)throw rw("App Configuration Object");if(!e.name)throw rw("App Name");var r=e.options;try{for(var i=(0,wi.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw rw(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),r={app:t,appConfig:n,installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!ow())throw v_.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new $_(r):new nw(r)}),"PUBLIC").setServiceProps(iw));var aw="firebasestorage.googleapis.com",sw="storageBucket",uw=12e4,cw=6e5,lw=function(e){function t(n,r){var i=e.call(this,hw(n),"Firebase Storage: "+r+" ("+hw(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,wi.__extends)(t,e),t.prototype._codeEquals=function(e){return hw(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(Ti.FirebaseError);function hw(e){return"storage/"+e}function fw(){return new lw("unknown","An unknown error occurred, please check the error payload for server response.")}function dw(){return new lw("canceled","User canceled the upload/download.")}function pw(){return new lw("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function vw(e){return new lw("invalid-argument",e)}function gw(){return new lw("app-deleted","The Firebase app was deleted.")}function mw(e){return new lw("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yw(e,t){return new lw("invalid-format","String does not match format '"+e+"': "+t)}function bw(e){throw new lw("internal-error","Internal error: "+e)}var _w={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ww=function(e,t){this.data=e,this.contentType=t||null};function Tw(e,t){switch(e){case _w.RAW:return new ww(Iw(t));case _w.BASE64:case _w.BASE64URL:return new ww(Ew(e,t));case _w.DATA_URL:return new ww(function(e){var t=new Sw(e);return t.base64?Ew(_w.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(rb){throw yw(_w.DATA_URL,"Malformed data URL.")}return Iw(t)}(t.rest)}(t),new Sw(t).contentType)}throw fw()}function Iw(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ew(e,t){switch(e){case _w.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw yw(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _w.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw yw(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(rb){throw yw(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Sw=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw yw(_w.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)};var kw,Cw={STATE_CHANGED:"state_changed"},Nw={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Aw(e){switch(e){case"running":case"pausing":case"canceling":return Nw.RUNNING;case"paused":return Nw.PAUSED;case"success":return Nw.SUCCESS;case"canceled":return Nw.CANCELED;default:return Nw.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(kw||(kw={}));var xw=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=kw.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=kw.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=kw.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw bw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw bw("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw bw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(rb){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw bw("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();var Pw=function(){function e(){}return e.prototype.createConnection=function(){return new xw},e}(),Rw=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(rb){return new e(t,"")}if(""===r.path)return r;throw new lw("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===aw?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new lw("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),Ow=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function Dw(e){return"string"===typeof e||e instanceof String}function Lw(e){return Mw()&&e instanceof Blob}function Mw(){return"undefined"!==typeof Blob}function Fw(e,t,n,r){if(r<t)throw vw("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw vw("Invalid value for '"+e+"'. Expected "+n+" or less.")}function jw(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function Uw(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}var qw=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());!function(e){return void 0!==e}(s)?i():i(s)}catch(rb){o(rb)}else null!==a?((r=fw()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?gw():dw()):o(r=new lw("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Vw(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(e||s()||o?c.call.apply(c,(0,wi.__spreadArray)([null,e],n)):(r<64&&(r*=2),1===a?(a=2,t=0):t=1e3*(r+Math.random()),l(t)))}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new Vw(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===kw.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new Vw(a,r))}else{var s=r.getErrorCode()===kw.ABORT;t(!1,new Vw(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),Vw=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};function Bw(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Kw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Bw();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(Mw())return new Blob(e);throw new lw("unsupported-environment","This browser doesn't seem to support creating Blobs")}var zw=function(){function e(e,t){var n=0,r="";Lw(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Lw(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Mw()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(Kw.apply(null,r))}var i=t.map((function(e){return Dw(e)?Tw(_w.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function Ww(e){var t;try{t=JSON.parse(e)}catch(rb){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Hw(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Gw(e,t){return t}var Qw=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Gw},Yw=null;function $w(){if(Yw)return Yw;var e=[];e.push(new Qw("bucket")),e.push(new Qw("generation")),e.push(new Qw("metageneration")),e.push(new Qw("name","fullPath",!0));var t=new Qw("name");t.xform=function(e,t){return function(e){return!Dw(e)||e.length<2?e:Hw(e)}(t)},e.push(t);var n=new Qw("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Qw("timeCreated")),e.push(new Qw("updated")),e.push(new Qw("md5Hash",null,!0)),e.push(new Qw("cacheControl",null,!0)),e.push(new Qw("contentDisposition",null,!0)),e.push(new Qw("contentEncoding",null,!0)),e.push(new Qw("contentLanguage",null,!0)),e.push(new Qw("contentType",null,!0)),e.push(new Qw("metadata","customMetadata",!0)),Yw=e}function Xw(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Rw(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Jw(e,t,n){var r=Ww(t);return null===r?null:Xw(e,r,n)}function Zw(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var eT="prefixes",tT="items";function nT(e,t,n){var r=Ww(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[eT])for(var i=0,o=n[eT];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new Rw(t,a));r.prefixes.push(s)}if(n[tT])for(var u=0,c=n[tT];u<c.length;u++){var l=c[u];s=e._makeStorageReference(new Rw(t,l.name)),r.items.push(s)}return r}(e,t,r)}var rT=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function iT(e){if(!e)throw fw()}function oT(e,t){return function(n,r){var i=Jw(e,r,t);return iT(null!==i),i}}function aT(e,t){return function(n,r){var i=Jw(e,r,t);return iT(null!==i),function(e,t,n){var r=Ww(t);if(null===r)return null;if(!Dw(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return jw("/b/"+o(r)+"/o/"+o(i),n)+Uw({alt:"media",token:t})}))[0]}(i,r,e.host)}}function sT(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new lw("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new lw("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new lw("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new lw("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function uT(e){var t=sT(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new lw("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function cT(e,t,n){var r=jw(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new rT(r,"GET",oT(e,n),i);return o.errorHandler=uT(t),o}function lT(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=jw(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new rT(a,"GET",function(e,t){return function(n,r){var i=nT(e,t,r);return iT(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=sT(t),u}function hT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var fT=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function dT(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(rb){iT(!1)}return iT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var pT=262144;function vT(e,t,n,r,i,o,a,s){var u=new fT(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new lw("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,f);if(null===p)throw pw();var v=t.maxUploadRetryTime,g=new rT(n,"POST",(function(e,n){var i,a=dT(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?oT(t,o)(e,n):null,new fT(s,c,"final"===a,i)}),v);return g.headers=d,g.body=p.uploadData(),g.progressCallback=s||null,g.errorHandler=sT(e),g}var gT=function(e,t,n){var r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}};function mT(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var yT=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=$w(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=hT(t,r,i),s={name:a.fullPath},u=jw(o,e.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Zw(a,n),h=e.maxUploadRetryTime,f=new rT(u,"POST",(function(e){var t;dT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(rb){iT(!1)}return iT(Dw(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=sT(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new rT(n,"POST",(function(e){var t=dT(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(rb){iT(!1)}n||iT(!1);var i=Number(n);return iT(!isNaN(i)),new fT(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=sT(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=pT*this._chunkMultiplier,n=new fT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=vT(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(rb){return e._error=rb,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){pT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=cT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=hT(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zw(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=zw.getBlob(c,r,l);if(null===h)throw pw();var f={name:u.fullPath},d=jw(o,e.host),p=e.maxUploadRetryTime,v=new rT(d,"POST",oT(e,n),p);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=sT(t),v}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dw(),this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=Aw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new gT(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(Aw(this._state)){case Nw.SUCCESS:mT(this._resolve.bind(null,this.snapshot))();break;case Nw.CANCELED:case Nw.ERROR:mT(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(Aw(this._state)){case Nw.RUNNING:case Nw.PAUSED:e.next&&mT(e.next.bind(e,this.snapshot))();break;case Nw.SUCCESS:e.complete&&mT(e.complete.bind(e))();break;case Nw.CANCELED:case Nw.ERROR:default:e.error&&mT(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),bT=function(){function e(e,t){this._service=e,this._location=t instanceof Rw?t:Rw.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new Rw(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Hw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Rw(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw mw(e)},e}();function _T(e){var t={prefixes:[],items:[]};return wT(e,t).then((function(){return t}))}function wT(e,t,n){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return[4,TT(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,wT(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function TT(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&Fw("options.maxResults",1,1e3,t.maxResults),n=t||{},r=lT(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function IT(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=jw(t.fullServerUrl(),e.host),o=Zw(n,r),a=e.maxOperationRetryTime,s=new rT(i,"PATCH",oT(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=uT(t),s}(e.storage,e._location,t,$w()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function ET(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=jw(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new rT(r,"GET",aT(e,n),i);return o.errorHandler=uT(t),o}(e.storage,e._location,$w()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new lw("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function ST(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=jw(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new rT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=uT(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function kT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Rw(e._location.bucket,n);return new bT(e.storage,r)}function CT(e){return/^[A-Za-z]+:\/\//.test(e)}function NT(e,t){if(e instanceof PT){var n=e;if(null==n._bucket)throw new lw("no-default-bucket","No default bucket found. Did you set the '"+sw+"' property when initializing the app?");var r=new bT(n,n._bucket);return null!=t?NT(r,t):r}return void 0!==t?kT(e,t):e}function AT(e,t){if(t&&CT(t)){if(e instanceof PT)return new bT(e,t);throw vw("To use ref(service, url), the first argument must be a Storage instance.")}return NT(e,t)}function xT(e,t){var n=null===t||void 0===t?void 0:t[sw];return null==n?null:Rw.makeFromBucketSpec(n,e)}var PT=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=aw,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uw,this._maxUploadRetryTime=cw,this._requests=new Set,this._bucket=null!=i?Rw.makeFromBucketSpec(i,this._host):xT(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Rw.makeFromBucketSpec(this._url,e):this._bucket=xT(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){Fw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){Fw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new bT(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new Ow(gw());var i=function(e,t,n,r,i,o){var a=Uw(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new qw(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();function RT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new yT(e,new zw(t),n)}(e=(0,Ti.getModularInstance)(e),t,n)}function OT(e){return function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=cT(e.storage,e._location,$w()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=(0,Ti.getModularInstance)(e))}function DT(e,t){return AT(e=(0,Ti.getModularInstance)(e),t)}function LT(e,t,n,r){void 0===r&&(r={}),function(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:(0,Ti.createMockUserToken)(i,e.app.options.projectId))}(e,t,n,r)}var MT=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),FT=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new MT(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new MT(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new MT(e,i,i._ref))}:{next:t.next?function(e){return t.next(new MT(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),jT=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new UT(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new UT(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),UT=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=function(e,t){return kT(e,t)}(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new FT(RT(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=_w.RAW),this._throwIfRoot("putString");var r=Tw(t,e),i=(0,wi.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new FT(new yT(this._delegate,new zw(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return function(e){return _T(e=(0,Ti.getModularInstance)(e))}(this._delegate).then((function(t){return new jT(t,e.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return TT(e=(0,Ti.getModularInstance)(e),t)}(this._delegate,e||void 0).then((function(e){return new jT(e,t.storage)}))},e.prototype.getMetadata=function(){return OT(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return IT(e=(0,Ti.getModularInstance)(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return ET(e=(0,Ti.getModularInstance)(e))}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return ST(e=(0,Ti.getModularInstance)(e))}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw mw(e)},e}(),qT=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(CT(e))throw vw("ref() expected a child path but got a URL, use refFromURL instead.");return new UT(DT(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!CT(e))throw vw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rw.makeFromUrl(e,this._delegate.host)}catch(rb){throw vw("refFromUrl() expected a valid full URL but got an invalid one.")}return new UT(DT(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),LT(this._delegate,e,t,n)},e}(),VT="@firebase/storage",BT="0.7.1",KT="storage";function zT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new qT(r,new PT(r,i,o,new Pw,n,_i.default.SDK_VERSION))}!function(e){var t={TaskState:Nw,TaskEvent:Cw,StringFormat:_w,Storage:PT,Reference:UT};e.INTERNAL.registerComponent(new ob.Component(KT,zT,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(VT,BT)}(_i.default);var WT,HT,GT,QT="@firebase/performance",YT="0.4.18",$T=YT,XT="FB-PERF-TRACE-START",JT="FB-PERF-TRACE-STOP",ZT="FB-PERF-TRACE-MEASURE",eI="_wt_",tI="_fcp",nI="_fid",rI="@firebase/performance/config",iI="@firebase/performance/configexpire",oI="Performance",aI=((WT={})["trace started"]="Trace {$traceName} was started before.",WT["trace stopped"]="Trace {$traceName} is not running.",WT["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",WT["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",WT["no window"]="Window is not available.",WT["no app id"]="App id is not available.",WT["no project id"]="Project id is not available.",WT["no api key"]="Api key is not available.",WT["invalid cc log"]="Attempted to queue invalid cc event",WT["FB not default"]="Performance can only start when Firebase app instance is the default one.",WT["RC response not ok"]="RC response is not ok",WT["invalid attribute name"]="Attribute name {$attributeName} is invalid.",WT["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",WT["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",WT["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",WT),sI=new Ti.ErrorFactory("performance",oI,aI),uI=new Ii.Logger(oI);uI.logLevel=Ii.LogLevel.INFO;var cI,lI=function(){function e(e){if(this.window=e,!e)throw sI.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,Ti.isIndexedDBAvailable)()||(uI.info("IndexedDB is not supported by current browswer"),!1):(uI.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}));n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===HT&&(HT=new e(GT)),HT},e}();function hI(e,t){var n=e.length-t.length;if(n<0||n>1)throw sI.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var fI,dI,pI=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=hI("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=hI("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw sI.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw sI.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw sI.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===cI&&(cI=new e),cI},e}();function vI(){return fI}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(dI||(dI={}));var gI=["firebase_","google_","ga_"],mI=new RegExp("^[a-zA-Z]\\w*$"),yI=40,bI=100;function _I(){var e=lI.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function wI(){switch(lI.getInstance().document.visibilityState){case"visible":return dI.VISIBLE;case"hidden":return dI.HIDDEN;default:return dI.UNKNOWN}}function TI(){var e=lI.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var II="0.0.1",EI={loggingEnabled:!0},SI="FIREBASE_INSTALLATIONS_AUTH";function kI(e){var t=function(){var e=lI.getInstance().localStorage;if(!e)return;var t=e.getItem(iI);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;var r=e.getItem(rI);if(!r)return;try{return JSON.parse(r)}catch(Lm){return}}();return t?(NI(t),Promise.resolve()):function(e){return function(){var e=pI.getInstance().installationsService.getToken();return e.then((function(e){})),e}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+pI.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+pI.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:SI+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:pI.getInstance().getAppId(),app_version:$T,sdk_version:II})});return fetch(r).then((function(e){if(e.ok)return e.json();throw sI.create("RC response not ok")}))})).catch((function(){uI.info(CI)}))}(e).then(NI).then((function(e){return function(e){var t=lI.getInstance().localStorage;if(!e||!t)return;t.setItem(rI,JSON.stringify(e)),t.setItem(iI,String(Date.now()+60*pI.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}var CI="Could not fetch config, will use default configs";function NI(e){if(!e)return e;var t=pI.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=EI.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=AI(t.tracesSamplingRate),t.logNetworkAfterSampling=AI(t.networkRequestsSamplingRate),e}function AI(e){return Math.random()<=e}var xI,PI=1;function RI(){return PI=2,xI=xI||function(){var e=lI.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return function(){var e=pI.getInstance().installationsService.getId();return e.then((function(e){fI=e})),e}()})).then((function(e){return kI(e)})).then((function(){return OI()}),(function(){return OI()}))}function OI(){PI=3}var DI,LI=1e4,MI=5500,FI=3,jI=1e3,UI=FI,qI=[],VI=!1;function BI(e){setTimeout((function(){if(0!==UI)return qI.length?void function(){var e=qI.splice(0,jI),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}));(function(e,t){return function(e){var t=pI.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||uI.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=LI;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(qI=(0,wi.__spreadArray)((0,wi.__spreadArray)([],t),qI),uI.info("Retry transport request later.")),UI=FI,BI(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:pI.getInstance().logSource,log_event:t},e).catch((function(){qI=(0,wi.__spreadArray)((0,wi.__spreadArray)([],e),qI),UI--,uI.info("Tries left: "+UI+"."),BI(LI)}))}():BI(LI)}),e)}function KI(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!function(e){if(!e.eventTime||!e.message)throw sI.create("invalid cc log");qI=(0,wi.__spreadArray)((0,wi.__spreadArray)([],qI),[e])}({message:e.apply(void 0,t),eventTime:Date.now()})}}function zI(e,t){DI||(DI=KI(GI)),DI(e,t)}function WI(e){var t=pI.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&lI.getInstance().requiredApisAvailable()&&(e.isAuto&&wI()!==dI.VISIBLE||(3===PI?HI(e):RI().then((function(){return HI(e)}),(function(){return HI(e)}))))}function HI(e){if(vI()){var t=pI.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return zI(e,1)}),0)}}function GI(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:QI(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:QI(),trace_metric:t};return JSON.stringify(r)}(e)}function QI(){return{google_app_id:pI.getInstance().getAppId(),app_instance_id:vI(),web_app_info:{sdk_version:$T,page_url:lI.getInstance().getUrl(),service_worker_status:_I(),visibility_state:wI(),effective_connection_type:TI()},application_process_state:0}}var YI=100,$I="_",XI=["_fp",tI,nI];var JI=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=lI.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=XT+"-"+this.randomId+"-"+this.name,this.traceStopMark=JT+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||ZT+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw sI.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw sI.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),WI(this)},e.prototype.record=function(e,t,n){if(e<=0)throw sI.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw sI.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=(0,wi.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}WI(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(n=e,r=this.name,0===n.length||n.length>YI||!(r&&r.startsWith(eI)&&XI.indexOf(n)>-1)&&n.startsWith($I))throw sI.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){var t=Math.floor(e);return t<e&&uI.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=function(e){if(0===e.length||e.length>yI)return!1;var t=gI.some((function(t){return e.startsWith(t)}));return!t&&!!e.match(mI)}(e),r=function(e){return 0!==e.length&&e.length<=bI}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw sI.create("invalid attribute name",{attributeName:e});if(!r)throw sI.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return(0,wi.__assign)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=lI.getInstance().getUrl();if(i){var o=new e(eI+i,!0),a=Math.floor(1e3*lI.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric(tI,Math.floor(1e3*u.startTime)),r&&o.putMetric(nI,Math.floor(1e3*r))}WI(o)}},e.createUserTimingTrace=function(t){WI(new e(t,!1,t))},e}();function ZI(e){var t=e;if(t&&void 0!==t.responseStart){var n=lI.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=pI.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return zI(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var eE=5e3;function tE(){vI()&&(setTimeout((function(){return function(){var e=lI.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){JI.createOobTrace(t,n),r=void 0}),eE);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),JI.createOobTrace(t,n,e))}))}else JI.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=lI.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){ZI(r[n])}e.setupObserver("resource",ZI)}()}),0),setTimeout((function(){return function(){for(var e=lI.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){nE(r[n])}e.setupObserver("measure",nE)}()}),0))}function nE(e){var t=e.name;t.substring(0,ZT.length)!==ZT&&JI.createUserTimingTrace(t)}var rE=function(){function e(e){this.app=e,lI.getInstance().requiredApisAvailable()&&(0,Ti.validateIndexedDBOpenable)().then((function(e){e&&(VI||(BI(MI),VI=!0),RI().then(tE,tE))})).catch((function(e){uI.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new JI(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return pI.getInstance().instrumentationEnabled},set:function(e){pI.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return pI.getInstance().dataCollectionEnabled},set:function(e){pI.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}(),iE="[DEFAULT]";!function(e){var t=function(e,t){if(e.name!==iE)throw sI.create("FB not default");if("undefined"===typeof window)throw sI.create("no window");return function(e){GT=e}(window),pI.getInstance().firebaseAppInstance=e,pI.getInstance().installationsService=t,new rE(e)};e.INTERNAL.registerComponent(new ob.Component("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion(QT,YT)}(_i.default);var oE,aE,sE="firebase_id",uE="origin",cE=6e4,lE="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hE="https://www.googletagmanager.com/gtag/js";!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(oE||(oE={})),function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(aE||(aE={}));var fE,dE=new Ii.Logger("@firebase/analytics");function pE(e,t,n,r,i,o){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var a,s,u,c;return(0,wi.__generator)(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),u=s.find((function(e){return e.measurementId===i})),u?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),dE.error(c),[3,8];case 8:return e(oE.CONFIG,i,o),[2]}}))}))}function vE(e,t,n,r,i){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return(0,wi.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);d.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return d.sent(),e(oE.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),dE.error(f),[3,5];case 5:return[2]}}))}))}function gE(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var s;return(0,wi.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==oE.EVENT?[3,2]:[4,vE(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==oE.CONFIG?[3,4]:[4,pE(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(oE.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),dE.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}var mE=((fE={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",fE["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",fE["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",fE["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",fE["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",fE["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",fE["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",fE["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',fE["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',fE),yE=new Ti.ErrorFactory("analytics","Analytics",mE),bE=30,_E=1e3,wE=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=_E),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function TE(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function IE(e){var t;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,wi.__generator)(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:TE(r)},o=lE.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw yE.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function EE(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=wE),(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,a,s,u,c,l,h;return(0,wi.__generator)(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,SE(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return dE.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,IE(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof Ti.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c=f.sent())){if(r.deleteThrottleMetadata(t),a)return dE.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?(0,Ti.calculateBackoffMillis)(o,r.intervalMillis,bE):(0,Ti.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(t,h),dE.debug("Calling attemptFetch again in "+l+" millis"),[2,EE(e,h,n,r)];case 7:return[2]}}))}))}function SE(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(yE.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var kE=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();function CE(e,t,n,r,i,o){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return(0,wi.__generator)(this,(function(d){switch(d.label){case 0:return a=function(e,t,n){return void 0===t&&(t=wE),(0,wi.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return(0,wi.__generator)(this,(function(l){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw yE.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw yE.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new kE,setTimeout((function(){return(0,wi.__awaiter)(c,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:cE),[2,EE({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}(e),a.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&dE.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return dE.error(e)})),t.push(a),s=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e;return(0,wi.__generator)(this,(function(t){switch(t.label){case 0:return(0,Ti.isIndexedDBAvailable)()?[3,1]:(dE.warn(yE.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,Ti.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),dE.warn(yE.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(hE))return r}return null}()||function(e,t){var n=document.createElement("script");n.src=hE+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={})[uE]="firebase",f.update=!0,h=f,null!=l&&(h[sE]=l),i(oE.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}var NE,AE,xE={},PE=[],RE={},OE="dataLayer",DE="gtag",LE=!1;function ME(e){if(LE)throw yE.create("already-initialized");e.dataLayerName&&(OE=e.dataLayerName),e.gtagName&&(DE=e.gtagName)}function FE(e,t){!function(){var e=[];if((0,Ti.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,Ti.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=yE.create("invalid-analytics-context",{errorInfo:t});dE.warn(n.message)}}();var n=e.options.appId;if(!n)throw yE.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw yE.create("no-api-key");dE.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=xE[n])throw yE.create("already-exists",{id:n});if(!LE){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(OE);var r=gE(xE,PE,RE,OE,DE),i=r.wrappedGtag,o=r.gtagCore;AE=i,NE=o,LE=!0}xE[n]=CE(e,PE,RE,t,NE,OE);var a={app:e,logEvent:function(e,t,r){(function(e,t,n,r,i){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,wi.__generator)(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(oE.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=(0,wi.__assign)((0,wi.__assign)({},r),{send_to:o}),e(oE.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(AE,xE[n],e,t,r).catch((function(e){return dE.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(oE.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(oE.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(AE,xE[n],e,t).catch((function(e){return dE.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i;return(0,wi.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(oE.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(oE.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(AE,xE[n],e,t).catch((function(e){return dE.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,wi.__generator)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(oE.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(oE.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(AE,xE[n],e,t).catch((function(e){return dE.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(xE[n],e).catch((function(e){return dE.error(e)}))},INTERNAL:{delete:function(){return delete xE[n],Promise.resolve()}}};return a}var jE="@firebase/analytics",UE="0.6.18",qE="analytics";function VE(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:if((0,Ti.isBrowserExtension)())return[2,!1];if(!(0,Ti.areCookiesEnabled)())return[2,!1];if(!(0,Ti.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,Ti.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}!function(e){e.INTERNAL.registerComponent(new ob.Component(qE,(function(e){return FE(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:ME,EventName:aE,isSupported:VE})),e.INTERNAL.registerComponent(new ob.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(qE).getImmediate().logEvent}}catch(rb){throw yE.create("interop-component-reg-failed",{reason:rb})}}),"PRIVATE")),e.registerVersion(jE,UE)}(_i.default);var BE,KE=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),zE=((BE={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",BE["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",BE["registration-api-key"]="Undefined API key. Check Firebase app initialization.",BE["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",BE["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",BE["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",BE["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",BE["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",BE["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",BE["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',BE["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',BE["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",BE["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",BE),WE=new Ti.ErrorFactory("remoteconfig","Remote Config",zE);var HE=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,m,y,b;return(0,wi.__generator)(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=_.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),WE.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),WE.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y.entries,m=y.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?p=500:"NO_CHANGE"===m?p=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==p&&200!==p)throw WE.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:v,config:g}]}var w}))}))},e}(),GE=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),QE="",YE=["1","true","t","yes","y","on"],$E=function(){function e(e,t){void 0===t&&(t=QE),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&YE.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),XE=6e4,JE=432e5,ZE=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:XE,minimumFetchIntervalMillis:JE},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=Ii.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=Ii.LogLevel.SILENT;break;default:this._logger.logLevel=Ii.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r=this;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:e=new GE,setTimeout((function(){return(0,wi.__awaiter)(r,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof Ti.FirebaseError&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){return(0,wi.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys((0,wi.__assign)((0,wi.__assign)({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new $E("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new $E("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new $E("static"))},e}();function eS(e,t){var n=e.target.error||void 0;return WE.create(t,{originalErrorMessage:n&&n.message})}var tS="app_namespace_store",nS="firebase_remote_config",rS=1;var iS=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open(nS,rS);n.onerror=function(e){t(eS(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(tS,{keyPath:"compositeKey"})}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([tS],"readonly").objectStore(tS),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(eS(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(rb){i(WE.create("storage-get",{originalErrorMessage:rb&&rb.message}))}}))]}}))}))},e.prototype.set=function(e,t){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return(0,wi.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([tS],"readwrite").objectStore(tS),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(eS(e,"storage-set"))},u.onsuccess=function(){i()}}catch(rb){o(WE.create("storage-set",{originalErrorMessage:rb&&rb.message}))}}))]}}))}))},e.prototype.delete=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,wi.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([tS],"readwrite").objectStore(tS),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(eS(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(rb){i(WE.create("storage-delete",{originalErrorMessage:rb&&rb.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),oS=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();function aS(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(WE.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var sS,uS=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t;return(0,wi.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return(0,wi.__awaiter)(this,void 0,void 0,(function(){var t,i,o;return(0,wi.__generator)(this,(function(a){switch(a.label){case 0:return[4,aS(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof Ti.FirebaseError)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,Ti.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),cS="@firebase/remote-config",lS="0.1.43";(sS=_i.default).INTERNAL.registerComponent(new ob.Component("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw WE.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw WE.create("registration-project-id");if(!s)throw WE.create("registration-api-key");if(!u)throw WE.create("registration-app-id");n=n||"firebase";var c=new iS(u,r.name,n),l=new oS(c),h=new Ii.Logger(cS);h.logLevel=Ii.LogLevel.ERROR;var f=new HE(i,sS.SDK_VERSION,n,a,s,u),d=new uS(f,c),p=new KE(d,c,l,h),v=new ZE(r,p,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),sS.registerVersion(cS,lS);n(446);var hS="8.10.1";_i.default.registerVersion("firebase",hS,"app"),_i.default.SDK_VERSION=hS;console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),_i.default.registerVersion("firebase","8.10.1");var fS=function(t){var n=t.name,r=t.url,i=t.category,o=t.price,a=t.date,s=t.product,u=(re(),pe((0,e.useState)(!1),2)),c=u[0],l=u[1],h=(0,e.useContext)(ge).firebase;return c?(0,ve.jsxs)("div",{className:"loading",children:[(0,ve.jsx)(Xr,{icon:Zr,spin:!0}),(0,ve.jsxs)("p",{children:["just a second, we are deleting ",n," ..."]})]}):(0,ve.jsxs)("div",{className:"card",children:[(0,ve.jsx)("div",{className:"image",children:(0,ve.jsx)("img",{src:r,alt:""})}),(0,ve.jsx)("div",{className:"button-delete",onClick:function(){l(!0),h.firestore().collection("products").doc(s.id).delete().then((function(){console.log("DELETED SUCCESSFULLY"),l(!1),window.location.reload()})).catch((function(e){console.log(e)}))},children:"delete"}),(0,ve.jsxs)("div",{className:"content",children:[(0,ve.jsxs)("p",{className:"rate",children:["\u20b9 ",o]}),(0,ve.jsxs)("p",{className:"name",children:[" ",n]}),(0,ve.jsx)("span",{className:"kilometer",children:i})]}),(0,ve.jsx)("div",{className:"date",children:(0,ve.jsx)("span",{children:a})})]})},dS=function(){var t=(0,e.useContext)(ge).firebase,n=pe((0,e.useState)([]),2),r=n[0],i=n[1],o=(0,e.useContext)(me).user;re();(0,e.useEffect)((function(){t.firestore().collection("products").get().then((function(e){var t=e.docs.map((function(e){return fi(fi({},e.data()),{},{id:e.id})}));i(t)}))}),[]);var a=r.filter((function(e){return o.uid==e.userId}));return console.log(a),(0,ve.jsxs)("div",{className:"items-page",children:[(0,ve.jsxs)("p",{className:"noofitems",children:["No of Items posted: ",a.length]}),(0,ve.jsx)("div",{className:"list-card",children:a.map((function(e){return(0,ve.jsx)(fS,{product:e,url:e.url,price:e.price,category:e.category,name:e.name,date:e.createdAt})}))})]})},pS=function(){return(0,ve.jsx)("div",{children:(0,ve.jsx)(dS,{})})};var vS=function(){var t=(0,e.useContext)(me).setUser,n=(0,e.useContext)(ge).firebase;return(0,e.useEffect)((function(){n.auth().onAuthStateChanged((function(e){t(e)}))})),(0,ve.jsx)("div",{children:(0,ve.jsx)(ri,{children:(0,ve.jsxs)(ie,{children:[(0,ve.jsx)($,{exact:!0,path:"/",element:!0,children:(0,ve.jsx)(bi,{})}),(0,ve.jsx)($,{path:"/signup",children:(0,ve.jsx)(be,{})}),(0,ve.jsx)($,{path:"/login",children:(0,ve.jsx)(_e,{})}),(0,ve.jsx)($,{path:"/create",children:(0,ve.jsx)(ti,{})}),(0,ve.jsx)($,{path:"/welcome",children:(0,ve.jsx)(yi,{})}),(0,ve.jsx)($,{path:"/list",children:(0,ve.jsx)(pS,{})}),(0,ve.jsx)($,{path:"/view",children:(0,ve.jsx)(oi,{})})]})})})},gS=(n(451),_i.default.initializeApp({apiKey:"AIzaSyCK_MkiJJUHqGzYu1n7hRUPF54ioGB92dA",authDomain:"crafty-a2f12.firebaseapp.com",projectId:"crafty-a2f12",storageBucket:"crafty-a2f12.appspot.com",messagingSenderId:"339774096303",appId:"1:339774096303:web:53678eed3e8d5660c4a55a",measurementId:"G-2E8ET67T96"}));t.render((0,ve.jsx)(ge.Provider,{value:{firebase:gS},children:(0,ve.jsx)(ye,{children:(0,ve.jsx)(vS,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.431357f3.js.map